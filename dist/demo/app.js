/*! For license information please see app.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("lib",[],t):"object"==typeof exports?exports.lib=t():e.lib=t()}(self,(function(){return function(){var __webpack_modules__={743:function(e,t){!function(n,r){var i={version:"0.4.1",settings:{currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}}},o=Array.prototype.map,a=Array.isArray,s=Object.prototype.toString;function c(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function l(e){return a?a(e):"[object Array]"===s.call(e)}function u(e){return e&&"[object Object]"===s.call(e)}function h(e,t){var n;for(n in e=e||{},t=t||{})t.hasOwnProperty(n)&&null==e[n]&&(e[n]=t[n]);return e}function d(e,t,n){var r,i,a=[];if(!e)return a;if(o&&e.map===o)return e.map(t,n);for(r=0,i=e.length;r<i;r++)a[r]=t.call(n,e[r],r,e);return a}function f(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function p(e){var t=i.settings.currency.format;return"function"==typeof e&&(e=e()),c(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:c(t)?i.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var m=i.unformat=i.parse=function(e,t){if(l(e))return d(e,(function(e){return m(e,t)}));if("number"==typeof(e=e||0))return e;t=t||i.settings.number.decimal;var n=new RegExp("[^0-9-"+t+"]",["g"]),r=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(n,"").replace(t,"."));return isNaN(r)?0:r},g=i.toFixed=function(e,t){t=f(t,i.settings.number.precision);var n=Math.pow(10,t);return(Math.round(i.unformat(e)*n)/n).toFixed(t)},v=i.formatNumber=i.format=function(e,t,n,r){if(l(e))return d(e,(function(e){return v(e,t,n,r)}));e=m(e);var o=h(u(t)?t:{precision:t,thousand:n,decimal:r},i.settings.number),a=f(o.precision),s=e<0?"-":"",c=parseInt(g(Math.abs(e||0),a),10)+"",p=c.length>3?c.length%3:0;return s+(p?c.substr(0,p)+o.thousand:"")+c.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+o.thousand)+(a?o.decimal+g(Math.abs(e),a).split(".")[1]:"")},_=i.formatMoney=function(e,t,n,r,o,a){if(l(e))return d(e,(function(e){return _(e,t,n,r,o,a)}));e=m(e);var s=h(u(t)?t:{symbol:t,precision:n,thousand:r,decimal:o,format:a},i.settings.currency),c=p(s.format);return(e>0?c.pos:e<0?c.neg:c.zero).replace("%s",s.symbol).replace("%v",v(Math.abs(e),f(s.precision),s.thousand,s.decimal))};i.formatColumn=function(e,t,n,r,o,a){if(!e)return[];var s=h(u(t)?t:{symbol:t,precision:n,thousand:r,decimal:o,format:a},i.settings.currency),g=p(s.format),_=g.pos.indexOf("%s")<g.pos.indexOf("%v"),y=0,b=d(e,(function(e,t){if(l(e))return i.formatColumn(e,s);var n=((e=m(e))>0?g.pos:e<0?g.neg:g.zero).replace("%s",s.symbol).replace("%v",v(Math.abs(e),f(s.precision),s.thousand,s.decimal));return n.length>y&&(y=n.length),n}));return d(b,(function(e,t){return c(e)&&e.length<y?_?e.replace(s.symbol,s.symbol+new Array(y-e.length+1).join(" ")):new Array(y-e.length+1).join(" ")+e:e}))},e.exports&&(t=e.exports=i),t.accounting=i}()},9282:function(e,t,n){"use strict";var r=n(4155),i=n(5108);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,s,c=n(2136).codes,l=c.ERR_AMBIGUOUS_ARGUMENT,u=c.ERR_INVALID_ARG_TYPE,h=c.ERR_INVALID_ARG_VALUE,d=c.ERR_INVALID_RETURN_VALUE,f=c.ERR_MISSING_ARGS,p=n(5961),m=n(9539).inspect,g=n(9539).types,v=g.isPromise,_=g.isRegExp,y=Object.assign?Object.assign:n(8091).assign,b=Object.is?Object.is:n(609);new Map;function x(){var e=n(9158);a=e.isDeepEqual,s=e.isDeepStrictEqual}var w=!1,A=e.exports=S,T={};function M(e){if(e.message instanceof Error)throw e.message;throw new p(e)}function E(e,t,n,r){if(!n){var i=!1;if(0===t)i=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var o=new p({actual:n,expected:!0,message:r,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[S,t.length].concat(t))}A.fail=function e(t,n,o,a,s){var c,l=arguments.length;if(0===l)c="Failed";else if(1===l)o=t,t=void 0;else{if(!1===w){w=!0;var u=r.emitWarning?r.emitWarning:i.warn.bind(i);u("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===l&&(a="!=")}if(o instanceof Error)throw o;var h={actual:t,expected:n,operator:void 0===a?"fail":a,stackStartFn:s||e};void 0!==o&&(h.message=o);var d=new p(h);throw c&&(d.message=c,d.generatedMessage=!0),d},A.AssertionError=p,A.ok=S,A.equal=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t!=n&&M({actual:t,expected:n,message:r,operator:"==",stackStartFn:e})},A.notEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");t==n&&M({actual:t,expected:n,message:r,operator:"!=",stackStartFn:e})},A.deepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===a&&x(),a(t,n)||M({actual:t,expected:n,message:r,operator:"deepEqual",stackStartFn:e})},A.notDeepEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===a&&x(),a(t,n)&&M({actual:t,expected:n,message:r,operator:"notDeepEqual",stackStartFn:e})},A.deepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===a&&x(),s(t,n)||M({actual:t,expected:n,message:r,operator:"deepStrictEqual",stackStartFn:e})},A.notDeepStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");void 0===a&&x();s(t,n)&&M({actual:t,expected:n,message:r,operator:"notDeepStrictEqual",stackStartFn:e})},A.strictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");b(t,n)||M({actual:t,expected:n,message:r,operator:"strictEqual",stackStartFn:e})},A.notStrictEqual=function e(t,n,r){if(arguments.length<2)throw new f("actual","expected");b(t,n)&&M({actual:t,expected:n,message:r,operator:"notStrictEqual",stackStartFn:e})};var R=function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n.forEach((function(e){e in t&&(void 0!==r&&"string"==typeof r[e]&&_(t[e])&&t[e].test(r[e])?i[e]=r[e]:i[e]=t[e])}))};function L(e,t,n,r,i,o){if(!(n in e)||!s(e[n],t[n])){if(!r){var a=new R(e,i),c=new R(t,i,e),l=new p({actual:a,expected:c,operator:"deepStrictEqual",stackStartFn:o});throw l.actual=e,l.expected=t,l.operator=o.name,l}M({actual:e,expected:t,message:r,operator:o.name,stackStartFn:o})}}function P(e,t,n,r){if("function"!=typeof t){if(_(t))return t.test(e);if(2===arguments.length)throw new u("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var i=new p({actual:e,expected:t,message:n,operator:"deepStrictEqual",stackStartFn:r});throw i.operator=r.name,i}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new h("error",t,"may not be an empty object");return void 0===a&&x(),s.forEach((function(i){"string"==typeof e[i]&&_(t[i])&&t[i].test(e[i])||L(e,t,i,n,s,r)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function C(e){if("function"!=typeof e)throw new u("fn","Function",e);try{e()}catch(e){return e}return T}function F(e){return v(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function D(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!F(t=e()))throw new d("instance of Promise","promiseFn",t)}else{if(!F(e))throw new u("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return T})).catch((function(e){return e}))}))}function U(e,t,n,r){if("string"==typeof n){if(4===arguments.length)throw new u("error",["Object","Error","Function","RegExp"],n);if("object"===o(t)&&null!==t){if(t.message===n)throw new l("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===n)throw new l("error/message",'The error "'.concat(t,'" is identical to the message.'));r=n,n=void 0}else if(null!=n&&"object"!==o(n)&&"function"!=typeof n)throw new u("error",["Object","Error","Function","RegExp"],n);if(t===T){var i="";n&&n.name&&(i+=" (".concat(n.name,")")),i+=r?": ".concat(r):".";var a="rejects"===e.name?"rejection":"exception";M({actual:void 0,expected:n,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(n&&!P(t,n,r,e))throw t}function O(e,t,n,r){if(t!==T){if("string"==typeof n&&(r=n,n=void 0),!n||P(t,n)){var i=r?": ".concat(r):".",o="doesNotReject"===e.name?"rejection":"exception";M({actual:t,expected:n,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function k(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[k,t.length].concat(t))}A.throws=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];U.apply(void 0,[e,C(t)].concat(r))},A.rejects=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(t).then((function(t){return U.apply(void 0,[e,t].concat(r))}))},A.doesNotThrow=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];O.apply(void 0,[e,C(t)].concat(r))},A.doesNotReject=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return D(t).then((function(t){return O.apply(void 0,[e,t].concat(r))}))},A.ifError=function e(t){if(null!=t){var n="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?n+=t.constructor.name:n+=t.message:n+=m(t);var r=new p({actual:t,expected:null,operator:"ifError",message:n,stackStartFn:e}),i=t.stack;if("string"==typeof i){var a=i.split("\n");a.shift();for(var s=r.stack.split("\n"),c=0;c<a.length;c++){var l=s.indexOf(a[c]);if(-1!==l){s=s.slice(0,l);break}}r.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw r}},A.strict=y(k,A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),A.strict.strict=A.strict},5961:function(e,t,n){"use strict";var r=n(4155);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,d(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),h(r,e)},c(e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return u=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&h(i,n.prototype),i},u.apply(null,arguments)}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var p=n(9539).inspect,m=n(2136).codes.ERR_INVALID_ARG_TYPE;function g(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}var v="",_="",y="",b="",x={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function w(e){var t=Object.keys(e),n=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){n[t]=e[t]})),Object.defineProperty(n,"message",{value:e.message}),n}function A(e){return p(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function T(e,t,n){var i="",o="",a=0,s="",c=!1,l=A(e),u=l.split("\n"),h=A(t).split("\n"),d=0,p="";if("strictEqual"===n&&"object"===f(e)&&"object"===f(t)&&null!==e&&null!==t&&(n="strictEqualObject"),1===u.length&&1===h.length&&u[0]!==h[0]){var m=u[0].length+h[0].length;if(m<=10){if(!("object"===f(e)&&null!==e||"object"===f(t)&&null!==t||0===e&&0===t))return"".concat(x[n],"\n\n")+"".concat(u[0]," !== ").concat(h[0],"\n")}else if("strictEqualObject"!==n){if(m<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;u[0][d]===h[0][d];)d++;d>2&&(p="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var n=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,n-e.length)}(" ",d),"^"),d=0)}}}for(var w=u[u.length-1],T=h[h.length-1];w===T&&(d++<2?s="\n  ".concat(w).concat(s):i=w,u.pop(),h.pop(),0!==u.length&&0!==h.length);)w=u[u.length-1],T=h[h.length-1];var M=Math.max(u.length,h.length);if(0===M){var E=l.split("\n");if(E.length>30)for(E[26]="".concat(v,"...").concat(b);E.length>27;)E.pop();return"".concat(x.notIdentical,"\n\n").concat(E.join("\n"),"\n")}d>3&&(s="\n".concat(v,"...").concat(b).concat(s),c=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var S=0,R=x[n]+"\n".concat(_,"+ actual").concat(b," ").concat(y,"- expected").concat(b),L=" ".concat(v,"...").concat(b," Lines skipped");for(d=0;d<M;d++){var P=d-a;if(u.length<d+1)P>1&&d>2&&(P>4?(o+="\n".concat(v,"...").concat(b),c=!0):P>3&&(o+="\n  ".concat(h[d-2]),S++),o+="\n  ".concat(h[d-1]),S++),a=d,i+="\n".concat(y,"-").concat(b," ").concat(h[d]),S++;else if(h.length<d+1)P>1&&d>2&&(P>4?(o+="\n".concat(v,"...").concat(b),c=!0):P>3&&(o+="\n  ".concat(u[d-2]),S++),o+="\n  ".concat(u[d-1]),S++),a=d,o+="\n".concat(_,"+").concat(b," ").concat(u[d]),S++;else{var C=h[d],F=u[d],D=F!==C&&(!g(F,",")||F.slice(0,-1)!==C);D&&g(C,",")&&C.slice(0,-1)===F&&(D=!1,F+=","),D?(P>1&&d>2&&(P>4?(o+="\n".concat(v,"...").concat(b),c=!0):P>3&&(o+="\n  ".concat(u[d-2]),S++),o+="\n  ".concat(u[d-1]),S++),a=d,o+="\n".concat(_,"+").concat(b," ").concat(F),i+="\n".concat(y,"-").concat(b," ").concat(C),S+=2):(o+=i,i="",1!==P&&0!==d||(o+="\n  ".concat(F),S++))}if(S>20&&d<M-2)return"".concat(R).concat(L,"\n").concat(o,"\n").concat(v,"...").concat(b).concat(i,"\n")+"".concat(v,"...").concat(b)}return"".concat(R).concat(c?L:"","\n").concat(o).concat(i).concat(s).concat(p)}var M=function(e){function t(e){var n;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==f(e)||null===e)throw new m("options","Object",e);var i=e.message,o=e.operator,c=e.stackStartFn,l=e.actual,u=e.expected,h=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)n=a(this,d(t).call(this,String(i)));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(v="[34m",_="[32m",b="[39m",y="[31m"):(v="",_="",b="",y="")),"object"===f(l)&&null!==l&&"object"===f(u)&&null!==u&&"stack"in l&&l instanceof Error&&"stack"in u&&u instanceof Error&&(l=w(l),u=w(u)),"deepStrictEqual"===o||"strictEqual"===o)n=a(this,d(t).call(this,T(l,u,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var p=x[o],g=A(l).split("\n");if("notStrictEqual"===o&&"object"===f(l)&&null!==l&&(p=x.notStrictEqualObject),g.length>30)for(g[26]="".concat(v,"...").concat(b);g.length>27;)g.pop();n=1===g.length?a(this,d(t).call(this,"".concat(p," ").concat(g[0]))):a(this,d(t).call(this,"".concat(p,"\n\n").concat(g.join("\n"),"\n")))}else{var M=A(l),E="",S=x[o];"notDeepEqual"===o||"notEqual"===o?(M="".concat(x[o],"\n\n").concat(M)).length>1024&&(M="".concat(M.slice(0,1021),"...")):(E="".concat(A(u)),M.length>512&&(M="".concat(M.slice(0,509),"...")),E.length>512&&(E="".concat(E.slice(0,509),"...")),"deepEqual"===o||"equal"===o?M="".concat(S,"\n\n").concat(M,"\n\nshould equal\n\n"):E=" ".concat(o," ").concat(E)),n=a(this,d(t).call(this,"".concat(M).concat(E)))}return Error.stackTraceLimit=h,n.generatedMessage=!i,Object.defineProperty(s(n),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),n.code="ERR_ASSERTION",n.actual=l,n.expected=u,n.operator=o,Error.captureStackTrace&&Error.captureStackTrace(s(n),c),n.stack,n.name="AssertionError",a(n)}var n,c,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),n=t,c=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:p.custom,value:function(e,t){return p(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){i(e,t,n[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],c&&o(n.prototype,c),l&&o(n,l),t}(c(Error));e.exports=M},2136:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}var s,c,l={};function u(e,t,n){n||(n=Error);var r=function(n){function r(n,a,s){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),c=i(this,o(r).call(this,function(e,n,r){return"string"==typeof t?t:t(e,n,r)}(n,a,s))),c.code=e,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(r,n),r}(n);l[e]=r}function h(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}u("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),u("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,a,c,l;if(void 0===s&&(s=n(9282)),s("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(a="not ",t.substr(!c||c<0?0:+c,a.length)===a)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))l="The ".concat(e," ").concat(o," ").concat(h(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";l='The "'.concat(e,'" ').concat(u," ").concat(o," ").concat(h(t,"type"))}return l+=". Received type ".concat(r(i))}),TypeError),u("ERR_INVALID_ARG_VALUE",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===c&&(c=n(9539));var i=c.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(r,". Received ").concat(i)}),TypeError,RangeError),u("ERR_INVALID_RETURN_VALUE",(function(e,t,n){var i;return i=n&&n.constructor&&n.constructor.name?"instance of ".concat(n.constructor.name):"type ".concat(r(n)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),u("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];void 0===s&&(s=n(9282)),s(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=l},9158:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,n){return t.push([n,e])})),t},c=Object.is?Object.is:n(609),l=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},u=Number.isNaN?Number.isNaN:n(360);function h(e){return e.call.bind(e)}var d=h(Object.prototype.hasOwnProperty),f=h(Object.prototype.propertyIsEnumerable),p=h(Object.prototype.toString),m=n(9539).types,g=m.isAnyArrayBuffer,v=m.isArrayBufferView,_=m.isDate,y=m.isMap,b=m.isRegExp,x=m.isSet,w=m.isNativeError,A=m.isBoxedPrimitive,T=m.isNumberObject,M=m.isStringObject,E=m.isBooleanObject,S=m.isBigIntObject,R=m.isSymbolObject,L=m.isFloat32Array,P=m.isFloat64Array;function C(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<48||n>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function F(e){return Object.keys(e).filter(C).concat(l(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function D(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function U(e,t,n,r){if(e===t)return 0!==e||(!n||c(e,t));if(n){if("object"!==i(e))return"number"==typeof e&&u(e)&&u(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,l,h,d=p(e);if(d!==p(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=F(e),m=F(t);return f.length===m.length&&k(e,t,n,r,1,f)}if("[object Object]"===d&&(!y(e)&&y(t)||!x(e)&&x(t)))return!1;if(_(e)){if(!_(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(b(e)){if(!b(t)||(l=e,h=t,!(o?l.source===h.source&&l.flags===h.flags:RegExp.prototype.toString.call(l)===RegExp.prototype.toString.call(h))))return!1}else if(w(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(v(e)){if(n||!L(e)&&!P(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===D(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}(e,t))return!1;var C=F(e),U=F(t);return C.length===U.length&&k(e,t,n,r,0,C)}if(x(e))return!(!x(t)||e.size!==t.size)&&k(e,t,n,r,2);if(y(e))return!(!y(t)||e.size!==t.size)&&k(e,t,n,r,3);if(g(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==D(new Uint8Array(a),new Uint8Array(s)))return!1}else if(A(e)&&!function(e,t){return T(e)?T(t)&&c(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):M(e)?M(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):E(e)?E(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):S(e)?S(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):R(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return k(e,t,n,r,0)}function O(e,t){return t.filter((function(t){return f(e,t)}))}function k(e,t,n,r,i,o){if(5===arguments.length){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!d(t,o[s]))return!1;if(n&&5===arguments.length){var c=l(e);if(0!==c.length){var u=0;for(s=0;s<c.length;s++){var h=c[s];if(f(e,h)){if(!f(t,h))return!1;o.push(h),u++}else if(f(t,h))return!1}var p=l(t);if(c.length!==p.length&&O(t,p).length!==u)return!1}else{var m=l(t);if(0!==m.length&&0!==O(t,m).length)return!1}}if(0===o.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===r)r={val1:new Map,val2:new Map,position:0};else{var g=r.val1.get(e);if(void 0!==g){var v=r.val2.get(t);if(void 0!==v)return g===v}r.position++}r.val1.set(e,r.position),r.val2.set(t,r.position);var _=z(e,t,n,o,r,i);return r.val1.delete(e),r.val2.delete(t),_}function I(e,t,n,r){for(var i=a(e),o=0;o<i.length;o++){var s=i[o];if(U(t,s,n,r))return e.delete(s),!0}return!1}function B(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(u(e))return!1}return!0}function N(e,t,n){var r=B(n);return null!=r?r:t.has(r)&&!e.has(r)}function Z(e,t,n,r,i){var o=B(n);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!U(r,a,!1,i))&&(!e.has(o)&&U(r,a,!1,i))}function j(e,t,n,r,i,o){for(var s=a(e),c=0;c<s.length;c++){var l=s[c];if(U(n,l,i,o)&&U(r,t.get(l),i,o))return e.delete(l),!0}return!1}function z(e,t,n,o,c,l){var u=0;if(2===l){if(!function(e,t,n,r){for(var o=null,s=a(e),c=0;c<s.length;c++){var l=s[c];if("object"===i(l)&&null!==l)null===o&&(o=new Set),o.add(l);else if(!t.has(l)){if(n)return!1;if(!N(e,t,l))return!1;null===o&&(o=new Set),o.add(l)}}if(null!==o){for(var u=a(t),h=0;h<u.length;h++){var d=u[h];if("object"===i(d)&&null!==d){if(!I(o,d,n,r))return!1}else if(!n&&!e.has(d)&&!I(o,d,n,r))return!1}return 0===o.size}return!0}(e,t,n,c))return!1}else if(3===l){if(!function(e,t,n,o){for(var a=null,c=s(e),l=0;l<c.length;l++){var u=r(c[l],2),h=u[0],d=u[1];if("object"===i(h)&&null!==h)null===a&&(a=new Set),a.add(h);else{var f=t.get(h);if(void 0===f&&!t.has(h)||!U(d,f,n,o)){if(n)return!1;if(!Z(e,t,h,d,o))return!1;null===a&&(a=new Set),a.add(h)}}}if(null!==a){for(var p=s(t),m=0;m<p.length;m++){var g=r(p[m],2),v=(h=g[0],g[1]);if("object"===i(h)&&null!==h){if(!j(a,e,h,v,n,o))return!1}else if(!(n||e.has(h)&&U(e.get(h),v,!1,o)||j(a,e,h,v,!1,o)))return!1}return 0===a.size}return!0}(e,t,n,c))return!1}else if(1===l)for(;u<e.length;u++){if(!d(e,u)){if(d(t,u))return!1;for(var h=Object.keys(e);u<h.length;u++){var f=h[u];if(!d(t,f)||!U(e[f],t[f],n,c))return!1}return h.length===Object.keys(t).length}if(!d(t,u)||!U(e[u],t[u],n,c))return!1}for(u=0;u<o.length;u++){var p=o[u];if(!U(e[p],t[p],n,c))return!1}return!0}e.exports={isDeepEqual:function(e,t){return U(e,t,false)},isDeepStrictEqual:function(e,t){return U(e,t,true)}}},7845:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return q}});var r=n(5861),i=n(1002),o=n(2826),a=n(5785),s=n(4942),c=n(136),l=n(2963),u=n(1120),h=n(3144),d=n(5671),f=n(4687),p=n.n(f),m=n(5017),g=n(1489),v=n(5840),_=n(7226),y=n(3234),b=n(1358),x=n(7771),w=n(3836),A=n(6378),T=n(5290),M=n(6461),E=n(9791),S=n(9829);class DataComputed{constructor(e,t=1){this.value=function(){},this.request_id=0,this.throttle=1,this.changed=!0,this.throttle=t,this.value=e}set(e){this.value=e}get(){let e=this.cached_value;return 1!==this.throttle&&this.request_id%this.throttle!=0||(e=this.value(this.changed),this.changed=e!==this.cached_value,this.cached_value=e),this.request_id++,e}valueOf(){return this.get()}}var R={$:{COMPONENT:{type:"object"},PREFAB:{type:"object",properties:{prefab:{type:["string"]},prefabs:{type:["array"],items:{type:["string"]}},children:{type:["array","object"],items:{type:["string"]}},components:{type:["array","object"],items:{$ref:"/COMPONENT"}},position:{type:"array",items:{type:"number"}},rotation:{type:"array",items:{type:"number"}},scale:{type:"array",items:{type:"number"}}}}},PREFAB:{type:"object",strict_props:!0,props:{prefab:"string|none",prefabs:{type:"array|none",any_prop:"string"},children:{type:"array|object|none",any_prop:["string",":PREFAB"]},components:{type:"array|object|none",any_prop:[":COMPONENT"]},position:"array|none",scale:"array|none",rotation:"array|none",visible:"array|none"}},COMPONENT_PARAMS_META:{type:"object|none",props:{layers:{type:"object|none",props:{include:{type:"array|none",any_prop:"string"},exclude:{type:"array|none",any_prop:"string"}}},ticking:{type:"object|none",props:{rate:"number|none"}}}},COMPONENT:{type:"object|none",strict_props:!0,props:{inline:["none",":INLINE_COMPONENT"],meta:["none",":COMPONENT_PARAMS_META"],name:"string|none",order:"number|none",enabled:"bool|none",context:"string|none",ref:"string|none",tag:"string|none",tick_rate:"number|none",tick_enabled:"bool|none",params:"object|none"}},INLINE_COMPONENT:{type:"object",strict_props:!0,props:{props:"object|none",construct:"string|none",methods:{type:"object|none",any_prop:":INLINE_COMPONENT_FUNCTION"}}},INLINE_COMPONENT_FUNCTION:{type:"object",strict_props:!0,props:{args:{type:"array|none",any_prop:"string"},body:"string",throttle:"number|none",debounce:"number|none"}}};var L=n(5108),P={},C={invert:function(e){return[1-e[0],1-e[1],1-e[2],e[2]]},extract_ch:function(e,t){var n=e[t];return[n,n,n,e[3]]},separate_ch:function(e,t){var n=e[t];return[0===t?n:0,1===t?n:0,2===t?n:0,e[3]]},desaturate:function(e){var t=g.i1.apply(void 0,(0,a.Z)(e));return t[1]=0,g.Ks.apply(void 0,(0,a.Z)(t))},hsl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=g.i1.apply(void 0,(0,a.Z)(e));return i[0]=Math.min(Math.max(i[0]+t,0),1),i[1]=Math.min(Math.max(i[1]+n,0),1),i[2]=Math.min(Math.max(i[2]+r,0),1),g.Ks.apply(void 0,(0,a.Z)(i))}},F=function(){function e(){(0,d.Z)(this,e);this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return(0,h.Z)(e,[{key:"load",value:function(e,t,n,r){var i=new Image,o=document.createElement("canvas"),a=o.getContext("2d");return o.ctx=a,i.onload=function(){var e=Math.floor(Math.min(i.width,t)),r=Math.floor(Math.min(i.height,t));o.width=e,o.height=r,a.drawImage(i,0,0,e,r),n()},i.onerror=function(e){r()},i.src=e,o}},{key:"parse_filter",value:function(e){if((0,A.Z)(e)){var t=[];return(e=(e=e.replace("[","").replace("]","").replace(/\s+/g,"").replace(/'/gm,'"')).split(";")).forEach((function(e,n){var r=e.indexOf("(")>-1,i=[],o=e;if(r){var a=e.indexOf("(");o=e.substring(0,a);var s=e.indexOf(")"),c=e.substring(a+1,s);(c=c.split(",")).forEach((function(e,t){i[t]=JSON.parse(e)}))}C[o]?t.push({name:o,args:i}):L.warn('[ImageFilter] no filter with name "'.concat(o,'"'))})),t}if((0,x.Z)(e))return e}},{key:"apply_to_pixel",value:function(e,t){var n=(0,a.Z)(e);return(t=this.parse_filter(t)).forEach((function(e){n=C[e.name].apply(C,[n].concat((0,a.Z)(e.args)))})),n}},{key:"apply_to_image",value:function(e,t,n){var r=this;setTimeout((function(){if((t=r.parse_filter(t)).length>0){for(var i=e.ctx,o=e.width,a=e.height,s=i.getImageData(0,0,o,a),c=s.data,l=c.length,u=0;u<l;u+=4){var h=c[u+0]/255,d=c[u+1]/255,f=c[u+2]/255,p=c[u+3]/255,m=r.apply_to_pixel([h,d,f,p],t);c[u+0]=Math.floor(255*m[0]),c[u+1]=Math.floor(255*m[1]),c[u+2]=Math.floor(255*m[2]),c[u+3]=Math.floor(255*(void 0===m[3]?p:m[3]))}i.putImageData(s,0,0),n()}else n()}))}},{key:"get_texture",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"[]",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=P["".concat(e,"|").concat(n,"|").concat(r)];if(i)return i;var o=this.load(e,r,(function(){t.apply_to_image(o,n,(function(){i.needsUpdate=!0})),i.needsUpdate=!0}));return i=new m.CanvasTexture(o),P["".concat(e,"|").concat(n,"|").concat(r)]=i,i}}]),e}(),D=F,U=n(7612);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var B=XMLHttpRequest.prototype.open;function N(e){return e.__proto__!==window.Object.prototype}XMLHttpRequest.prototype.open=function(){g.iV.log(arguments),B.apply(this,arguments)};var Z=n(2064),j=new m.AudioLoader,z=new m.AudioListener,G=new D,V=(0,h.Z)((function e(t){var n=this;(0,d.Z)(this,e),(0,v.Z)(t,(function(e,t){n[t]=e}))})),W=function(e){(0,c.Z)(n,e);var t=I(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(V),H=function(e){(0,c.Z)(n,e);var t=I(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(V),X=function(e){(0,c.Z)(n,e);var t=I(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(V),Q=function(e){(0,c.Z)(n,e);var t=I(n);function n(){return(0,d.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(V),Y=void 0,K=function(){function e(){if((0,d.Z)(this,e),(0,s.Z)(this,"TICK_ID",0),(0,s.Z)(this,"find_widget_component",(function(e,t){if((0,_.Z)(this.widget_component_instances[e])){var n=void 0;for(var r in this.widget_component_instances[e]){n=this.widget_component_instances[e][r];break}return(0,y.Z)(t)&&t(n),n}})),(0,s.Z)(this,"find_widget_components",(function(e,t){if((0,_.Z)(this.widget_component_instances[e])){var n=[];for(var r in this.widget_component_instances[e]){n.push(this.widget_component_instances[e][r]);break}return(0,y.Z)(t)&&n.forEach(t),n}})),e.singleton instanceof e)return e.singleton;this.globals=new W((0,s.Z)({now:+new Date,audio_listener:z,stage:void 0,dom_rect:{left:0,top:0,width:1,height:1},uniforms:{bc:{value:new m.Vector2(0,1),type:"v2"},time:{value:0,type:"f"},time2:{value:0,type:"f"},resolution:{value:new m.Vector2(1,1),type:"v2"},resolution2:{value:new m.Vector2(.001,.001),type:"v2"},pixel_ratio:{value:window.devicePixelRatio,type:"f"},mouse:{value:new m.Vector2(0,0),type:"v2"},camera_pos:{value:new m.Vector3,type:"v3"}},get resolution(){return this.uniforms.resolution.value},get pixel_ratio(){return this.uniforms.pixel_ratio.value},get mouse(){return this.uniforms.mouse.value}},"mouse",null)),e.singleton=this,(0,v.Z)(R,(function(e,t){return M.ZP.register(t,e)})),(0,v.Z)(Z,(function(e,t){return M.ZP.register(t,e)}));this.asset_stats={components_count:0,prefabs_count:0,materials_count:0,geometries_count:0};this.loaders={cubemap:new m.CubeTextureLoader};this.classes_of_objects=new Q,this.classes_of_materials=new Q({MeshBasicMaterial:m.MeshBasicMaterial,MeshDistanceMaterial:m.MeshDistanceMaterial,MeshDepthMaterial:m.MeshDepthMaterial,MeshLambertMaterial:m.MeshLambertMaterial,MeshMatcapMaterial:m.MeshMatcapMaterial,MeshNormalMaterial:m.MeshNormalMaterial,MeshPhongMaterial:m.MeshPhongMaterial,MeshPhysicalMaterial:m.MeshPhysicalMaterial,MeshStandardMaterial:m.MeshStandardMaterial,MeshToonMaterial:m.MeshToonMaterial,PointsMaterial:m.PointsMaterial,ShaderMaterial:m.ShaderMaterial,SpriteMaterial:m.SpriteMaterial,LineDashedMaterial:m.LineDashedMaterial}),this.classes_of_geometries=new Q({BoxBufferGeometry:m.BoxBufferGeometry,ConeBufferGeometry:m.ConeBufferGeometry,RingBufferGeometry:m.RingBufferGeometry,TextBufferGeometry:m.TextBufferGeometry,TubeBufferGeometry:m.TubeBufferGeometry,LatheBufferGeometry:m.LatheBufferGeometry,PlaneBufferGeometry:m.PlaneBufferGeometry,ShapeBufferGeometry:m.ShapeBufferGeometry,TorusBufferGeometry:m.TorusBufferGeometry,CircleBufferGeometry:m.CircleBufferGeometry,SphereBufferGeometry:m.SphereBufferGeometry,ExtrudeBufferGeometry:m.ExtrudeBufferGeometry,CylinderBufferGeometry:m.CylinderBufferGeometry,InstancedBufferGeometry:m.InstancedBufferGeometry,OctahedronBufferGeometry:m.OctahedronBufferGeometry,ParametricBufferGeometry:m.ParametricBufferGeometry,PolyhedronBufferGeometry:m.PolyhedronBufferGeometry,BoxGeometry:m.BoxBufferGeometry,ConeGeometry:m.ConeBufferGeometry,RingGeometry:m.RingBufferGeometry,TextGeometry:m.TextBufferGeometry,TubeGeometry:m.TubeBufferGeometry,LatheGeometry:m.LatheBufferGeometry,PlaneGeometry:m.PlaneBufferGeometry,ShapeGeometry:m.ShapeBufferGeometry,TorusGeometry:m.TorusBufferGeometry,CircleGeometry:m.CircleBufferGeometry,SphereGeometry:m.SphereBufferGeometry,ExtrudeGeometry:m.ExtrudeBufferGeometry,CylinderGeometry:m.CylinderBufferGeometry,InstancedGeometry:m.InstancedBufferGeometry,OctahedronGeometry:m.OctahedronBufferGeometry,ParametricGeometry:m.ParametricBufferGeometry,PolyhedronGeometry:m.PolyhedronBufferGeometry});this.Schema=M.ZP,this.SCHEMA_CORE=R,this.SCHEMA_APP=Z,this.cached_spine_data=new H,this.cached_spine_skeleton_data=new H,this.cached_textures=new H,this.cached_geometries=new H,this.cached_materials=new H,this.cached_streamed_textures=new H,this.cached_audio_buffers=new H,this.cached_images=new H,this.gameobject_refs=new V,this.shared_contexts=new V,this.templates_of_materials=new X,this.templates_of_geometries=new X,this.components_tags=new V,this.components_instances=new V,this.classes_of_components=new Q,this.defined_globals=new V,this.widget_stores=new V,this.widget_component_instances=new V,this.widget_proxy_components=new V,(this.placeholder_texture=this.load_texture("res/retro/helper_uv_b.jpg")).is_placeholder=!0,window.F_THREE_PATCH_PROPS=function(e){e.globals=Y.globals},window.F_BROADCAST_HOOK=function(){g.iV.log("BRDCST HOOK ")},window.F_PATCH_COMP_PROPS=function(e){e.globals=Y.globals},window.F_THREE_PATCH_UNIFORMS=function(e,t){var n=function(t){e[t]={type:Y.globals.uniforms[t].type,value:new DataComputed((function(){return Y.globals.uniforms[t].value}))}};for(var r in Y.globals.uniforms)n(r);e.object_position={type:"v3",value:new DataComputed((function(){return t.position}))}},this.log("created")}var t;return(0,h.Z)(e,[{key:"tools",get:function(){return g.rj}},{key:"log",value:function(){g.cM.apply(void 0,["ResourceManager"].concat(Array.prototype.slice.call(arguments)))}},{key:"error",value:function(){g.vU.apply(void 0,["ResourceManager"].concat(Array.prototype.slice.call(arguments)))}},{key:"register_texture",value:function(e,t){this.cached_textures[e]=t}},{key:"get_asset_stats",value:function(){return this.asset_stats}},{key:"get_material_template",value:function(e){return this.templates_of_materials[e]}},{key:"create_material_with_template",value:function(e,t,n){e=e.replace("@",""),this.templates_of_materials[e];var r=this.templates_of_materials[e];if(r=this.mixin_object(r),t){for(var i in t)(0,b.Z)(r.params,i,t[i]);"string"==typeof r.params.vertexShader&&(r.params.vertexShader="#define RANDOM_FLOAT ".concat(Math.random(),"\n").concat(r.params.vertexShader,"\n")),"string"==typeof r.params.fragmentShader&&(r.params.fragmentShader="#define RANDOM_FLOAT ".concat(Math.random(),"\n").concat(r.params.fragmentShader,"\n"))}if((0,_.Z)(r.params.uniforms))for(var s in r.params.uniforms){var c=r.params.uniforms[s];g.iV.log(c),"v3"===c.type&&(0,x.Z)(c.value)&&(c.value=(0,o.Z)(m.Vector3,(0,a.Z)(c.value))),"v2"===c.type&&(0,x.Z)(c.value)&&(c.value=(0,o.Z)(m.Vector2,(0,a.Z)(c.value)))}return new this.classes_of_materials[r.type](r.params)}},{key:"mixin_object",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e,i=[e].concat((0,a.Z)(n)),o=M.ZP.get_type_name(e);switch(o){case"object":if(N(e)){r=e;break}if(r={},e.prefab){var s=e.prefab,c=this.load_prefab(s);e=k(k({},e),{},{prefab:void 0}),e=this.mixin_object(c,[e]),i[0]=e}if(e.prefabs){var l=[];e.prefabs.forEach((function(e){var n=t.load_prefab(e);l.push(n)})),e=k(k({},e),{},{prefabs:void 0}),e=this.mixin_object(e,[].concat(l,[e])),i[0]=e}var u=(0,g.QF)(i);u.forEach((function(i){r[i]=t.mixin_object(e[i],(0,w.Z)(n,(function(e){return(0,_.Z)(e)?e[i]:void 0})))}));break;case"array":r=[],e.forEach((function(e,i){r[i]=t.mixin_object(e,(0,w.Z)(n,(function(e){return(0,x.Z)(e)?e[i]:void 0})))}));break;case"string":if(e=this.resolve_string_placeholders(e),(0,g.gR)(e)){var h=(0,g.vF)(e);r=this.mixin_object(h);break}default:r=e;for(var d=i.length-1;d>=0;d--){var f=i[d];if((0,A.Z)(f)&&(f=this.resolve_string_placeholders(f)),!(0,g.Og)(f)){r=f;break}}}return r}},{key:"create_material",value:function(e,t,n){if("object"===(0,i.Z)(t)&&Array.isArray(t)&&t.type&&t.params)return this.create_material(e,[t.type,t.params],n);var r=this.cached_materials[n];return void 0!==r&&void 0!==n||(0===e.indexOf("@")?r=this.create_material_with_template(e,t,n):void 0===this.classes_of_materials[e]?g.iV.error('Cannot find constructor for material "'.concat(e,'"')):r=new this.classes_of_materials[e](t),void 0!==n&&(this.cached_materials[n]=r)),r}},{key:"load_obj_geometry",value:function(e,t){return new S.default(e,t)}},{key:"create_geometry_with_template",value:function(e,t,n){var r,i,o,a=e.replace("@",""),s=this.templates_of_geometries[a],c=null!==(r=null==s||null===(i=s.params)||void 0===i?void 0:i.args)&&void 0!==r?r:[],l=null!==(o=null==s?void 0:s.params.scale)&&void 0!==o?o:[1,1,1];null==t||t.forEach((function(e,t){c[t]=e}));var u=this.create_geometry(s.type,c,n);return u.scale(l[0],l[1],l[2]),u}},{key:"create_obj_geometry",value:function(e,t,n){var r=e.replace("url:","");return this.load_obj_geometry(r,t)}},{key:"create_geometry",value:function(e,t,n){if("object"===(0,i.Z)(t)&&t.type&&t.params)return this.create_geometry(e,[t.type,t.params],n);var r=this.cached_geometries[n];if(void 0===r||void 0===n){if(0===e.indexOf("@"))return this.create_geometry_with_template(e,t,n);if(0===e.indexOf("url:"))return this.create_obj_geometry(e,t,n);void 0===this.classes_of_geometries[e]?g.iV.error("this",'cannot find geometry class "'.concat(e,'"')):r=(0,o.Z)(this.classes_of_geometries[e],(0,a.Z)(t)),void 0!==n&&(this.cached_geometries[n]=r)}return r}},{key:"load_from_texture_lib",value:function(e,t){var n=e.replace("@",""),r=new Image,i=new m.Texture;return r.src=textures_lib[n].base64,i.image=r,r.onload=function(){for(var e in t)i[e]=t[e];i.needsUpdate=!0},i}},{key:"load_texture",value:function(e,t){var n=this.cached_textures[e];if(!n)if(0===e.indexOf("@"))n=this.cached_textures[e]=this.load_from_texture_lib(e,t);else{var r=e;e.indexOf("?")>-1&&(t=(0,g.dx)(e.split("?")[1]||""),r=e.split("?")[0]),n=!t||void 0===t.filter&&void 0===t.maxsize?this.cached_textures[e]=(new m.TextureLoader).load(r):G.get_texture(e,t.filter||"",t.maxsize||1024)}if(n){var i=this.globals.webgl_capabilities,o=1;for(var a in i&&(o=i.getMaxAnisotropy()),n.anisotropy=o,t)(0,b.Z)(n,a,t[a]);n.needsUpdate=!0}else n=this.placeholder_texture;return n}},{key:"load_cubemap",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jpg",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=this.loaders.cubemap.load(["".concat(e,"/posx.").concat(t),"".concat(e,"/negx.").concat(t),"".concat(e,"/posy.").concat(t),"".concat(e,"/negy.").concat(t),"".concat(e,"/posz.").concat(t),"".concat(e,"/negz.").concat(t)],n);return r}},{key:"texture_stream_function",value:function(e){var t;if(e.startsWith("rt:")){var n=e.replace("rt:",""),r=E.default.list[n];if(void 0!==r)return r.texture}else(t=this.cached_streamed_textures[e])||!0!==(t=this.load_texture(e)).is_placeholder&&(this.cached_streamed_textures[e]=t);return t||(t=this.placeholder_texture),t}},{key:"load_image",value:function(e){var t=this;return new Promise((function(n){var r=t.cached_images[e];void 0!==r?n(r):((r=new Image).src=e,r.onload=function(){t.cached_images[e]=r,n(r)})}))}},{key:"load_audio_buffer",value:function(e){var t=this;return new Promise((function(n){var r=t.cached_audio_buffers[e];if(void 0!==r)return g.iV.log("using cached audio buffer (".concat(e,")")),void n(r);var i="ogg";["mac os","ios"].indexOf(g.rj.device.os_name.toLowerCase())>-1&&(i="mp3"),j.load("".concat(e,".").concat(i),(function(r){t.cached_audio_buffers[e]=r,n(r)}))}))}},{key:"load_audio",value:(t=(0,r.Z)(p().mark((function e(t){var n,r,i,o,a=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],r=a.length>2&&void 0!==a[2]&&a[2],i=void 0,(i=!0===n?new m.PositionalAudio(z):new m.Audio(z)).is_new=!0,i.autoplay=r,i.frustumCulled=!1,e.next=9,this.load_audio_buffer(t);case 9:return o=e.sent,i.setBuffer(o),e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"resolve_string_placeholders",value:function(e){return e=(e=e.replace("{{APP_NAME}}","demo")).replace("{{PLATFORM}}",g.rj.device.is_mobile?"MOBILE":"DESKTOP")}},{key:"load_prefab",value:function(e,t){var n=void 0;if((0,_.Z)(e)&&(n=e),(0,A.Z)(e)){if(e=this.resolve_string_placeholders(e),void 0===this.templates_of_prefabs[e])throw new Error('no prefab with id "'.concat(e,' found"'));n=this.templates_of_prefabs[e]}var r=this.mixin_object(n);for(var i in t)(0,b.Z)(r,i,t[i]);return r}},{key:"preload_context",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e.keys().forEach((function(r){if(n){var i=e(r);t(r,i)}else t(r)}))}},{key:"preload_classes",value:function(e,t,n){var r=this;this.preload_context(t,(function(e,t){var i=e.replace("./","").replace(/\.js$|\.coffee$|\.ts/,"");r["classes_of_".concat(n)]=r["classes_of_".concat(n)]||{},r["classes_of_".concat(n)][i]=t.default,(0,_.Z)(r["classes_of_".concat(n)][i])&&(r["classes_of_".concat(n)][i].ResourceManager=r)}))}},{key:"preload_vue_components",value:function(e,t,n){var r=this;this.preload_context(t,(function(t,n){var i=t.replace("./","").replace(".vue","");i="".concat(e,".").concat(i),r.widget_component_templates=r.widget_component_templates||{},r.widget_component_templates[i]=n.default,(0,_.Z)(r.widget_component_templates[i])&&(r.widget_component_templates[i].ResourceManager=r)}))}},{key:"preload_textures",value:function(e,t){var r=this;this.textures_lib=this.textures_lib||{},this.preload_context(t,(function(e,t){var i=e.replace("./","").replace(".png",""),o=n(3699)("./".concat(i,".png"));r.textures_lib[i]=o={base64:o}}),!1)}},{key:"preload_textures2",value:function(e,t){var n=this;this.textures_lib=this.textures_lib||{},this.preload_context(t,(function(e,t){var r=e.replace("./","").replace(".yaml","").replace(/\//gm,"."),i=t.default;n.textures_lib[r]=i}))}},{key:"preload_components",value:function(e,t){var n=this;this.preload_context(t,(function(t,r){var o,a;n.asset_stats.components_count++;var c=t.replace("./","").replace(/\.js$|\.coffee$|\.ts/,"").replace(/\//gm,".");c=c.split(".")[c.split(".").length-1];var l=null!==(o=null!==(a=r.default)&&void 0!==a?a:r[c])&&void 0!==o?o:l;if((0,_.Z)(l)||(0,y.Z)(l)){var u={components:(0,s.Z)({},(0,g.AQ)(c),{name:c,enabled:!0,params:(0,_.Z)(l.DEFAULT)?k({},l.DEFAULT):{}})};n.register_prefab("default.".concat(c),u),n.register_component(l,c)}else(0,g.vU)("RM",'failed to preload component "'.concat(e,".").concat(c,'". Unknown type: "').concat((0,i.Z)(l),'"'))}))}},{key:"preload_templates_of_shader_parts",value:function(e,t){var n=this;this.templates_of_shader_parts=this.templates_of_shader_parts||{},this.preload_context(t,(function(t,r){var i=t.replace("./","").replace(".yaml","").replace(/\//gm,".");n.templates_of_shader_parts["".concat(e,".").concat(i)]=r.default}))}},{key:"preload_materials",value:function(e,t){var n=this,r=this.templates_of_materials;this.preload_context(t,(function(t,i){var o=t.replace("./","").replace(".yaml","").replace(/\//gm,".");n.asset_stats.materials_count++;var a=r["".concat(e,".").concat(o)]=i.default;if(a.params){var s=m.ShaderLib[a.params.extend],c=k(k({},s=void 0!==s?s.uniforms:{}),a.params.uniforms||{});a.params.fragmentShader=n.preprocess_shader_code(a.params.fragmentShader,c),a.params.vertexShader=n.preprocess_shader_code(a.params.vertexShader,c)}}))}},{key:"preload_geometries",value:function(e,t){var n=this;this.preload_context(t,(function(t,r){var i=t.replace("./","").replace(".yaml","").replace(/\//gm,".");n.asset_stats.geometries_count++,n.templates_of_geometries["".concat(e,".").concat(i)]=r.default}))}},{key:"preload_prefabs",value:function(e,t){var n=this;this.templates_of_prefabs=this.templates_of_prefabs||{test:{test_prop1:1,test_prop2:"hello"}},this.preload_context(t,(function(t,r){var i=t.replace("./","").replace(".yaml","").replace(/\//gm,"."),o=r.default;n.asset_stats.prefabs_count++,n.register_prefab("".concat(e,".").concat(i),o)}))}},{key:"register_prefab",value:function(e,t){M.ZP.validate(t,":PREFAB","[PREFAB:".concat(e,"]"))||g.iV.error('[this] cannot register prefab. preloaded prefab "'.concat(e,'" does not match "PREFAB" schema')),this.templates_of_prefabs=this.templates_of_prefabs||{test:{test_prop1:1,test_prop2:"hello"}},this.templates_of_prefabs[e]=t}},{key:"register_component",value:function(e,t){Y.classes_of_components[t]=e}},{key:"define_global_var",value:function(e,t,n,r){(0,A.Z)(e)?(0,y.Z)(n)&&(0,A.Z)(t)?(this.defined_globals[e]=this.defined_globals[e]||{},this.defined_globals[e][t]={getter:n,setter:r},Object.defineProperty(this.globals,t,{get:n,set:(0,y.Z)(r)?r:void 0,configurable:!0})):this.error("failed registering global variable: invalid params",arguments):this.error("failed to register global variable. plz provied owner id",arguments)}},{key:"undefine_global_var",value:function(e,t){(0,A.Z)(e)?(Object.defineProperty(this.globals,t,{get:void 0,set:void 0,configurable:!0}),delete this.globals[t],(0,_.Z)(this.defined_globals[e])&&delete this.defined_globals[e][t]):this.error("failed to ndefine global variable. plz provied owner id",arguments)}},{key:"undefine_all_global_vars",value:function(e){var t=this;(0,A.Z)(e)?(0,_.Z)(this.defined_globals[e])&&(0,v.Z)((0,T.Z)(this.defined_globals[e]),(function(n){t.undefine_global_var(e,n)})):this.error("failed to ndefine global variable. plz provied owner id",arguments)}},{key:"preprocess_shader_code",value:function(e,t){var n=this.templates_of_shader_parts;if("string"==typeof e){for(var r in n){if(e=e.replace("#import ".concat(r),n[r].code),"object"===(0,i.Z)(n[r].uniforms))t=k(k({},n[r].uniforms),t)}for(var o in m.ShaderChunk)e=e.replace("#include <".concat(o,">"),m.ShaderChunk[o])}return e}},{key:"get_component_instance",value:function(e,t){return this.components_instances[e]?this.components_instances[e][t]:void 0}},{key:"load_context",value:function(){}},{key:"create_object",value:function(e,t){return new this.classes_of_objects[e](t)}},{key:"using",value:function(e,t){g.iV.log(e,t)}},{key:"load_patches",value:function(e,t){var n=this;this.preload_context(t,(function(e,t){var r,i;n.asset_stats.components_count++;var o=e.replace("./","").replace(/\.js$|\.coffee$|\.ts/,"").replace(/\//gm,".");o=o.split(".")[o.split(".").length-1];var a=null!==(r=null!==(i=t.default)&&void 0!==i?i:t[o])&&void 0!==r?r:a;(0,y.Z)(a)?(a(n),(0,g.cM)("RM",'patch "'.concat(o,'" applied'))):(0,g.vU)("RM","failed to apply patch ".concat(o,": patch is not a function"))}))}},{key:"load_asset_index",value:function(e){g.iV.log(e)}},{key:"run_postload_tasks",value:function(){var e=this,t=this.classes_of_components;g.iV.log(t),this.widget_proxy_components.R_Object=this.create_proxy_object_widget(),(0,v.Z)(t,(function(t,n){var r=e.create_proxy_component_widget(t,n);e.widget_proxy_components["R_".concat(n)]=r}))}},{key:"create_proxy_object_widget",value:function(){return{name:"R_Object",mixins:[e.proxy_widget_base],template:'\n                <div \n                    :data-name="$options.name" \n                    :data-id="id"  \n                    style="display: none;"\n                >\n                    <slot/>\n                </div>  \n            ',data:function(){return{id:0,is_retro_component_proxy:!1,is_retro_object_proxy:!0}},props:{props:{}},beforeMount:function(){g.iV.log("new proxy object"),this.retro_object=new U.Z},mounted:function(){this.detect_domain_game_object(),this.domain_game_object.add(this.retro_object)},destroyed:function(){g.iV.log("destoryed proxy object"),this.retro_object.destroy(),this.domain_game_object.remove(this.retro_object)},methods:{}}}},{key:"create_proxy_component_widget",value:function(t,n){var r=n;return{name:"R_".concat(n),mixins:[e.proxy_widget_base],template:'\n                <p \n                    :data-name="$options.name" \n                    :data-id="id" \n                    style="display: none"\n                ></p>\n            ',data:function(){return{id:0,is_retro_component_proxy:!0,is_retro_object_proxy:!1}},props:{tag:{type:String,default:function(){}},params:{type:Object,default:function(){return{}}}},mounted:function(){g.iV.log("new component ".concat(n)),this.component_instance=new t(this.params),this.detect_domain_game_object(),this.game_object.attach_component(this.component_instance,{name:r,tag:this.tag})},destroyed:function(){g.iV.log(3001,this.$options.name),this.component_instance&&this.game_object.remove_component(this.component_instance)},methods:{}}}}]),e}();(0,s.Z)(K,"singleton",void 0),(0,s.Z)(K,"proxy_widget_base",{methods:{detect_domain_game_object:function(){for(var e=this.$store.getters.game_object,t=this,n=this.game_object.UUID;;){if(t&&t.is_retro_object_proxy&&t.retro_object!==this.retro_object){e=t.retro_object;break}if(!(t=t.$parent))break}for(;void 0!==t&&!1===t.is_retro_object_proxy;)g.iV.log(t),t=t.$parent;g.iV.log("found domain game object: ".concat(e.UUID," (").concat(n===e.UUID?"root":"",")")),this.domain_game_object=e}}}),Y=new K,window.F_TEXTURE_STREAMING_FUNCTION=Y.texture_stream_function.bind(Y),Y.load_asset_index({items:[["/src/retro/res",!0],["/src/retro/res/1x1_black.png",!1],["/src/retro/res/1x1_white.png",!1],["/src/retro/res/Desktop.ini",!1],["/src/retro/res/gizmo",!0],["/src/retro/res/helper_cubemap.jpg",!1],["/src/retro/res/helper_uv_a.jpg",!1],["/src/retro/res/helper_uv_b.jpg",!1],["/src/retro/res/hemisphere_mask.png",!1],["/src/retro/res/mask_circle_a.png",!1],["/src/retro/res/mask_flare_a.png",!1],["/src/retro/res/mask_flare_b.png",!1],["/src/retro/res/mask_linear_gradient_h.png",!1],["/src/retro/res/mask_linear_gradient_v.png",!1],["/src/retro/res/mask_scratches_a.jpg",!1],["/src/retro/res/mask_white_marble_a.jpg",!1],["/src/retro/res/matcap_texture",!0],["/src/retro/res/nmap_waternormals.jpg",!1],["/src/retro/res/noise_cloud_a.jpg",!1],["/src/retro/res/noise_grey_a.png",!1],["/src/retro/res/noise_perlin_a.png",!1],["/src/retro/res/noise_rgb_a.png",!1],["/src/retro/res/noise_rgb_b.png",!1],["/src/retro/res/particle_smoke_b.png",!1],["/src/retro/res/particle_smoke_c.png",!1],["/src/retro/res/radial_gradient_a.png",!1],["/src/retro/res/radial_gradient_b.png",!1],["/src/retro/res/RF29082022214951366331951.ico",!1],["/src/retro/plugins/postfx/res",!0],["/src/retro/plugins/postfx/res/1x1_black.png",!1],["/src/retro/plugins/extra-assets/res",!0],["/src/retro/plugins/extra-assets/res/1x1_black.png",!1],["/src/retro/plugins/extra-assets/res/ambient_sound",!0],["/src/retro/plugins/extra-assets/res/ambient_sound/fluorescent_lamp_ambience_a1.ogg",!1],["/src/retro/plugins/extra-assets/res/ambient_sound/house_ambience_a1.ogg",!1],["/src/retro/plugins/extra-assets/res/ambient_sound/polar_wind_a1.ogg",!1],["/src/retro/plugins/extra-assets/res/ambient_sound/transformer_hum_a1.ogg",!1],["/src/retro/plugins/extra-assets/res/cubemaps",!0],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain",!0],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/afterrain/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9",!0],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/aqua9/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/areskutan_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cntower_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/cosmos_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/creek_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame",!0],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_bk.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_dn.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_ft.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_lf.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_rt.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/flame/flame_up.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/forest_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s",!0],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/h2s/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/heart_sand_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2",!0],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/hornstulls_2/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/house_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/icelake_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/iceriver_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/lundagatan_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nalovardo_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nightpath_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2",!0],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/NissiBeach2/readme.txt",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/nissi_beach_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2",!0],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Park2/readme.txt",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/pondnight_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/powerlines_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula",!0],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/purplenebula/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6",!0],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Tantolunden6/readme.txt",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/tantolunden_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide",!0],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/Teide/readme.txt",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1",!0],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/vindelalven_1/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3",!0],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/negx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/negy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/negz.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/posx.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/posy.jpg",!1],["/src/retro/plugins/extra-assets/res/cubemaps/yokohama_3/posz.jpg",!1],["/src/retro/plugins/extra-assets/res/models",!0],["/src/retro/plugins/extra-assets/res/models/cornell_box",!0],["/src/retro/plugins/extra-assets/res/models/cornell_box/license.txt",!1],["/src/retro/plugins/extra-assets/res/models/cornell_box/scene.bin",!1],["/src/retro/plugins/extra-assets/res/models/cornell_box/scene.gltf",!1],["/src/retro/plugins/extra-assets/res/models/cornell_box_b",!0],["/src/retro/plugins/extra-assets/res/models/cornell_box_b/license.txt",!1],["/src/retro/plugins/extra-assets/res/models/cornell_box_b/scene.bin",!1],["/src/retro/plugins/extra-assets/res/models/cornell_box_b/scene.gltf",!1],["/src/retro/plugins/extra-assets/res/music",!0],["/src/retro/plugins/extra-assets/res/music/fashion_fantasy_lofihiphop_1.ogg",!1],["/src/retro/plugins/extra-assets/res/music/fitness_tense_hiphop_1.ogg",!1],["/src/retro/plugins/extra-assets/res/music/food_sad_lofihiphop_2.ogg",!1],["/src/retro/plugins/extra-assets/res/pbr",!0],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/alien-slime1-preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/alien-slime1-bl/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/angled-tiled-floor_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/angled_tile_floor_a1/a_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/crystall_1",!0],["/src/retro/plugins/extra-assets/res/pbr/crystall_1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/crystall_1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/crystall_1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/crystall_1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/crystall_1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/diamond-metal-siding-bl/diamond-metal-siding_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/dusty_groun_gravel_a1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/fiberous_plaster_a1/fiberous_plaster_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1",!0],["/src/retro/plugins/extra-assets/res/pbr/lava_1/Material_1919.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_e.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_h.png",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/lava_1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/loose-tablecloth-bl/loose-tablecloth_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1",!0],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/metal-plate-scifi-1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/modern-metal-wall1-bl/modern-metal-wall_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/mud_with_vegetation_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/mud-with-vegetation-bl/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ornatebrass1-bl/ornate-brass_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/ridged-foam1-bl/ridged-foam1_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rock-slab-wall1-bl/rock-slab-wall_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1",!0],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/rocks-hexagon-1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth-stucco-preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/smooth_stucco_a1/smooth_stucco_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1",!0],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1/t_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1/t_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1/t_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1/t_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snow-steps-1/t_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1",!0],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/snowdrift1/snowdrift1_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed-wall-texture1_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/sprayed_wall_a1/sprayed_wall_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2-preview.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/storage-container2-bl/storage-container2_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl",!0],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/tidal-pool2-bl/tidalpool2_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1",!0],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_ao.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_c.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_h.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_m.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_n.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/a_r.jpg",!1],["/src/retro/plugins/extra-assets/res/pbr/vintage_tile_a1/vintage-tile1_preview.jpg",!1],["/src/retro/plugins/extra-assets/res/spine",!0],["/src/retro/plugins/extra-assets/res/spine/raptor",!0],["/src/retro/plugins/extra-assets/res/spine/raptor/raptor.atlas",!1],["/src/retro/plugins/extra-assets/res/spine/raptor/raptor.json",!1],["/src/retro/plugins/extra-assets/res/spine/raptor/raptor.png",!1],["/src/retro/plugins/meshworks/res",!0],["/src/retro/plugins/meshworks/res/1x1_black.png",!1],["/src/apps/demo/res",!0],["/src/apps/demo/res/models",!0],["/src/apps/demo/res/models/wizard_table",!0],["/src/apps/demo/res/models/wizard_table/license.txt",!1],["/src/apps/demo/res/models/wizard_table/scene.bin",!1],["/src/apps/demo/res/models/wizard_table/scene.gltf",!1],["/src/apps/demo/res/models/wizard_table/textures",!0],["/src/apps/demo/res/models/wizard_table/textures/1_-_Default_brain.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/1_-_Default_brain.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/1_-_Default_brain.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00.00_cutlery.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00.00_cutlery.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00.00_cutlery.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.001.00_tx_mortar_stone.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.001.00_tx_mortar_stone.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.001.00_tx_mortar_stone.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.007.03_vails.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.007.03_vails.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.007.03_vails.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.008_vails.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.008_vails.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.008_vails.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00_Material_2D_View.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00_Material_2D_View.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.00_Material_2D_View.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.010.00_skullcandle.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.010.00_skullcandle.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.010.00_skullcandle.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.015.00_scrolls.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.015.00_scrolls.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.015.00_scrolls.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.017.00_ant.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.017.00_ant.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.017.00_ant.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.01_TopPart_2D_View.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.01_TopPart_2D_View.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.01_TopPart_2D_View.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.06_bottle01.dds.003_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.06_bottle01.dds.003_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.06_bottle01.dds.003_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.07.01_bowl01.dds.001_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.07.01_bowl01.dds.001_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.07.01_bowl01.dds.001_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.17_tx_hr_steelsword01.dd_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.17_tx_hr_steelsword01.dd_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material.17_tx_hr_steelsword01.dd_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.001_tx_hr_book_006.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.001_tx_hr_book_006.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.001_tx_hr_book_006.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.002_tx_hr_book_007.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.002_tx_hr_book_007.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.002_tx_hr_book_007.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.003_tx_hr_book_002.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.003_tx_hr_book_002.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.003_tx_hr_book_002.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.004_tx_hr_book_005.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.004_tx_hr_book_005.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.004_tx_hr_book_005.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.005_tx_hr_book_004.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.005_tx_hr_book_004.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.005_tx_hr_book_004.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.006_tx_hr_book_003.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.006_tx_hr_book_003.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.006_tx_hr_book_003.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.007_tx_hr_book_001.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.007_tx_hr_book_001.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127.007_tx_hr_book_001.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127_tx_hr_book_008.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127_tx_hr_book_008.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/Material__4127_tx_hr_book_008.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/noname.05_FlaskThing.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/noname.05_FlaskThing.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/noname.05_FlaskThing.dds_normal.png",!1],["/src/apps/demo/res/models/wizard_table/textures/noname_tx_hr_book_004.dds_baseColor.jpeg",!1],["/src/apps/demo/res/models/wizard_table/textures/noname_tx_hr_book_004.dds_metallicRoughness.png",!1],["/src/apps/demo/res/models/wizard_table/textures/noname_tx_hr_book_004.dds_normal.png",!1]]}),Y.load_patches("retro",n(1729)),Y.preload_components("retro",n(5584)),Y.preload_classes("retro",n(4900),"materials"),Y.preload_classes("retro",n(5844),"geometries"),Y.preload_classes("retro",n(863),"objects"),Y.preload_vue_components("retro",n(1417)),Y.preload_textures2("retro",n(4135)),Y.preload_templates_of_shader_parts("retro",n(1855)),Y.preload_materials("retro",n(9067)),Y.preload_geometries("retro",n(7877)),Y.preload_prefabs("retro",n(5281)),Y.preload_components("retro/plugins/postfx",n(5946)),Y.preload_materials("retro/plugins/postfx",n(7509)),Y.preload_classes("retro/plugins/extra-assets",n(3821),"objects"),Y.preload_components("retro/plugins/meshworks",n(3192)),Y.preload_components("demo",n(9228)),Y.preload_classes("demo",n(8878),"materials"),Y.preload_classes("demo",n(8226),"geometries"),Y.preload_classes("demo",n(4988),"objects"),Y.preload_vue_components("demo",n(6830)),Y.preload_textures2("demo",n(94)),Y.preload_templates_of_shader_parts("demo",n(7938)),Y.preload_materials("demo",n(1096)),Y.preload_geometries("demo",n(8572)),Y.preload_prefabs("demo",n(1837)),Y.run_postload_tasks();var q=Y},4553:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(445),h=n(6423),d=n(4262),f=n(1358),p=n(5108);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var g=function(e){(0,a.Z)(n,e);var t=m(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"tick_skip",2),(0,l.Z)((0,o.Z)(e),"active_animations",{}),(0,l.Z)((0,o.Z)(e),"animations",{}),e}return(0,i.Z)(n,[{key:"on_create",value:function(){}},{key:"on_enable",value:function(){for(var e in this.animations)this.animations[e].autoplay&&this.animate(e,1)}},{key:"animate",value:function(e,t,n){var r=this;return new Promise((function(i){if(r.tools.type.is_object(t)){var o=t;r.tools.type.is_object(r.animations[e])&&(!1===r.animations[e].resolved&&r.animations[e].resolve(),delete r.active_animations[e]),r.animations[e]=o,t=1}var a=r.animations[e];r.tools.type.is_none(a)&&p.log("Animator: no such animation: ".concat(e)),t=r.tools.type.is_number(t)?t:1;var s={};for(var c in a.values)if(a.from_values&&void 0!==a.from_values[c])s[c]=a.from_values[c];else{var l=(0,h.Z)(r.game_object,c);s[c]="number"==typeof l?l:0}r.active_animations[e]={name:e,start:+new Date,end:+new Date+a.duration*t*1e3,progress:0,started:!1,stopped:!1,on_complete:n?n.on_complete:void 0,on_start:n?n.on_start:void 0,on_update:n?n.on_update:void 0,start_values:s,resolve:i,resolved:!1,target_object:a.target_object,values:a.values,ease:a.ease}}))}},{key:"on_tick",value:function(e){var t=+new Date,n={};for(var r in this.active_animations){var i=this.active_animations[r],o=i.ease||"linear",a=this.animations[i.name].target_object;if(void 0===a)return void this.error("cannot animation: no target object");var s=this.tools.easings[o]((t-i.start)/(i.end-i.start));s>1&&(this.animations[i.name].loop?s%=1:s=1),i.stopped&&delete this.active_animations[r],i.started||(i.started=!0,i.on_start&&i.on_start());var c=this.animations[i.name].values;for(var l in c){var u=this.tools.math.lerp(i.start_values[l],c[l],s);(0,d.Z)(a,l)&&(0,f.Z)(a,l,u)}i.on_update&&i.on_update(s,n,i),s>=1&&(i.on_complete&&i.on_complete(),i.resolved=!0,i.resolve(),delete this.active_animations[r]),this.globals.need_render=!0}}}]),n}(u.Z);t.default=g},883:function(e,t,n){"use strict";n.r(t);var r=n(5785),i=n(5861),o=n(5671),a=n(3144),s=n(7326),c=n(1752),l=n(136),u=n(2963),h=n(1120),d=n(4942),f=n(4687),p=n.n(f),m=n(7465),g=n(5017),v=n(7845);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var y=(new g.TextureLoader).load("res/retro/gizmo/speaker_a.png"),b=new g.SpriteMaterial({map:y}),x=new g.SpriteMaterial({map:y,color:"#65b2b8"}),w=(new g.Vector3,new g.Vector3,.5),A=function(e){(0,l.Z)(f,e);var t,n,u=_(f);function f(){var e;return(0,o.Z)(this,f),e=u.apply(this,arguments),(0,d.Z)((0,s.Z)(e),"src",void 0),(0,d.Z)((0,s.Z)(e),"playing",!1),(0,d.Z)((0,s.Z)(e),"loop",!1),(0,d.Z)((0,s.Z)(e),"volume",.5),(0,d.Z)((0,s.Z)(e),"ref_distance",2),(0,d.Z)((0,s.Z)(e),"max_distance",10),(0,d.Z)((0,s.Z)(e),"rolloff",1),(0,d.Z)((0,s.Z)(e),"autoplay",!1),(0,d.Z)((0,s.Z)(e),"spatial",!0),(0,d.Z)((0,s.Z)(e),"tick_rate",30),(0,d.Z)((0,s.Z)(e),"paused",!1),(0,d.Z)((0,s.Z)(e),"glitch_gap",.1),(0,d.Z)((0,s.Z)(e),"bound_object",void 0),(0,d.Z)((0,s.Z)(e),"current_distance_to_camera",0),(0,d.Z)((0,s.Z)(e),"extra_gizmo_render_data",void 0),e.extra_gizmo_render_data=[],e}return(0,a.Z)(f,[{key:"on_create",value:function(){this.subject=new g.Object3D;var e=this.gizmo_speaker_icon=new g.Sprite(this.spatial?x:b);e.scale.set(.05,.05,.05),e.material.sizeAttenuation=!1,e.material.depthTest=!1,e.material.depthWrite=!1,e.renderOrder=1,this.on_sound_ended=this.on_sound_ended.bind(this)}},{key:"on_destroy",value:function(){this.sound&&this.sound.stop()}},{key:"update_src",value:(n=(0,i.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sound&&this.sound.setLoop(!1),this.sound=void 0,e.next=4,v.default.load_audio(this.src,this.spatial,this.autoplay);case 4:(t=this.sound=e.sent).helper?this.extra_gizmo_render_data=[{object:t.helper,parent:this.subject,layers:{gizmo:!0}}]:this.extra_gizmo_render_data=[],this.spatial&&(t.setRefDistance(this.ref_distance),t.setRolloffFactor(this.rolloff),t.setMaxDistance(this.max_distance)),t.loopStart=0,t.loopEnd=Math.floor(t.buffer.duration),t.setLoop(this.loop),t.setVolume(this.volume*w);case 11:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"get_reactive_props",value:function(){return["src","playing","loop","volume","autoplay","spatial_volume","ref_distance","max_distance","rolloff"].concat((0,c.Z)((0,h.Z)(f.prototype),"get_reactive_props",this).call(this))}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.bound_object||this.game_object},{object:this.sound,parent:this.subject}]}},{key:"get_gizmo_render_data",value:function(){return[{object:this.gizmo_speaker_icon,parent:this.subject,layers:{gizmo:!0}}].concat((0,r.Z)(this.extra_gizmo_render_data))}},{key:"on_update",value:(t=(0,i.Z)(p().mark((function e(t){var n=this;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,c.Z)((0,h.Z)(f.prototype),"on_update",this).call(this,t),!(t.indexOf("src")>-1)){e.next=5;break}return e.next=4,this.update_src();case 4:this.autoplay&&(this.playing=!0);case 5:t.forEach((function(e){switch(e){case"src":case"ref_distance":n.sound&&n.spatial&&n.sound.setRefDistance(n.ref_distance);case"rolloff":n.sound&&n.spatial&&n.sound.setRolloffFactor(n.rolloff);case"max_distance":n.sound&&n.spatial&&n.sound.setMaxDistance(n.max_distance);case"playing":n.sound&&(n.playing&&!n.sound.isPlaying?n.sound.play():n.sound.stop());break;case"loop":n.sound&&n.sound.setLoop(n.loop);break;case"volume":n.sound&&n.sound.setVolume(n.volume*w);break;case"autoplay":n.autoplay&&(n.playing=!0)}}));case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"on_tick",value:function(e){void 0!==this.sound&&this.sound.is_new&&(this.sound.is_new=!1,this.playing&&!this.sound.isPlaying&&(this.never_played=!1,this.sound.play()),!this.playing&&this.sound.isPlaying&&this.sound.stop(),this.sound.setLoop(this.loop),this.sound.setVolume(this.volume*w))}},{key:"play",value:function(){this.log("start playing..."),this.playing=!0}},{key:"on_sound_ended",value:function(){}},{key:"replay",value:function(){this.sound&&(this.sound.stop(),this.sound.play())}}]),f}(m.Z);A.set_volume=function(e){w=e},t.default=A},1298:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017));n(1489),n(6461);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"anchor",void 0),(0,u.Z)((0,o.Z)(e),"audio_listener",void 0),(0,u.Z)((0,o.Z)(e),"bound_object",void 0),(0,u.Z)((0,o.Z)(e),"master_volume",1),(0,u.Z)((0,o.Z)(e),"animated_master_volume",0),e}return(0,i.Z)(n,[{key:"on_create",value:function(){this.log("created"),this.audio_listener=this.globals.audio_listener,this.anchor=new d.Object3D}},{key:"on_destroy",value:function(){(0,a.Z)((0,l.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}},{key:"on_tick",value:function(e){}},{key:"get_render_data",value:function(){return[{object:this.globals.audio_listener,parent:this.bound_object||this.globals.camera}]}},{key:"get_reactive_props",value:function(){return["master_volume"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){if("master_volume"===e)t.audio_listener.setMasterVolume(t.master_volume)}))}}]),n}(h.Z);t.default=p},5376:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(445),d=n(6650);let f=null;const p=((e,t)=>()=>{if(null!==f)return f;const n=new Blob([t],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(n);return f=e(r),f.setTimeout((()=>URL.revokeObjectURL(r)),0),f})((e=>{const t=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),r=new Map,i=new Worker(e);i.addEventListener("message",(({data:e})=>{if(void 0!==(i=e).method&&"call"===i.method){const{params:{timerId:i,timerType:o}}=e;if("interval"===o){const e=t.get(i);if("number"==typeof e){const t=r.get(e);if(void 0===t||t.timerId!==i||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e()}}else if("timeout"===o){const e=n.get(i);if("number"==typeof e){const t=r.get(e);if(void 0===t||t.timerId!==i||t.timerType!==o)throw new Error("The timer is in an undefined state.")}else{if(void 0===e)throw new Error("The timer is in an undefined state.");e(),n.delete(i)}}}else{if(!(e=>null===e.error&&"number"==typeof e.id)(e)){const{error:{message:t}}=e;throw new Error(t)}{const{id:i}=e,o=r.get(i);if(void 0===o)throw new Error("The timer is in an undefined state.");const{timerId:a,timerType:s}=o;r.delete(i),"interval"===s?t.delete(a):n.delete(a)}}var i}));return{clearInterval:e=>{const n=(0,d.generateUniqueNumber)(r);r.set(n,{timerId:e,timerType:"interval"}),t.set(e,n),i.postMessage({id:n,method:"clear",params:{timerId:e,timerType:"interval"}})},clearTimeout:e=>{const t=(0,d.generateUniqueNumber)(r);r.set(t,{timerId:e,timerType:"timeout"}),n.set(e,t),i.postMessage({id:t,method:"clear",params:{timerId:e,timerType:"timeout"}})},setInterval:(e,n)=>{const r=(0,d.generateUniqueNumber)(t);return t.set(r,(()=>{e(),"function"==typeof t.get(r)&&i.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:r,timerType:"interval"}})})),i.postMessage({id:null,method:"set",params:{delay:n,now:performance.now(),timerId:r,timerType:"interval"}}),r},setTimeout:(e,t)=>{const r=(0,d.generateUniqueNumber)(n);return n.set(r,e),i.postMessage({id:null,method:"set",params:{delay:t,now:performance.now(),timerId:r,timerType:"timeout"}}),r}}}),'(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error(\'There is no interval scheduled with the given id "\'.concat(t,\'".\'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error(\'The given type "\'.concat(i,\'" is not supported\'));(e=>{const r=t.get(e);if(void 0===r)throw new Error(\'There is no timeout scheduled with the given id "\'.concat(e,\'".\'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error(\'The given method "\'.concat(s.method,\'" is not supported\'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error(\'The given type "\'.concat(d,\'" is not supported\'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();'),m=e=>p().clearInterval(e),g=(e,t)=>p().setInterval(e,t);var v=n(5290),_=n(7845);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var b=function(e){(0,s.Z)(n,e);var t=y(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"tick_loop_type","worker"),(0,u.Z)((0,o.Z)(e),"scene_tick_enabled",!0),(0,u.Z)((0,o.Z)(e),"tick_interval",1e3/60),(0,u.Z)((0,o.Z)(e),"tick_delta",1),(0,u.Z)((0,o.Z)(e),"prev_scene_tick_date",+new Date),(0,u.Z)((0,o.Z)(e),"started",!1),(0,u.Z)((0,o.Z)(e),"time_data",{now:+new Date,started_at:-1,frame_time:1e3/60,delta:1,prev_frame_time:+new Date,fps:60}),(0,u.Z)((0,o.Z)(e),"time_data_raf",{now:+new Date,started_at:-1,frame_time:1e3/60,delta:1,prev_frame_time:+new Date,fps:60}),(0,u.Z)((0,o.Z)(e),"bg_tick_interval_id",0),e}return(0,i.Z)(n,[{key:"on_create",value:function(){this.tick_loop_type=this.tick_loop_type||"worker",this.handle_tick_interval=this.handle_tick_interval.bind(this),this.handle_raf=this.handle_raf.bind(this),this.raf_cb_id=0,this.raf_callbacks={},this.handle_document_visiblity_change=this.handle_document_visiblity_change.bind(this),document.addEventListener("visibilitychange",this.handle_document_visiblity_change,!1)}},{key:"handle_document_visiblity_change",value:function(){var e="visible"===document.visibilityState;this.tools.device.is_mobile&&!e&&this.run_tick_interval_actions()}},{key:"begin_tick",value:function(){var e=this;if(this.started)this.log("cannot begin. clock is already started");else switch(this.started=!0,this.time_data.started_at=+new Date,this.time_data_raf.started_at=+new Date,this.loop_id=requestAnimationFrame(this.handle_raf),this.log('starting tick loop. type: "'.concat(this.tick_loop_type,'"')),this.tick_loop_type){case"worker":this.tick_interval_id=g((function(){e.handle_tick_interval()}),1e3/60);break;case"raf":this.tick_interval_id=requestAnimationFrame(this.handle_tick_interval);break;default:this.tick_interval_id=setInterval((function(){e.handle_tick_interval()}),1e3/60)}}},{key:"handle_raf",value:function(){var e=this.time_data_raf.now=+new Date,t=this.time_data_raf.frame_time=e-this.time_data_raf.prev_frame_time;this.time_data_raf.delta=t/(1e3/60),this.time_data_raf.fps=1e3/t;for(var n in this.time_data_raf.prev_frame_time=e,this.raf_callbacks)this.raf_callbacks[n](this.time_data_raf);this.loop_id=requestAnimationFrame(this.handle_raf)}},{key:"handle_bg_tick_interval",value:function(){this.run_tick_interval_actions()}},{key:"handle_tick_interval",value:function(){if("raf"===this.tick_loop_type)this.tick_interval_id=requestAnimationFrame(this.handle_tick_interval);this.run_tick_interval_actions()}},{key:"run_tick_interval_actions",value:function(){var e=this.globals.now=+new Date,t=this.time_data.frame_time=e-this.time_data.prev_frame_time,n=this.time_data.delta=t/(1e3/60);this.time_data.fps=1e3/t;this.time_data.prev_frame_time=e;var r=this.globals.app;r&&r.tick(this.time_data),this.globals.uniforms.time.value+=1/60*n,(0,v.Z)(_.default.components_instances).forEach((function(e){var t=_.default.classes_of_components[e];t&&t.tick(_.default.components_instances[e])}))}},{key:"on_tick",value:function(e){}},{key:"on_destroy",value:function(){switch((0,a.Z)((0,l.Z)(n.prototype),"on_destroy",this).apply(this,arguments),cancelAnimationFrame(this.loop_id),document.removeEventListener("visibilitychange",this.handle_document_visiblity_change,!1),this.tick_loop_type){case"worker":m(this.tick_interval_id);break;case"raf":cancelAnimationFrame(this.tick_interval_id);break;default:clearInterval(this.tick_interval_id)}}},{key:"add",value:function(e){return this.raf_callbacks[this.raf_cb_id]=e,this.raf_cb_id++}},{key:"create",value:function(e){var t=this,n={};return n.id=requestAnimationFrame((function r(){n.id=requestAnimationFrame(r),t.started&&e()})),n.stop=function(){cancelAnimationFrame(n.id)},n}},{key:"remove",value:function(e){delete this.raf_callbacks[e]}}]),n}(h.Z),x=b},5622:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(445),h=n(5017),d=n(5108);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var m=function(e){(0,a.Z)(n,e);var t=p(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,o.Z)(i),"tick_skip",3),(0,l.Z)((0,o.Z)(i),"in_dom",!1),(0,l.Z)((0,o.Z)(i),"_text",""),i.dom=document.createElement("div"),i.apply_styles(i.dom,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,l.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:"auto",height:"auto",padding:"2px",background:"rgba(0,0,0,0.5)",border:"1px dotted #eee",position:"absolute",top:"0",left:"0",pointerEvents:"none",display:"none",alignItems:"center",justifyContent:"center",userSelect:"none"},e.style)),i.gizmo=document.createElement("div"),i.apply_styles(i.gizmo,{width:"4px",height:"4px",background:"rgb(1, 1, 1, 0.5)",transform:"translate(-50%, -50%)",borderRadius:"50%",border:"1px solid white",position:"absolute",top:"0",left:"0"}),i.paragraph=document.createElement("p"),i.apply_styles(i.paragraph,{margin:"0",color:"#ffffff",fontSize:"10px",fontFamily:"monospace",whiteSpace:"pre-line"}),i.dom.appendChild(i.gizmo),i.dom.appendChild(i.paragraph),i}return(0,i.Z)(n,[{key:"on_create",value:function(){this.globals.dom.appendChild(this.dom)}},{key:"on_enable",value:function(){this.in_dom||(this.dom.style.display="flex"),this.in_dom=!0}},{key:"on_disable",value:function(){this.in_dom&&(this.dom.style.display="none"),this.in_dom=!1}},{key:"init",value:function(e){d.log("component init params: ",e)}},{key:"set_position",value:function(e,t,n){var r=new h.Vector3(e,t,n);r.project(this.camera);this.dom.style.transform="translate(calc(".concat((r.x+1)/2*this.globals.resolution.x,"px), ").concat((1-r.y)/2*this.globals.resolution.y,"px)")}},{key:"apply_styles",value:function(e,t){for(var n in t)e.style[n]=t[n]}},{key:"text",get:function(){return this._text},set:function(e){this._text=e,void 0!==this.paragraph&&(this.paragraph.innerHTML=e)}}]),n}(u.Z);t.default=m},4531:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(445),d=(n(7845),n(5017));function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"color","#282730"),(0,u.Z)((0,o.Z)(e),"density",1),(0,u.Z)((0,o.Z)(e),"near",.025),(0,u.Z)((0,o.Z)(e),"far",10),(0,u.Z)((0,o.Z)(e),"use_linear",!1),e}return(0,i.Z)(n,[{key:"get_reactive_props",value:function(){return["color","density","near","far","use_linear"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_change",value:function(e,t){switch(e){case"use_linear":var n=this.globals.app;n.background=n.background||this.color,n.fog=this.use_linear?this.fog:this.fog_exp;break;case"color":this.fog_exp.color.set_any(this.color);break;default:this.fog_exp.color.set_any(this.color),this.fog_exp.density=this.density,this.fog_exp.near=this.near,this.fog_exp.far=this.far,this.fog.color.set_any(this.color),this.fog.density=this.density,this.fog.near=this.near,this.fog.far=this.far}}},{key:"on_create",value:function(){this.fog_exp=new d.FogExp2,this.fog=new d.Fog,this.fog_exp.color.set_any(this.color),this.fog_exp.density=this.density,this.fog_exp.near=this.near,this.fog_exp.far=this.far,this.fog.color.set_any(this.color),this.fog.density=this.density,this.fog.near=this.near,this.fog.far=this.far}},{key:"on_enable",value:function(){var e=this.globals.app;e.background=e.background||this.color,e.fog=this.fog_exp}},{key:"on_tick",value:function(e){}}]),n}(h.Z);p.DEFAULT={color:"#1f3556",density:.035},t.default=p},9755:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=u(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"offset",[0,0,0]),e}return(0,i.Z)(n,[{key:"on_create",value:function(){}},{key:"handle_pointermove",value:function(e){var t=this.globals.camera.screen_to_world(e.pointer_a);this.object.position=[t[0]+this.offset[0],t[1]+this.offset[1],t[2]+this.offset[2]]}}]),n}(n(445).Z);t.default=h},5933:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942);function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var h=function(e){(0,a.Z)(n,e);var t=u(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"offset",[0,0,0]),e}return(0,i.Z)(n,[{key:"on_create",value:function(){this.log("FollowTarget","component created")}},{key:"on_tick",value:function(e){this.target&&(this.game_object.position[0]=this.target.position.x+this.offset[0],this.game_object.position[1]=this.target.position.y+this.offset[1],this.game_object.position[2]=this.target.position.z+this.offset[2],this.game_object.position=this.game_object.position)}}]),n}(n(445).Z);t.default=h},6557:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5785),i=n(5671),o=n(3144),a=n(7326),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017)),f=n(5140);var p=function(e){return(null==e?0:e.length)?(0,f.Z)(e,1):[]};function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var _={sphere:[],box:[],plane:[]},y={position:[0,0,0],rotation:[0,0,0],color:"#ff00ff",wireframe:!1},b=function(e){(0,s.Z)(n,e);var t=v(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,u.Z)((0,a.Z)(e),"zero_axes_helper_a",void 0),(0,u.Z)((0,a.Z)(e),"zero_axes_helper_b",void 0),(0,u.Z)((0,a.Z)(e),"gizmo_draw_data",void 0),(0,u.Z)((0,a.Z)(e),"gizmo_render_data",void 0),(0,u.Z)((0,a.Z)(e),"gizmo_objects_list",void 0),(0,u.Z)((0,a.Z)(e),"tick_rate",30),e.gizmo_objects_list=[],e.gizmo_draw_data=[],e.gizmo_render_data=[],e.meta.layers={gizmo:!0},e}return(0,o.Z)(n,[{key:"on_create",value:function(){h.Z.add_traversal_method("component","gizmo_draw",!0);var e=this.zero_axes_helper_a=new d.AxesHelper(99999);e.material.depthWrite=!1,e.material.depthTest=!1,e.material.transparent=!0,e.material.fog=!1,e.renderOrder=1;var t=this.zero_axes_helper_b=new d.AxesHelper(99999);t.rotation.y=Math.PI,t.scale.y=-1,t.material.depthWrite=!1,t.material.depthTest=!1,t.material.transparent=!0,t.material.fog=!1,t.renderOrder=1,e.setColors("#f44336","#8bc34a","#00bcd4"),t.setColors("#f43659","#4caf61","#2196f3")}},{key:"on_tick",value:function(e){var t=this,n=this.find_component_of_type("Renderer");if(n&&!0===n.rendering_layers.gizmo){this.gizmo_objects_list.forEach((function(e){var t=e.gizmo_type;_[t].push(e)}));var r=[],i=[],o=this.globals.app.gizmo_draw();(o=p(o)).forEach((function(e,n){var o=t.get_gizmo_object_render_data(e,n);i.push(o),r.push({object:o})})),this.gizmo_objects_list=i,this.gizmo_render_data=r}}},{key:"get_gizmo_object_render_data",value:function(e,t){var n,i,o=(e=g(g({},y),e)).type,a=_[o].pop();if(!a)switch(o){case"sphere":(a=new d.Mesh(new d.SphereBufferGeometry(1,16,8),new d.MeshBasicMaterial({color:16711680,transparent:!0}))).gizmo_type="sphere";break;case"box":(a=new d.Mesh(new d.BoxBufferGeometry(1,1,1),new d.MeshBasicMaterial({color:16711680,transparent:!0}))).gizmo_type="box";break;case"plane":(a=new d.Mesh(new d.SphereBufferGeometry(1,1,1),new d.MeshBasicMaterial({color:16711680,transparent:!0}))).gizmo_type="plane"}switch(o){case"sphere":a.scale.setScalar(e.radius||1);break;case"box":a.scale.set(e.width||0,e.height||0,e.depth||0);break;case"plane":a.scale.set(e.width||0,e.height||0)}return a.material.opacity=e.opacity,a.material.wireframe=e.wireframe,a.material.color.set_any(e.color),(n=a.position).set.apply(n,(0,r.Z)(e.position)),(i=a.rotation).set.apply(i,(0,r.Z)(e.rotation)),a}},{key:"get_gizmo_render_data",value:function(){return[{object:this.zero_axes_helper_a},{object:this.zero_axes_helper_b}].concat((0,r.Z)(this.gizmo_render_data))}}]),n}(h.Z);b.DEFAULT={};var x=b},8576:function(e,t,n){"use strict";n.r(t);var r=n(5785),i=n(5671),o=n(3144),a=n(7326),s=n(1752),c=n(136),l=n(2963),u=n(1120),h=n(4942),d=n(7465),f=n(7845),p=n(5017),m=n(5840),g=n(3836),v=n(6423),_=n(1358),y=(n(1489),n(9791)),b=n(8430);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var w=new p.Raycaster,A=new p.Vector2,T=function(e){(0,c.Z)(n,e);var t=x(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,h.Z)((0,a.Z)(e),"detection_mode","raycast"),(0,h.Z)((0,a.Z)(e),"raycasting",!0),(0,h.Z)((0,a.Z)(e),"pointer_position",void 0),(0,h.Z)((0,a.Z)(e),"pointer_position_abs",void 0),(0,h.Z)((0,a.Z)(e),"intersected_renderables_changed",!1),(0,h.Z)((0,a.Z)(e),"pointer_position_changed",!0),(0,h.Z)((0,a.Z)(e),"tick_rate",30),(0,h.Z)((0,a.Z)(e),"keys_prevent_default",!1),(0,h.Z)((0,a.Z)(e),"keys_stop_propagation",!1),(0,h.Z)((0,a.Z)(e),"show_debug_layer",!1),(0,h.Z)((0,a.Z)(e),"prev_camera_matrix",void 0),(0,h.Z)((0,a.Z)(e),"user_input_dom",void 0),(0,h.Z)((0,a.Z)(e),"colorid_changed",!1),(0,h.Z)((0,a.Z)(e),"colorid_current_collider",void 0),(0,h.Z)((0,a.Z)(e),"colorid_render_target_state",void 0),(0,h.Z)((0,a.Z)(e),"colorid_debug_plane",void 0),(0,h.Z)((0,a.Z)(e),"colorid_resolution",.25),(0,h.Z)((0,a.Z)(e),"colliders_state",void 0),(0,h.Z)((0,a.Z)(e),"intersected_renderables",void 0),(0,h.Z)((0,a.Z)(e),"intersected_colliders",void 0),(0,h.Z)((0,a.Z)(e),"keys",void 0),e.keys={},e.colliders_state={},e.intersected_renderables=[],e.intersect_colliders=[],e.pointer_position=new p.Vector2(0,0),e.pointer_position_abs=new p.Vector2(0,0),e}return(0,o.Z)(n,[{key:"on_create",value:function(){var e=this;switch(this.user_input_dom=document.createElement("div"),this.user_input_dom.style.width="100%",this.user_input_dom.style.height="100%",this.user_input_dom.style.position="absolute",this.user_input_dom.style.top="0",this.user_input_dom.style.left="0",this.user_input_dom.style.userSelect="none",this.user_input_dom.style.zIndex=" 1",this.user_input_dom.classList.add("user-input-dom"),this.handle_keydown=this.handle_keydown.bind(this),this.handle_keyup=this.handle_keyup.bind(this),this.handle_keypress=this.handle_keypress.bind(this),this.handle_mousemove=this.handle_mousemove.bind(this),this.handle_mouseover=this.handle_mouseover.bind(this),this.handle_mousedown=this.handle_mousedown.bind(this),this.handle_mouseup=this.handle_mouseup.bind(this),this.handle_click=this.handle_click.bind(this),this.handle_mouseout=this.handle_mouseout.bind(this),this.detection_mode){case"colorid":this.setup_colorid();break;case"raycast":this.update_raycast()}this.define_global_var("input-dom",(function(t){return e.user_input_dom}))}},{key:"on_destroy",value:function(){(0,s.Z)((0,u.Z)(n.prototype),"on_destroy",this).apply(this,arguments);try{this.globals.dom.removeChild(this.user_input_dom)}catch(e){this.log("[".concat(e.name,"]: ").concat(e.message))}}},{key:"get_gizmo_render_data",value:function(){return[{object:this.colorid_debug_plane,visible:this.show_debug_layer}]}},{key:"setup_colorid",value:function(){var e=this.colorid_render_target_state=y.default.get_render_target({resolution_scale:this.colorid_resolution,mag_filter:"nearest"});this.colorid_debug_plane=f.default.create_object("FullscreenRect",{map:"rt:".concat(e.id),scale:1,opacity:.5})}},{key:"update_colorid",value:function(){this.colorid_changed=!1;var e=this.globals.camera,t=this.find_component_of_type("Renderer");if(e&&this.colorid_render_target_state.copy_camera(e),t){this.colorid_render_target_state.update_render_list(t,{colorid:!0}),this.colorid_render_target_state.setup_scene(void 0,"#000000");var n=this.colorid_render_target_state.pick(t,this.pointer_position_abs),i=b.default.color_id_get_with_rgb.apply(b.default,(0,r.Z)(n));i&&(i&&!this.colorid_current_collider&&(this.colorid_changed=!0),!i&&this.colorid_current_collider&&(this.colorid_changed=!0),i&&this.colorid_current_collider&&i.collider_id!==this.colorid_current_collider.collider_id&&(this.colorid_changed=!0),this.colorid_current_collider=i)}}},{key:"update_raycast",value:function(e){var t=this,n=this.find_component_of_type("CameraComponent"),r=this.find_component_of_type("Renderer");if(n&&r&&(n.moved||this.pointer_position_changed)){var i=r.get_object_layer_list({raycast:!0});A.x=this.pointer_position.x,A.y=-this.pointer_position.y,w.setFromCamera(A,n.subject);var o;o=w.intersectObjects(i,!0),(0,m.Z)(this.colliders_state,(function(e){return e.changed=!1})),this.intersected_renderables=(0,g.Z)(o,(function(e){return e.object})),this.intersected_colliders=(0,g.Z)(o,(function(e){return e.object.collider}));var a=[];(0,m.Z)(o,(function(e){var n=e.object.collider,r=n.UUID;n.pointer_hovered=!0,a.push(r),t.colliders_state[r]={hovered:!0}})),(0,m.Z)(this.colliders_state,(function(e,n){var r=f.default.components_instances.Collider[n];r&&a.indexOf(n)<0&&(r.pointer_hovered=!1,t.colliders_state[n].hovered=!1)}))}}},{key:"on_enable",value:function(){window.addEventListener("keydown",this.handle_keydown),window.addEventListener("keyup",this.handle_keyup),window.addEventListener("keypress",this.handle_keypress),window.addEventListener("mousemove",this.handle_mousemove),window.addEventListener("mouseover",this.handle_mouseover),window.addEventListener("mousedown",this.handle_mousedown),window.addEventListener("mouseup",this.handle_mouseup),window.addEventListener("click",this.handle_click),window.addEventListener("mouseout",this.handle_mouseout)}},{key:"on_disable",value:function(){window.removeEventListener("keydown",this.handle_keydown),window.removeEventListener("keyup",this.handle_keyup),window.removeEventListener("keypress",this.handle_keypress),window.removeEventListener("mousemove",this.handle_mousemove),window.removeEventListener("mouseover",this.handle_mouseover),window.removeEventListener("mousedown",this.handle_mousedown),window.removeEventListener("mouseup",this.handle_mouseup),window.removeEventListener("click",this.handle_click),window.removeEventListener("mouseout",this.handle_mouseout)}},{key:"on_tick",value:function(e){switch(this.detection_mode){case"colorid":this.update_colorid();break;case"raycast":this.update_raycast()}this.pointer_position_changed=!1}},{key:"get_key_alias",value:function(e){return e.toLowerCase().replace(/key|digit/gim,"")}},{key:"has_combination",value:function(e){var t=!0,n=(0,v.Z)(this.keys,"".concat(e.toLowerCase()));if(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];i.forEach((function(e){!0!==n[e]&&(t=!1)}))}else t=!1;return t}},{key:"is_keydown",value:function(e){return(0,v.Z)(this.keys,"".concat(e.toLowerCase(),".down"))||!1}},{key:"is_keyup",value:function(e){return(0,v.Z)(this.keys,"".concat(e.toLowerCase(),".up"))||!1}},{key:"is_keypress",value:function(e){return(0,v.Z)(this.keys,"".concat(e.toLowerCase(),".press"))||!1}},{key:"handle_keydown",value:function(e){var t=this.get_key_alias(e.code);this.keys_prevent_default&&e.preventDefault(),this.keys_stop_propagation&&e.stopPropagation(),(0,_.Z)(this.keys,"".concat(t,".press"),!1),(0,_.Z)(this.keys,"".concat(t,".up"),!1),(0,_.Z)(this.keys,"".concat(t,".down"),!0),(0,_.Z)(this.keys,"".concat(t,".shift"),e.shiftKey),(0,_.Z)(this.keys,"".concat(t,".alt"),e.altKey),(0,_.Z)(this.keys,"".concat(t,".ctrl"),e.ctrlKey),(0,_.Z)(this.keys,"".concat(t,".meta"),e.metaKey)}},{key:"handle_keyup",value:function(e){var t=this.get_key_alias(e.code);this.keys_prevent_default&&e.preventDefault(),this.keys_stop_propagation&&e.stopPropagation(),(0,_.Z)(this.keys,"".concat(t,".press"),!1),(0,_.Z)(this.keys,"".concat(t,".down"),!1),(0,_.Z)(this.keys,"".concat(t,".up"),!0),(0,_.Z)(this.keys,"".concat(t,".shift"),e.shiftKey),(0,_.Z)(this.keys,"".concat(t,".alt"),e.altKey),(0,_.Z)(this.keys,"".concat(t,".ctrl"),e.ctrlKey),(0,_.Z)(this.keys,"".concat(t,".meta"),e.metaKey)}},{key:"handle_keypress",value:function(e){var t=this.get_key_alias(e.code);this.keys_prevent_default&&e.preventDefault(),this.keys_stop_propagation&&e.stopPropagation(),(0,_.Z)(this.keys,"".concat(t,".up"),!1),(0,_.Z)(this.keys,"".concat(t,".down"),!1),(0,_.Z)(this.keys,"".concat(t,".press"),!0),(0,_.Z)(this.keys,"".concat(t,".shift"),e.shiftKey),(0,_.Z)(this.keys,"".concat(t,".alt"),e.altKey),(0,_.Z)(this.keys,"".concat(t,".ctrl"),e.ctrlKey),(0,_.Z)(this.keys,"".concat(t,".meta"),e.metaKey)}},{key:"equal_with_precise",value:function(e,t,n){return parseFloat(e.toFixed(n))===parseFloat(t.toFixed(n))}},{key:"handle_mousemove",value:function(e){var t=this.globals.dom_rect,n=2*((e.pageX-t.x)/t.width-.5),r=2*((e.pageY-t.y)/t.height-.5);this.pointer_position_changed=!this.equal_with_precise(n,this.pointer_position.x,5)||!this.equal_with_precise(r,this.pointer_position.y,5),this.pointer_position.x=n,this.pointer_position.y=r,this.pointer_position_abs.x=e.pageX-t.x,this.pointer_position_abs.y=e.pageY-t.y}},{key:"handle_mouseover",value:function(e){}},{key:"handle_mousedown",value:function(e){}},{key:"handle_mouseup",value:function(e){}},{key:"handle_click",value:function(e){}},{key:"handle_mouseout",value:function(e){}}]),n}(d.Z);t.default=T},7801:function(e,t,n){"use strict";n.r(t);var r=n(2826),i=n(5785),o=n(5671),a=n(3144),s=n(7326),c=n(1752),l=n(136),u=n(2963),h=n(1120),d=n(4942),f=n(7465),p=(n(7845),n(5017)),m=(n(1489),n(6378)),g=n(3836),v=n(7771),_=n(5108);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var b=n(9328),x=function(e){(0,l.Z)(n,e);var t=y(n);function n(){var e;return(0,o.Z)(this,n),e=t.apply(this,arguments),(0,d.Z)((0,s.Z)(e),"particles_global_size",1),(0,d.Z)((0,s.Z)(e),"particles_size",1),(0,d.Z)((0,s.Z)(e),"particles_start_size",1),(0,d.Z)((0,s.Z)(e),"particles_end_size",0),(0,d.Z)((0,s.Z)(e),"particles_ttl",10),(0,d.Z)((0,s.Z)(e),"particles_blending",1),(0,d.Z)((0,s.Z)(e),"particles_texture","res/retro/flake_a.png"),(0,d.Z)((0,s.Z)(e),"particles_velocity","rand:SphereRandomizer?2.5"),(0,d.Z)((0,s.Z)(e),"particles_velocity_bonus",[0,1,0]),(0,d.Z)((0,s.Z)(e),"particles_gravity",-10),(0,d.Z)((0,s.Z)(e),"particles_start_alpha",1),(0,d.Z)((0,s.Z)(e),"particles_start_color","rand:ColorsRandomizer"),(0,d.Z)((0,s.Z)(e),"particles_start_color_change_at",0),(0,d.Z)((0,s.Z)(e),"particles_start_alpha_change_at",.5),(0,d.Z)((0,s.Z)(e),"particles_end_color","rand:ColorsRandomizer"),(0,d.Z)((0,s.Z)(e),"particles_end_alpha",0),(0,d.Z)((0,s.Z)(e),"particles_acceleration",[0,10,0]),(0,d.Z)((0,s.Z)(e),"particles_rotation",0),(0,d.Z)((0,s.Z)(e),"particles_rotation_speed",Math.PI/2),(0,d.Z)((0,s.Z)(e),"particles_offset",[-.1,.1,.1]),(0,d.Z)((0,s.Z)(e),"system_particles_count",1e3),(0,d.Z)((0,s.Z)(e),"system_perspective",!0),(0,d.Z)((0,s.Z)(e),"system_speed",1),(0,d.Z)((0,s.Z)(e),"emitters",void 0),(0,d.Z)((0,s.Z)(e),"tick_rate",30),(0,d.Z)((0,s.Z)(e),"particle_system",void 0),e.emitters=[{on_spawn_burst:0,on_interval:"rand:MinMaxRandomizer?0;5",interval:"rand:MinMaxRandomizer?0;0.25"}],e}return(0,a.Z)(n,[{key:"get_reactive_props",value:function(){return["particles_global_size","particles_start_size","particles_end_size","particles_ttl","particles_blending","particles_texture","particles_velocity","particles_velocity_bonus","particles_gravity","particles_start_alpha","particles_start_color","particles_start_color_change_at","particles_start_alpha_change_at","particles_end_color","particles_end_alpha","particles_acceleration","particles_rotation","particles_rotation_speed","particles_offset","system_particles_count","system_perspective","system_speed","emitters"].concat((0,c.Z)((0,h.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,c.Z)((0,h.Z)(n.prototype),"on_update",this).call(this,e),_.log(this.particles_velocity);try{e.forEach((function(e){if("particles_velocity"===e)t.tools.type.is_string(t.particles_velocity)&&(t.particles_velocity=t.get_value(t.particles_velocity))}))}catch(e){this.error(e)}}},{key:"get_value",value:function(e){var t=this;if((0,m.Z)(e)){if(e.startsWith("rand:")){var n=(e=e.replace("rand:","")).split("?")[0],o=e.split("?")[1];o?(o=o.split(";"),o=(0,g.Z)(o,(function(e){return JSON.parse(e)}))):o=[];var a=(0,r.Z)(b.Randomizers[n],(0,i.Z)((0,g.Z)(o,(function(e){return _.log(e),t.get_value(e)}))));return _.log(e,a),a}return e}return(0,v.Z)(e)&&3===e.length?(0,r.Z)(p.Vector3,(0,i.Z)(e)):e}},{key:"get_emitters",value:function(){var e=this,t=[];return this.emitters.forEach((function(n){t.push(new b.Emitter({onInterval:e.get_value(n.on_interval),interval:e.get_value(n.interval),onSpawnBurst:e.get_value}))})),t}},{key:"on_create",value:function(){this.particle_system=new b.ParticlesSystem({particles:{size:this.get_value(this.particles_size),globalSize:this.get_value(this.particles_global_size),startSize:this.get_value(this.particles_start_size),endSize:this.get_value(this.particles_end_size),ttl:this.get_value(this.particles_ttl),blending:this.get_value(this.particles_blending),texture:this.get_value(this.particles_texture),velocity:this.get_value(this.particles_velocity),velocityBonus:this.get_value(this.particles_velocity_bonus),gravity:this.get_value(this.particles_gravity),startAlpha:this.get_value(this.particles_start_alpha),startColor:this.get_value(this.particles_start_color),startAlphaChangeAt:this.get_value(this.particles_start_alpha_change_at),startColorChangeAt:this.get_value(this.particles_start_color_change_at),endColor:this.get_value(this.particles_end_color),endAlpha:this.get_value(this.particles_end_alpha),acceleration:this.get_value(this.particles_acceleration),rotation:this.get_value(this.particles_rotation),rotationSpeed:this.get_value(this.particles_rotation_speed),offset:this.get_value(this.particles_offset)},system:{perspective:this.get_value(this.system_perspective),particlesCount:this.get_value(this.system_particles_count),emitters:this.get_emitters(this.system_emitters),speed:this.get_value(this.system_speed),depthWrite:!1,depthTest:!1}});this.subject=this.particle_system.particleSystem}},{key:"get_render_data",value:function(){return{object:this.subject,parent:this.game_object}}},{key:"on_tick",value:function(e){this.particle_system.update()}}]),n}(f.Z);t.default=x},7724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return L}});var r=n(5785),i=n(7326),o=n(1752),a=n(4942),s=n(3144),c=n(5671),l=n(136),u=n(2963),h=n(1120),d=n(445),f=n(5017),p=n(3882);var m=n(5108);class ProgressiveLightMap{constructor(e,t=1024){this.renderer=e,this.res=t,this.lightMapContainers=[],this.compiled=!1,this.scene=new f.Scene,this.scene.background=null,this.tinyTarget=new f.WebGLRenderTarget(1,1),this.buffer1Active=!1,this.firstUpdate=!0,this.warned=!1;const n=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?f.HalfFloatType:f.FloatType;this.progressiveLightMap1=new f.WebGLRenderTarget(this.res,this.res,{type:n}),this.progressiveLightMap2=new f.WebGLRenderTarget(this.res,this.res,{type:n}),this.uvMat=new f.MeshPhongMaterial,this.uvMat.uniforms={},this.uvMat.onBeforeCompile=e=>{e.vertexShader=`\n\t\t\t\t#define USE_LIGHTMAP\n\t\t\t\t${e.vertexShader.replace("/*{INJECT_HERE*/","gl_Position = vec4((uv2 - 0.5) * 2.0, 1.0, 1.0)")}\n\n\t\t\t`;e.fragmentShader.indexOf("void main() {");e.fragmentShader=`\n\t\t\t\tvarying vec2 vUv2;\n\t\t\t\t${e.fragmentShader.replace("/*{INJECT_PARS}*/","uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;").replace("/*{INJECT_HERE}*/","\n\t\t\t\tvec3 texelOld = texture2D(previousShadowMap, vUv2).rgb;\n\t\t\t\tgl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/averagingWindow);\n\t\t\t")}\n\t\t\t`,e.uniforms.previousShadowMap={value:this.progressiveLightMap1.texture},e.uniforms.averagingWindow={value:100},this.uvMat.uniforms=e.uniforms,this.uvMat.userData.shader=e,this.compiled=!0}}addObjectsToLightMap(e){this.uv_boxes=[];const t=3/this.res;for(let n=0;n<e.length;n++){const r=e[n];r.geometry&&r.material&&(r.geometry.hasAttribute("uv")&&(null==this.blurringPlane&&this._initializeBlurPlane(this.res,this.progressiveLightMap1),!1===r.castShadow&&!1===r.receiveShadow||(Array.isArray(r.material)?r.material.forEach((e=>{e.lightMap=this.progressiveLightMap2.texture,e.dithering=!0})):(r.material.lightMap=this.progressiveLightMap2.texture,r.material.dithering=!0),!0!==r._lightmap_uvbox_processed?(this.uv_boxes.push({w:1+2*t,h:1+2*t,index:n,uv_box_processed:!1,object:r}),this.lightMapContainers.push({basicMat:r.material,object:r})):this.uv_boxes.push({w:1+2*t,h:1+2*t,index:n,uv_box_processed:!0,object:r}),this.compiled=!1)))}const n=function(e){let t=0,n=0;for(const r of e)t+=r.w*r.h,n=Math.max(n,r.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const t of e)for(let e=r.length-1;e>=0;e--){const n=r[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,o=Math.max(o,t.y+t.h),i=Math.max(i,t.x+t.w),t.w===n.w&&t.h===n.h){const t=r.pop();e<r.length&&(r[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(r.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}(this.uv_boxes);this.uv_boxes.forEach((r=>{if(r.object._lightmap_uvbox_processed)return;const i=e[r.index].geometry.getAttribute("uv").clone();m.log(i);for(let e=0;e<i.array.length;e+=i.itemSize)i.array[e]=(i.array[e]+r.x+t)/n.w,i.array[e+1]=(i.array[e+1]+r.y+t)/n.h;e[r.index].geometry.setAttribute("uv2",i),e[r.index].geometry.getAttribute("uv2").needsUpdate=!0,r.processed=r.object._lightmap_uvbox_processed=!0}))}update(e,t=100,n=!0){if(null==this.blurringPlane)return;const r=this.renderer.getRenderTarget();this.blurringPlane.visible=n;for(let e=0;e<this.lightMapContainers.length;e++)this.lightMapContainers[e].object.oldScene=this.lightMapContainers[e].object.parent,this.scene.attach(this.lightMapContainers[e].object);this.firstUpdate&&(this.renderer.setRenderTarget(this.tinyTarget),this.renderer.render(this.scene,e),this.firstUpdate=!1);for(let e=0;e<this.lightMapContainers.length;e++)this.uvMat.uniforms.averagingWindow={value:t},this.lightMapContainers[e].object.material=this.uvMat,this.lightMapContainers[e].object.oldFrustumCulled=this.lightMapContainers[e].object.frustumCulled,this.lightMapContainers[e].object.frustumCulled=!1;const i=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,o=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1;this.renderer.setRenderTarget(i),this.uvMat.uniforms.previousShadowMap={value:o.texture},this.blurringPlane.material.uniforms.previousShadowMap={value:o.texture},this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e);for(let e=0;e<this.lightMapContainers.length;e++)this.lightMapContainers[e].object.frustumCulled=this.lightMapContainers[e].object.oldFrustumCulled,this.lightMapContainers[e].object.material=this.lightMapContainers[e].basicMat,this.lightMapContainers[e].object.oldScene.attach(this.lightMapContainers[e].object);this.renderer.setRenderTarget(r)}showDebugLightmap(e,t){0!=this.lightMapContainers.length?(null==this.labelMesh&&(this.labelMaterial=new f.MeshBasicMaterial({map:this.progressiveLightMap1.texture,side:f.DoubleSide}),this.labelPlane=new f.PlaneGeometry(100,100),this.labelMesh=new f.Mesh(this.labelPlane,this.labelMaterial),this.labelMesh.position.y=250,this.lightMapContainers[0].object.parent.add(this.labelMesh)),null!=t&&this.labelMesh.position.copy(t),this.labelMesh.visible=e):this.warned||(m.warn("Call this after adding the objects!"),this.warned=!0)}_initializeBlurPlane(e,t=null){const n=new f.MeshBasicMaterial;n.uniforms={previousShadowMap:{value:null},pixelOffset:{value:1/e},polygonOffset:!0,polygonOffsetFactor:-1,polygonOffsetUnits:3},n.onBeforeCompile=r=>{r.vertexShader=`\n\t\t\t\t#define USE_UV\n\t\t\t\t${r.vertexShader.replace("/*{INJECT_HERE}*/","gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0);")}\n\t\t\t`;r.fragmentShader.indexOf("void main() {");r.fragmentShader=`\n\t\t\t\t#define USE_UV\n\t\t\t\t${r.fragmentShader.replace("/*{INJECT_PARS}*/","uniform sampler2D previousShadowMap;\n\tuniform float pixelOffset;").replace("/*{INJECT_HERE}*/","\n\t\t\t\tgl_FragColor.rgb = (\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2( pixelOffset,  0.0        )).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2( 0.0        ,  pixelOffset)).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2( 0.0        , -pixelOffset)).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2(-pixelOffset,  0.0        )).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2( pixelOffset,  pixelOffset)).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2(-pixelOffset,  pixelOffset)).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2( pixelOffset, -pixelOffset)).rgb +\n\t\t\t\t\ttexture2D(previousShadowMap, vUv + vec2(-pixelOffset, -pixelOffset)).rgb\n\t\t\t\t)/8.0;\n\t\t\t")}\n\n\n\t\t\t`,r.uniforms.previousShadowMap={value:t.texture},r.uniforms.pixelOffset={value:.5/e},n.uniforms=r.uniforms,n.userData.shader=r,this.compiled=!0},this.blurringPlane=new f.Mesh(new f.PlaneBufferGeometry(1,1),n),this.blurringPlane.name="Blurring Plane",this.blurringPlane.frustumCulled=!1,this.blurringPlane.renderOrder=0,this.blurringPlane.material.depthWrite=!1,this.scene.add(this.blurringPlane)}}var g=n(290),v=n(111),_=n(7226),y=n(7771),b=n(3836),x=n(3441);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var T=new f.Vector3;f.Object3D.matrix_cache={},f.Object3D.prototype.updateMatrix=function(){var e=[this.position.x,this.position.y,this.position.z,this.rotation.x,this.rotation.y,this.rotation.z,this.scale.x,this.scale.y,this.scale.z].join("|");f.Object3D.matrix_cache[this.id]!==e&&(this.matrix.compose(this.position,this.quaternion,this.scale),f.Object3D.matrix_cache[this.id]=e),this.matrixWorldNeedsUpdate=!0},f.Object3D.prototype.updateMatrixWorld=function(e){if(this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldNeedsUpdate||e){var t=this.matrix,n=void 0;this.parent_matrix_world?n=this.parent_matrix_world:this.parent&&(n=this.parent.matrixWorld),n?this.matrixWorld.multiplyMatrices(n,t):this.matrixWorld.copy(t),this.matrixWorldNeedsUpdate=!1,e=!0}this.children.forEach((function(t){return t.updateMatrixWorld(e)}))};var M=x.c.prototype.render;x.c.prototype.render=function(e,t,n){var r=+new Date;this.prev_render_time=this.prev_render_time||r,r-this.prev_render_time>100&&(this.prev_render_time=r,M.call(this,e,t,n))};var E=function(e){(0,l.Z)(n,e);var t=A(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(f.Scene),S={desktop:{antialias:!0,alpha:!1,stencil:!0,depth:!0},smartphone:{antialias:!1,alpha:!1,powerPreference:"high-performance"}},R=function(e){(0,l.Z)(n,e);var t=A(n);function n(){var e;return(0,c.Z)(this,n),e=t.apply(this,arguments),(0,a.Z)((0,i.Z)(e),"postfx",!0),(0,a.Z)((0,i.Z)(e),"custom_render_function",void 0),(0,a.Z)((0,i.Z)(e),"clear_depth",!0),(0,a.Z)((0,i.Z)(e),"clear_stencil",!0),(0,a.Z)((0,i.Z)(e),"clear_color",!0),(0,a.Z)((0,i.Z)(e),"auto_clear",!0),(0,a.Z)((0,i.Z)(e),"use_progressive_lightmap",!1),(0,a.Z)((0,i.Z)(e),"use_postfx",void 0),(0,a.Z)((0,i.Z)(e),"use_fog",void 0),(0,a.Z)((0,i.Z)(e),"correct_lights",!0),(0,a.Z)((0,i.Z)(e),"current_matcap_id",1),(0,a.Z)((0,i.Z)(e),"shadows_enabled",!0),(0,a.Z)((0,i.Z)(e),"tick_rate",((0,g.Z)(5),5)),(0,a.Z)((0,i.Z)(e),"shadowmap_fps",15),(0,a.Z)((0,i.Z)(e),"useOptimizations",!0),(0,a.Z)((0,i.Z)(e),"canvas",null),(0,a.Z)((0,i.Z)(e),"pixel_ratio",1),(0,a.Z)((0,i.Z)(e),"render_scene",void 0),(0,a.Z)((0,i.Z)(e),"render_items_count",0),(0,a.Z)((0,i.Z)(e),"composer",void 0),(0,a.Z)((0,i.Z)(e),"resolution",void 0),(0,a.Z)((0,i.Z)(e),"progressive_lightmap",void 0),(0,a.Z)((0,i.Z)(e),"progressive_lightmap_dirlight",void 0),(0,a.Z)((0,i.Z)(e),"rendering_scale",1),(0,a.Z)((0,i.Z)(e),"just_rendered",!0),(0,a.Z)((0,i.Z)(e),"current_override_material",null),(0,a.Z)((0,i.Z)(e),"override_normal_material",new f.MeshNormalMaterial),(0,a.Z)((0,i.Z)(e),"override_depth_material",new f.MeshDepthMaterial),(0,a.Z)((0,i.Z)(e),"override_distance_material",new f.MeshDistanceMaterial),(0,a.Z)((0,i.Z)(e),"override_wireframe_material",new f.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1,fog:!1})),(0,a.Z)((0,i.Z)(e),"override_matcap_material",new f.MeshMatcapMaterial({fog:!1,matcap:"res/retro/matcap_texture/matcap (1).png"})),(0,a.Z)((0,i.Z)(e),"object_layers",void 0),(0,a.Z)((0,i.Z)(e),"zero_object",new f.Object3D),(0,a.Z)((0,i.Z)(e),"original_threejs_webgl_shadowmap_render",void 0),(0,a.Z)((0,i.Z)(e),"prev_shadowmap_render_time",+new Date),e.check_size=(0,v.Z)(e.check_size.bind((0,i.Z)(e)),250),e}return(0,s.Z)(n,[{key:"on_create",value:function(){if(this.useOptimizations){this.pixel_ratio=Math.min(2,["android","macos","osc","mac","linux"].indexOf(p.Z.os_name)>-1?Math.min(1.25,window.devicePixelRatio):window.devicePixelRatio)}this.resolution=new f.Vector2(1,1),this.object_layers={},this.rendering_layers={rendering:!0,gizmo:!1};this.render_scene=new E;var e=this.renderer=this.globals.renderer=new f.WebGLRenderer(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({antialias:!1,alpha:!1,preserveDrawingBuffer:!1,logarithmicDepthBuffer:!1,stencil:this.clear_stencil,depth:this.clear_depth},S[p.Z.device_type]));this.tools.device.is_mobile&&this.tools.html.set_style(e.domElement,{imageRendering:"pixelated"}),this.setup_progressive_lightmap(),this.define_global_var("webgl_capabilities",(function(t){return e.capabilities})),e.toneMappingExposure=2,e.setClearAlpha(1),e.setSize(1e3,1e3),e.physicallyCorrectLights=this.correct_lights,this.globals.transparent_background&&e.setClearColor(0,0),e.shadowMap.enabled=this.shadows_enabled&&!p.Z.is_mobile,e.shadowMap.type=f.PCFSoftShadowMap,e.shadowMap.autoUpdate=!1;this.original_threejs_webgl_shadowmap_render=e.shadowMap.render;e.shadowMap.render=this.render_shadowmap.bind(this),this.globals.uniforms.pixel_ratio.value=this.pixel_ratio,this.update_resolution_scale(),this.canvas=this.globals.canvas=this.renderer.domElement,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.width="100%",this.canvas.style.height="100%",this.handle_mousemove=this.handle_mousemove.bind(this),document.body.addEventListener("mousemove",this.handle_mousemove)}},{key:"get_reactive_props",value:function(){return["clear_stencil","clear_depth","shadows_enabled","tonemapping","rendering_scale"].concat((0,o.Z)((0,h.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"update_resolution_scale",value:function(){this.renderer.setPixelRatio(this.pixel_ratio*this.rendering_scale)}},{key:"on_update",value:function(e){var t=this;e.forEach((function(e){switch(e){case"rendering_scale":break;case"clear_depth":t.renderer.autoClearDepth=t.clear_depth;break;case"clear_stencil":t.renderer.autoClearStencil=t.clear_stencil;break;case"clear_color":t.renderer.autoClearColor=t.clear_color;break;case"auto_clear":t.renderer.autoClear=t.auto_clear;break;case"shadows_enabled":t.renderer.shadowMap.enabled=t.shadows_enabled&&!p.Z.is_mobile}}))}},{key:"capabilities",get:function(){return this.renderer.capabilities}},{key:"compile",value:function(){this.update_render_scene();var e=this.find_component_of_type("CameraComponent").subject;e&&this.renderer.compile(this.render_scene,e)}},{key:"handle_mousemove",value:function(e){var t=(e.pageX-this.globals.dom_rect.left)/this.canvas.width,n=(e.pageY-this.globals.dom_rect.top)/this.canvas.height;this.globals.uniforms.mouse.value.x=t,this.globals.uniforms.mouse.value.y=n}},{key:"on_tick",value:function(e){this.just_rendered&&(this.just_rendered=!1,this.update_object_layers(),this.use_progressive_lightmap&&this.update_progressive_lightmap(),this.check_size(),this.render_list=this.get_rendering_list())}},{key:"on_destroy",value:function(){(0,o.Z)((0,h.Z)(n.prototype),"on_destroy",this).apply(this,arguments),this.raf_loop&&this.raf_loop.stop()}},{key:"on_enable",value:function(){this.globals.dom.appendChild(this.renderer.domElement);var e=this.find_component_of_type("ClockComponent");this.raf_loop=e.create(this.render.bind(this))}},{key:"update_object_layers",value:function(){var e=this,t=this.object_layers={};this.globals.app.traverse_components((function(n,r){if(n.enabled){var i=[],o=n.is_scene_component?n.get_render_data():[],a=n.get_gizmo_render_data();(i=(i=i.concat(o)).concat(a)).forEach((function(r,i){if((0,_.Z)(r)){var o=(0,_.Z)(r.layers)?r.layers:n.meta.layers;for(var a in o)if(!1!==o[a]&&r.object&&!1!==r.visible){t[a]=t[a]||[];var s=r.parent||e.zero_object;s.is_game_object&&(s=s.transform),r.object.parent_matrix_world=s.matrixWorld,r.object.parent=e.render_scene,t[a].push(r)}}}))}}))}},{key:"get_object_layer",value:function(e){var t=[],n=this.object_layers,r={};for(var i in e){e[i]&&(0,y.Z)(n[i])&&n[i].forEach((function(e){var n=e.object;!0!==r[n.uuid]&&(r[n.uuid]=!0,t.push(e))}))}return t}},{key:"get_object_layer_list",value:function(e){return(0,b.Z)(this.get_object_layer(e),(function(e){return e.object}))}},{key:"get_rendering_list",value:function(){return this.get_object_layer_list(this.rendering_layers)}},{key:"update_render_scene",value:function(){if(void 0!==this.render_list){var e=this.globals.app;!1!==this.use_fog?this.render_scene.fog=e.fog:this.render_scene.fog=null,this.render_scene.background=e.background||null,this.render_scene.refraction_map=e.refraction_map||null,this.render_scene.environment=e.environment||null,this.render_scene.children=this.render_list,this.render_items_count=this.render_list.length,this.render_scene.updateMatrixWorld()}}},{key:"update_progressive_lightmap",value:function(){var e=[];this.render_scene.traverse((function(t){t.isMesh&&e.push(t)}));var t,n=this.find_component_of_type("Sun");n&&((t=this.progressive_lightmap_dirlight.position).set.apply(t,(0,r.Z)(n.position)),this.progressive_lightmap_dirlight.intensity=n.subject.intensity);this.progressive_lightmap.addObjectsToLightMap(e)}},{key:"setup_progressive_lightmap",value:function(){var e=this.renderer;this.progressive_lightmap=new ProgressiveLightMap(e,1024);var t=this.progressive_lightmap_dirlight=new f.DirectionalLight(16777215,1);t.castShadow=!0,t.shadow.camera.near=100,t.shadow.camera.far=5e3,t.shadow.camera.right=150,t.shadow.camera.left=-150,t.shadow.camera.top=150,t.shadow.camera.bottom=-150,t.shadow.mapSize.width=512,t.shadow.mapSize.height=512,this.progressive_lightmap.scene.add(this.progressive_lightmap_dirlight)}},{key:"accumulate_progressive_lightmap",value:function(){var e=this.find_component_of_type("CameraComponent");this.progressive_lightmap.update(e.subject,200,!0)}},{key:"add_object_to_lightmap",value:function(e){this.progressive_lightmap.addObjectsToLightMap(e)}},{key:"render",value:function(){var e=this.globals.app,t=this.find_component_of_type("CameraComponent");t&&(this.just_rendered=!0,this.update_render_scene(),e.update_transform(),void 0===this.custom_render_function||!1===this.use_postfx?this.renderer.render(this.render_scene,t.subject):this.custom_render_function(this.render_scene,t.subject))}},{key:"set_render_layer_name",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rendering";switch(e){case"normal":this.current_override_material=this.override_normal_material,this.rendering_layers.normal=!0,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!1;break;case"depth":this.current_override_material=this.override_depth_material,this.rendering_layers.normal=!0,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!1;break;case"distance":this.current_override_material=this.override_distance_material,this.rendering_layers.normal=!0,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!1;break;case"wireframe":this.current_override_material=this.override_wireframe_material,this.rendering_layers.normal=!0,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!1;break;case"matcap":this.current_override_material=this.override_matcap_material;var t=this.current_matcap_id=1+Math.floor(640*Math.random());this.override_matcap_material.matcap="res/retro/matcap_texture/matcap (".concat(t,").png"),this.rendering_layers.normal=!0,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!1;break;case"colorid":this.current_override_material=null,this.rendering_layers.normal=!1,this.rendering_layers.rendering=!1,this.rendering_layers.colorid=!0;break;default:this.current_override_material=null,this.rendering_layers.normal=!1,this.rendering_layers.rendering=!0,this.rendering_layers.colorid=!1}this.render_scene.overrideMaterial=this.current_override_material}},{key:"check_size",value:function(){if(this.globals.dom){var e,t=this.find_component_of_type("CameraComponent");(e=void 0!==this.force_resolution?{x:0,y:0,width:this.force_resolution[0],height:this.force_resolution[1]}:this.globals.dom.getBoundingClientRect()).width===this.globals.dom_rect.width&&e.height===this.globals.dom_rect.height||(this.update_resolution_scale(),this.renderer.setSize(e.width,e.height),this.renderer.getSize(this.globals.uniforms.resolution.value),this.globals.uniforms.resolution2.value.set(1/e.width,1/e.height),this.globals.need_render=!0,this.resolution.set(e.width,e.height),t.aspect=this.globals.uniforms.resolution.value.x/this.globals.uniforms.resolution.value.y),this.globals.dom_rect=e}}},{key:"render_shadowmap",value:function(e,t,n){var r=+new Date;r-this.prev_shadowmap_render_time>1e3/this.shadowmap_fps&&(this.prev_shadowmap_render_time=r,this.original_threejs_webgl_shadowmap_render.call(this.renderer.shadowMap,e,t,n),this.renderer.shadowMap.needsUpdate=!0)}},{key:"get_camera_bounds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.globals.camera;t.getWorldPosition(T);Math.abs(T.z-e),t.fov;var n=t.aspect,r=height*n,i=[T.x-r/2,T.y-height/2,T.x+r/2,T.y+height/2];return i}},{key:"get_frame_image_data",value:function(e){return this.renderer.domElement.toDataURL("image/png")}},{key:"set_background_brightness",value:function(e){this.renderer.webgl_background.set_brightness(e)}},{key:"set_background_tint",value:function(e){this.renderer.webgl_background.set_tint(e)}}]),n}(d.Z),L=R},9518:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(445);n(7845);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"speed",1),(0,l.Z)((0,o.Z)(e),"radius",2),e}return(0,i.Z)(n,[{key:"on_create",value:function(){}},{key:"on_tick",value:function(e){this.game_object.position[0]=Math.sin(+new Date/1e3*this.speed)*this.radius,this.game_object.position[1]=Math.cos(+new Date/1e3*this.speed)*this.radius,this.game_object.position=this.game_object.position}}]),n}(u.Z);t.default=d},1804:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(445);n(7845),n(5017);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=h(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"speed",1),(0,l.Z)((0,o.Z)(e),"axis",new THREE.Vector3(0,0,1)),e}return(0,i.Z)(n,[{key:"on_create",value:function(){}},{key:"on_tick",value:function(e){this.game_object.rotation[0]+=this.axis.x*this.speed,this.game_object.rotation[1]+=this.axis.y*this.speed,this.game_object.rotation[2]+=this.axis.z*this.speed,this.game_object.rotation=this.game_object.rotation}}]),n}(u.Z);t.default=d},9788:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=n(7845),f=n(5017),p=n(5108);class LightProbeGenerator{static fromCubeTexture(e){let t=0;const n=new f.Vector3,r=new f.Vector3,i=new f.Color,o=[0,0,0,0,0,0,0,0,0],a=new f.SphericalHarmonics3,s=a.coefficients;for(let a=0;a<6;a++){const c=e.image[a],l=c.width,u=c.height,h=document.createElement("canvas");h.width=l,h.height=u;const d=h.getContext("2d");d.drawImage(c,0,0,l,u);const p=d.getImageData(0,0,l,u),g=p.data,v=p.width,_=2/v;for(let c=0,l=g.length;c<l;c+=4){i.setRGB(g[c]/255,g[c+1]/255,g[c+2]/255),m(i,e.encoding);const l=c/4,u=(l%v+.5)*_-1,h=1-(Math.floor(l/v)+.5)*_;switch(a){case 0:n.set(-1,h,-u);break;case 1:n.set(1,h,u);break;case 2:n.set(-u,1,-h);break;case 3:n.set(-u,-1,h);break;case 4:n.set(-u,h,1);break;case 5:n.set(u,h,-1)}const d=n.lengthSq(),p=4/(Math.sqrt(d)*d);t+=p,r.copy(n).normalize(),f.SphericalHarmonics3.getBasisAt(r,o);for(let e=0;e<9;e++)s[e].x+=o[e]*i.r*p,s[e].y+=o[e]*i.g*p,s[e].z+=o[e]*i.b*p}}const c=4*Math.PI/t;for(let e=0;e<9;e++)s[e].x*=c,s[e].y*=c,s[e].z*=c;return new f.LightProbe(a)}static fromCubeRenderTarget(e,t){let n=0;const r=new f.Vector3,i=new f.Vector3,o=new f.Color,a=[0,0,0,0,0,0,0,0,0],s=new f.SphericalHarmonics3,c=s.coefficients;for(let s=0;s<6;s++){const l=t.width,u=new Uint8Array(l*l*4);e.readRenderTargetPixels(t,0,0,l,l,u,s);const h=2/l;for(let e=0,d=u.length;e<d;e+=4){o.setRGB(u[e]/255,u[e+1]/255,u[e+2]/255),m(o,t.texture.encoding);const d=e/4,p=(d%l+.5)*h-1,g=1-(Math.floor(d/l)+.5)*h;switch(s){case 0:r.set(1,g,-p);break;case 1:r.set(-1,g,p);break;case 2:r.set(p,1,-g);break;case 3:r.set(p,-1,g);break;case 4:r.set(p,g,1);break;case 5:r.set(-p,g,-1)}const v=r.lengthSq(),_=4/(Math.sqrt(v)*v);n+=_,i.copy(r).normalize(),f.SphericalHarmonics3.getBasisAt(i,a);for(let e=0;e<9;e++)c[e].x+=a[e]*o.r*_,c[e].y+=a[e]*o.g*_,c[e].z+=a[e]*o.b*_}}const l=4*Math.PI/n;for(let e=0;e<9;e++)c[e].x*=l,c[e].y*=l,c[e].z*=l;return new f.LightProbe(s)}}function m(e,t){switch(t){case f.sRGBEncoding:e.convertSRGBToLinear();break;case f.LinearEncoding:break;default:p.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.")}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var v=function(e){(0,s.Z)(n,e);var t=g(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"bakground","#ffffff"),(0,u.Z)((0,o.Z)(e),"color","#ffffff"),(0,u.Z)((0,o.Z)(e),"cubemap",void 0),(0,u.Z)((0,o.Z)(e),"cubemap_format",void 0),(0,u.Z)((0,o.Z)(e),"texture",void 0),(0,u.Z)((0,o.Z)(e),"light_probe_enabled",!1),(0,u.Z)((0,o.Z)(e),"light_probe_intensity",.1),(0,u.Z)((0,o.Z)(e),"scene_background",void 0),(0,u.Z)((0,o.Z)(e),"refraction_map",void 0),(0,u.Z)((0,o.Z)(e),"light_probe",void 0),(0,u.Z)((0,o.Z)(e),"light_probe_updated",!1),e}return(0,i.Z)(n,[{key:"get_reactive_props",value:function(){return["cubemap","light_probe_intensity","light_probe_enabled",(0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this)]}},{key:"on_update",value:function(e){var t=this;(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){switch(e){case"cubemap":t.light_probe_updated=!1;var n=t.globals.app;n.background=t.scene_background=n.environment=t.create_background(t.color,t.cubemap,t.texture,f.CubeRefractionMapping,(function(e){t.light_probe_enabled&&(t.light_probe.copy(LightProbeGenerator.fromCubeTexture(t.scene_background)),t.light_probe_updated=!0,t.log("lightprobe updated"))})),n.refraction_map=t.refraction_map=n.environment=t.create_background(t.color,t.cubemap,t.texture,f.CubeRefractionMapping);break;case"light_probe_intensity":t.light_probe.intensity=t.light_probe_intensity;break;case"light_probe_enabled":t.light_probe_enabled&&!1===t.light_probe_updated&&(t.light_probe.copy(LightProbeGenerator.fromCubeTexture(t.scene_background)),t.light_probe_updated=!0)}}))}},{key:"get_render_data",value:function(){return[{object:this.light_probe,parent:this.game_object,visible:this.light_probe_enabled}]}},{key:"on_create",value:function(){(this.light_probe=new f.LightProbe).intensity=this.light_probe_intensity}},{key:"create_background",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#ffffff",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f.UVMapping,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};if(void 0===t&&void 0===n){var o=new f.Color;return o.set_any(e),o}if("string"==typeof t){var a=d.default.load_cubemap(this.cubemap,this.cubemap_format,i);return a.mapping=r,a}}},{key:"on_tick",value:function(e){}}]),n}(h.Z);v.DEFAULT={color:"#ff00ff",cubemap:"res/retro/plugins/extra-assets/cubemaps/icelake_1",cubemap_format:"jpg"};var _=v},6285:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return xe}});var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(445),d=n(7845),f=n(1094),p=n.n(f),m=n(5108);var g=("undefined"!=typeof window?window:void 0!==n.g?n.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function v(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var n,r=(n=function(t){return t.original===e},t.filter(n)[0]);if(r)return r.copy;var i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((function(n){i[n]=v(e[n],t)})),i}function _(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function y(e){return null!==e&&"object"==typeof e}var b=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"==typeof n?n():n)||{}},x={namespaced:{configurable:!0}};x.namespaced.get=function(){return!!this._rawModule.namespaced},b.prototype.addChild=function(e,t){this._children[e]=t},b.prototype.removeChild=function(e){delete this._children[e]},b.prototype.getChild=function(e){return this._children[e]},b.prototype.hasChild=function(e){return e in this._children},b.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},b.prototype.forEachChild=function(e){_(this._children,e)},b.prototype.forEachGetter=function(e){this._rawModule.getters&&_(this._rawModule.getters,e)},b.prototype.forEachAction=function(e){this._rawModule.actions&&_(this._rawModule.actions,e)},b.prototype.forEachMutation=function(e){this._rawModule.mutations&&_(this._rawModule.mutations,e)},Object.defineProperties(b.prototype,x);var w=function(e){this.register([],e,!1)};function A(e,t,n){if(t.update(n),n.modules)for(var r in n.modules){if(!t.getChild(r))return void 0;A(e.concat(r),t.getChild(r),n.modules[r])}}w.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},w.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return e+((t=t.getChild(n)).namespaced?n+"/":"")}),"")},w.prototype.update=function(e){A([],this.root,e)},w.prototype.register=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=new b(t,n);0===e.length?this.root=i:this.get(e.slice(0,-1)).addChild(e[e.length-1],i);t.modules&&_(t.modules,(function(t,i){r.register(e.concat(i),t,n)}))},w.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],r=t.getChild(n);r&&r.runtime&&t.removeChild(n)},w.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var T;var M=function(e){var t=this;void 0===e&&(e={}),!T&&"undefined"!=typeof window&&window.Vue&&D(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var r=e.strict;void 0===r&&(r=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new w(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new T,this._makeLocalGettersCache=Object.create(null);var i=this,o=this.dispatch,a=this.commit;this.dispatch=function(e,t){return o.call(i,e,t)},this.commit=function(e,t,n){return a.call(i,e,t,n)},this.strict=r;var s=this._modules.root.state;P(this,s,[],this._modules.root),L(this,s),n.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:T.config.devtools)&&function(e){g&&(e._devtoolHook=g,g.emit("vuex:init",e),g.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){g.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){g.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},E={state:{configurable:!0}};function S(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function R(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;P(e,n,[],e._modules.root,!0),L(e,n,t)}function L(e,t,n){var r=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var i=e._wrappedGetters,o={};_(i,(function(t,n){o[n]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var a=T.config.silent;T.config.silent=!0,e._vm=new T({data:{$$state:t},computed:o}),T.config.silent=a,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}(e),r&&(n&&e._withCommit((function(){r._data.$$state=null})),T.nextTick((function(){return r.$destroy()})))}function P(e,t,n,r,i){var o=!n.length,a=e._modules.getNamespace(n);if(r.namespaced&&(e._modulesNamespaceMap[a],e._modulesNamespaceMap[a]=r),!o&&!i){var s=C(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){T.set(s,c,r.state)}))}var l=r.context=function(e,t,n){var r=""===t,i={dispatch:r?e.dispatch:function(n,r,i){var o=F(n,r,i),a=o.payload,s=o.options,c=o.type;return s&&s.root||(c=t+c),e.dispatch(c,a)},commit:r?e.commit:function(n,r,i){var o=F(n,r,i),a=o.payload,s=o.options,c=o.type;s&&s.root||(c=t+c),e.commit(c,a,s)}};return Object.defineProperties(i,{getters:{get:r?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var n={},r=t.length;Object.keys(e.getters).forEach((function(i){if(i.slice(0,r)===t){var o=i.slice(r);Object.defineProperty(n,o,{get:function(){return e.getters[i]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return C(e.state,n)}}}),i}(e,a,n);r.forEachMutation((function(t,n){!function(e,t,n,r){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){n.call(e,r.state,t)}))}(e,a+n,t,l)})),r.forEachAction((function(t,n){var r=t.root?n:a+n,i=t.handler||t;!function(e,t,n,r){(e._actions[t]||(e._actions[t]=[])).push((function(t){var i,o=n.call(e,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:e.getters,rootState:e.state},t);return(i=o)&&"function"==typeof i.then||(o=Promise.resolve(o)),e._devtoolHook?o.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):o}))}(e,r,i,l)})),r.forEachGetter((function(t,n){!function(e,t,n,r){if(e._wrappedGetters[t])return void 0;e._wrappedGetters[t]=function(e){return n(r.state,r.getters,e.state,e.getters)}}(e,a+n,t,l)})),r.forEachChild((function(r,o){P(e,t,n.concat(o),r,i)}))}function C(e,t){return t.reduce((function(e,t){return e[t]}),e)}function F(e,t,n){return y(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function D(e){T&&e===T||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:n});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[n].concat(e.init):n,t.call(this,e)}}function n(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(T=e)}E.state.get=function(){return this._vm._data.$$state},E.state.set=function(e){0},M.prototype.commit=function(e,t,n){var r=this,i=F(e,t,n),o=i.type,a=i.payload,s=(i.options,{type:o,payload:a}),c=this._mutations[o];c&&(this._withCommit((function(){c.forEach((function(e){e(a)}))})),this._subscribers.slice().forEach((function(e){return e(s,r.state)})))},M.prototype.dispatch=function(e,t){var n=this,r=F(e,t),i=r.type,o=r.payload,a={type:i,payload:o},s=this._actions[i];if(s){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(a,n.state)}))}catch(e){0}var c=s.length>1?Promise.all(s.map((function(e){return e(o)}))):s[0](o);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(a,n.state)}))}catch(e){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(a,n.state,e)}))}catch(e){0}t(e)}))}))}},M.prototype.subscribe=function(e,t){return S(e,this._subscribers,t)},M.prototype.subscribeAction=function(e,t){return S("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},M.prototype.watch=function(e,t,n){var r=this;return this._watcherVM.$watch((function(){return e(r.state,r.getters)}),t,n)},M.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},M.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),P(this,this.state,e,this._modules.get(e),n.preserveState),L(this,this.state)},M.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=C(t.state,e.slice(0,-1));T.delete(n,e[e.length-1])})),R(this)},M.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},M.prototype.hotUpdate=function(e){this._modules.update(e),R(this,!0)},M.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(M.prototype,E);var U=N((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var r=Z(this.$store,"mapState",e);if(!r)return;t=r.context.state,n=r.context.getters}return"function"==typeof i?i.call(this,t,n):t[i]},n[r].vuex=!0})),n})),O=N((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.commit;if(e){var o=Z(this.$store,"mapMutations",e);if(!o)return;r=o.context.commit}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n})),k=N((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;i=e+i,n[r]=function(){if(!e||Z(this.$store,"mapGetters",e))return this.$store.getters[i]},n[r].vuex=!0})),n})),I=N((function(e,t){var n={};return B(t).forEach((function(t){var r=t.key,i=t.val;n[r]=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=this.$store.dispatch;if(e){var o=Z(this.$store,"mapActions",e);if(!o)return;r=o.context.dispatch}return"function"==typeof i?i.apply(this,[r].concat(t)):r.apply(this.$store,[i].concat(t))}})),n}));function B(e){return function(e){return Array.isArray(e)||y(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function N(e){return function(t,n){return"string"!=typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function Z(e,t,n){return e._modulesNamespaceMap[n]}function j(e,t,n){var r=n?e.groupCollapsed:e.group;try{r.call(e,t)}catch(n){e.log(t)}}function z(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function G(){var e=new Date;return" @ "+V(e.getHours(),2)+":"+V(e.getMinutes(),2)+":"+V(e.getSeconds(),2)+"."+V(e.getMilliseconds(),3)}function V(e,t){return n="0",r=t-e.toString().length,new Array(r+1).join(n)+e;var n,r}var W={Store:M,install:D,version:"3.6.2",mapState:U,mapMutations:O,mapGetters:k,mapActions:I,createNamespacedHelpers:function(e){return{mapState:U.bind(null,e),mapGetters:k.bind(null,e),mapMutations:O.bind(null,e),mapActions:I.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var r=e.transformer;void 0===r&&(r=function(e){return e});var i=e.mutationTransformer;void 0===i&&(i=function(e){return e});var o=e.actionFilter;void 0===o&&(o=function(e,t){return!0});var a=e.actionTransformer;void 0===a&&(a=function(e){return e});var s=e.logMutations;void 0===s&&(s=!0);var c=e.logActions;void 0===c&&(c=!0);var l=e.logger;return void 0===l&&(l=m),function(e){var u=v(e.state);void 0!==l&&(s&&e.subscribe((function(e,o){var a=v(o);if(n(e,u,a)){var s=G(),c=i(e),h="mutation "+e.type+s;j(l,h,t),l.log("%c prev state","color: #9E9E9E; font-weight: bold",r(u)),l.log("%c mutation","color: #03A9F4; font-weight: bold",c),l.log("%c next state","color: #4CAF50; font-weight: bold",r(a)),z(l)}u=a})),c&&e.subscribeAction((function(e,n){if(o(e,n)){var r=G(),i=a(e),s="action "+e.type+r;j(l,s,t),l.log("%c action","color: #03A9F4; font-weight: bold",i),z(l)}})))}}},H=n(7601),X=n(1358),Q=n(8983);var Y=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},K=n(3317);var q=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o};var J=function(e,t){return t.length<2?e:(0,K.Z)(e,q(t,0,-1))},$=n(2656);var ee=function(e,t){return t=(0,Q.Z)(t,e),null==(e=J(e,t))||delete e[(0,$.Z)(Y(t))]};var te=function(e,t){return null==e||ee(e,t)},ne=n(111),re=n(7226),ie=n(3234),oe=n(7771),ae=n(6378),se=n(1489),ce=n(5017),le=n(9996),ue=n.n(le);let he;he=class{get length(){return Object.keys(this).length}key(e){return Object.keys(this)[e]}setItem(e,t){this[e]=t.toString()}getItem(e){return this[e]}removeItem(e){delete this[e]}clear(){for(let e of Object.keys(this))delete this[e]}};class SimplePromiseQueue{constructor(){this._queue=[],this._flushing=!1}enqueue(e){return this._queue.push(e),this._flushing?Promise.resolve():this.flushQueue()}flushQueue(){this._flushing=!0;const e=()=>{const t=this._queue.shift();if(t)return t.then(e);this._flushing=!1};return Promise.resolve(e())}}const de={replaceArrays:{arrayMerge:(e,t,n)=>t},concatArrays:{arrayMerge:(e,t,n)=>e.concat(...t)}};function fe(e,t,n){return ue()(e,t,de[n])}let pe=JSON;var me=class VuexPersistence{constructor(e){this._mutex=new SimplePromiseQueue,this.subscriber=e=>t=>e.subscribe(t),void 0===e&&(e={}),this.key=null!=e.key?e.key:"vuex",this.subscribed=!1,this.supportCircular=e.supportCircular||!1,this.supportCircular&&(pe=n(939)),this.mergeOption=e.mergeOption||"replaceArrays";let t=!0;try{window.localStorage.getItem("")}catch(e){t=!1}if(e.storage)this.storage=e.storage;else if(t)this.storage=window.localStorage;else{if(!he)throw new Error("Neither 'window' is defined, nor 'MockStorage' is available");this.storage=new he}this.reducer=null!=e.reducer?e.reducer:null==e.modules?e=>e:t=>e.modules.reduce(((e,n)=>fe(e,{[n]:t[n]},this.mergeOption)),{}),this.filter=e.filter||(e=>!0),this.strictMode=e.strictMode||!1,this.RESTORE_MUTATION=function(e,t){const n=fe(e,t||{},this.mergeOption);for(const t of Object.keys(n))this._vm.$set(e,t,n[t])},this.asyncStorage=e.asyncStorage||!1,this.asyncStorage?(this.restoreState=null!=e.restoreState?e.restoreState:(e,t)=>t.getItem(e).then((e=>"string"==typeof e?this.supportCircular?pe.parse(e||"{}"):JSON.parse(e||"{}"):e||{})),this.saveState=null!=e.saveState?e.saveState:(e,t,n)=>n.setItem(e,this.asyncStorage?fe({},t||{},this.mergeOption):this.supportCircular?pe.stringify(t):JSON.stringify(t)),this.plugin=e=>{e.restored=this.restoreState(this.key,this.storage).then((t=>{this.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(fe(e.state,t||{},this.mergeOption)),this.subscriber(e)(((e,t)=>{this.filter(e)&&this._mutex.enqueue(this.saveState(this.key,this.reducer(t),this.storage))})),this.subscribed=!0}))}):(this.restoreState=null!=e.restoreState?e.restoreState:(e,t)=>{const n=t.getItem(e);return"string"==typeof n?this.supportCircular?pe.parse(n||"{}"):JSON.parse(n||"{}"):n||{}},this.saveState=null!=e.saveState?e.saveState:(e,t,n)=>n.setItem(e,this.supportCircular?pe.stringify(t):JSON.stringify(t)),this.plugin=e=>{const t=this.restoreState(this.key,this.storage);this.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(fe(e.state,t||{},this.mergeOption)),this.subscriber(e)(((e,t)=>{this.filter(e)&&this.saveState(this.key,this.reducer(t),this.storage)})),this.subscribed=!0})}};function ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}p().use(W);var ye={installed:!1,install:function(e,t){var n=[],r=0,i={is_landscape_orientation:!1,is_mobile:!1},o={name:"retro",components:_e({},d.default.widget_proxy_components),data:function(){return{id:0,UUID:0,retro:{is_root:!1,ready:!1,is_mobile:!1,is_landscape_orientation:void 0,tick_rate:2,prev_tick_time:+new Date}}},props:{},watch:{},beforeMount:function(){var e=this;this.id=r,this.UUID="".concat(this.$options.name,"_").concat(this.id),r++,(0,H.Z)(this.$parent)&&(this.retro.is_root=!0),(0,X.Z)(d.default.widget_component_instances,"".concat(this.$options.name,".").concat(this.UUID),this),void 0===this.gui_component&&(this.tools=se.rj,this.tools.extra.define_getters(this,{gui_component:function(){return e.$store.getters.gui_component},game_object:function(){return e.$store.getters.game_object},globals:function(){return e.$store.getters.globals},app:function(){return e.$store.getters.app},launcher:function(){return e.$store.getters.launcher},camera:function(){return e.$store.getters.camera},tools:function(){return e.$store.getters.tools}}))},mounted:function(){this.update_platform_attributes(),this.on_init(),this.on_enable(),this.on_create(),this.retro.is_root&&this.init_basic_dom_state(),this.retro.ready=!0},update:function(){this.on_update(n)},destroyed:function(){te(d.default.widget_component_instances,"".concat(this.$options.name,".").concat(this.UUID)),this.on_disable(),this.on_destroy()},methods:{update_platform_attributes:function(){se.rj.screen.is_onscreen_kb_active()||(i.is_mobile=se.rj.device.is_mobile,i.is_landscape_orientation=/landscape/.test(se.rj.screen.get_orientation()),this.$el&&this.$el.classList&&(i.is_mobile?(this.$el.classList.add("--mobile"),this.$el.classList.remove("--desktop")):(this.$el.classList.remove("--mobile"),this.$el.classList.add("--desktop")),i.is_landscape_orientation?(this.$el.classList.add("--landscape"),this.$el.classList.remove("--portrait")):(this.$el.classList.remove("--landscape"),this.$el.classList.add("--portrait"))))},set_platform_attributes:function(){this.retro.is_mobile=i.is_mobile,this.retro.is_landscape_orientation=i.is_landscape_orientation},tick:function(e){this.retro.ready&&d.default.globals.now-this.retro.prev_tick_time>1e3/this.retro.tick_rate&&(this.retro.prev_tick_time=d.default.globals.now,this.$children.forEach((function(t){return t.tick(e)})),this.set_platform_attributes(),this.on_tick(e))},on_init:function(){},on_enable:function(){},on_create:function(){},on_start:function(){},on_tick:function(e){},on_update:function(){},on_disable:function(){},on_destroy:function(){},listen:function(){var e;return(e=this.$store.getters.game_object).listen.apply(e,arguments)},broadcast:function(e,t){var n;return(n=this.$store.getters.game_object).broadcast.apply(n,arguments)},get_component:function(e){var t;return(t=this.$store.getters.game_object).get_component.apply(t,arguments)},find_component_of_type:function(e){var t;return(t=this.$store.getters.game_object).find_component_of_type.apply(t,arguments)},find_components_of_type:function(e){var t;return(t=this.$store.getters.game_object).find_components_of_type.apply(t,arguments)},setup_components:function(e){var t;return(t=this.$store.getters.game_object).setup_components.apply(t,arguments)},add_component:function(e){return this.$store.getters.game_object.add_component(e)},remove_component:function(e){return this.$store.getters.game_object.remove_component(e)},get_components:function(e){return this.$store.getters.game_object.get_components(e)},log:function(){se.cM.apply(void 0,['(Widget)"'.concat(this.$options.name||"?",'"')].concat(Array.prototype.slice.call(arguments)))},error:function(){se.vU.apply(void 0,['(Widget)"'.concat(this.$options.name||"?",'"')].concat(Array.prototype.slice.call(arguments)))},find_widget_component:function(){return d.default.find_widget_component.apply(d.default,arguments)},find_widget_components:function(){return d.default.find_widget_components.apply(d.default,arguments)},init_basic_dom_state:function(){se.rj.html.add_class(this.$el,["retro-widget"]),se.rj.html.add_attributes(this.$el,{"retro-widget-id":this.id}),se.rj.html.set_style(this.$el,{position:"absolute",top:"0px",left:"0px"})}}};e.mixin(o)}},be=function(e){(0,s.Z)(n,e);var t=ge(n);function n(){var e;return(0,r.Z)(this,n),ye.installed||(p().use(ye),ye.installed=!0),e=t.apply(this,arguments),(0,u.Z)((0,o.Z)(e),"zoom",1),(0,u.Z)((0,o.Z)(e),"tick_rate",5),(0,u.Z)((0,o.Z)(e),"root_component",void 0),(0,u.Z)((0,o.Z)(e),"module_name","widget"),(0,u.Z)((0,o.Z)(e),"space","screen"),(0,u.Z)((0,o.Z)(e),"size",[1550,850]),(0,u.Z)((0,o.Z)(e),"size_mobile",[840,480]),(0,u.Z)((0,o.Z)(e),"fit",[0,1]),(0,u.Z)((0,o.Z)(e),"store",void 0),(0,u.Z)((0,o.Z)(e),"props",{}),(0,u.Z)((0,o.Z)(e),"world_space_position_vector",void 0),(0,u.Z)((0,o.Z)(e),"renderer_comp",void 0),(0,u.Z)((0,o.Z)(e),"camera_comp",void 0),(0,u.Z)((0,o.Z)(e),"computed_aspect_ratio",1),(0,u.Z)((0,o.Z)(e),"computed_landscape_mode",!0),(0,u.Z)((0,o.Z)(e),"computed_boundind_rect",{width:1,height:1,x:0,y:0,left:0,top:0}),(0,u.Z)((0,o.Z)(e),"computed_zoom",1),e.world_space_position_vector=new ce.Vector3,e}return(0,i.Z)(n,[{key:"el",get:function(){return this.ui.$el}},{key:"ui",get:function(){return this.vue_app.$children[0]}},{key:"state",get:function(){return this.store.state}},{key:"getters",get:function(){return this.store.state}},{key:"on_create",value:function(){var e=this;this.log("creating...",this.store,this.root_component.name),this.dom=this.tools.html.create_dom("div"),this.renderer_comp=this.find_component_of_type("Renderer");var t=n.create_widget_application(this.root_component,{props:this.props,id:this.UUID,store:{getters:{game_object:function(){return e.game_object},gui_component:function(){return e},globals:function(){return e.globals},app:function(){return e.globals.app},launcher:function(){return e.globals.launcher},camera:function(){return e.globals.camera},tools:function(){return e.tools}}}}),r=t.vue_app,i=t.store;this.vue_app=r,this.store=i,r.gui_component=this,this.update_zoom=(0,ne.Z)(this.update_zoom,100),this.update_computed_private_props=(0,ne.Z)(this.update_computed_private_props,1e3)}},{key:"on_destroy",value:function(){(0,a.Z)((0,l.Z)(n.prototype),"on_destroy",this).apply(this,arguments),this.vue_app.$destroy(),this.el.remove(),delete d.default.widget_stores[this.UUID]}},{key:"on_enable",value:function(){this.globals.dom.appendChild(this.dom),this.vue_app.$mount(this.dom),this.el.style.transform="translate(0, 0)"}},{key:"on_tick",value:function(e){this.vue_app.update_platform_attributes(),this.vue_app.tick(e),this.update_world_space_state(),this.update_computed_private_props(),this.update_zoom()}},{key:"update_world_space_state",value:function(){if("world"==this.space&&this.el){var e=this.get_screen_position();this.el.style.transform="translate(".concat(this.tools.math.round(e[0],.025),"px, ").concat(this.tools.math.round(e[1],.025),"px)")}}},{key:"update_computed_private_props",value:function(){this.el&&this.el.parentElement&&(this.computed_boundind_rect=this.el.parentElement.getBoundingClientRect(),this.computed_aspect_ratio=this.computed_boundind_rect.width/this.computed_boundind_rect.height,this.computed_landscape_mode=this.computed_aspect_ratio>1)}},{key:"update_zoom",value:function(){if("screen"===this.space){if(!se.rj.screen.is_onscreen_kb_active()){var e=this.size,t=this.fit;this.tools.device.is_mobile&&(this.computed_landscape_mode?(e=this.size_mobile,t=this.fit_mobile||t):(e=[this.size_mobile[1],this.size_mobile[0]],t=[this.fit[1],this.fit[0]],t=this.fit_mobile_landscape||t));var n=this.computed_boundind_rect.height,r=this.computed_boundind_rect.width,i=n/e[1],o=r/e[0],a=this.tools.math.lerp(1,i,t[1]);this.computed_zoom=a=this.tools.math.lerp(a,o,t[0]),this.el.style.zoom=a}}else this.el.style.zoom="1"}},{key:"get_screen_position",value:function(){var e=this.world_space_position_vector,t=.5*this.renderer_comp.resolution.x,n=.5*this.renderer_comp.resolution.y;return e.setFromMatrixPosition(this.game_object.transform.matrixWorld),e.project(this.globals.camera),e.x=e.x*t+t,e.y=-e.y*n+n,[e.x,e.y]}},{key:"store_set",value:function(e,t){this.store.state[e]=t}},{key:"store_commit",value:function(e,t){this.store.commit(e,t)}},{key:"store_dispatch",value:function(e,t){this.store.dispatch(e,t)}},{key:"call_method",value:function(e){var t=this.ui;if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this._call_method_on.apply(this,[t,e].concat(r))}else this.error("cannot run nested methods: no root")}},{key:"_call_method_on",value:function(e,t){if((0,re.Z)(e)&&(0,ie.Z)(e[t])){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e[method].apply(e,r)}}},{key:"call_inside_widget_application",value:function(e){var t=this.ui;if(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this._call_inside_widget_application_on_comp.apply(this,[t,e].concat(r))}else this.error("cannot run nested methods: no root")}},{key:"_call_inside_widget_application_on_comp",value:function(e,t){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(e=e||this.ui){var a;if((0,ie.Z)(e[t]))(a=e)[t].apply(a,i);(0,oe.Z)(e.$children)&&e.$children.forEach((function(e){return n._call_inside_widget_application_on_comp.apply(n,[e,t].concat(i))}))}else this.error("cannot run nested methods: no comp")}}]),n}(h.Z);be.widget_store_persistence_save_keys={},be.get_next_widget_store_persistence_id=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anonym",t=be.widget_store_persistence_save_keys,n=t[e];return n=t[e]=void 0===n?0:n+1,"widget-state-".concat(e,"-").concat(n)},be.create_widget_application=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{store:{}};if((0,ae.Z)(e)&&(e=d.default.widget_component_templates[e]),!(0,re.Z)(e))throw new Error("bad component template ".concat(e));var n=e.store_template;(0,ie.Z)(n)&&(n=n(t));new me({key:be.get_next_widget_store_persistence_id((0,ae.Z)(e)?e:void 0),storage:window.localStorage,reducer:(0,re.Z)(n)&&(0,ie.Z)(n.reducer)?n.reducer:function(e){}});(0,re.Z)(n)||(n={state:{},actions:{},mutations:{},getters:{}}),n.getters=n.getters||{},n.state=n.state||{},n.actions=n.actions||{},n.mutations=n.mutations||{},(0,re.Z)(t.store.getters)&&(n.getters=_e(_e({},n.getters),t.store.getters));var r=new W.Store(n);d.default.widget_stores[t.id||se.rj.random.string(16)]=r;var i=new(p())({template:"<".concat(e.name,"/>"),components:(0,u.Z)({},"".concat(e.name),e),props:t.props||{},store:r}),o={store:r,vue_app:i};return o};var xe=be},8430:function(e,t,n){"use strict";n.r(t);var r=n(5785),i=n(5671),o=n(3144),a=n(7326),s=n(1752),c=n(136),l=n(2963),u=n(1120),h=n(4942),d=n(7465),f=(n(7845),n(5017));function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var m=0;function g(e){var t=function(e){var t=parseInt(255*parseFloat((1.34151*e%1).toFixed(5))),n=parseInt(255*parseFloat((2.72245*e%1).toFixed(5))),r=parseInt(255*parseFloat((3.14587*e%1).toFixed(5)));return{id:"".concat(t,"|").concat(n,"|").concat(r),color:new f.Color(t/255,n/255,r/255)}}(e),n=new f.MeshBasicMaterial({color:t.color});return{id:t.id,material:n}}var v=function(e){(0,c.Z)(n,e);var t=p(n);function n(){var e;return(0,i.Z)(this,n),e=t.apply(this,arguments),(0,h.Z)((0,a.Z)(e),"collider_type","sphere"),(0,h.Z)((0,a.Z)(e),"sphere_radius",1),(0,h.Z)((0,a.Z)(e),"box_size",void 0),(0,h.Z)((0,a.Z)(e),"mesh_component_tag",void 0),(0,h.Z)((0,a.Z)(e),"use_mesh_position",!0),(0,h.Z)((0,a.Z)(e),"use_mesh_rotation",!0),(0,h.Z)((0,a.Z)(e),"use_mesh_scale",!0),(0,h.Z)((0,a.Z)(e),"offset",void 0),(0,h.Z)((0,a.Z)(e),"sphere_mesh",void 0),(0,h.Z)((0,a.Z)(e),"box_mesh",void 0),(0,h.Z)((0,a.Z)(e),"mesh_component",void 0),(0,h.Z)((0,a.Z)(e),"collider_id",void 0),(0,h.Z)((0,a.Z)(e),"colorid_box_mesh",void 0),(0,h.Z)((0,a.Z)(e),"colorid_sphere_mesh",void 0),(0,h.Z)((0,a.Z)(e),"colorid_subject",void 0),(0,h.Z)((0,a.Z)(e),"colorid_material",void 0),(0,h.Z)((0,a.Z)(e),"colorid_id",void 0),(0,h.Z)((0,a.Z)(e),"prev_pointerhover",!1),(0,h.Z)((0,a.Z)(e),"pointer_hovered",!1),e.box_size=[1,1,1],e.offset=[0,0,0],e.collider_id=m,m++,e.meta.layers.gizmo=!0,e.meta.layers.raycast=!0,e.meta.layers.normal=!1,e.meta.layers.rendering=!1,e}return(0,o.Z)(n,[{key:"on_create",value:function(){var e,t,i=this.wireframe_mat=new f.MeshBasicMaterial({wireframe:!0,color:"#8bc34a",opacity:.1,transparent:!0});this.sphere_mesh=new f.Mesh(new f.SphereBufferGeometry(1,12,6),i);(e=(this.box_mesh=new f.Mesh(new f.BoxBufferGeometry(1,1,1,1),i)).scale).set.apply(e,(0,r.Z)(this.box_size));var o=this.colorid_material_data=g(this.collider_id);this.colorid_id=o.id,n.colorid_list[this.colorid_id]=this;this.colorid_sphere_mesh=new f.Mesh(new f.SphereBufferGeometry(1,12,6),o.material);(t=(this.colorid_box_mesh=new f.Mesh(new f.BoxBufferGeometry(1,1,1,1),o.material)).scale).set.apply(t,(0,r.Z)(this.box_size)),this.update_collider(),this.force_update()}},{key:"get_reactive_props",value:function(){return["collider_type","sphere_radius","box_size","pointer_hovered"].concat((0,s.Z)((0,u.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"get_render_data",value:function(){return[]}},{key:"get_gizmo_render_data",value:function(){return[{object:this.subject,parent:this.game_object},{object:this.colorid_subject,parent:this.game_object,layers:{colorid:!0}}].concat((0,r.Z)((0,s.Z)((0,u.Z)(n.prototype),"get_gizmo_render_data",this).call(this)))}},{key:"on_destroy",value:function(){(0,s.Z)((0,u.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}},{key:"on_update",value:function(e){var t=this;(0,s.Z)((0,u.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){switch(e){case"collder_type":t.update_collider();break;case"position":t.colorid_subject&&t.colorid_subject.position.copy(t.subject.position);case"rotation":t.colorid_subject&&t.colorid_subject.rotation.copy(t.subject.rotation);case"scale":t.box_mesh.scale.set(t.scale[0]*t.box_size[0],t.scale[1]*t.box_size[1],t.scale[2]*t.box_size[2]),t.sphere_mesh.scale.set(t.sphere_radius*t.scale[0],t.sphere_radius*t.scale[1],t.sphere_radius*t.scale[2]),t.colorid_subject&&t.colorid_subject.scale.copy(t.subject.scale);case"box_size":t.box_mesh.scale.set(t.scale[0]*t.box_size[0],t.scale[1]*t.box_size[1],t.scale[2]*t.box_size[2]);break;case"sphere_radius":t.sphere_mesh.scale.set(t.sphere_radius,t.sphere_radius,t.sphere_radius);break;case"pointer_hovered":var n=t.prev_pointerhover===t.pointer_hovered;!0===t.pointer_hovered&&n?t.call_inside("handle_pointerover",t):!t.pointer_hovered&&n&&t.call_inside("handle_pointerout",t),t.prev_pointerhover=t.pointer_hovered}}))}},{key:"on_tick",value:function(e){if(this.use_mesh_position){var t=this.mesh_component;void 0===t&&void 0!==(t=this.get_component("MeshComponent"))&&(this.position=[t.position[0]+this.offset[0],t.position[1]+this.offset[1],t.position[2]+this.offset[2]])}if(this.use_mesh_rotation){var n=this.mesh_component;void 0===n&&void 0!==(n=this.get_component("MeshComponent"))&&(this.rotation=n.rotation)}if(this.use_mesh_scale){var r=this.mesh_component;void 0===r&&void 0!==(r=this.get_component("MeshComponent"))&&(this.scale=r.scale)}}},{key:"update_collider",value:function(){switch(this.collider_type){case"sphere":this.sphere_mesh.collider=this,this.subject=this.sphere_mesh,this.colorid_subject=this.colorid_sphere_mesh;break;case"box":this.box_mesh.collider=this,this.subject=this.box_mesh,this.colorid_subject=this.colorid_box_mesh;break;default:this.error("unknown collider type: ".concat(this.collider_type))}}}]),n}(d.Z);v.color_id_get_with_rgb=function(e,t,n){var r="".concat(e,"|").concat(t,"|").concat(n);return v.colorid_list[r]},v.colorid_list={},t.default=v},40:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(445),h=n(7845),d=(n(1489),n(5840));n(6461);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var p=function(e,t){var n=t.UUID;h.default.snake_game_colliders.layers[e]=h.default.snake_game_colliders.layers[e]||{},h.default.snake_game_colliders.layers[e][n]=t},m={},g={checks:0,optimized:0},v=function(e){(0,a.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"tick_rate",10),(0,l.Z)((0,o.Z)(e),"radius",1),(0,l.Z)((0,o.Z)(e),"layers",[]),(0,l.Z)((0,o.Z)(e),"overlapping",[]),(0,l.Z)((0,o.Z)(e),"group",void 0),(0,l.Z)((0,o.Z)(e),"gizmo_color",void 0),(0,l.Z)((0,o.Z)(e),"world_position",[0,0,0]),(0,l.Z)((0,o.Z)(e),"prev_collision_update",+new Date),e}return(0,i.Z)(n,[{key:"on_create",value:function(){var e=this;h.default.fluid_colliders_state=m,h.default.snake_game_colliders=h.default.snake_game_colliders||{layers:{},intersections:{}},this.layers.forEach((function(t){p(t,e)})),this.update_gizmo_color()}},{key:"on_tick",value:function(e){}},{key:"overlaps_layers",value:function(e){var t=this,n=!1;return e.forEach((function(e){t.overlapping.indexOf(e)>-1&&(n=!0)})),n}},{key:"update_world_position",value:function(){this.world_position=this.game_object.to_world_pos(this.game_object.position)}},{key:"intersects",value:function(e){return this.tools.math.distance(this.world_position,e.world_position)<e.radius+this.radius}},{key:"has_layer",value:function(e){return this.layers.indexOf(e)>-1}},{key:"add_layer",value:function(e){this.layers.push(e),p(e,this),this.update_gizmo_color()}},{key:"remove_layer",value:function(e){this.layers.splice(this.layers.indexOf(e),1),function(e,t){var n=t.UUID;h.default.snake_game_colliders.layers[e]&&delete h.default.snake_game_colliders.layers[e][n]}(e,this),this.update_gizmo_color()}},{key:"add_overlapping",value:function(e){this.overlapping.push(e)}},{key:"remove_overlapping",value:function(e){this.overlapping.splice(this.overlappings.indexOf(e),1)}},{key:"on_gizmo_draw",value:function(){return[{type:"sphere",radius:this.radius,color:this.gizmo_color,opacity:.1,wireframe:!0,position:this.game_object.position}]}},{key:"update_gizmo_color",value:function(){this.gizmo_color=this.tools.extra.get_random_color_for_string2(this.layers.join("|"))}}],[{key:"on_tick",value:function(e,t){var n={},r=[],i={};g.checks=0,g.optimized=0,(0,d.Z)(t,(function(e,o){!1!==e.enabled&&(0,d.Z)(t,(function(t,o){if(!1!==t.enabled&&e.id!==t.id&&(void 0===e.group||e.group!==t.group)){var a="".concat(e.id,"*").concat(Math.max(t.id)),s=void 0,c="".concat(Math.min(e.id,t.id),"*").concat(Math.max(e.id,t.id));if(void 0===(s=n[a])){s={};var l=e.overlaps_layers(t.layers),u=!1;l&&(void 0!==i[c]?u=i[c]:(g.checks++,t.update_world_position(),e.update_world_position(),t.intersects(e)&&(i[c]=u=!0))),s={need_check:l,is_intersecting:u,collider_a:e,collider_b:t,comp_id:a,unique_comp_id:c},r.push(s),n[a]=s}}}))})),r.length>0&&r.forEach((function(e){var t=m[e.comp_id];t||(m[e.comp_id]=t={is_intersecting:!1,comp_id:e.comp_id});var n=!1===t.is_intersecting&&!0===e.is_intersecting,r=!0===t.is_intersecting&&!1===e.is_intersecting,i=e.collider_a,o=e.collider_b;n&&i.call_inside("begin_overlap",{collider:o}),r&&i.call_inside("end_overlap",{collider:o})})),m=n}}]),n}(u.Z);(0,l.Z)(v,"tick_rate",10),t.default=v},4138:function(e,t,n){"use strict";n.r(t);var r=n(2826),i=n(5785),o=n(5671),a=n(3144),s=n(7326),c=n(1752),l=n(136),u=n(2963),h=n(1120),d=n(4942),f=n(445),p=(n(7845),n(5017)),m=n(3459),g=n(5108);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var _=function(e){(0,l.Z)(n,e);var t=v(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.Z)((0,s.Z)(e),"auto_rotate",!1),(0,d.Z)((0,s.Z)(e),"auto_rotate_speed",1),(0,d.Z)((0,s.Z)(e),"damping_factor",1),(0,d.Z)((0,s.Z)(e),"enable_damping",!0),(0,d.Z)((0,s.Z)(e),"enable_pan",!0),(0,d.Z)((0,s.Z)(e),"enable_zoom",!0),(0,d.Z)((0,s.Z)(e),"enable_rotate",!0),(0,d.Z)((0,s.Z)(e),"keypan_speed",7),(0,d.Z)((0,s.Z)(e),"max_polar_angle",Math.PI),(0,d.Z)((0,s.Z)(e),"min_polar_angle",0),(0,d.Z)((0,s.Z)(e),"min_azimuth_angle",-1/0),(0,d.Z)((0,s.Z)(e),"max_azimuth_angle",1/0),(0,d.Z)((0,s.Z)(e),"max_zoom",1/0),(0,d.Z)((0,s.Z)(e),"min_distance",.1),(0,d.Z)((0,s.Z)(e),"max_distance",1/0),(0,d.Z)((0,s.Z)(e),"min_zoom",.01),(0,d.Z)((0,s.Z)(e),"pan_speed",1),(0,d.Z)((0,s.Z)(e),"rotate_speed",1),(0,d.Z)((0,s.Z)(e),"zoom_speed",1),(0,d.Z)((0,s.Z)(e),"target",[0,0,0]),(0,d.Z)((0,s.Z)(e),"position",[0,0,0]),(0,d.Z)((0,s.Z)(e),"zoom",1),(0,d.Z)((0,s.Z)(e),"keys",["a","w","d","s"]),(0,d.Z)((0,s.Z)(e),"controls",void 0),e}return(0,a.Z)(n,[{key:"get_reactive_props",value:function(){return["auto_rotate","auto_rotate_speed","damping_factor","enable_damping","enable_pan","enable_zoom","enable_rotate","keypan_speed","max_distance","max_polar_angle","min_polar_angle","max_azimuth_angle","min_azimuth_angle","max_zoom","min_distance","min_zoom","pan_speed","rotate_speed","target","keys","zoom_speed","zoom","position"].concat((0,c.Z)((0,h.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_enable",value:function(){this.controls.enabled=!0}},{key:"on_disable",value:function(){this.controls.enabled=!1}},{key:"get_controls_state",value:function(){return{target:[this.controls.target.x,this.controls.target.y,this.controls.target.z],position:[this.controls.object.position.x,this.controls.object.position.y,this.controls.object.position.z],zoom:this.controls.object.zoom}}},{key:"set_controls_state",value:function(e){this.target=e.target||[0,0,0],this.position=e.position||[0,0,-10],this.zoom=e.zoom||1}},{key:"on_update",value:function(e){var t=this;(0,c.Z)((0,h.Z)(n.prototype),"on_update",this).call(this,e);var o=this.controls;e.forEach((function(e){switch(e){case"keys":o.keys={LEFT:t.keys[0],UP:t.keys[1],RIGHT:t.keys[2],BOTTOM:t.keys[3]};break;case"target":o.target=(0,r.Z)(p.Vector3,(0,i.Z)(t.target));break;case"position":var n;g.log(o.object.position,t.position),(n=o.object.position).set.apply(n,(0,i.Z)(t.position)),g.log(o.object.position,t.position);break;case"zoom":o.object.zoom=t.zoom;break;default:o.autoRotate=t.auto_rotate,o.autoRotateSpeed=t.auto_rotate_speed,o.dampingFactor=t.damping_factor,o.enableDamping=t.enable_damping,o.enablePan=t.enable_pan,o.enableZoom=t.enable_zoom,o.enableRotate=t.enable_rotate,o.keypanSpeed=t.keypan_speed,o.maxDistance=t.max_distance,o.maxPolarAngle=t.max_polar_angle,o.minPolarAngle=t.min_polar_angle,o.maxAzimuthAngle=t.max_azimuth_angle,o.minAzimuthAngle=t.min_azimuth_angle,o.maxZoom=t.max_zoom,o.minDistance=t.min_distance,o.minZoom=t.min_zoom,o.panSpeed=t.pan_speed,o.rotateSpeed=t.rotate_speed,o.zoomSpeed=t.zoom_speed}}))}},{key:"on_create",value:function(){var e=this.find_component_of_type("CameraComponent");if(e)this.controls=new m.Z.MapControls(e.subject,this.globals.dom);else g.error('MapControls requires "CameraComponent" presense on scene')}},{key:"on_tick",value:function(e){var t=this.find_component_of_type("CameraComponent");t.position[0]=t.subject.position.x,t.position[1]=t.subject.position.y,t.position[2]=t.subject.position.z,this.controls.update()}}]),n}(f.Z);_.DEFAULT={auto_rotate:!1,auto_rotate_speed:1,damping_factor:1,enable_damping:!0,enable_pan:!0,enable_zoom:!0,enable_rotate:!0,keypan_speed:7,max_distance:1/0,max_polar_angle:Math.PI,max_zoom:1/0,min_distance:.01,min_zoom:.01,pan_speed:1,rotate_speed:1,target:[0,0,0],keys:["a","w","d","s"]},t.default=_},7848:function(e,t,n){"use strict";n.r(t);var r=n(2826),i=n(5785),o=n(5671),a=n(3144),s=n(7326),c=n(1752),l=n(136),u=n(2963),h=n(1120),d=n(4942),f=n(445),p=(n(7845),n(5017)),m=n(3459),g=n(5108);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var _=function(e){(0,l.Z)(n,e);var t=v(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.Z)((0,s.Z)(e),"auto_rotate",!1),(0,d.Z)((0,s.Z)(e),"auto_rotate_speed",1),(0,d.Z)((0,s.Z)(e),"damping_factor",1),(0,d.Z)((0,s.Z)(e),"enable_damping",!0),(0,d.Z)((0,s.Z)(e),"enable_pan",!0),(0,d.Z)((0,s.Z)(e),"enable_zoom",!0),(0,d.Z)((0,s.Z)(e),"enable_rotate",!0),(0,d.Z)((0,s.Z)(e),"keypan_speed",7),(0,d.Z)((0,s.Z)(e),"max_polar_angle",Math.PI),(0,d.Z)((0,s.Z)(e),"min_polar_angle",0),(0,d.Z)((0,s.Z)(e),"min_azimuth_angle",-1/0),(0,d.Z)((0,s.Z)(e),"max_azimuth_angle",1/0),(0,d.Z)((0,s.Z)(e),"max_zoom",1/0),(0,d.Z)((0,s.Z)(e),"min_distance",.1),(0,d.Z)((0,s.Z)(e),"max_distance",1/0),(0,d.Z)((0,s.Z)(e),"min_zoom",.01),(0,d.Z)((0,s.Z)(e),"pan_speed",1),(0,d.Z)((0,s.Z)(e),"rotate_speed",1),(0,d.Z)((0,s.Z)(e),"zoom_speed",1),(0,d.Z)((0,s.Z)(e),"target",[0,0,0]),(0,d.Z)((0,s.Z)(e),"position",[0,0,0]),(0,d.Z)((0,s.Z)(e),"zoom",1),(0,d.Z)((0,s.Z)(e),"keys",["a","w","d","s"]),(0,d.Z)((0,s.Z)(e),"controls",void 0),e}return(0,a.Z)(n,[{key:"get_reactive_props",value:function(){return["auto_rotate","auto_rotate_speed","damping_factor","enable_damping","enable_pan","enable_zoom","enable_rotate","keypan_speed","max_distance","max_polar_angle","min_polar_angle","max_azimuth_angle","min_azimuth_angle","max_zoom","min_distance","min_zoom","pan_speed","rotate_speed","target","keys","zoom_speed","zoom","position"].concat((0,c.Z)((0,h.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_enable",value:function(){this.controls.enabled=!0}},{key:"on_disable",value:function(){this.controls.enabled=!1}},{key:"get_controls_state",value:function(){return{target:[this.controls.target.x,this.controls.target.y,this.controls.target.z],position:[this.controls.object.position.x,this.controls.object.position.y,this.controls.object.position.z],zoom:this.controls.object.zoom}}},{key:"set_controls_state",value:function(e){this.target=e.target||[0,0,0],this.position=e.position||[0,0,-10],this.zoom=e.zoom||1}},{key:"on_update",value:function(e){var t=this;(0,c.Z)((0,h.Z)(n.prototype),"on_update",this).call(this,e);var o=this.controls;e.forEach((function(e){switch(e){case"keys":o.keys={LEFT:t.keys[0],UP:t.keys[1],RIGHT:t.keys[2],BOTTOM:t.keys[3]};break;case"target":o.target=(0,r.Z)(p.Vector3,(0,i.Z)(t.target));break;case"position":var n;g.log(o.object.position,t.position),(n=o.object.position).set.apply(n,(0,i.Z)(t.position)),g.log(o.object.position,t.position);break;case"zoom":o.object.zoom=t.zoom;break;default:o.autoRotate=t.auto_rotate,o.autoRotateSpeed=t.auto_rotate_speed,o.dampingFactor=t.damping_factor,o.enableDamping=t.enable_damping,o.enablePan=t.enable_pan,o.enableZoom=t.enable_zoom,o.enableRotate=t.enable_rotate,o.keypanSpeed=t.keypan_speed,o.maxDistance=t.max_distance,o.maxPolarAngle=t.max_polar_angle,o.minPolarAngle=t.min_polar_angle,o.maxAzimuthAngle=t.max_azimuth_angle,o.minAzimuthAngle=t.min_azimuth_angle,o.maxZoom=t.max_zoom,o.minDistance=t.min_distance,o.minZoom=t.min_zoom,o.panSpeed=t.pan_speed,o.rotateSpeed=t.rotate_speed,o.zoomSpeed=t.zoom_speed}}))}},{key:"on_create",value:function(){var e=this.find_component_of_type("CameraComponent");if(e)this.controls=new m.Z.OrbitControls(e.subject,this.globals.dom);else g.error('OrbitControls requires "CameraComponent" presense on scene')}},{key:"on_tick",value:function(e){var t=this.find_component_of_type("CameraComponent");t.position[0]=t.subject.position.x,t.position[1]=t.subject.position.y,t.position[2]=t.subject.position.z,this.controls.update()}}]),n}(f.Z);_.DEFAULT={auto_rotate:!1,auto_rotate_speed:1,damping_factor:1,enable_damping:!0,enable_pan:!0,enable_zoom:!0,enable_rotate:!0,keypan_speed:7,max_distance:1/0,max_polar_angle:Math.PI,max_zoom:1/0,min_distance:.01,min_zoom:.01,pan_speed:1,rotate_speed:1,target:[0,0,0],keys:["a","w","d","s"]},t.default=_},1552:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(445),d=(n(7845),n(5017)),f=n(5108);const p=new d.Euler(0,0,0,"YXZ"),m=new d.Vector3,g={type:"change"},v={type:"lock"},_={type:"unlock"},y=Math.PI/2;class PointerLockControls extends d.EventDispatcher{constructor(e,t){super(),void 0===t&&(f.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI;const n=this;function r(t){if(!1===n.isLocked)return;const r=t.movementX||t.mozMovementX||t.webkitMovementX||0,i=t.movementY||t.mozMovementY||t.webkitMovementY||0;p.setFromQuaternion(e.quaternion),p.y-=.002*r,p.x-=.002*i,p.x=Math.max(y-n.maxPolarAngle,Math.min(y-n.minPolarAngle,p.x)),e.quaternion.setFromEuler(p),n.dispatchEvent(g)}function i(){n.domElement.ownerDocument.pointerLockElement===n.domElement?(n.dispatchEvent(v),n.isLocked=!0):(n.dispatchEvent(_),n.isLocked=!1)}function o(){f.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){n.domElement.ownerDocument.addEventListener("mousemove",r),n.domElement.ownerDocument.addEventListener("pointerlockchange",i),n.domElement.ownerDocument.addEventListener("pointerlockerror",o)},this.disconnect=function(){n.domElement.ownerDocument.removeEventListener("mousemove",r),n.domElement.ownerDocument.removeEventListener("pointerlockchange",i),n.domElement.ownerDocument.removeEventListener("pointerlockerror",o)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=function(){const t=new d.Vector3(0,0,-1);return function(n){return n.copy(t).applyQuaternion(e.quaternion)}}(),this.moveForward=function(t){m.setFromMatrixColumn(e.matrix,0),m.crossVectors(e.up,m),e.position.addScaledVector(m,t)},this.moveRight=function(t){m.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(m,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){n.domElement.ownerDocument.exitPointerLock()},this.connect()}}var b=n(5108);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var w=function(e){(0,s.Z)(n,e);var t=x(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"move_forward",!1),(0,u.Z)((0,o.Z)(e),"move_backward",!1),(0,u.Z)((0,o.Z)(e),"move_left",!1),(0,u.Z)((0,o.Z)(e),"move_right",!1),(0,u.Z)((0,o.Z)(e),"can_jump",!1),(0,u.Z)((0,o.Z)(e),"velocity",new d.Vector3),(0,u.Z)((0,o.Z)(e),"direction",new d.Vector3),(0,u.Z)((0,o.Z)(e),"controls",void 0),e}return(0,i.Z)(n,[{key:"get_reactive_props",value:function(){return[].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_enable",value:function(){this.controls.enabled=!0}},{key:"on_disable",value:function(){this.controls.enabled=!1}},{key:"get_controls_state",value:function(){return{}}},{key:"set_controls_state",value:function(e){}},{key:"on_create",value:function(){this.capture_control=this.capture_control.bind(this),this.handle_key_down=this.handle_key_down.bind(this),this.handle_key_up=this.handle_key_up.bind(this);var e=this.find_component_of_type("CameraComponent");e?this.controls=new PointerLockControls(e.subject,this.globals.dom):b.error('OrbitControls requires "CameraComponent" presense on scene'),this.controls&&(this.globals.dom.addEventListener("click",this.capture_control),document.addEventListener("keydown",this.handle_key_down),document.addEventListener("keyup",this.handle_key_up))}},{key:"on_destroy",value:function(){this.globals.dom.removeEventListener("click",this.capture_control),document.removeEventListener("keydown",this.handle_key_down),document.removeEventListener("keyup",this.handle_key_up)}},{key:"capture_control",value:function(){this.controls.lock()}},{key:"handle_key_down",value:function(e){switch(e.code){case"ArrowUp":case"KeyW":this.move_forward=!0;break;case"ArrowLeft":case"KeyA":this.move_left=!0;break;case"ArrowDown":case"KeyS":this.move_backward=!0;break;case"ArrowRight":case"KeyD":this.move_right=!0;break;case"Space":!0===this.can_jump&&(this.velocity.y+=350),this.can_jump=!1}}},{key:"handle_key_up",value:function(e){switch(e.code){case"ArrowUp":case"KeyW":this.move_forward=!1;break;case"ArrowLeft":case"KeyA":this.move_left=!1;break;case"ArrowDown":case"KeyS":this.move_backward=!1;break;case"ArrowRight":case"KeyD":this.move_right=!1}}},{key:"on_tick",value:function(e){var t=this.find_component_of_type("CameraComponent");t.position[0]=t.subject.position.x,t.position[1]=t.subject.position.y,t.position[2]=t.subject.position.z;var n=this.controls,r=this.velocity,i=this.direction,o=this.move_forward,a=this.move_backward,s=this.move_left,c=this.move_right;this.can_jump;if(!0===n.isLocked){var l=e.delta;r.x-=10*r.x*l,r.z-=10*r.z*l,r.y-=9.8*100*l,i.z=Number(o)-Number(a),i.x=Number(c)-Number(s),i.normalize(),(o||a)&&(r.z-=400*i.z*l),(s||c)&&(r.x-=400*i.x*l),r.y=Math.max(0,r.y),!0,n.moveRight(-r.x*l),n.moveForward(-r.z*l),n.getObject().position.y+=r.y*l,n.getObject().position.y<0&&(r.y=0,n.getObject().position.y=0,!0)}}}]),n}(h.Z);w.DEFAULT={};var A=w},7040:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017));n(1489),n(6461);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=new d.Vector3,m=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"parent_object",void 0),e}return(0,i.Z)(n,[{key:"is_attached",get:function(){return void 0!==this.parent_object}},{key:"world_position",get:function(){p.set(0,0,0);var e=this.subject.localToWorld(p);return[e.x,e.y,e.z]}},{key:"on_create",value:function(){this.subject=new d.Object3D,this.anchor_gizmo=new d.Mesh(new d.SphereBufferGeometry(.05,2,2),new d.MeshBasicMaterial({wireframe:!0,color:"#ff00ff"}))}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.parent_object,layers:{rendering:!0}}]}},{key:"get_gizmo_render_data",value:function(){return[{object:this.anchor_gizmo,parent:this.subject,layers:{gizmo:!0}}]}},{key:"on_destroy",value:function(){(0,a.Z)((0,l.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}},{key:"on_tick",value:function(e){}},{key:"get_reactive_props",value:function(){return[].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).call(this,e)}},{key:"attach_to",value:function(e){this.parent_object=null===e?void 0:e}}]),n}(h.Z);t.default=m},6252:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=n(5017);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var g=function(e){(0,s.Z)(n,e);var t=m(n);function n(){var e;return(0,r.Z)(this,n),e=t.apply(this,arguments),(0,u.Z)((0,o.Z)(e),"offset",[0,0,0]),(0,u.Z)((0,o.Z)(e),"camera_type",1),(0,u.Z)((0,o.Z)(e),"fov",80),(0,u.Z)((0,o.Z)(e),"aspect",1),(0,u.Z)((0,o.Z)(e),"near",.01),(0,u.Z)((0,o.Z)(e),"far",1e5),(0,u.Z)((0,o.Z)(e),"left",-1),(0,u.Z)((0,o.Z)(e),"right",1),(0,u.Z)((0,o.Z)(e),"top",-1),(0,u.Z)((0,o.Z)(e),"bottom",1),(0,u.Z)((0,o.Z)(e),"moved",!1),(0,u.Z)((0,o.Z)(e),"prev_camera_matrix",void 0),e.prev_camera_matrix=new d.Matrix4,e}return(0,i.Z)(n,[{key:"on_create",value:function(){var e=this;this.o_camera=new d.OrthographicCamera({fov:this.fov,aspect:this.aspect,near:this.near,far:this.far,position:new d.Vector3(0,0,20)}),this.subject=this.p_camera=new d.PerspectiveCamera(this.fov,this.aspect,this.near,this.far);this.define_global_var("camera",(function(t){return e.subject})),this.log("created",this.meta.params)}},{key:"on_tick",value:function(){var e=this.subject.matrixWorld,t=!this.prev_camera_matrix.equals(e);this.prev_camera_matrix.copy(e),this.moved=t}},{key:"save_prefab",value:function(){return p(p({},(0,a.Z)((0,l.Z)(n.prototype),"save_prefab",this).call(this)),{},{camera_type:this.camera_type,fov:this.fov,aspect:this.aspect,near:this.near,far:this.far,left:this.left,right:this.right,top:this.top,bottom:this.bottom})}},{key:"get_reactive_props",value:function(){return["fov","aspect","near","far","left","right","top","bottom","camera_type"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"look_at",value:function(e,t,n){this.subject.lookAt(new d.Vector3(e,t,n))}},{key:"on_update",value:function(e){var t=this;(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments),e.forEach((function(e){switch(e){case"fov":t.subject.fov=t.fov,t.subject.updateProjectionMatrix();break;case"aspect":t.subject.aspect=t.aspect,t.subject.updateProjectionMatrix();break;case"near":t.subject.near=t.near,t.subject.updateProjectionMatrix();break;case"far":t.subject.far=t.far,t.subject.updateProjectionMatrix();break;case"left":t.subject.left=t.left,t.subject.updateProjectionMatrix();break;case"right":t.subject.right=t.right,t.subject.updateProjectionMatrix();break;case"top":t.subject.top=t.top,t.subject.updateProjectionMatrix();break;case"bottom":t.subject.bottom=t.bottom,t.subject.updateProjectionMatrix()}}))}}]),n}(h.Z);g.DEFAULT=p({},h.Z.DEFAULT),t.default=g},1257:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017));class RectAreaLightHelper extends d.Line{constructor(e,t){const n=new d.BufferGeometry;n.setAttribute("position",new d.Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();super(n,new d.LineBasicMaterial({fog:!1})),this.light=e,this.color=t,this.type="RectAreaLightHelper";const r=new d.BufferGeometry;r.setAttribute("position",new d.Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new d.Mesh(r,new d.MeshBasicMaterial({side:d.BackSide,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}var f=n(5108);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var v=(new d.TextureLoader).load("res/retro/gizmo/lamp_a.png"),_=new d.SpriteMaterial({map:v}),y=function(e){(0,s.Z)(n,e);var t=g(n);function n(){var e;return(0,r.Z)(this,n),e=t.apply(this,arguments),(0,u.Z)((0,o.Z)(e),"type","PointLight"),(0,u.Z)((0,o.Z)(e),"intensity",1),(0,u.Z)((0,o.Z)(e),"color","#eeffdd"),(0,u.Z)((0,o.Z)(e),"distance",1),(0,u.Z)((0,o.Z)(e),"decay",0),(0,u.Z)((0,o.Z)(e),"sky_color","#ffaaaa"),(0,u.Z)((0,o.Z)(e),"ground_color","#aaaaff"),(0,u.Z)((0,o.Z)(e),"shadows_enabled",!1),(0,u.Z)((0,o.Z)(e),"rect_width",1),(0,u.Z)((0,o.Z)(e),"rect_height",2),(0,u.Z)((0,o.Z)(e),"gizmo_lamp_icon",void 0),(0,u.Z)((0,o.Z)(e),"extra_gizmos",void 0),e.extra_gizmos=[],e}return(0,i.Z)(n,[{key:"save_prefab",value:function(){return m(m({},(0,a.Z)((0,l.Z)(n.prototype),"save_prefab",this).call(this)),{},{type:this.type,intensity:this.intensity,color:this.color,distance:this.distance,decay:this.decay})}},{key:"on_create",value:function(){var e;switch((0,a.Z)((0,l.Z)(n.prototype),"on_create",this).call(this),this.meta.layers.lights=!0,this.type){case"HemisphereLight":e=this.subject=new d.HemisphereLight(this.sky_color,this.ground_color,this.intensity);break;case"DirectionalLight":e=this.subject=new d.DirectionalLight({intensity:this.intensity,color:this.color,decay:this.decay,distance:this.distance});break;case"PointLight":e=this.subject=new d.PointLight(this.color,this.intensity,this.distance,this.decay),f.log(this);break;case"RectAreaLight":e=this.subject=new d.RectAreaLight(this.color,this.intensity,this.rect_width,this.rect_height);var t=this.rect_area_helper=new RectAreaLightHelper(this.subject,new d.Color(this.color));this.extra_gizmos.push({object:t,parent:this.subject,layers:{gizmo:!0}});break;case"SpotLight":e=this.subject=new d.SpotLight(this.color)}this.shadows_enabled&&(e.shadow&&(e.shadow.mapSize.width=128,e.shadow.mapSize.height=128,e.shadow.camera.near=.5,e.shadow.camera.far=1e4),e.castShadow=!0);var r=this.find_component_of_type("Renderer");r&&r.compile();var i=this.gizmo_lamp_icon=new d.Sprite(_);i.scale.set(.05,.05,.05),i.material.sizeAttenuation=!1,i.material.depthTest=!1,i.material.depthWrite=!1,i.renderOrder=1}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object}]}},{key:"get_gizmo_render_data",value:function(){return[{object:this.gizmo_lamp_icon,parent:this.subject,layers:{gizmo:!0}}].concat(this.extra_gizmos)}},{key:"get_reactive_props",value:function(){return["intensity","color","distance","decay","sky_color","ground_color","shadows_enabled"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments),e.forEach((function(e){switch(e){case"color":t.subject.color.set_any(t.color);break;case"sky_color":t.subject.color.set_any(t.sky_color);break;case"ground_color":void 0!==t.subject.ground_color&&t.subject.ground_color.set_any(t.ground_color);break;case"shadows_enabled":t.subject.castShadow=t.shadows_enabled;break;default:t.subject.distance=t.distance,t.subject.intensity=t.intensity,t.subject.decay=t.decay}}))}},{key:"on_tick",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_tick",this).apply(this,arguments)}}]),n}(h.Z),b=y},9455:function(e,t,n){"use strict";n.r(t);var r=n(5785),i=n(5671),o=n(3144),a=n(7326),s=n(1752),c=n(136),l=n(2963),u=n(1120),h=n(4942),d=n(5017),f=n(7845),p=n(7465),m=n(6378),g=n(7771),v=n(290),_=n(1489);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var b=function(e){(0,c.Z)(n,e);var t=y(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,h.Z)((0,a.Z)(e),"mesh",null),(0,h.Z)((0,a.Z)(e),"cast_shadow",!0),(0,h.Z)((0,a.Z)(e),"recieve_shadow",!0),(0,h.Z)((0,a.Z)(e),"class",void 0),(0,h.Z)((0,a.Z)(e),"tick_rate",5),e}return(0,o.Z)(n,[{key:"on_create",value:function(){var e=void 0;(0,m.Z)(this.class)?(e=this.subject=f.default.create_object(this.class,this.options),_.iV.log(this,e)):e=this.subject=n.create_mesh({geometry:this.geometry,material:this.material,geometry_translation:this.geometry_translation}),e?(e.castShadow=this.cast_shadow,e.receiveShadow=this.recieve_shadow):this.error("Cannot create mesh with provided options",this.meta.params),this.check_materials_sorting()}},{key:"on_tick",value:function(){this.check_materials_sorting()}},{key:"check_materials_sorting",value:function(){if((0,g.Z)(this.subject.material)&&!this.subject.material.sorted&&(0,g.Z)(this.subject.geometry.materials_order)){var e=[],t={};this.subject.material.forEach((function(e){return t[e.name]=e})),this.subject.geometry.materials_order.forEach((function(n){e.push(t[n])})),this.subject.material=e,this.subject.material.sorted=!0}}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object}]}},{key:"get_reactive_props",value:function(){return["cast_shadow","recieve_shadow"].concat((0,s.Z)((0,u.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,s.Z)((0,u.Z)(n.prototype),"on_update",this).apply(this,arguments),e.forEach((function(e){switch(e){case"cast_shadow":t.subject.castShadow=t.cast_shadow;break;case"recieve_shadow":t.subject.receiveShadow=t.recieve_shadow}}))}},{key:"on_enable",value:function(){this.globals.need_update_render_list=!0}},{key:"on_disable",value:function(){this.globals.need_update_render_list=!0}},{key:"on_destroy",value:function(){(0,s.Z)((0,u.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}},{key:"uniform",value:function(e){return this.subject.material.uniforms[e]}},{key:"uniforms",get:function(){return this.subject.material.uniforms}},{key:"_set_material_param",value:function(e,t,n){var r=e[t];switch(!0){case(0,v.Z)(r):e[t]=n;break;case r instanceof d.Color:e[t].set_any(n)}}},{key:"set_material_param",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{layer:void 0,first_only:!1};if(this.subject)if((0,g.Z)(this.subject.material))this.subject.material.forEach((function(i,o){o>0&&r.first_only||(void 0!==r.layer&&!0!==r.all_layers||n._set_material_param(i,e,t),(0,g.Z)(i.material_layers)&&i.material_layers.forEach((function(i){var o=i.userData.layer_name;!0!==r.all_layers&&r.layer!==o||n._set_material_param(i,e,t)})))}));else if(this.subject.material instanceof d.Material){var i=this.subject.material_layers;void 0!==r.layer&&!0!==r.all_layers||this._set_material_param(i,e,t),(0,g.Z)(i.material_layers)&&i.material_layers.forEach((function(i){var o=i.userData.layer_name;!0!==r.all_layers&&r.layer!==o||n._set_material_param(i,e,t)}))}}}],[{key:"create_mesh",value:function(e){var t,i=e.geometry?n.create_geometry(e.geometry):void 0,o=e.material?n.create_material(e.material):void 0,a=new d.Mesh(i,o);e&&(e.geometry_translation&&(t=a.geometry).translate.apply(t,(0,r.Z)(e.geometry_translation)));return a}},{key:"create_geometry",value:function(e,t){return f.default.create_geometry(e[0],e[1],t)}},{key:"create_material",value:function(e,t){return f.default.create_material(e[0],e[1],t)}}]),n}(p.Z);t.default=b},1286:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=(n(445),n(7845)),h=n(5017);function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=function(e){(0,a.Z)(n,e);var t=d(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,l.Z)((0,o.Z)(e),"current_frame",0),(0,l.Z)((0,o.Z)(e),"tick_skip",1),(0,l.Z)((0,o.Z)(e),"playing",!0),(0,l.Z)((0,o.Z)(e),"loop",!0),(0,l.Z)((0,o.Z)(e),"hide_stopped",!0),e}return(0,i.Z)(n,[{key:"on_create",value:function(){var e=u.default.create_geometry("PlaneBufferGeometry",[1,1,1]),t=u.default.create_material("@retro.movieclip",{"uniforms.grid.value":this.grid,"uniforms.sheet.value":"".concat(this.sheet),blending:this.blending});this.subject=new h.Mesh({geometry:e,material:t})}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object}]}},{key:"show",value:function(){this.subject.visible=!0}},{key:"hide",value:function(){this.subject.visible=!1}},{key:"play",value:function(){this.current_frame=0,this.playing=!0,this.hide_stopped&&(this.subject.visible=!0)}},{key:"stop",value:function(){this.playing=!1,this.hide_stopped&&(this.subject.visible=!1)}},{key:"on_tick",value:function(e){if(this.playing){var t=this.grid[0]*this.grid[1];if(this.current_frame+=this.speed/60,this.current_frame>t&&!1===this.loop)return void this.stop();var n=Math.floor(this.current_frame)%t,r=n%this.grid[0],i=this.grid[1]-Math.floor(n/this.grid[1]);this.subject.material.uniforms.current_frame.value.x=r,this.subject.material.uniforms.current_frame.value.y=i}}}]),n}(n(9455).default);t.default=f},9791:function(e,t,n){"use strict";n.r(t);var r=n(1002),i=n(5671),o=n(3144),a=n(7326),s=n(1752),c=n(136),l=n(2963),u=n(1120),d=n(4942),f=n(7465),p=(n(7845),n(5017)),m=n(1489),g=n(9360),v=n(6378),_=n(7226);n(6461);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var x=function(e){(0,c.Z)(n,e);var t=b(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,d.Z)((0,a.Z)(e),"render_target_id",void 0),(0,d.Z)((0,a.Z)(e),"resolution_scale",.5),(0,d.Z)((0,a.Z)(e),"camera_type","perspective"),(0,d.Z)((0,a.Z)(e),"aspect",1),(0,d.Z)((0,a.Z)(e),"near",.1),(0,d.Z)((0,a.Z)(e),"far",300),(0,d.Z)((0,a.Z)(e),"left",-256),(0,d.Z)((0,a.Z)(e),"right",256),(0,d.Z)((0,a.Z)(e),"camera_mode","free"),(0,d.Z)((0,a.Z)(e),"look_target",void 0),(0,d.Z)((0,a.Z)(e),"override_material",void 0),(0,d.Z)((0,a.Z)(e),"rendering_layers",void 0),(0,d.Z)((0,a.Z)(e),"tick_rate",30),(0,d.Z)((0,a.Z)(e),"render_target_state",void 0),(0,d.Z)((0,a.Z)(e),"current_override_material",void 0),(0,d.Z)((0,a.Z)(e),"override_normal_material",new p.MeshNormalMaterial),(0,d.Z)((0,a.Z)(e),"override_depth_material",new p.MeshDepthMaterial),(0,d.Z)((0,a.Z)(e),"override_distance_material",new p.MeshDistanceMaterial),(0,d.Z)((0,a.Z)(e),"override_wireframe_material",new p.MeshBasicMaterial({wireframe:!0,wireframeLinewidth:1,fog:!1})),(0,d.Z)((0,a.Z)(e),"override_matcap_material",new p.MeshMatcapMaterial({fog:!1,matcap:"res/retro/matcap_texture/matcap (1).png"})),e}return(0,o.Z)(n,[{key:"texture",get:function(){return this.render_target_state.render_target.texture}},{key:"on_create",value:function(){(0,m.cM)("RenderTarget","created"),(0,g.Z)(this.rendering_layers)&&(this.rendering_layers={rendering:!0});var e=this.render_target_state=n.get_render_target({id:this.render_target_id,resolution_scale:this.resolution_scale,camera_type:this.camera_type});p.MathUtils.isPowerOfTwo(this.width)&&p.MathUtils.isPowerOfTwo(this.height)||(e.render_target.texture.generateMipmaps=!1),(0,m.cM)(this,e)}},{key:"on_tick",value:function(e){this.update_camera(),this.update_scene(),this.render()}},{key:"update_camera",value:function(){if("copy"===this.camera_mode){var e=this.globals.camera;e&&(this.position=[e.position.x,e.position.y,e.position.z],this.rotation=[e.rotation.x,e.rotation.y,e.rotation.z],this.fov!==e.fov&&(this.fov=e.fov),this.aspect!==e.aspect&&(this.aspect=e.aspect))}}},{key:"update_scene",value:function(){var e=this.find_component_of_type("Renderer");e&&(this.render_target_state.update_render_list(e,this.rendering_layers),this.render_target_state.setup_scene(this.globals.app.fog,this.globals.app.background,this.current_override_material))}},{key:"render",value:function(){var e=this.find_component_of_type("Renderer");e&&this.render_target_state.render(e)}},{key:"get_reactive_props",value:function(){return["mode","look_target","fov","near","far","width","height","aspect","override_material"].concat((0,s.Z)((0,u.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,s.Z)((0,u.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){switch(e){case"override_material":if((0,v.Z)(t.override_material))switch(t.override_material){case"normal":t.current_override_material=t.override_normal_material;break;case"depth":t.current_override_material=t.override_depth_material;break;case"distance":t.current_override_material=t.override_distance_material;break;case"wireframe":t.current_override_material=t.override_wireframe_material;break;case"matcap":t.current_override_material=t.override_matcap_material;var n=t.current_matcap_id=1+Math.floor(640*Math.random());t.override_matcap_material.matcap="res/retro/matcap_texture/matcap (".concat(n,").png");break;default:t.current_override_material=void 0}else(0,_.Z)(t.override_material)?t.current_override_material=t.override_material:t.current_override_material=void 0;break;case"fov":t.render_target_state.camera.fov=t.fov,t.render_target_state.camera.updateProjectionMatrix();break;case"aspect":t.render_target_state.camera.aspect=t.aspect,t.render_target_state.camera.updateProjectionMatrix();break;case"position":Array.isArray(t.position)?t.render_target_state.camera.position.set(t.position[0],t.position[1],t.position[2]):"object"===(0,r.Z)(t.position)&&t.render_target_state.camera.position.set(t.position.x,t.position.y,t.position.z);break;case"scale":Array.isArray(t.scale)?t.render_target_state.camera.scale.set(t.scale[0],t.scale[1],t.scale[2]):"object"===(0,r.Z)(t.scale)&&t.render_target_state.camera.scale.set(t.scale.x,t.scale.y,t.scale.z);break;case"rotation":Array.isArray(t.rotation)?t.render_target_state.camera.rotation.set(t.rotation[0],t.rotation[1],t.rotation[2]):"object"===(0,r.Z)(t.rotation)&&t.render_target_state.camera.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z);break;case"visible":t.subject.visible=t.visible;break;case"frusum_culled":t.subject.frustumCulled=t.frusum_culled;break;case"render_order":t.subject.renderOrder=t.render_order}}))}}]),n}(f.Z);x.list={},x.get_render_target=function(e){var t=e.id,n=void 0===t?"":t,r=e.resolution_scale,i=void 0===r?.5:r,o=e.camera_params,a=e.mag_filter,s=void 0===a?"linear":a,c=new p.Vector2(1,1),l=new p.Vector2(2,2),u=document.createElement("canvas"),f=u.getContext("2d");""===n&&(n="RT_".concat((0,m.YO)(8))),o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"perspective",fov:60,aspect:1,near:.1,far:1e4},o);var g=p.LinearFilter;switch(s){case"linear":g=p.LinearFilter;break;case"nearest":g=NearestFilter}var v=new p.WebGLRenderTarget(512,512,{minFilter:g,magFilter:g,format:p.RGBAFormat});v.depthBuffer=!1;var _=void 0;if("othographic"===o.type)_=new p.OrthographicCamera({fov:o.fov,aspect:o.aspect,near:o.near,far:o.far,position:new p.Vector3(0,0,20)});else _=new p.PerspectiveCamera(o.fov,o.aspect,o.near,o.far);var b=new p.Scene;b.updateWorldMatrix=!1;var A={resolution_scale:i,size:l,canvas2d:u,canvas2d_context:f,id:n,render_target:v,camera:_,scene:b,bitmap_data:void 0,get texture(){return v.texture},setup_scene:function(e,t,n){b.fog=e,b.background=t,b.overrideMaterial=void 0===n?null:n},update_render_list:function(e,t){var n=e.get_object_layer_list(t);b.children=n},destroy:function(){(0,m.cM)("RenderTarget","IMPLEMENT DESTROYING"),delete x.list[n]},render:function(e){var t=e.renderer;t.getSize(c),l.x===c.x&&l.x===c.x||(v.setSize(Math.floor(c.x*i),Math.floor(c.y*i)),l.copy(c),m.iV.log(l),m.iV.log(Math.floor(c.x*i),Math.floor(c.y*i)));var n=t.getRenderTarget(),r=t.xr.enabled,o=t.shadowMap.autoUpdate,a=t.preserveDrawingBuffer;t.preserveDrawingBuffer=!0,t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(A.render_target),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(A.scene,A.camera),t.xr.enabled=r,t.shadowMap.autoUpdate=o,t.preserveDrawingBuffer=a,t.setRenderTarget(n)},pick:function(e,t){var n=e.renderer;n.getSize(c),l.x===c.x&&l.x===c.x||(v.setSize(Math.floor(c.x*i),Math.floor(c.y*i)),l.copy(c),m.iV.log(l),m.iV.log(Math.floor(c.x*i),Math.floor(c.y*i)));var r=n.getRenderTarget(),o=n.xr.enabled,a=n.shadowMap.autoUpdate,s=n.preserveDrawingBuffer;_.setViewOffset(n.domElement.width,n.domElement.height,t.x*window.devicePixelRatio|0,t.y*window.devicePixelRatio|0,1,1),n.setRenderTarget(v),n.render(b,_),_.clearViewOffset();var u=new Uint8Array(4);return n.readRenderTargetPixels(v,0,0,1,1,u),n.xr.enabled=o,n.shadowMap.autoUpdate=a,n.preserveDrawingBuffer=s,n.setRenderTarget(r),[u[0],u[1],u[2]]},copy_camera:function(e){_.position.copy(e.position),_.rotation.copy(e.rotation),_.scale.copy(e.scale),_.fov=e.fov,_.aspect=e.aspect},get_pixel_color:function(e,t){m.iV.log(e),m.iV.log(e,t);var n=w*((e+1)/2),r=h*((t+1)/2),i=Math.floor(n*r*3);return m.iV.log(n,r,i),this.bitmap_data?[this.bitmap_data[i],this.bitmap_data[i+1],this.bitmap_data[i+2]]:(m.iV.log("!"),[0,0,0])}};return x.list[n]=A,x.list[n]},t.default=x},3981:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Nn}});var r={};n.r(r),n.d(r,{BOM:function(){return hn},DOCUMENT:function(){return dn},FLOW_END:function(){return fn},SCALAR:function(){return pn},createScalarToken:function(){return Jt},isCollection:function(){return mn},isScalar:function(){return gn},prettyToken:function(){return vn},resolveAsScalar:function(){return qt},setScalarValue:function(){return $t},stringify:function(){return nn},tokenType:function(){return _n},visit:function(){return ln}});var i={};n.r(i),n.d(i,{Alias:function(){return Alias},CST:function(){return r},Composer:function(){return Composer},Document:function(){return Document},Lexer:function(){return Lexer},LineCounter:function(){return LineCounter},Pair:function(){return Pair},Parser:function(){return Parser},Scalar:function(){return Scalar},Schema:function(){return Schema_Schema},YAMLError:function(){return YAMLError},YAMLMap:function(){return YAMLMap},YAMLParseError:function(){return YAMLParseError},YAMLSeq:function(){return YAMLSeq},YAMLWarning:function(){return YAMLWarning},isAlias:function(){return E},isCollection:function(){return F},isDocument:function(){return S},isMap:function(){return R},isNode:function(){return D},isPair:function(){return L},isScalar:function(){return P},isSeq:function(){return C},parse:function(){return Un},parseAllDocuments:function(){return Fn},parseDocument:function(){return Dn},stringify:function(){return On},visit:function(){return I},visitAsync:function(){return N}});var o=n(5671),a=n(3144),s=n(7326),c=n(1752),l=n(136),u=n(2963),h=n(1120),d=n(4942),f=n(7465),p=n(7845),m=n(5017),g=n(1489),v=(n(6461),n(6470)),_=n.n(v);const y=Symbol.for("yaml.alias"),b=Symbol.for("yaml.document"),x=Symbol.for("yaml.map"),w=Symbol.for("yaml.pair"),A=Symbol.for("yaml.scalar"),T=Symbol.for("yaml.seq"),M=Symbol.for("yaml.node.type"),E=e=>!!e&&"object"==typeof e&&e[M]===y,S=e=>!!e&&"object"==typeof e&&e[M]===b,R=e=>!!e&&"object"==typeof e&&e[M]===x,L=e=>!!e&&"object"==typeof e&&e[M]===w,P=e=>!!e&&"object"==typeof e&&e[M]===A,C=e=>!!e&&"object"==typeof e&&e[M]===T;function F(e){if(e&&"object"==typeof e)switch(e[M]){case x:case T:return!0}return!1}function D(e){if(e&&"object"==typeof e)switch(e[M]){case y:case x:case A:case T:return!0}return!1}class NodeBase{constructor(e){Object.defineProperty(this,M,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}}const U=Symbol("break visit"),O=Symbol("skip children"),k=Symbol("remove node");function I(e,t){const n=j(t);if(S(e)){B(null,e.contents,n,Object.freeze([e]))===k&&(e.contents=null)}else B(null,e,n,Object.freeze([]))}function B(e,t,n,r){const i=z(e,t,n,r);if(D(i)||L(i))return G(e,r,i),B(e,i,n,r);if("symbol"!=typeof i)if(F(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=B(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===U)return U;i===k&&(t.items.splice(e,1),e-=1)}}}else if(L(t)){r=Object.freeze(r.concat(t));const e=B("key",t.key,n,r);if(e===U)return U;e===k&&(t.key=null);const i=B("value",t.value,n,r);if(i===U)return U;i===k&&(t.value=null)}return i}async function N(e,t){const n=j(t);if(S(e)){await Z(null,e.contents,n,Object.freeze([e]))===k&&(e.contents=null)}else await Z(null,e,n,Object.freeze([]))}async function Z(e,t,n,r){const i=await z(e,t,n,r);if(D(i)||L(i))return G(e,r,i),Z(e,i,n,r);if("symbol"!=typeof i)if(F(t)){r=Object.freeze(r.concat(t));for(let e=0;e<t.items.length;++e){const i=await Z(e,t.items[e],n,r);if("number"==typeof i)e=i-1;else{if(i===U)return U;i===k&&(t.items.splice(e,1),e-=1)}}}else if(L(t)){r=Object.freeze(r.concat(t));const e=await Z("key",t.key,n,r);if(e===U)return U;e===k&&(t.key=null);const i=await Z("value",t.value,n,r);if(i===U)return U;i===k&&(t.value=null)}return i}function j(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function z(e,t,n,r){return"function"==typeof n?n(e,t,r):R(t)?n.Map?.(e,t,r):C(t)?n.Seq?.(e,t,r):L(t)?n.Pair?.(e,t,r):P(t)?n.Scalar?.(e,t,r):E(t)?n.Alias?.(e,t,r):void 0}function G(e,t,n){const r=t[t.length-1];if(F(r))r.items[e]=n;else if(L(r))"key"===e?r.key=n:r.value=n;else{if(!S(r)){const e=E(r)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}r.contents=n}}I.BREAK=U,I.SKIP=O,I.REMOVE=k,N.BREAK=U,N.SKIP=O,N.REMOVE=k;const V={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class Directives{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},Directives.defaultYaml,e),this.tags=Object.assign({},Directives.defaultTags,t)}clone(){const e=new Directives(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new Directives(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},Directives.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:Directives.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},Directives.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),r=n.shift();switch(r){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,r]=n;return this.tags[e]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${r}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,r]=e.match(/^(.*!)([^!]*)$/);r||t(`The ${e} tag has no suffix`);const i=this.tags[n];return i?i+decodeURIComponent(r):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>V[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let r;if(e&&n.length>0&&D(e.contents)){const t={};I(e.contents,((e,n)=>{D(n)&&n.tag&&(t[n.tag]=!0)})),r=Object.keys(t)}else r=[];for(const[i,o]of n)"!!"===i&&"tag:yaml.org,2002:"===o||e&&!r.some((e=>e.startsWith(o)))||t.push(`%TAG ${i} ${o}`);return t.join("\n")}}function W(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function H(e){const t=new Set;return I(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function X(e,t){for(let n=1;;++n){const r=`${e}${n}`;if(!t.has(r))return r}}Directives.defaultYaml={explicit:!1,version:"1.2"},Directives.defaultTags={"!!":"tag:yaml.org,2002:"};class Alias extends NodeBase{constructor(e){super(y),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return I(e,{Node:(e,n)=>{if(n===this)return I.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:r,maxAliasCount:i}=t,o=this.resolve(r);if(!o){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const a=n.get(o);if(!a||void 0===a.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(i>=0&&(a.count+=1,0===a.aliasCount&&(a.aliasCount=Q(r,o,n)),a.count*a.aliasCount>i)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return a.res}toString(e,t,n){const r=`*${this.source}`;if(e){if(W(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${r} `}return r}}function Q(e,t,n){if(E(t)){const r=t.resolve(e),i=n&&r&&n.get(r);return i?i.count*i.aliasCount:0}if(F(t)){let r=0;for(const i of t.items){const t=Q(e,i,n);t>r&&(r=t)}return r}if(L(t)){const r=Q(e,t.key,n),i=Q(e,t.value,n);return Math.max(r,i)}return 1}function Y(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>Y(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||(!P(r=e)&&!F(r)||!r.anchor))return e.toJSON(t,n);const i={aliasCount:0,count:1,res:void 0};n.anchors.set(e,i),n.onCreate=e=>{i.res=e,delete n.onCreate};const o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}var r;return"bigint"!=typeof e||n?.keep?e:Number(e)}const K=e=>!e||"function"!=typeof e&&"object"!=typeof e;class Scalar extends NodeBase{constructor(e){super(A),this.value=e}toJSON(e,t){return t?.keep?this.value:Y(this.value,e,t)}toString(){return String(this.value)}}Scalar.BLOCK_FOLDED="BLOCK_FOLDED",Scalar.BLOCK_LITERAL="BLOCK_LITERAL",Scalar.PLAIN="PLAIN",Scalar.QUOTE_DOUBLE="QUOTE_DOUBLE",Scalar.QUOTE_SINGLE="QUOTE_SINGLE";function q(e,t,n){if(S(e)&&(e=e.contents),D(e))return e;if(L(e)){const t=n.schema[x].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"function"==typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:r,onAnchor:i,onTagObj:o,schema:a,sourceObjects:s}=n;let c;if(r&&e&&"object"==typeof e){if(c=s.get(e),c)return c.anchor||(c.anchor=i(e)),new Alias(c.anchor);c={anchor:null,node:null},s.set(e,c)}t?.startsWith("!!")&&(t="tag:yaml.org,2002:"+t.slice(2));let l=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),r=e.find((e=>!e.format))??e[0];if(!r)throw new Error(`Tag ${t} not found`);return r}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,a.tags);if(!l){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new Scalar(e);return c&&(c.node=t),t}l=e instanceof Map?a[x]:Symbol.iterator in Object(e)?a[T]:a[x]}o&&(o(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,e,n):new Scalar(e);return t&&(u.tag=t),c&&(c.node=u),u}function J(e,t,n){let r=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=r,r=e}else r=new Map([[n,r]])}return q(r,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const $=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class Collection extends NodeBase{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>D(t)||L(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if($(e))this.add(t);else{const[n,...r]=e,i=this.get(n,!0);if(F(i))i.addIn(r,t);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,J(this.schema,r,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const r=this.get(t,!0);if(F(r))return r.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...r]=e,i=this.get(n,!0);return 0===r.length?!t&&P(i)?i.value:i:F(i)?i.getIn(r,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!L(t))return!1;const n=t.value;return null==n||e&&P(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const r=this.get(t,!0);return!!F(r)&&r.hasIn(n)}setIn(e,t){const[n,...r]=e;if(0===r.length)this.set(n,t);else{const e=this.get(n,!0);if(F(e))e.setIn(r,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${r}`);this.set(n,J(this.schema,r,t))}}}}Collection.maxFlowStringSingleLineLength=60;const ee=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function te(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const ne=(e,t,n)=>e.endsWith("\n")?te(n,t):n.includes("\n")?"\n"+te(n,t):(e.endsWith(" ")?"":" ")+n,re="flow",ie="block",oe="quoted";function ae(e,t,n="flow",{indentAtStart:r,lineWidth:i=80,minContentWidth:o=20,onFold:a,onOverflow:s}={}){if(!i||i<0)return e;const c=Math.max(1+o,1+i-t.length);if(e.length<=c)return e;const l=[],u={};let h,d,f=i-t.length;"number"==typeof r&&(r>i-Math.max(2,o)?l.push(0):f=i-r);let p,m=!1,g=-1,v=-1,_=-1;for(n===ie&&(g=se(e,g),-1!==g&&(f=g+c));p=e[g+=1];){if(n===oe&&"\\"===p){switch(v=g,e[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}_=g}if("\n"===p)n===ie&&(g=se(e,g)),f=g+c,h=void 0;else{if(" "===p&&d&&" "!==d&&"\n"!==d&&"\t"!==d){const t=e[g+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(h=g)}if(g>=f)if(h)l.push(h),f=h+c,h=void 0;else if(n===oe){for(;" "===d||"\t"===d;)d=p,p=e[g+=1],m=!0;const t=g>_+1?g-2:v-1;if(u[t])return e;l.push(t),u[t]=!0,f=t+c,h=void 0}else m=!0}d=p}if(m&&s&&s(),0===l.length)return e;a&&a();let y=e.slice(0,l[0]);for(let r=0;r<l.length;++r){const i=l[r],o=l[r+1]||e.length;0===i?y=`\n${t}${e.slice(0,o)}`:(n===oe&&u[i]&&(y+=`${e[i]}\\`),y+=`\n${t}${e.slice(i+1,o)}`)}return y}function se(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const ce=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),le=e=>/^(%|---|\.\.\.)/m.test(e);function ue(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:r}=t,i=t.options.doubleQuotedMinMultiLineLength,o=t.indent||(le(e)?"  ":"");let a="",s=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(a+=n.slice(s,e)+"\\ ",e+=1,s=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{a+=n.slice(s,e);const t=n.substr(e+2,4);switch(t){case"0000":a+="\\0";break;case"0007":a+="\\a";break;case"000b":a+="\\v";break;case"001b":a+="\\e";break;case"0085":a+="\\N";break;case"00a0":a+="\\_";break;case"2028":a+="\\L";break;case"2029":a+="\\P";break;default:"00"===t.substr(0,2)?a+="\\x"+t.substr(2):a+=n.substr(e,6)}e+=5,s=e+1}break;case"n":if(r||'"'===n[e+2]||n.length<i)e+=1;else{for(a+=n.slice(s,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)a+="\n",e+=2;a+=o," "===n[e+2]&&(a+="\\"),e+=1,s=e+1}break;default:e+=1}return a=s?a+n.slice(s):n,r?a:ae(a,o,oe,ce(t))}function he(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return ue(e,t);const n=t.indent||(le(e)?"  ":""),r="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?r:ae(r,n,re,ce(t))}function de(e,t){const{singleQuote:n}=t.options;let r;if(!1===n)r=ue;else{const t=e.includes('"'),i=e.includes("'");r=t&&!i?he:i&&!t?ue:n?he:ue}return r(e,t)}function fe({comment:e,type:t,value:n},r,i,o){const{blockQuote:a,commentString:s,lineWidth:c}=r.options;if(!a||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return de(n,r);const l=r.indent||(r.forceBlockIndent||le(n)?"  ":""),u="literal"===a||"folded"!==a&&t!==Scalar.BLOCK_FOLDED&&(t===Scalar.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const r=t-n,i=e.length;if(i<=r)return!1;for(let t=0,n=0;t<i;++t)if("\n"===e[t]){if(t-n>r)return!0;if(n=t+1,i-n<=r)return!1}return!0}(n,c,l.length));if(!n)return u?"|\n":">\n";let h,d;for(d=n.length;d>0;--d){const e=n[d-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let f=n.substring(d);const p=f.indexOf("\n");-1===p?h="-":n===f||p!==f.length-1?(h="+",o&&o()):h="",f&&(n=n.slice(0,-f.length),"\n"===f[f.length-1]&&(f=f.slice(0,-1)),f=f.replace(/\n+(?!\n|$)/g,`$&${l}`));let m,g=!1,v=-1;for(m=0;m<n.length;++m){const e=n[m];if(" "===e)g=!0;else{if("\n"!==e)break;v=m}}let _=n.substring(0,v<m?v+1:m);_&&(n=n.substring(_.length),_=_.replace(/\n+/g,`$&${l}`));let y=(u?"|":">")+(g?l?"2":"1":"")+h;if(e&&(y+=" "+s(e.replace(/ ?[\r\n]+/g," ")),i&&i()),u)return`${y}\n${l}${_}${n=n.replace(/\n+/g,`$&${l}`)}${f}`;return`${y}\n${l}${ae(`${_}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${f}`,l,ie,ce(r))}`}function pe(e,t,n,r){const{implicitKey:i,inFlow:o}=t,a="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:s}=e;s!==Scalar.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(a.value)&&(s=Scalar.QUOTE_DOUBLE);const c=e=>{switch(e){case Scalar.BLOCK_FOLDED:case Scalar.BLOCK_LITERAL:return i||o?de(a.value,t):fe(a,t,n,r);case Scalar.QUOTE_DOUBLE:return ue(a.value,t);case Scalar.QUOTE_SINGLE:return he(a.value,t);case Scalar.PLAIN:return function(e,t,n,r){const{type:i,value:o}=e,{actualString:a,implicitKey:s,indent:c,inFlow:l}=t;if(s&&/[\n[\]{},]/.test(o)||l&&/[[\]{},]/.test(o))return de(o,t);if(!o||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(o))return s||l||!o.includes("\n")?de(o,t):fe(e,t,n,r);if(!s&&!l&&i!==Scalar.PLAIN&&o.includes("\n"))return fe(e,t,n,r);if(""===c&&le(o))return t.forceBlockIndent=!0,fe(e,t,n,r);const u=o.replace(/\n+/g,`$&\n${c}`);if(a){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(u),{compat:n,tags:r}=t.doc.schema;if(r.some(e)||n?.some(e))return de(o,t)}return s?u:ae(u,c,re,ce(t))}(a,t,n,r);default:return null}};let l=c(s);if(null===l){const{defaultKeyType:e,defaultStringType:n}=t.options,r=i&&e||n;if(l=c(r),null===l)throw new Error(`Unsupported default string type ${r}`)}return l}function me(e,t){const n=Object.assign({blockQuote:!0,commentString:ee,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let r;switch(n.collectionStyle){case"block":r=!1;break;case"flow":r=!0;break;default:r=null}return{anchors:new Set,doc:e,indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:r,options:n}}function ge(e,t,n,r){if(L(e))return e.toString(t,n,r);if(E(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let i;const o=D(e)?e:t.doc.createNode(e,{onTagObj:e=>i=e});i||(i=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,r;if(P(t)){r=t.value;const i=e.filter((e=>e.identify?.(r)));n=i.find((e=>e.format===t.format))??i.find((e=>!e.format))}else r=t,n=e.find((e=>e.nodeClass&&r instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${r?.constructor?.name??typeof r} value`);return n}(t.doc.schema.tags,o));const a=function(e,t,{anchors:n,doc:r}){if(!r.directives)return"";const i=[],o=(P(e)||F(e))&&e.anchor;o&&W(o)&&(n.add(o),i.push(`&${o}`));const a=e.tag?e.tag:t.default?null:t.tag;return a&&i.push(r.directives.tagString(a)),i.join(" ")}(o,i,t);a.length>0&&(t.indentAtStart=(t.indentAtStart??0)+a.length+1);const s="function"==typeof i.stringify?i.stringify(o,t,n,r):P(o)?pe(o,t,n,r):o.toString(t,n,r);return a?P(o)||"{"===s[0]||"["===s[0]?`${a} ${s}`:`${a}\n${t.indent}${s}`:s}var ve=n(5108),_e=n(4155);function ye(e,t){"debug"!==e&&"warn"!==e||(void 0!==_e&&_e.emitWarning?_e.emitWarning(t):ve.warn(t))}function be(e,t,{key:n,value:r}){if(e?.doc.schema.merge&&xe(n))if(r=E(r)?r.resolve(e.doc):r,C(r))for(const n of r.items)we(e,t,n);else if(Array.isArray(r))for(const n of r)we(e,t,n);else we(e,t,r);else{const i=Y(n,"",e);if(t instanceof Map)t.set(i,Y(r,i,e));else if(t instanceof Set)t.add(i);else{const o=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(D(e)&&n&&n.doc){const t=me(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const r=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(r);e.length>40&&(e=e.substring(0,36)+'..."'),ye(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(t)}(n,i,e),a=Y(r,o,e);o in t?Object.defineProperty(t,o,{value:a,writable:!0,enumerable:!0,configurable:!0}):t[o]=a}}return t}const xe=e=>"<<"===e||P(e)&&"<<"===e.value&&(!e.type||e.type===Scalar.PLAIN);function we(e,t,n){const r=e&&E(n)?n.resolve(e.doc):n;if(!R(r))throw new Error("Merge sources must be maps or map aliases");const i=r.toJSON(null,e,Map);for(const[e,n]of i)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function Ae(e,t,n){const r=q(e,void 0,n),i=q(t,void 0,n);return new Pair(r,i)}class Pair{constructor(e,t=null){Object.defineProperty(this,M,{value:w}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return D(t)&&(t=t.clone(e)),D(n)&&(n=n.clone(e)),new Pair(t,n)}toJSON(e,t){return be(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,r,i){const{allNullValues:o,doc:a,indent:s,indentStep:c,options:{commentString:l,indentSeq:u,simpleKeys:h}}=n;let d=D(e)&&e.comment||null;if(h){if(d)throw new Error("With simple keys, key nodes cannot have comments");if(F(e))throw new Error("With simple keys, collection cannot be used as a key value")}let f=!h&&(!e||d&&null==t&&!n.inFlow||F(e)||(P(e)?e.type===Scalar.BLOCK_FOLDED||e.type===Scalar.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!f&&(h||!o),indent:s+c});let p=!1,m=!1,g=ge(e,n,(()=>p=!0),(()=>m=!0));if(!f&&!n.inFlow&&g.length>1024){if(h)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");f=!0}if(n.inFlow){if(o||null==t)return p&&r&&r(),""===g?"?":f?`? ${g}`:g}else if(o&&!h||null==t&&f)return g=`? ${g}`,d&&!p?g+=ne(g,n.indent,l(d)):m&&i&&i(),g;p&&(d=null),f?(d&&(g+=ne(g,n.indent,l(d))),g=`? ${g}\n${s}:`):(g=`${g}:`,d&&(g+=ne(g,n.indent,l(d))));let v="",_=null;D(t)?(t.spaceBefore&&(v="\n"),t.commentBefore&&(v+=`\n${te(l(t.commentBefore),n.indent)}`),_=t.comment):t&&"object"==typeof t&&(t=a.createNode(t));n.implicitKey=!1,f||d||!P(t)||(n.indentAtStart=g.length+1),m=!1,u||!(c.length>=2)||n.inFlow||f||!C(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substr(2));let y=!1;const b=ge(t,n,(()=>y=!0),(()=>m=!0));let x=" ";v||d?x=""!==b||n.inFlow?`${v}\n${n.indent}`:"\n"===v?"\n\n":v:!f&&F(t)?("["===b[0]||"{"===b[0])&&!b.includes("\n")||(x=`\n${n.indent}`):""!==b&&"\n"!==b[0]||(x="");return g+=x+b,n.inFlow?y&&r&&r():_&&!y?g+=ne(g,n.indent,l(_)):m&&i&&i(),g}(this,e,t,n):JSON.stringify(this)}}function Te(e,t,n){return(t.inFlow??e.flow?Ee:Me)(e,t,n)}function Me({comment:e,items:t},n,{blockItemPrefix:r,flowChars:i,itemIndent:o,onChompKeep:a,onComment:s}){const{indent:c,options:{commentString:l}}=n,u=Object.assign({},n,{indent:o,type:null});let h=!1;const d=[];for(let e=0;e<t.length;++e){const i=t[e];let a=null;if(D(i))!h&&i.spaceBefore&&d.push(""),Se(n,d,i.commentBefore,h),i.comment&&(a=i.comment);else if(L(i)){const e=D(i.key)?i.key:null;e&&(!h&&e.spaceBefore&&d.push(""),Se(n,d,e.commentBefore,h))}h=!1;let s=ge(i,u,(()=>a=null),(()=>h=!0));a&&(s+=ne(s,o,l(a))),h&&a&&(h=!1),d.push(r+s)}let f;if(0===d.length)f=i.start+i.end;else{f=d[0];for(let e=1;e<d.length;++e){const t=d[e];f+=t?`\n${c}${t}`:"\n"}}return e?(f+="\n"+te(l(e),c),s&&s()):h&&a&&a(),f}function Ee({comment:e,items:t},n,{flowChars:r,itemIndent:i,onComment:o}){const{indent:a,indentStep:s,options:{commentString:c}}=n;i+=s;const l=Object.assign({},n,{indent:i,inFlow:!0,type:null});let u=!1,h=0;const d=[];for(let e=0;e<t.length;++e){const r=t[e];let o=null;if(D(r))r.spaceBefore&&d.push(""),Se(n,d,r.commentBefore,!1),r.comment&&(o=r.comment);else if(L(r)){const e=D(r.key)?r.key:null;e&&(e.spaceBefore&&d.push(""),Se(n,d,e.commentBefore,!1),e.comment&&(u=!0));const t=D(r.value)?r.value:null;t?(t.comment&&(o=t.comment),t.commentBefore&&(u=!0)):null==r.value&&e&&e.comment&&(o=e.comment)}o&&(u=!0);let a=ge(r,l,(()=>o=null));e<t.length-1&&(a+=","),o&&(a+=ne(a,i,c(o))),!u&&(d.length>h||a.includes("\n"))&&(u=!0),d.push(a),h=d.length}let f;const{start:p,end:m}=r;if(0===d.length)f=p+m;else{if(!u){u=d.reduce(((e,t)=>e+t.length+2),2)>Collection.maxFlowStringSingleLineLength}if(u){f=p;for(const e of d)f+=e?`\n${s}${a}${e}`:"\n";f+=`\n${a}${m}`}else f=`${p} ${d.join(" ")} ${m}`}return e&&(f+=ne(f,c(e),a),o&&o()),f}function Se({indent:e,options:{commentString:t}},n,r,i){if(r&&i&&(r=r.replace(/^\n+/,"")),r){const i=te(t(r),e);n.push(i.trimStart())}}function Re(e,t){const n=P(t)?t.value:t;for(const r of e)if(L(r)){if(r.key===t||r.key===n)return r;if(P(r.key)&&r.key.value===n)return r}}class YAMLMap extends Collection{constructor(e){super(x,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:map"}add(e,t){let n;n=L(e)?e:e&&"object"==typeof e&&"key"in e?new Pair(e.key,e.value):new Pair(e,e?.value);const r=Re(this.items,n.key),i=this.schema?.sortMapEntries;if(r){if(!t)throw new Error(`Key ${n.key} already set`);P(r.value)&&K(n.value)?r.value.value=n.value:r.value=n.value}else if(i){const e=this.items.findIndex((e=>i(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=Re(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=Re(this.items,e)?.value;return(!t&&P(n)?n.value:n)??void 0}has(e){return!!Re(this.items,e)}set(e,t){this.add(new Pair(e,t),!0)}toJSON(e,t,n){const r=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(r);for(const e of this.items)be(t,r,e);return r}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!L(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),Te(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const Le={collection:"map",createNode:function(e,t,n){const{keepUndefined:r,replacer:i}=n,o=new YAMLMap(e),a=(e,a)=>{if("function"==typeof i)a=i.call(t,e,a);else if(Array.isArray(i)&&!i.includes(e))return;(void 0!==a||r)&&o.items.push(Ae(e,a,n))};if(t instanceof Map)for(const[e,n]of t)a(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))a(e,t[e]);return"function"==typeof e.sortMapEntries&&o.items.sort(e.sortMapEntries),o},default:!0,nodeClass:YAMLMap,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(R(e)||t("Expected a mapping for this tag"),e)};class YAMLSeq extends Collection{constructor(e){super(T,e),this.items=[]}static get tagName(){return"tag:yaml.org,2002:seq"}add(e){this.items.push(e)}delete(e){const t=Pe(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=Pe(e);if("number"!=typeof n)return;const r=this.items[n];return!t&&P(r)?r.value:r}has(e){const t=Pe(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=Pe(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[n];P(r)&&K(t)?r.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let r=0;for(const e of this.items)n.push(Y(e,String(r++),t));return n}toString(e,t,n){return e?Te(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function Pe(e){let t=P(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const Ce={collection:"seq",createNode:function(e,t,n){const{replacer:r}=n,i=new YAMLSeq(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let o of t){if("function"==typeof r){const n=t instanceof Set?o:String(e++);o=r.call(t,n,o)}i.items.push(q(o,void 0,n))}}return i},default:!0,nodeClass:YAMLSeq,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(C(e)||t("Expected a sequence for this tag"),e)},Fe={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,r)=>pe(e,t=Object.assign({actualString:!0},t),n,r)},De={identify:e=>null==e,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Scalar(null),stringify:({source:e},t)=>"string"==typeof e&&De.test.test(e)?e:t.options.nullStr},Ue={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Scalar("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&Ue.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function Oe({format:e,minFractionDigits:t,tag:n,value:r}){if("bigint"==typeof r)return String(r);const i="number"==typeof r?r:Number(r);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let o=JSON.stringify(r);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(o)){let e=o.indexOf(".");e<0&&(e=o.length,o+=".");let n=t-(o.length-e-1);for(;n-- >0;)o+="0"}return o}const ke={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Oe},Ie={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Oe(e)}},Be={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Scalar(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:Oe},Ne=e=>"bigint"==typeof e||Number.isInteger(e),Ze=(e,t,n,{intAsBigInt:r})=>r?BigInt(e):parseInt(e.substring(t),n);function je(e,t,n){const{value:r}=e;return Ne(r)&&r>=0?n+r.toString(t):Oe(e)}const ze={identify:e=>Ne(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Ze(e,2,8,n),stringify:e=>je(e,8,"0o")},Ge={identify:Ne,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Ze(e,0,10,n),stringify:Oe},Ve={identify:e=>Ne(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Ze(e,2,16,n),stringify:e=>je(e,16,"0x")},We=[Le,Ce,Fe,De,Ue,ze,Ge,Ve,ke,Ie,Be];function He(e){return"bigint"==typeof e||Number.isInteger(e)}const Xe=({value:e})=>JSON.stringify(e),Qe=[Le,Ce].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Xe},{identify:e=>null==e,createNode:()=>new Scalar(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Xe},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:Xe},{identify:He,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>He(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Xe}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)});var Ye=n(8764).lW;const Ke={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Ye)return Ye.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},r,i,o){const a=n;let s;if("function"==typeof Ye)s=a instanceof Ye?a.toString("base64"):Ye.from(a.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<a.length;++t)e+=String.fromCharCode(a[t]);s=btoa(e)}}if(t||(t=Scalar.BLOCK_LITERAL),t!==Scalar.QUOTE_DOUBLE){const e=Math.max(r.options.lineWidth-r.indent.length,r.options.minContentWidth),n=Math.ceil(s.length/e),i=new Array(n);for(let t=0,r=0;t<n;++t,r+=e)i[t]=s.substr(r,e);s=i.join(t===Scalar.BLOCK_LITERAL?"\n":" ")}return pe({comment:e,type:t,value:s},r,i,o)}};function qe(e,t){if(C(e))for(let n=0;n<e.items.length;++n){let r=e.items[n];if(!L(r)){if(R(r)){r.items.length>1&&t("Each pair must have its own sequence indicator");const e=r.items[0]||new Pair(new Scalar(null));if(r.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${r.commentBefore}\n${e.key.commentBefore}`:r.commentBefore),r.comment){const t=e.value??e.key;t.comment=t.comment?`${r.comment}\n${t.comment}`:r.comment}r=e}e.items[n]=L(r)?r:new Pair(r)}}else t("Expected a sequence for this tag");return e}function Je(e,t,n){const{replacer:r}=n,i=new YAMLSeq(e);i.tag="tag:yaml.org,2002:pairs";let o=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let a,s;if("function"==typeof r&&(e=r.call(t,String(o++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);a=e[0],s=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);a=t[0],s=e[a]}else a=e;i.items.push(Ae(a,s,n))}return i}const $e={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:qe,createNode:Je};class YAMLOMap extends YAMLSeq{constructor(){super(),this.add=YAMLMap.prototype.add.bind(this),this.delete=YAMLMap.prototype.delete.bind(this),this.get=YAMLMap.prototype.get.bind(this),this.has=YAMLMap.prototype.has.bind(this),this.set=YAMLMap.prototype.set.bind(this),this.tag=YAMLOMap.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let r,i;if(L(e)?(r=Y(e.key,"",t),i=Y(e.value,r,t)):r=Y(e,"",t),n.has(r))throw new Error("Ordered maps must not include duplicate keys");n.set(r,i)}return n}}YAMLOMap.tag="tag:yaml.org,2002:omap";const et={collection:"seq",identify:e=>e instanceof Map,nodeClass:YAMLOMap,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=qe(e,t),r=[];for(const{key:e}of n.items)P(e)&&(r.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):r.push(e.value));return Object.assign(new YAMLOMap,n)},createNode(e,t,n){const r=Je(e,t,n),i=new YAMLOMap;return i.items=r.items,i}};function tt({value:e,source:t},n){return t&&(e?nt:rt).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const nt={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Scalar(!0),stringify:tt},rt={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Scalar(!1),stringify:tt},it={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Oe},ot={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():Oe(e)}},at={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Scalar(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const r=e.substring(n+1).replace(/_/g,"");"0"===r[r.length-1]&&(t.minFractionDigits=r.length)}return t},stringify:Oe},st=e=>"bigint"==typeof e||Number.isInteger(e);function ct(e,t,n,{intAsBigInt:r}){const i=e[0];if("-"!==i&&"+"!==i||(t+=1),e=e.substring(t).replace(/_/g,""),r){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===i?BigInt(-1)*t:t}const o=parseInt(e,n);return"-"===i?-1*o:o}function lt(e,t,n){const{value:r}=e;if(st(r)){const e=r.toString(t);return r<0?"-"+n+e.substr(1):n+e}return Oe(e)}const ut={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>ct(e,2,2,n),stringify:e=>lt(e,2,"0b")},ht={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>ct(e,1,8,n),stringify:e=>lt(e,8,"0")},dt={identify:st,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>ct(e,0,10,n),stringify:Oe},ft={identify:st,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>ct(e,2,16,n),stringify:e=>lt(e,16,"0x")};class YAMLSet extends YAMLMap{constructor(e){super(e),this.tag=YAMLSet.tag}add(e){let t;t=L(e)?e:"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Pair(e.key,null):new Pair(e,null);Re(this.items,t.key)||this.items.push(t)}get(e,t){const n=Re(this.items,e);return!t&&L(n)?P(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=Re(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Pair(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}YAMLSet.tag="tag:yaml.org,2002:set";const pt={collection:"map",identify:e=>e instanceof Set,nodeClass:YAMLSet,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(R(e)){if(e.hasAllNullValues(!0))return Object.assign(new YAMLSet,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:r}=n,i=new YAMLSet(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof r&&(e=r.call(t,e,e)),i.items.push(Ae(e,null,n));return i}};function mt(e,t){const n=e[0],r="-"===n||"+"===n?e.substring(1):e,i=e=>t?BigInt(e):Number(e),o=r.replace(/_/g,"").split(":").reduce(((e,t)=>e*i(60)+i(t)),i(0));return"-"===n?i(-1)*o:o}function gt(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return Oe(e);let r="";t<0&&(r="-",t*=n(-1));const i=n(60),o=[t%i];return t<60?o.unshift(0):(t=(t-o[0])/i,o.unshift(t%i),t>=60&&(t=(t-o[0])/i,o.unshift(t))),r+o.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const vt={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>mt(e,n),stringify:gt},_t={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>mt(e,!1),stringify:gt},yt={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(yt.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,r,i,o,a,s]=t.map(Number),c=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,r-1,i,o||0,a||0,s||0,c);const u=t[8];if(u&&"Z"!==u){let e=mt(u,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},bt=[Le,Ce,Fe,De,nt,rt,ut,ht,dt,ft,it,ot,at,Ke,et,$e,pt,vt,_t,yt],xt=new Map([["core",We],["failsafe",[Le,Ce,Fe]],["json",Qe],["yaml11",bt],["yaml-1.1",bt]]),wt={binary:Ke,bool:Ue,float:Be,floatExp:Ie,floatNaN:ke,floatTime:_t,int:Ge,intHex:Ve,intOct:ze,intTime:vt,map:Le,null:De,omap:et,pairs:$e,seq:Ce,set:pt,timestamp:yt},At={"tag:yaml.org,2002:binary":Ke,"tag:yaml.org,2002:omap":et,"tag:yaml.org,2002:pairs":$e,"tag:yaml.org,2002:set":pt,"tag:yaml.org,2002:timestamp":yt};function Tt(e,t){let n=xt.get(t);if(!n){if(!Array.isArray(e)){const e=Array.from(xt.keys()).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}n=[]}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=wt[e];if(t)return t;const n=Object.keys(wt).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}const Mt=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class Schema_Schema{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:r,schema:i,sortMapEntries:o,toStringDefaults:a}){this.compat=Array.isArray(e)?Tt(e,"compat"):e?Tt(null,e):null,this.merge=!!n,this.name="string"==typeof i&&i||"core",this.knownTags=r?At:{},this.tags=Tt(t,this.name),this.toStringOptions=a??null,Object.defineProperty(this,x,{value:Le}),Object.defineProperty(this,A,{value:Fe}),Object.defineProperty(this,T,{value:Ce}),this.sortMapEntries="function"==typeof o?o:!0===o?Mt:null}clone(){const e=Object.create(Schema_Schema.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function Et(e,t,n,r){if(r&&"object"==typeof r)if(Array.isArray(r))for(let t=0,n=r.length;t<n;++t){const n=r[t],i=Et(e,r,String(t),n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}else if(r instanceof Map)for(const t of Array.from(r.keys())){const n=r.get(t),i=Et(e,r,t,n);void 0===i?r.delete(t):i!==n&&r.set(t,i)}else if(r instanceof Set)for(const t of Array.from(r)){const n=Et(e,r,t,t);void 0===n?r.delete(t):n!==t&&(r.delete(t),r.add(n))}else for(const[t,n]of Object.entries(r)){const i=Et(e,r,t,n);void 0===i?delete r[t]:i!==n&&(r[t]=i)}return e.call(t,n,r)}class Document{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,M,{value:b});let r=null;"function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t,t=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=i;let{version:o}=i;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(o=this.directives.yaml.version)):this.directives=new Directives({version:o}),this.setSchema(o,n),this.contents=void 0===e?null:this.createNode(e,r,n)}clone(){const e=Object.create(Document.prototype,{[M]:{value:b}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=D(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){St(this.contents)&&this.contents.add(e)}addIn(e,t){St(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=H(this);e.anchor=!t||n.has(t)?X(t||"a",n):t}return new Alias(e.anchor)}createNode(e,t,n){let r;if("function"==typeof t)e=t.call({"":e},"",e),r=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),r=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:i,anchorPrefix:o,flow:a,keepUndefined:s,onTagObj:c,tag:l}=n??{},{onAnchor:u,setAnchors:h,sourceObjects:d}=function(e,t){const n=[],r=new Map;let i=null;return{onAnchor:r=>{n.push(r),i||(i=H(e));const o=X(t,i);return i.add(o),o},setAnchors:()=>{for(const e of n){const t=r.get(e);if("object"!=typeof t||!t.anchor||!P(t.node)&&!F(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:r}}(this,o||"a"),f=q(e,l,{aliasDuplicateObjects:i??!0,keepUndefined:s??!1,onAnchor:u,onTagObj:c,replacer:r,schema:this.schema,sourceObjects:d});return a&&F(f)&&(f.flow=!0),h(),f}createPair(e,t,n={}){const r=this.createNode(e,null,n),i=this.createNode(t,null,n);return new Pair(r,i)}delete(e){return!!St(this.contents)&&this.contents.delete(e)}deleteIn(e){return $(e)?null!=this.contents&&(this.contents=null,!0):!!St(this.contents)&&this.contents.deleteIn(e)}get(e,t){return F(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return $(e)?!t&&P(this.contents)?this.contents.value:this.contents:F(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!F(this.contents)&&this.contents.has(e)}hasIn(e){return $(e)?void 0!==this.contents:!!F(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=J(this.schema,[e],t):St(this.contents)&&this.contents.set(e,t)}setIn(e,t){$(e)?this.contents=t:null==this.contents?this.contents=J(this.schema,Array.from(e),t):St(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new Directives({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new Directives({version:e}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Schema_Schema(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:r,onAnchor:i,reviver:o}={}){const a={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof r?r:100,stringify:ge},s=Y(this.contents,t??"",a);if("function"==typeof i)for(const{count:e,res:t}of a.anchors.values())i(t,e);return"function"==typeof o?Et(o,{"":s},"",s):s}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let r=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),r=!0):e.directives.docStart&&(r=!0)}r&&n.push("---");const i=me(e,t),{commentString:o}=i.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=o(e.commentBefore);n.unshift(te(t,""))}let a=!1,s=null;if(e.contents){if(D(e.contents)){if(e.contents.spaceBefore&&r&&n.push(""),e.contents.commentBefore){const t=o(e.contents.commentBefore);n.push(te(t,""))}i.forceBlockIndent=!!e.comment,s=e.contents.comment}const t=s?void 0:()=>a=!0;let c=ge(e.contents,i,(()=>s=null),t);s&&(c+=ne(c,"",o(s))),"|"!==c[0]&&">"!==c[0]||"---"!==n[n.length-1]?n.push(c):n[n.length-1]=`--- ${c}`}else n.push(ge(e.contents,i));if(e.directives?.docEnd)if(e.comment){const t=o(e.comment);t.includes("\n")?(n.push("..."),n.push(te(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&a&&(t=t.replace(/^\n+/,"")),t&&(a&&!s||""===n[n.length-1]||n.push(""),n.push(te(o(t),"")))}return n.join("\n")+"\n"}(this,e)}}function St(e){if(F(e))return!0;throw new Error("Expected a YAML collection as document contents")}class YAMLError extends Error{constructor(e,t,n,r){super(),this.name=e,this.code=n,this.message=r,this.pos=t}}class YAMLParseError extends YAMLError{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class YAMLWarning extends YAMLError{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const Rt=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:r,col:i}=n.linePos[0];n.message+=` at line ${r}, column ${i}`;let o=i-1,a=e.substring(t.lineStarts[r-1],t.lineStarts[r]).replace(/[\n\r]+$/,"");if(o>=60&&a.length>80){const e=Math.min(o-39,a.length-79);a="…"+a.substring(e),o-=e-1}if(a.length>80&&(a=a.substring(0,79)+"…"),r>1&&/^ *$/.test(a.substring(0,o))){let n=e.substring(t.lineStarts[r-2],t.lineStarts[r-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),a=n+a}if(/[^ ]/.test(a)){let e=1;const t=n.linePos[1];t&&t.line===r&&t.col>i&&(e=Math.min(t.col-i,80-o));const s=" ".repeat(o)+"^".repeat(e);n.message+=`:\n\n${a}\n${s}\n`}};function Lt(e,{flow:t,indicator:n,next:r,offset:i,onError:o,startOnNewline:a}){let s=!1,c=a,l=a,u="",h="",d=!1,f=!1,p=!1,m=null,g=null,v=null,_=null,y=null;for(const r of e)switch(p&&("space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),r.type){case"space":!t&&c&&"doc-start"!==n&&"\t"===r.source[0]&&o(r,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||o(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=r.source.substring(1)||" ";u?u+=h+e:u=e,h="",c=!1;break}case"newline":c?u?u+=r.source:s=!0:h+=r.source,c=!0,d=!0,(m||g)&&(f=!0),l=!0;break;case"anchor":m&&o(r,"MULTIPLE_ANCHORS","A node can have at most one anchor"),r.source.endsWith(":")&&o(r.offset+r.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=r,null===y&&(y=r.offset),c=!1,l=!1,p=!0;break;case"tag":g&&o(r,"MULTIPLE_TAGS","A node can have at most one tag"),g=r,null===y&&(y=r.offset),c=!1,l=!1,p=!0;break;case n:(m||g)&&o(r,"BAD_PROP_ORDER",`Anchors and tags must be after the ${r.source} indicator`),_&&o(r,"UNEXPECTED_TOKEN",`Unexpected ${r.source} in ${t??"collection"}`),_=r,c=!1,l=!1;break;case"comma":if(t){v&&o(r,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),v=r,c=!1,l=!1;break}default:o(r,"UNEXPECTED_TOKEN",`Unexpected ${r.type} token`),c=!1,l=!1}const b=e[e.length-1],x=b?b.offset+b.source.length:i;return p&&r&&"space"!==r.type&&"newline"!==r.type&&"comma"!==r.type&&("scalar"!==r.type||""!==r.source)&&o(r.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:v,found:_,spaceBefore:s,comment:u,hasNewline:d,hasNewlineAfterProp:f,anchor:m,tag:g,end:x,start:y??x}}function Pt(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(Pt(t.key)||Pt(t.value))return!0}return!1;default:return!0}}function Ct(e,t,n){if("flow-collection"===t?.type){const r=t.end[0];if(r.indent===e&&("]"===r.source||"}"===r.source)&&Pt(t)){n(r,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function Ft(e,t,n){const{uniqueKeys:r}=e.options;if(!1===r)return!1;const i="function"==typeof r?r:(t,n)=>t===n||P(t)&&P(n)&&t.value===n.value&&!("<<"===t.value&&e.schema.merge);return t.some((e=>i(e.key,n)))}const Dt="All mapping items must start at the same column";function Ut(e,t,n,r){let i="";if(e){let o=!1,a="";for(const s of e){const{source:e,type:c}=s;switch(c){case"space":o=!0;break;case"comment":{n&&!o&&r(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";i?i+=a+t:i=t,a="";break}case"newline":i&&(a+=e),o=!0;break;default:r(s,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=e.length}}return{comment:i,offset:t}}const Ot="Block collections are not allowed within flow collections",kt=e=>e&&("block-map"===e.type||"block-seq"===e.type);function It(e,t,n,r,i){let o;switch(n.type){case"block-map":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o=new YAMLMap(n.schema);n.atRoot&&(n.atRoot=!1);let a=r.offset;for(const s of r.items){const{start:c,key:l,sep:u,value:h}=s,d=Lt(c,{indicator:"explicit-key-ind",next:l??u?.[0],offset:a,onError:i,startOnNewline:!0}),f=!d.found;if(f){if(l&&("block-seq"===l.type?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in l&&l.indent!==r.indent&&i(a,"BAD_INDENT",Dt)),!d.anchor&&!d.tag&&!u){d.comment&&(o.comment?o.comment+="\n"+d.comment:o.comment=d.comment);continue}(d.hasNewlineAfterProp||Pt(l))&&i(l??c[c.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==r.indent&&i(a,"BAD_INDENT",Dt);const p=d.end,m=l?e(n,l,d,i):t(n,p,c,null,d,i);n.schema.compat&&Ct(r.indent,l,i),Ft(n,o.items,m)&&i(p,"DUPLICATE_KEY","Map keys must be unique");const g=Lt(u??[],{indicator:"map-value-ind",next:h,offset:m.range[2],onError:i,startOnNewline:!l||"block-scalar"===l.type});if(a=g.end,g.found){f&&("block-map"!==h?.type||g.hasNewline||i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<g.found.offset-1024&&i(m.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const c=h?e(n,h,g,i):t(n,a,u,null,g,i);n.schema.compat&&Ct(r.indent,h,i),a=c.range[2];const l=new Pair(m,c);n.options.keepSourceTokens&&(l.srcToken=s),o.items.push(l)}else{f&&i(m.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(m.comment?m.comment+="\n"+g.comment:m.comment=g.comment);const e=new Pair(m);n.options.keepSourceTokens&&(e.srcToken=s),o.items.push(e)}}return o.range=[r.offset,a,a],o}(e,t,n,i);break;case"block-seq":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o=new YAMLSeq(n.schema);n.atRoot&&(n.atRoot=!1);let a=r.offset;for(const{start:s,value:c}of r.items){const l=Lt(s,{indicator:"seq-item-ind",next:c,offset:a,onError:i,startOnNewline:!0});if(a=l.end,!l.found){if(!(l.anchor||l.tag||c)){l.comment&&(o.comment=l.comment);continue}c&&"block-seq"===c.type?i(a,"BAD_INDENT","All sequence items must start at the same column"):i(a,"MISSING_CHAR","Sequence item without - indicator")}const u=c?e(n,c,l,i):t(n,a,s,null,l,i);n.schema.compat&&Ct(r.indent,c,i),a=u.range[2],o.items.push(u)}return o.range=[r.offset,a,a],o}(e,t,n,i);break;case"flow-collection":o=function({composeNode:e,composeEmptyNode:t},n,r,i){const o="{"===r.start.source,a=o?"flow map":"flow sequence",s=o?new YAMLMap(n.schema):new YAMLSeq(n.schema);s.flow=!0;const c=n.atRoot;c&&(n.atRoot=!1);let l=r.offset+r.start.source.length;for(let c=0;c<r.items.length;++c){const u=r.items[c],{start:h,key:d,sep:f,value:p}=u,m=Lt(h,{flow:a,indicator:"explicit-key-ind",next:d??f?.[0],offset:l,onError:i,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||f||p)){0===c&&m.comma?i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):c<r.items.length-1&&i(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),m.comment&&(s.comment?s.comment+="\n"+m.comment:s.comment=m.comment),l=m.end;continue}!o&&n.options.strict&&Pt(d)&&i(d,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===c)m.comma&&i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(m.comma||i(m.start,"MISSING_CHAR",`Missing , between ${a} items`),m.comment){let e="";e:for(const t of h)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=s.items[s.items.length-1];L(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(o||f||m.found){const r=m.end,c=d?e(n,d,m,i):t(n,r,h,null,m,i);kt(d)&&i(c.range,"BLOCK_IN_FLOW",Ot);const g=Lt(f??[],{flow:a,indicator:"map-value-ind",next:p,offset:c.range[2],onError:i,startOnNewline:!1});if(g.found){if(!o&&!m.found&&n.options.strict){if(f)for(const e of f){if(e===g.found)break;if("newline"===e.type){i(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&i(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?i(p,"MISSING_CHAR",`Missing space after : in ${a}`):i(g.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const v=p?e(n,p,g,i):g.found?t(n,g.end,f,null,g,i):null;v?kt(p)&&i(v.range,"BLOCK_IN_FLOW",Ot):g.comment&&(c.comment?c.comment+="\n"+g.comment:c.comment=g.comment);const _=new Pair(c,v);if(n.options.keepSourceTokens&&(_.srcToken=u),o){const e=s;Ft(n,e.items,c)&&i(r,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(_)}else{const e=new YAMLMap(n.schema);e.flow=!0,e.items.push(_),s.items.push(e)}l=v?v.range[2]:g.end}else{const r=p?e(n,p,m,i):t(n,m.end,f,null,m,i);s.items.push(r),l=r.range[2],kt(p)&&i(r.range,"BLOCK_IN_FLOW",Ot)}}const u=o?"}":"]",[h,...d]=r.end;let f=l;if(h&&h.source===u)f=h.offset+h.source.length;else{const e=a[0].toUpperCase()+a.substring(1);i(l,c?"MISSING_CHAR":"BAD_INDENT",c?`${e} must end with a ${u}`:`${e} in block collection must be sufficiently indented and end with a ${u}`),h&&1!==h.source.length&&d.unshift(h)}if(d.length>0){const e=Ut(d,f,n.options.strict,i);e.comment&&(s.comment?s.comment+="\n"+e.comment:s.comment=e.comment),s.range=[r.offset,f,e.offset]}else s.range=[r.offset,f,f];return s}(e,t,n,i)}if(!r)return o;const a=t.directives.tagName(r.source,(e=>i(r,"TAG_RESOLVE_FAILED",e)));if(!a)return o;const s=o.constructor;if("!"===a||a===s.tagName)return o.tag=s.tagName,o;const c=R(o)?"map":"seq";let l=t.schema.tags.find((e=>e.collection===c&&e.tag===a));if(!l){const e=t.schema.knownTags[a];if(!e||e.collection!==c)return i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${a}`,!0),o.tag=a,o;t.schema.tags.push(Object.assign({},e,{default:!1})),l=e}const u=l.resolve(o,(e=>i(r,"TAG_RESOLVE_FAILED",e)),t.options),h=D(u)?u:new Scalar(u);return h.range=o.range,h.tag=a,l?.format&&(h.format=l.format),h}function Bt(e,t,n){const r=e.offset,i=function({offset:e,props:t},n,r){if("block-scalar-header"!==t[0].type)return r(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=t[0],o=i[0];let a=0,s="",c=-1;for(let t=1;t<i.length;++t){const n=i[t];if(s||"-"!==n&&"+"!==n){const r=Number(n);!a&&r?a=r:-1===c&&(c=e+t)}else s=n}-1!==c&&r(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,u="",h=i.length;for(let e=1;e<t.length;++e){const i=t[e];switch(i.type){case"space":l=!0;case"newline":h+=i.source.length;break;case"comment":if(n&&!l){r(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}h+=i.source.length,u=i.source.substring(1);break;case"error":r(i,"UNEXPECTED_TOKEN",i.message),h+=i.source.length;break;default:{r(i,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${i.type}`);const e=i.source;e&&"string"==typeof e&&(h+=e.length)}}}return{mode:o,indent:a,chomp:s,comment:u,length:h}}(e,t,n);if(!i)return{value:"",type:null,comment:"",range:[r,r,r]};const o=">"===i.mode?Scalar.BLOCK_FOLDED:Scalar.BLOCK_LITERAL,a=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],r=n.match(/^( *)/),i=[r?.[1]?[r[1],n.slice(r[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)i.push([t[e],t[e+1]]);return i}(e.source):[];let s=a.length;for(let e=a.length-1;e>=0;--e){const t=a[e][1];if(""!==t&&"\r"!==t)break;s=e}if(0===s){const t="+"===i.chomp&&a.length>0?"\n".repeat(Math.max(1,a.length-1)):"";let n=r+i.length;return e.source&&(n+=e.source.length),{value:t,type:o,comment:i.comment,range:[r,n,n]}}let c=e.indent+i.indent,l=e.offset+i.length,u=0;for(let e=0;e<s;++e){const[t,r]=a[e];if(""!==r&&"\r"!==r){if(t.length<c){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}0===i.indent&&(c=t.length),u=e;break}0===i.indent&&t.length>c&&(c=t.length),l+=t.length+r.length+1}for(let e=a.length-1;e>=s;--e)a[e][0].length>c&&(s=e+1);let h="",d="",f=!1;for(let e=0;e<u;++e)h+=a[e][0].slice(c)+"\n";for(let e=u;e<s;++e){let[t,r]=a[e];l+=t.length+r.length+1;const s="\r"===r[r.length-1];if(s&&(r=r.slice(0,-1)),r&&t.length<c){const e=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;n(l-r.length-(s?2:1),"BAD_INDENT",e),t=""}o===Scalar.BLOCK_LITERAL?(h+=d+t.slice(c)+r,d="\n"):t.length>c||"\t"===r[0]?(" "===d?d="\n":f||"\n"!==d||(d="\n\n"),h+=d+t.slice(c)+r,d="\n",f=!0):""===r?"\n"===d?h+="\n":d="\n":(h+=d+r,d=" ",f=!1)}switch(i.chomp){case"-":break;case"+":for(let e=s;e<a.length;++e)h+="\n"+a[e][0].slice(c);"\n"!==h[h.length-1]&&(h+="\n");break;default:h+="\n"}const p=r+i.length+e.source.length;return{value:h,type:o,comment:i.comment,range:[r,p,p]}}function Nt(e,t,n){const{offset:r,type:i,source:o,end:a}=e;let s,c;const l=(e,t,i)=>n(r+e,t,i);switch(i){case"scalar":s=Scalar.PLAIN,c=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return Zt(e)}(o,l);break;case"single-quoted-scalar":s=Scalar.QUOTE_SINGLE,c=function(e,t){"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote");return Zt(e.slice(1,-1)).replace(/''/g,"'")}(o,l);break;case"double-quoted-scalar":s=Scalar.QUOTE_DOUBLE,c=function(e,t){let n="";for(let r=1;r<e.length-1;++r){const i=e[r];if("\r"!==i||"\n"!==e[r+1])if("\n"===i){const{fold:t,offset:i}=jt(e,r);n+=t,r=i}else if("\\"===i){let i=e[++r];const o=zt[i];if(o)n+=o;else if("\n"===i)for(i=e[r+1];" "===i||"\t"===i;)i=e[1+ ++r];else if("\r"===i&&"\n"===e[r+1])for(i=e[1+ ++r];" "===i||"\t"===i;)i=e[1+ ++r];else if("x"===i||"u"===i||"U"===i){const o={x:2,u:4,U:8}[i];n+=Gt(e,r+1,o,t),r+=o}else{const i=e.substr(r-1,2);t(r-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),n+=i}}else if(" "===i||"\t"===i){const t=r;let o=e[r+1];for(;" "===o||"\t"===o;)o=e[1+ ++r];"\n"===o||"\r"===o&&"\n"===e[r+2]||(n+=r>t?e.slice(t,r+1):i)}else n+=i}'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote');return n}(o,l);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[r,r+o.length,r+o.length]}}const u=r+o.length,h=Ut(a,u,t,n);return{value:c,type:s,comment:h.comment,range:[r,u,h.offset]}}function Zt(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let r=t.exec(e);if(!r)return e;let i=r[1],o=" ",a=t.lastIndex;for(n.lastIndex=a;r=n.exec(e);)""===r[1]?"\n"===o?i+=o:o="\n":(i+=o+r[1],o=" "),a=n.lastIndex;const s=/[ \t]*(.*)/sy;return s.lastIndex=a,r=s.exec(e),i+o+(r?.[1]??"")}function jt(e,t){let n="",r=e[t+1];for(;!(" "!==r&&"\t"!==r&&"\n"!==r&&"\r"!==r||"\r"===r&&"\n"!==e[t+2]);)"\n"===r&&(n+="\n"),r=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const zt={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function Gt(e,t,n,r){const i=e.substr(t,n),o=i.length===n&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(o)){const i=e.substr(t-2,n+2);return r(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),i}return String.fromCodePoint(o)}function Vt(e,t,n,r){const{value:i,type:o,comment:a,range:s}="block-scalar"===t.type?Bt(t,e.options.strict,r):Nt(t,e.options.strict,r),c=n?e.directives.tagName(n.source,(e=>r(n,"TAG_RESOLVE_FAILED",e))):null,l=n&&c?function(e,t,n,r,i){if("!"===n)return e[A];const o=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;o.push(t)}for(const e of o)if(e.test?.test(t))return e;const a=e.knownTags[n];if(a&&!a.collection)return e.tags.push(Object.assign({},a,{default:!1,test:void 0})),a;return i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[A]}(e.schema,i,c,n,r):"scalar"===t.type?function({directives:e,schema:t},n,r,i){const o=t.tags.find((e=>e.default&&e.test?.test(n)))||t[A];if(t.compat){const a=t.compat.find((e=>e.default&&e.test?.test(n)))??t[A];if(o.tag!==a.tag){i(r,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${e.tagString(o.tag)} or ${e.tagString(a.tag)}`,!0)}}return o}(e,i,t,r):e.schema[A];let u;try{const o=l.resolve(i,(e=>r(n??t,"TAG_RESOLVE_FAILED",e)),e.options);u=P(o)?o:new Scalar(o)}catch(e){const o=e instanceof Error?e.message:String(e);r(n??t,"TAG_RESOLVE_FAILED",o),u=new Scalar(i)}return u.range=s,u.source=i,o&&(u.type=o),c&&(u.tag=c),l.format&&(u.format=l.format),a&&(u.comment=a),u}function Wt(e,t,n){if(t){null===n&&(n=t.length);for(let r=n-1;r>=0;--r){let n=t[r];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++r];"space"===n?.type;)e+=n.source.length,n=t[++r];break}}return e}const Ht={composeNode:Xt,composeEmptyNode:Qt};function Xt(e,t,n,r){const{spaceBefore:i,comment:o,anchor:a,tag:s}=n;let c,l=!0;switch(t.type){case"alias":c=function({options:e},{offset:t,source:n,end:r},i){const o=new Alias(n.substring(1));""===o.source&&i(t,"BAD_ALIAS","Alias cannot be an empty string");o.source.endsWith(":")&&i(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const a=t+n.length,s=Ut(r,a,e.strict,i);o.range=[t,a,s.offset],s.comment&&(o.comment=s.comment);return o}(e,t,r),(a||s)&&r(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Vt(e,t,s,r),a&&(c.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=It(Ht,e,t,s,r),a&&(c.anchor=a.source.substring(1));break;default:r(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),c=Qt(e,t.offset,void 0,null,n,r),l=!1}return a&&""===c.anchor&&r(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&(c.spaceBefore=!0),o&&("scalar"===t.type&&""===t.source?c.comment=o:c.commentBefore=o),e.options.keepSourceTokens&&l&&(c.srcToken=t),c}function Qt(e,t,n,r,{spaceBefore:i,comment:o,anchor:a,tag:s},c){const l=Vt(e,{type:"scalar",offset:Wt(t,n,r),indent:-1,source:""},s,c);return a&&(l.anchor=a.source.substring(1),""===l.anchor&&c(a,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(l.spaceBefore=!0),o&&(l.comment=o),l}function Yt(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Kt(e){let t="",n=!1,r=!1;for(let i=0;i<e.length;++i){const o=e[i];switch(o[0]){case"#":t+=(""===t?"":r?"\n\n":"\n")+(o.substring(1)||" "),n=!0,r=!1;break;case"%":"#"!==e[i+1]?.[0]&&(i+=1),n=!1;break;default:n||(r=!0),n=!1}}return{comment:t,afterEmptyLine:r}}class Composer{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,r)=>{const i=Yt(e);r?this.warnings.push(new YAMLWarning(i,t,n)):this.errors.push(new YAMLParseError(i,t,n))},this.directives=new Directives({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:r}=Kt(this.prelude);if(n){const i=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(r||e.directives.docStart||!i)e.commentBefore=n;else if(F(i)&&!i.flow&&i.items.length>0){let e=i.items[0];L(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=i.commentBefore;i.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Kt(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,r)=>{const i=Yt(e);i[0]+=t,this.onError(i,"BAD_DIRECTIVE",n,r)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:r,value:i,end:o},a){const s=Object.assign({_directives:t},e),c=new Document(void 0,s),l={atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},u=Lt(r,{indicator:"doc-start",next:i??o?.[0],offset:n,onError:a,startOnNewline:!0});u.found&&(c.directives.docStart=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||u.hasNewline||a(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?Xt(l,i,u,a):Qt(l,u.end,r,null,u,a);const h=c.contents.range[2],d=Ut(o,h,!1,a);return d.comment&&(c.comment=d.comment),c.range=[n,h,d.offset],c}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new YAMLParseError(Yt(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new YAMLParseError(Yt(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=Ut(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new YAMLParseError(Yt(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new Document(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function qt(e,t=!0,n){if(e){const r=(e,t,r)=>{const i="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!n)throw new YAMLParseError([i,i+1],t,r);n(i,t,r)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Nt(e,t,r);case"block-scalar":return Bt(e,t,r)}}return null}function Jt(e,t){const{implicitKey:n=!1,indent:r,inFlow:i=!1,offset:o=-1,type:a="PLAIN"}=t,s=pe({type:a,value:e},{implicitKey:n,indent:r>0?" ".repeat(r):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),c=t.end??[{type:"newline",offset:-1,indent:r,source:"\n"}];switch(s[0]){case"|":case">":{const e=s.indexOf("\n"),t=s.substring(0,e),n=s.substring(e+1)+"\n",i=[{type:"block-scalar-header",offset:o,indent:r,source:t}];return en(i,c)||i.push({type:"newline",offset:-1,indent:r,source:"\n"}),{type:"block-scalar",offset:o,indent:r,props:i,source:n}}case'"':return{type:"double-quoted-scalar",offset:o,indent:r,source:s,end:c};case"'":return{type:"single-quoted-scalar",offset:o,indent:r,source:s,end:c};default:return{type:"scalar",offset:o,indent:r,source:s,end:c}}}function $t(e,t,n={}){let{afterKey:r=!1,implicitKey:i=!1,inFlow:o=!1,type:a}=n,s="indent"in e?e.indent:null;if(r&&"number"==typeof s&&(s+=2),!a)switch(e.type){case"single-quoted-scalar":a="QUOTE_SINGLE";break;case"double-quoted-scalar":a="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");a=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:a="PLAIN"}const c=pe({type:a,value:t},{implicitKey:i||null===s,indent:null!==s&&s>0?" ".repeat(s):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":!function(e,t){const n=t.indexOf("\n"),r=t.substring(0,n),i=t.substring(n+1)+"\n";if("block-scalar"===e.type){const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");t.source=r,e.source=i}else{const{offset:t}=e,n="indent"in e?e.indent:-1,o=[{type:"block-scalar-header",offset:t,indent:n,source:r}];en(o,"end"in e?e.end:void 0)||o.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:n,props:o,source:i})}}(e,c);break;case'"':tn(e,c,"double-quoted-scalar");break;case"'":tn(e,c,"single-quoted-scalar");break;default:tn(e,c,"scalar")}}function en(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function tn(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{const r=e.props.slice(1);let i=t.length;"block-scalar-header"===e.props[0].type&&(i-=e.props[0].source.length);for(const e of r)e.offset+=i;delete e.props,Object.assign(e,{type:n,source:t,end:r});break}case"block-map":case"block-seq":{const r={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:n,source:t,end:[r]});break}default:{const r="indent"in e?e.indent:-1,i="end"in e&&Array.isArray(e.end)?e.end.filter((e=>"space"===e.type||"comment"===e.type||"newline"===e.type)):[];for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:n,indent:r,source:t,end:i})}}}const nn=e=>"type"in e?rn(e):on(e);function rn(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=rn(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=on(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=on(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=on(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function on({start:e,key:t,sep:n,value:r}){let i="";for(const t of e)i+=t.source;if(t&&(i+=rn(t)),n)for(const e of n)i+=e.source;return r&&(i+=rn(r)),i}const an=Symbol("break visit"),sn=Symbol("skip children"),cn=Symbol("remove item");function ln(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),un(Object.freeze([]),e,t)}function un(e,t,n){let r=n(t,e);if("symbol"==typeof r)return r;for(const i of["key","value"]){const o=t[i];if(o&&"items"in o){for(let t=0;t<o.items.length;++t){const r=un(Object.freeze(e.concat([[i,t]])),o.items[t],n);if("number"==typeof r)t=r-1;else{if(r===an)return an;r===cn&&(o.items.splice(t,1),t-=1)}}"function"==typeof r&&"key"===i&&(r=r(t,e))}}return"function"==typeof r?r(t,e):r}ln.BREAK=an,ln.SKIP=sn,ln.REMOVE=cn,ln.itemAtPath=(e,t)=>{let n=e;for(const[e,r]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[r]}return n},ln.parentCollection=(e,t)=>{const n=ln.itemAtPath(e,t.slice(0,-1))?.[t[t.length-1][0]];if(n&&"items"in n)return n;throw new Error("Parent collection not found")};const hn="\ufeff",dn="",fn="",pn="",mn=e=>!!e&&"items"in e,gn=e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type);function vn(e){switch(e){case hn:return"<BOM>";case dn:return"<DOC>";case fn:return"<FLOW_END>";case pn:return"<SCALAR>";default:return JSON.stringify(e)}}function _n(e){switch(e){case hn:return"byte-order-mark";case dn:return"doc-mode";case fn:return"flow-error-end";case pn:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function yn(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const bn="0123456789ABCDEFabcdef".split(""),xn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),wn=",[]{}".split(""),An=" ,[]{}\n\r\t".split(""),Tn=e=>!e||An.includes(e);class Lexer{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&yn(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===hn&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const r=e[n-1];" "!==r&&"\t"!==r||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const r=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-r),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield dn,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&yn(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&yn(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!yn(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&yn(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Tn),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const r=this.getLine();if(null===r)return this.setNext("flow");if(-1!==n&&n<this.indentNext&&"#"!==r[0]||0===n&&(r.startsWith("---")||r.startsWith("..."))&&yn(r[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===r[0]||"}"===r[0])))return this.flowLevel=0,yield fn,yield*this.parseLineStart()}let i=0;for(;","===r[i];)i+=(yield*this.pushCount(1)),i+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(i+=(yield*this.pushIndicators()),r[i]){case void 0:return"flow";case"#":return yield*this.pushCount(r.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Tn),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||yn(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let r=n.indexOf("\n",this.pos);if(-1!==r){for(;-1!==r;){const e=this.continueScalar(r+1);if(-1===e)break;r=n.indexOf("\n",e)}-1!==r&&(t=r-("\r"===n[r-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>yn(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let r=this.pos;e=this.buffer[r];++r)switch(e){case" ":n+=1;break;case"\n":t=r,n=0;break;case"\r":{const e=this.buffer[r+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,r=this.buffer[e];"\r"===r&&(r=this.buffer[--e]);const i=e;for(;" "===r||"\t"===r;)r=this.buffer[--e];if(!("\n"===r&&e>=this.pos&&e+1+n>i))break;t=e}return yield pn,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,r=this.pos-1;for(;t=this.buffer[++r];)if(":"===t){const t=this.buffer[r+1];if(yn(t)||e&&","===t)break;n=r}else if(yn(t)){let i=this.buffer[r+1];if("\r"===t&&("\n"===i?(r+=1,t="\n",i=this.buffer[r+1]):n=r),"#"===i||e&&wn.includes(i))break;if("\n"===t){const e=this.continueScalar(r+1);if(-1===e)break;r=Math.max(r,e-2)}}else{if(e&&wn.includes(t))break;n=r}return t||this.atEnd?(yield pn,yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Tn))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(yn(t)||e&&wn.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!yn(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(xn.includes(t))t=this.buffer[++e];else{if("%"!==t||!bn.includes(this.buffer[e+1])||!bn.includes(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const r=n-this.pos;return r>0&&(yield this.buffer.substr(this.pos,r),this.pos=n),r}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class LineCounter{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const r=t+n>>1;this.lineStarts[r]<e?t=r+1:n=r}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}function Mn(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function En(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function Sn(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Rn(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Ln(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function Pn(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||Mn(t.start,"explicit-key-ind")||Mn(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,Sn(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class Parser{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Lexer,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=_n(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&Pn(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!Mn(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===En(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==En(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=Ln(Rn(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent&&t.sep;let r=[];if(n&&t.sep&&!t.value){const n=[];for(let r=0;r<t.sep.length;++r){const i=t.sep[r];switch(i.type){case"newline":n.push(r);break;case"space":break;case"comment":i.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(r=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||t.value?(r.push(this.sourceToken),e.items.push({start:r}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||Mn(t.start,"explicit-key-ind")?n||t.value?(r.push(this.sourceToken),e.items.push({start:r})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):t.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(Mn(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Mn(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(Sn(t.key)&&!Mn(t.sep,"newline")){const e=Ln(t.start),n=t.key,r=t.sep;r.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:r}]})}else r.length>0?t.sep=t.sep.concat(r,this.sourceToken):t.sep.push(this.sourceToken);else if(Mn(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=Ln(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:r,key:null,sep:[this.sourceToken]}):Mn(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const i=this.flowScalar(this.type);return void(n||t.value?(e.items.push({start:r,key:i,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(i):(Object.assign(t,{key:i,sep:[]}),this.onKeyLine=!0))}default:{const i=this.startBlockValue(e);if(i)return n&&"block-seq"!==i.type&&Mn(t.start,"explicit-key-ind")&&e.items.push({start:r}),void this.stack.push(i)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0;"comment"===(Array.isArray(n)?n[n.length-1]:void 0)?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2]?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,t.start),n.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||Mn(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=Ln(Rn(t));Pn(e);const r=e.end.splice(1,e.end.length);r.push(this.sourceToken);const i={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=Ln(Rn(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=Ln(Rn(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&(!(this.indent<=t)&&e.every((e=>"newline"===e.type||"space"===e.type)))}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function Cn(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new LineCounter||null,prettyErrors:t}}function Fn(e,t={}){const{lineCounter:n,prettyErrors:r}=Cn(t),i=new Parser(n?.addNewLine),o=new Composer(t),a=Array.from(o.compose(i.parse(e)));if(r&&n)for(const t of a)t.errors.forEach(Rt(e,n)),t.warnings.forEach(Rt(e,n));return a.length>0?a:Object.assign([],{empty:!0},o.streamInfo())}function Dn(e,t={}){const{lineCounter:n,prettyErrors:r}=Cn(t),i=new Parser(n?.addNewLine),o=new Composer(t);let a=null;for(const t of o.compose(i.parse(e),!0,e.length))if(a){if("silent"!==a.options.logLevel){a.errors.push(new YAMLParseError(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else a=t;return r&&n&&(a.errors.forEach(Rt(e,n)),a.warnings.forEach(Rt(e,n))),a}function Un(e,t,n){let r;"function"==typeof t?r=t:void 0===n&&t&&"object"==typeof t&&(n=t);const i=Dn(e,n);if(!i)return null;if(i.warnings.forEach((e=>ye(i.options.logLevel,e))),i.errors.length>0){if("silent"!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:r},n))}function On(e,t,n){let r=null;if("function"==typeof t||Array.isArray(t)?r=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return new Document(e,r,n).toString(n)}var kn=i;function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.Z)(e);if(t){var i=(0,h.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var Bn=function(e){(0,l.Z)(n,e);var t=In(n);function n(){var e;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),(0,d.Z)((0,s.Z)(e),"src",void 0),(0,d.Z)((0,s.Z)(e),"loading_complete",!1),(0,d.Z)((0,s.Z)(e),"textures",[]),(0,d.Z)((0,s.Z)(e),"tile_index",0),(0,d.Z)((0,s.Z)(e),"size_x",3),(0,d.Z)((0,s.Z)(e),"size_y",3),(0,d.Z)((0,s.Z)(e),"fps",1),(0,d.Z)((0,s.Z)(e),"tile_progress",0),(0,d.Z)((0,s.Z)(e),"metadata",void 0),(0,d.Z)((0,s.Z)(e),"tiles_count",1),(0,d.Z)((0,s.Z)(e),"tilesets_count",1),(0,d.Z)((0,s.Z)(e),"tileset_index",-1),e}return(0,a.Z)(n,[{key:"basedir",get:function(){return _().dirname(this.src)}},{key:"on_create",value:function(){p.default.cached_seqanims_metadata=p.default.cached_seqanims_metadata||{},this.material=new m.ShaderMaterial({vertexShader:"\n                varying vec2 vUv; \n\n                void main() {\n                    //vUv = vec2((position.x/2.) + 0.5, (position.y/2.) + 0.5); \n                    vUv = uv;\n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0); \n                }\n            ",fragmentShader:"\n                uniform sampler2D map;\n                uniform vec2 grid;\n                uniform vec2 tile;\n                uniform vec2 prev_tile;\n                uniform float tile_progress;\n\n                varying vec2 vUv;\n                vec4 get_tile_color(vec2 tile){\n                    vec2 tile_size = vec2(1./grid.x, 1./grid.y);\n                    vec2 tile_offset = vec2(tile.x * tile_size.x, 1. - tile.y * tile_size.y);\n                    vec2 subuv = vec2(vUv.x * tile_size.x, vUv.y * tile_size.y);\n                    vec2 tileuv = vec2(tile_offset.x + subuv.x, tile_offset.y - subuv.y);\n                    vec4 tColor = texture2D(map, tileuv);\n                    return tColor;\n                }\n                void main(){\n                    vec4 current_tile_color = get_tile_color(tile);\n                    vec4 prev_tile_color = get_tile_color(prev_tile);\n                    gl_FragColor = mix(prev_tile_color, current_tile_color, tile_progress);\n                }\n            ",transparent:!0,depthTest:!1,uniforms:{map:{type:"t"},grid:{type:"v2",value:new m.Vector2(1,1)},prev_tile:{type:"v2",value:new m.Vector2(0,0)},tile:{type:"v2",value:new m.Vector2(0,0)},tile_progress:{type:"f",value:1}}}),(this.subject=new m.Mesh(new m.PlaneBufferGeometry(this.size_x,this.size_y,1),this.material)).geometry.rotateZ(Math.PI),this.load_animation(this.src)}},{key:"load_animation",value:function(e){this.loading_complete=!1,this.tile_progress=0,this.tileset_index=-1;var t=this.metadata=p.default.cached_seqanims_metadata[e];if(!t)try{t=this.meta_data=kn.parse(this.tools.net.request_text_sync("".concat(this.src,".seqanim"))),p.default.cached_seqanims_metadata[e]=t}catch(e){g.iV.log(e)}if(null!=t){void 0===t.grid&&(t.grid=[1,1]),void 0===t.mime&&(t.mime="png");var n=this.textures=[],r=this.tiles_count=t.grid[0]*t.grid[1],i=this.tilesets_count=Math.ceil(t.frames/r);this.material.uniforms.grid.value.set(t.grid[0],t.grid[1]),this.fps=t.fps||30;for(var o=0;o<i;o++){var a="".concat(this.basedir,"/").concat(t.name).concat(o,".").concat(t.mime),s=p.default.load_texture("".concat(a,"?wrapS=1000&wrapT=1000&repeat.x=",1,"&repeat.y=",1));n[o]=s,this.loading_complete=!0}this.tools.type.is_number(t.scale)?this.subject.scale.set(t.scale,t.scale,t.scale):this.subject.scale.set(1,1,1),this.loading_complete=!0}else this.error('fail to laod sequence-animation "'.concat(this.src,'"'))}},{key:"on_destroy",value:function(){(0,c.Z)((0,h.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}},{key:"on_tick",value:function(e){if(this.loading_complete){var t=Math.floor(this.tile_index/this.tiles_count);this.material.uniforms.prev_tile.value.copy(this.material.uniforms.tile.value),t!=this.tileset_index&&(this.tileset_index=t,this.material.uniforms.prev_tile.value.set(0,0),this.material.uniforms.map.value=this.textures[this.tileset_index],this.material.uniforms.map.needsUpdate=!0);var n=this.tile_index%this.meta_data.grid[0],r=Math.floor(this.tile_index/this.meta_data.grid[0]);this.material.uniforms.tile.value.set(n,r),this.material.uniforms.tile.needsUpdate=!0,this.material.uniforms.tile_progress.value=this.tile_progress%1,this.tile_progress+=e.delta*this.fps,this.tile_index=Math.floor(this.tile_progress)%this.meta_data.frames}}},{key:"get_reactive_props",value:function(){return["src"].concat((0,c.Z)((0,h.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,c.Z)((0,h.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){if("src"===e)t.load_animation(t.src)}))}}]),n}(f.Z),Nn=Bn},1182:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=n(7845),f=n(5017),p=n(1489);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var _=function(e){(0,s.Z)(n,e);var t=v(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"time",0),(0,u.Z)((0,o.Z)(e),"use_sun_time",!0),(0,u.Z)((0,o.Z)(e),"use_exposure",!0),(0,u.Z)((0,o.Z)(e),"d_turbidity",0),(0,u.Z)((0,o.Z)(e),"d_rayleigh",1),(0,u.Z)((0,o.Z)(e),"d_mie_coeff",.1),(0,u.Z)((0,o.Z)(e),"d_mie_direct",0),(0,u.Z)((0,o.Z)(e),"d_elevation",45),(0,u.Z)((0,o.Z)(e),"d_azimuth",180),(0,u.Z)((0,o.Z)(e),"d_exposure",1),(0,u.Z)((0,o.Z)(e),"d_opacity",1),(0,u.Z)((0,o.Z)(e),"n_turbidity",20),(0,u.Z)((0,o.Z)(e),"n_rayleigh",1),(0,u.Z)((0,o.Z)(e),"n_mie_coeff",.1),(0,u.Z)((0,o.Z)(e),"n_mie_direct",0),(0,u.Z)((0,o.Z)(e),"n_elevation",0),(0,u.Z)((0,o.Z)(e),"n_azimuth",180),(0,u.Z)((0,o.Z)(e),"n_opacity",.5),(0,u.Z)((0,o.Z)(e),"n_exposure",1),(0,u.Z)((0,o.Z)(e),"d_hemi_sky_color","#f3ead7"),(0,u.Z)((0,o.Z)(e),"d_hemi_ground_color","#f3ead7"),(0,u.Z)((0,o.Z)(e),"n_hemi_sky_color","#34116a"),(0,u.Z)((0,o.Z)(e),"n_hemi_ground_color","#da5a6a"),(0,u.Z)((0,o.Z)(e),"d_hemi_intensity",1.5),(0,u.Z)((0,o.Z)(e),"n_hemi_intensity",.05),(0,u.Z)((0,o.Z)(e),"tick_rate",15),(0,u.Z)((0,o.Z)(e),"hemi_light",void 0),e}return(0,i.Z)(n,[{key:"on_create",value:function(){var e=this.subject=d.default.create_object("SkyMesh");p.iV.log(e);this.sun_vector=new f.Vector3,this.hemi_light=new f.HemisphereLight;var t=e.material;t.blending=f.CustomBlending,t.blendEquation=f.AddEquation,t.blendSrc=f.SrcAlphaFactor,t.blendDst=f.OneMinusSrcAlphaFactor}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object},{object:this.hemi_light,parent:this.game_object,layers:g(g({},this.meta.layers),{},{lights:!0})}]}},{key:"get_reactive_props",value:function(){return["time"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){var t=this;(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){if("time"===e){var n=t.time%1,r=Math.sin(n*Math.PI*2-Math.PI/2);r=(r+1)/2;var i=t.tools.math.lerp(t.n_turbidity,t.d_turbidity,r),o=t.tools.math.lerp(t.n_rayleigh,t.d_rayleigh,r),a=t.tools.math.lerp(t.n_mie_coeff,t.d_mie_coeff,r),s=t.tools.math.lerp(t.n_mie_direct,t.d_mie_direct,r),c=t.tools.math.lerp(t.n_elevation,t.d_elevation,r),l=t.tools.math.lerp(t.n_azimuth,t.d_azimuth,r),u=(t.tools.math.lerp(t.n_exposure,t.d_exposure,r),t.tools.math.lerp(t.n_opacity,t.d_opacity,r)),h=t.subject.material.uniforms;if(h.turbidity.value=i,h.rayleigh.value=o,h.mie_coefficient.value=a,h.mie_directional_g.value=s,h.opacity.value=u,!0===t.use_sun_time){var d=t.find_component_of_type("Sun");h.sun_position.value.copy(d.sphere.position)}else{var m=f.MathUtils.degToRad(90-c),g=f.MathUtils.degToRad(l);t.sun_vector.setFromSphericalCoords(1,m,g),h.sun_position.value.copy(t.sun_vector)}var v=(0,p.UQ)(t.n_hemi_sky_color),_=(0,p.UQ)(t.n_hemi_ground_color),y=(0,p.UQ)(t.d_hemi_sky_color),b=(0,p.UQ)(t.d_hemi_ground_color),x=[t.tools.math.lerp(v[0],y[0],r),t.tools.math.lerp(v[1],y[1],r),t.tools.math.lerp(v[2],y[2],r)],w=[t.tools.math.lerp(_[0],b[0],r),t.tools.math.lerp(_[1],b[1],r),t.tools.math.lerp(_[2],b[2],r)],A=t.tools.math.lerp(t.n_hemi_intensity,t.d_hemi_intensity,Math.pow(r,.2));t.hemi_light.intensity=A,t.hemi_light.color.set_any(x),t.hemi_light.groundColor.set_any(w)}}))}},{key:"on_tick",value:function(e){if(this.use_sun_time){var t=this.find_component_of_type("Sun");t?(this.time=t.time,!0===t.show_sphere&&(t.show_sphere=!1)):p.iV.error("[SkySphere] cannot get time from sun. no Sun found")}}}]),n}(h.Z);t.default=_},5111:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(5017),d=(n(7845),n(7465));n(1489);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"src",null),(0,u.Z)((0,o.Z)(e),"tick_rate",5),e}return(0,i.Z)(n,[{key:"on_create",value:function(){this.subject=new h.Sprite(new h.SpriteMaterial({map:this.src}))}},{key:"on_tick",value:function(){}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object}]}},{key:"get_reactive_props",value:function(){return[].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments)}},{key:"on_enable",value:function(){this.globals.need_update_render_list=!0}},{key:"on_disable",value:function(){this.globals.need_update_render_list=!0}},{key:"on_destroy",value:function(){(0,a.Z)((0,l.Z)(n.prototype),"on_destroy",this).apply(this,arguments)}}]),n}(d.Z);t.default=p},2578:function(e,t,n){"use strict";n.r(t);var r=n(5785),i=n(5671),o=n(3144),a=n(7326),s=n(1752),c=n(136),l=n(2963),u=n(1120),h=n(4942),d=n(7465),f=(n(7845),n(5017)),p=n(1489);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var _=function(e){(0,c.Z)(n,e);var t=v(n);function n(){var e;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),(0,h.Z)((0,a.Z)(e),"time",.5),(0,h.Z)((0,a.Z)(e),"global_intensity",1),(0,h.Z)((0,a.Z)(e),"n_distance",500),(0,h.Z)((0,a.Z)(e),"d_distance",50),(0,h.Z)((0,a.Z)(e),"n_intensity",.01),(0,h.Z)((0,a.Z)(e),"d_intensity",10),(0,h.Z)((0,a.Z)(e),"n_height",-50),(0,h.Z)((0,a.Z)(e),"d_height",100),(0,h.Z)((0,a.Z)(e),"n_emissive",1.25),(0,h.Z)((0,a.Z)(e),"d_emissive",4),(0,h.Z)((0,a.Z)(e),"n_color","#dadada"),(0,h.Z)((0,a.Z)(e),"d_color","#e9e9e9"),(0,h.Z)((0,a.Z)(e),"sun_size",3),(0,h.Z)((0,a.Z)(e),"d_amb_color","#f5f5f5"),(0,h.Z)((0,a.Z)(e),"n_amb_color","#4b4b4b"),(0,h.Z)((0,a.Z)(e),"d_amb_intensity",5),(0,h.Z)((0,a.Z)(e),"n_amb_intensity",.01),(0,h.Z)((0,a.Z)(e),"shadows_enabled",!0),(0,h.Z)((0,a.Z)(e),"shadow_resolution",1024),(0,h.Z)((0,a.Z)(e),"cycling",24),(0,h.Z)((0,a.Z)(e),"use_postfx",!0),(0,h.Z)((0,a.Z)(e),"n_grain_power",.04),(0,h.Z)((0,a.Z)(e),"d_grain_power",.015),(0,h.Z)((0,a.Z)(e),"n_bloom_smoothing",.63),(0,h.Z)((0,a.Z)(e),"n_bloom_threshold",.35),(0,h.Z)((0,a.Z)(e),"d_bloom_smoothing",.7),(0,h.Z)((0,a.Z)(e),"d_bloom_threshold",.88),(0,h.Z)((0,a.Z)(e),"show_sphere",!0),(0,h.Z)((0,a.Z)(e),"d_background_intensity",1),(0,h.Z)((0,a.Z)(e),"n_background_intensity",.1),(0,h.Z)((0,a.Z)(e),"use_fog",!0),(0,h.Z)((0,a.Z)(e),"light",void 0),(0,h.Z)((0,a.Z)(e),"renderer",void 0),(0,h.Z)((0,a.Z)(e),"fog",DocumentFragment),(0,h.Z)((0,a.Z)(e),"amb_light",void 0),(0,h.Z)((0,a.Z)(e),"skybox",void 0),(0,h.Z)((0,a.Z)(e),"d_color3",void 0),(0,h.Z)((0,a.Z)(e),"n_color3",void 0),(0,h.Z)((0,a.Z)(e),"tick_rate",10),(0,h.Z)((0,a.Z)(e),"gizmo_dirlight_helper",void 0),e}return(0,o.Z)(n,[{key:"get_light_color",value:function(){return this.light.color}},{key:"on_create",value:function(){this.renderer_component=this.find_component_of_type("Renderer"),this.fog_comp=this.find_component_of_type("Fog");var e=this.light=new f.DirectionalLight;this.gizmo_dirlight_helper=new f.DirectionalLightHelper(e,5);this.shadows_enabled&&(e.shadow&&(e.shadow.mapSize.width=this.shadow_resolution,e.shadow.mapSize.height=this.shadow_resolution,e.shadow.camera.near=.5,e.shadow.camera.far=2e3),e.castShadow=!0),(this.amb_light=new f.AmbientLight).color.set_any(this.d_amb_color);var t=this.sphere=this.subject=new f.Mesh(new f.SphereBufferGeometry(1,32,32),new f.MeshPhongMaterial({emissive:new f.Color(1,1,1),color:new f.Color(1,1,1),emissiveIntensity:1e4,fog:!1}));t.material.emissive.set_any("#f44336"),t.material.color.set_any("#f44336"),t.position.set(1e3,1e3,1e3),t.receiveShadow=!1,t.castShadow=!1,t.frustumCulled=!1,this.d_color3=new f.Color,this.n_color3=new f.Color,this.d_color3.set_any(this.d_color),this.n_color3.set_any(this.n_color),t.scale.set(this.sun_size,this.sun_size,this.sun_size),this.skybox=this.find_component_of_type("SkyBox")}},{key:"get_render_data",value:function(){return[{object:this.light,parent:this.game_object,layers:g(g({},this.meta.layers),{},{lights:!0})},{object:this.sphere,parent:this.game_object},{object:this.amb_light,parent:this.game_object,layers:g(g({},this.meta.layers),{},{lights:!0})}]}},{key:"get_gizmo_render_data",value:function(){return[{object:this.gizmo_dirlight_helper,layers:{gizmo:!0}}].concat((0,r.Z)((0,s.Z)((0,u.Z)(n.prototype),"get_gizmo_render_data",this).call(this)))}},{key:"on_update",value:function(e){var t=this;(0,s.Z)((0,u.Z)(n.prototype),"on_update",this).apply(this,arguments),e.forEach((function(e){switch(e){case"time":var n=t.time%1,i=Math.sin(n*Math.PI*2-Math.PI/2);i=(i+1)/2;var o=t.tools.math.lerp(t.n_distance,t.d_distance,i),a=Math.sin(n*Math.PI*2)*o,s=Math.cos(n*Math.PI*2)*o,c=t.tools.math.lerp(t.n_height,t.d_height,i);t.subject.position.set(a,c,s),t.position[0]=a,t.position[1]=c,t.position[2]=s;var l=t.tools.math.lerp(t.n_intensity,t.d_intensity,Math.pow(i,2));t.light.intensity=l*t.global_intensity;var u=t.tools.math.lerp(t.n_emissive,t.d_emissive,i);t.sphere.material.emissiveIntensity=u;var h=t.tools.math.lerp((0,p.W4)(t.n_color),(0,p.W4)(t.d_color),i),d=p.Ks.apply(void 0,(0,r.Z)(h));t.light.color.set(d);var f=t.tools.math.lerp(t.n_amb_intensity,t.d_amb_intensity,Math.pow(i,1)),m=t.tools.math.lerp((0,p.UQ)(t.n_amb_color),(0,p.UQ)(t.d_amb_color),i);if(t.amb_light.color.set_any(m),t.amb_light.intensity=f*t.global_intensity,t.use_fog&&t.fog_comp&&(t.fog_comp.color=t.tools.math.multiply(m,t.tools.math.clamp(i,0,.5))),t.use_postfx){var g=t.find_component_of_type("Postprocessing");g&&(g.grain_power=t.tools.math.lerp(t.n_grain_power,t.d_grain_power,i),g.bloom_smoothing=t.tools.math.lerp(t.n_bloom_smoothing,t.d_bloom_smoothing,i),g.bloom_threshold=t.tools.math.lerp(t.n_bloom_threshold,t.d_bloom_threshold,i))}t.use_skybox&&t.skybox&&t.skybox,t.renderer_component.set_background_brightness(t.tools.math.lerp(t.d_background_intensity,t.n_background_intensity,1-i)),t.renderer_component.set_background_tint(t.tools.math.lerp((0,p.UQ)(t.d_amb_color),(0,p.UQ)(t.n_amb_color),1-i));break;case"show_sphere":t.sphere.visible=t.show_sphere;break;case"sun_size":t.sphere.scale.set(t.sun_size,t.sun_size,t.sun_size);case"shadows_enabled":t.light.castShadow=t.shadows_enabled}})),this.light.position.set(this.sphere.position.x,this.sphere.position.y,this.sphere.position.z)}},{key:"on_tick",value:function(e){if((0,s.Z)((0,u.Z)(n.prototype),"on_tick",this).call(this,e),this.cycling>0){var t=1/86400*this.cycling*e.delta;this.time=(this.time+t)%1}this.gizmo_dirlight_helper&&this.gizmo_dirlight_helper.update()}},{key:"get_reactive_props",value:function(){return["time","sun_size","shadows_enabled","show_sphere"].concat((0,s.Z)((0,u.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"get_time_string",value:function(){var e=Math.floor(1440*this.time),t=Math.floor(e/60).toString(),n=(e%60).toString();return 1===t.length&&(t="0"+t),1===n.length&&(n="0"+n),"".concat(t,":").concat(n)}}]),n}(d.Z);t.default=_},6812:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017)),f=n(4679);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var v=function(e){(0,s.Z)(n,e);var t=g(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"text",""),(0,u.Z)((0,o.Z)(e),"font_size",16),(0,u.Z)((0,o.Z)(e),"color","#ffffff"),(0,u.Z)((0,o.Z)(e),"opacity",1),(0,u.Z)((0,o.Z)(e),"anchor_x",.5),(0,u.Z)((0,o.Z)(e),"anchor_y",.5),e}return(0,i.Z)(n,[{key:"save_prefab",value:function(){return m(m({},(0,a.Z)((0,l.Z)(n.prototype),"save_prefab",this).call(this)),{},{text:this.text,font_size:this.font_size,color:this.color,opacity:this.opacity,anchor_x:this.anchor_x,anchor_y:this.anchor_y})}},{key:"get_reactive_props",value:function(){return["text","font_size","color","opacity","anchor_x","anchor_y"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"get_render_data",value:function(){return{object:this.subject,parent:this.game_object}}},{key:"on_create",value:function(){var e=this.subject=new f.xv;this.meta.layers.normal=!1,e.depthWrite=!1,e.depthTest=!1,e.stencilWrite=!1,e.material._depthMaterial=e._depthMaterial=new d.ShaderMaterial({vertexShader:"\n                void main(){\n                    gl_FragCoord = vec4(0., 0., 0., 1.);\n                }\n            "}),this.init_visibility_rule()}},{key:"on_update",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments);var t=this.subject,r=!1;t.text!==this.text&&(t.text=this.text,r=!0),t.fontSize!==this.font_size&&(t.fontSize=this.font_size/100,r=!0),t.color!==this.color&&(t.color=this.color,r=!0),t.fillOpacity!==this.opacity&&(t.fillOpacity=this.opacity,r=!0),t.anchorX!==this.anchor_x&&(t.anchorX=this.anchor_x,r=!0),t.anchorY!==this.anchor_y&&(t.anchorY=this.anchor_y,r=!0),r&&t.sync()}},{key:"set_text",value:function(e){this.text=e}}]),n}(h.Z);t.default=v},6049:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=(n(7845),n(5017)),f=n(4679);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var v=function(e){(0,s.Z)(n,e);var t=g(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"text",""),(0,u.Z)((0,o.Z)(e),"font_size",1),(0,u.Z)((0,o.Z)(e),"color","#ffffff"),(0,u.Z)((0,o.Z)(e),"opacity",1),(0,u.Z)((0,o.Z)(e),"anchor_x",.5),(0,u.Z)((0,o.Z)(e),"anchor_y",.5),e}return(0,i.Z)(n,[{key:"save_prefab",value:function(){return m(m({},(0,a.Z)((0,l.Z)(n.prototype),"save_prefab",this).call(this)),{},{text:this.text,font_size:this.font_size,color:this.color,opacity:this.opacity,anchor_x:this.anchor_x,anchor_y:this.anchor_y})}},{key:"get_reactive_props",value:function(){return["text","font_size","color","opacity","anchor_x","anchor_y"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"get_render_data",value:function(){return{object:this.subject,parent:this.game_object}}},{key:"on_create",value:function(){var e=this.subject=new f.xv;this.meta.layers.normal=!1,e.depthWrite=!1,e.depthTest=!1,e.stencilWrite=!1,e.material._depthMaterial=e._depthMaterial=new d.ShaderMaterial({vertexShader:"\n                void main(){\n                    gl_FragCoord = vec4(0., 0., 0., 1.);\n                }\n            "}),this.init_visibility_rule()}},{key:"on_update",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments);var t=this.subject,r=!1;t.text!==this.text&&(t.text=this.text,r=!0),t.fontSize!==this.font_size&&(t.fontSize=this.font_size,r=!0),t.color!==this.color&&(t.color=this.color,r=!0),t.fillOpacity!==this.opacity&&(t.fillOpacity=this.opacity,r=!0),t.anchorX!==this.anchor_x&&(t.anchorX=this.anchor_x,r=!0),t.anchorY!==this.anchor_y&&(t.anchorY=this.anchor_y,r=!0),r&&t.sync()}},{key:"set_text",value:function(e){this.text=e}}]),n}(h.Z);t.default=v},593:function(e,t,n){"use strict";n.r(t);var r=n(5671),i=n(3144),o=n(7326),a=n(1752),s=n(136),c=n(2963),l=n(1120),u=n(4942),h=n(7465),d=n(7845);n(1489);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var i=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var p=function(e){(0,s.Z)(n,e);var t=f(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return e=t.call.apply(t,[this].concat(a)),(0,u.Z)((0,o.Z)(e),"find_sun",!0),(0,u.Z)((0,o.Z)(e),"sun",void 0),(0,u.Z)((0,o.Z)(e),"width",1e3),(0,u.Z)((0,o.Z)(e),"height",1e3),(0,u.Z)((0,o.Z)(e),"water_type",1),e}return(0,i.Z)(n,[{key:"on_create",value:function(){this.meta.layers.normal=!1;switch(this.water_type){case 1:this.subject=d.default.create_object("Water",{width:this.width,height:this.height,fog:!1});break;case 2:this.subject=d.default.create_object("Water2",{width:this.width,height:this.height,fog:!1})}}},{key:"get_render_data",value:function(){return[{object:this.subject,parent:this.game_object}]}},{key:"get_reactive_props",value:function(){return["find_sun"].concat((0,a.Z)((0,l.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_update",value:function(e){(0,a.Z)((0,l.Z)(n.prototype),"on_update",this).apply(this,arguments)}},{key:"on_tick",value:function(e){if(1===this.water_type){if(this.find_sun&&(this.sun=this.find_component_of_type("Sun")),void 0!==this.sun){this.subject.material.uniforms.sunDirection.value.copy(this.sun.subject.position).normalize();var t=this.sun.get_light_color();this.subject.material.uniforms.sunDirection.value.copy(t)}this.subject.material.uniforms.eye.value.copy(this.globals.camera),this.subject.material.uniforms.time.value+=1/60}}}]),n}(h.Z);t.default=p},9829:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Q}});var r=n(3144),i=n(5671),o=n(136),a=n(2963),s=n(1120),c=n(5017),l=n(7771),u=n(3836),h=n(5108);const d=/^[og]\s*(.+)?/,f=/^mtllib /,p=/^usemtl /,m=/^usemap /,g=new c.Vector3,v=new c.Vector3,_=new c.Vector3,y=new c.Vector3,b=new c.Vector3;function x(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,i=this.object.geometry.normals;g.fromArray(r,e),v.fromArray(r,t),_.fromArray(r,n),b.subVectors(_,v),y.subVectors(g,v),b.cross(y),b.normalize(),i.push(b.x,b.y,b.z),i.push(b.x,b.y,b.z),i.push(b.x,b.y,b.z)},addColor:function(e,t,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,o,a,s,c){const l=this.vertices.length;let u=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),d=this.parseVertexIndex(n,l);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==a&&""!==a){const e=this.normals.length;u=this.parseNormalIndex(a,e),h=this.parseNormalIndex(s,e),d=this.parseNormalIndex(c,e),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),h=this.parseUVIndex(i,e),d=this.parseUVIndex(o,e),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class OBJLoader extends c.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,r){const i=this,o=new c.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(n))}catch(t){r?r(t):h.error(t),i.manager.itemError(e)}}),n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new x;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r="",i="",o=0,a=[];const s="function"==typeof"".trimLeft;for(let e=0,c=n.length;e<c;e++)if(r=n[e],r=s?r.trimLeft():r.trim(),o=r.length,0!==o&&(i=r.charAt(0),"#"!==i))if("v"===i){const e=r.split(/\s+/);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?t.colors.push(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===i){const e=r.substr(1).trim().split(/\s+/),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const i=n[0];for(let e=1,r=n.length-1;e<r;e++){const r=n[e],o=n[e+1];t.addFace(i[0],r[0],o[0],i[1],r[1],o[1],i[2],r[2],o[2])}}else if("l"===i){const e=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}t.addLineGeometry(n,i)}else if("p"===i){const e=r.substr(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(a=d.exec(r))){const e=(" "+a[0].substr(1).trim()).substr(1);t.startObject(e)}else if(p.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(f.test(r))t.materialLibraries.push(r.substring(7).trim());else if(m.test(r))h.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===i){if(a=r.split(" "),a.length>1){const e=a[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;h.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}t.finalize();const l=new c.Group;l.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],r=n.geometry,i=n.materials,o="Line"===r.type,a="Points"===r.type;let s=!1;if(0===r.vertices.length)continue;const u=new c.BufferGeometry;u.setAttribute("position",new c.Float32BufferAttribute(r.vertices,3)),r.normals.length>0&&u.setAttribute("normal",new c.Float32BufferAttribute(r.normals,3)),r.colors.length>0&&(s=!0,u.setAttribute("color",new c.Float32BufferAttribute(r.colors,3))),!0===r.hasUVIndices&&u.setAttribute("uv",new c.Float32BufferAttribute(r.uvs,2));const h=[];for(let e=0,n=i.length;e<n;e++){const n=i[e],r=n.name+"_"+n.smooth+"_"+s;let l=t.materials[r];if(null!==this.materials)if(l=this.materials.create(n.name),!o||!l||l instanceof c.LineBasicMaterial){if(a&&l&&!(l instanceof c.PointsMaterial)){const e=new c.PointsMaterial({size:10,sizeAttenuation:!1});c.Material.prototype.copy.call(e,l),e.color.copy(l.color),e.map=l.map,l=e}}else{const e=new c.LineBasicMaterial;c.Material.prototype.copy.call(e,l),e.color.copy(l.color),l=e}void 0===l&&(l=o?new c.LineBasicMaterial:a?new c.PointsMaterial({size:1,sizeAttenuation:!1}):new c.MeshPhongMaterial,l.name=n.name,l.flatShading=!n.smooth,l.vertexColors=s,t.materials[r]=l),h.push(l)}let d;if(h.length>1){for(let e=0,t=i.length;e<t;e++){const t=i[e];u.addGroup(t.groupStart,t.groupCount,e)}d=o?new c.LineSegments(u,h):a?new c.Points(u,h):new c.Mesh(u,h)}else d=o?new c.LineSegments(u,h[0]):a?new c.Points(u,h[0]):new c.Mesh(u,h[0]);d.name=n.name,l.add(d)}else if(t.vertices.length>0){const e=new c.PointsMaterial({size:1,sizeAttenuation:!1}),n=new c.BufferGeometry;n.setAttribute("position",new c.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new c.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const r=new c.Points(n,e);l.add(r)}return l}}c.OBJLoader=OBJLoader;var w=OBJLoader,A=n(5108);let T,M,E;class FBXLoader extends c.Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===i.path?c.LoaderUtils.extractUrlBase(e):i.path,a=new c.FileLoader(this.manager);a.setPath(i.path),a.setResponseType("arraybuffer"),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(n,o))}catch(t){r?r(t):A.error(t),i.manager.itemError(e)}}),n,r)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===k(e,0,t.length)}(e))T=(new BinaryParser).parse(e);else{const t=k(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let e=0;e<t.length;++e){if(r(1)===t[e])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(S(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+S(t));T=(new TextParser).parse(t)}const n=new c.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new FBXTreeParser(n,this.manager).parse(T)}}class FBXTreeParser{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){M=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new GeometryParser).parse(r);return this.parseScene(r,i,n),E}parseConnections(){const e=new Map;if("Connections"in T){T.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:n,relationship:i};e.get(r).children.push(a)}))}return e}parseImages(){const e={},t={};if("Video"in T.Objects){const n=T.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,o="string"==typeof i.Content&&""!==i.Content;if(e||o){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&A.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void A.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in T.Objects){const n=T.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,i=e.WrapModeV,o=void 0!==r?r.value:0,a=void 0!==i?i.value:0;if(n.wrapS=0===o?c.RepeatWrapping:c.ClampToEdgeWrapping,n.wrapT=0===a?c.RepeatWrapping:c.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,i=M.get(e.id).children;let o;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(A.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new c.Texture):(t.setPath(this.textureLoader.path),o=t.load(n))}else"psd"===a?(A.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new c.Texture):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in T.Objects){const n=T.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let i=e.ShadingModel;if("object"==typeof i&&(i=i.value),!M.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(i.toLowerCase()){case"phong":a=new c.MeshPhongMaterial;break;case"lambert":a=new c.MeshLambertMaterial;break;default:A.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to THREE.MeshPhongMaterial.',i),a=new c.MeshPhongMaterial}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new c.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new c.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new c.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new c.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new c.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new c.Color).fromArray(e.SpecularColor.value));const i=this;return M.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&(r.map.encoding=c.sRGBEncoding);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&(r.emissiveMap.encoding=c.sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=c.EquirectangularReflectionMapping,r.envMap.encoding=c.sRGBEncoding);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&(r.specularMap.encoding=c.sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;default:A.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}getTexture(e,t){return"LayeredTexture"in T.Objects&&t in T.Objects.LayeredTexture&&(A.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=M.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in T.Objects){const n=T.Objects.Deformer;for(const r in n){const i=n[r],o=M.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(o,n);t.ID=r,o.parents.length>1&&A.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(o,n),e.id=r,o.parents.length>1&&A.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const r=t[e.ID];if("Cluster"!==r.attrType)return;const i={ID:e.ID,indices:[],weights:[],transformLink:(new c.Matrix4).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],o=t[i.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=M.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(a)}return n}parseScene(e,t,n){E=new c.Group;const r=this.parseModels(e.skeletons,t,n),i=T.Objects.Model,o=this;r.forEach((function(e){const t=i[e.ID];o.setLookAtProperties(e,t);M.get(e.ID).parents.forEach((function(t){const n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&E.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),E.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=D(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new AnimationParser).parse();1===E.children.length&&E.children[0].isGroup&&(E.children[0].animations=a,E=E.children[0]),E.animations=a}parseModels(e,t,n){const r=new Map,i=T.Objects.Model;for(const o in i){const a=parseInt(o),s=i[o],l=M.get(a);let u=this.buildSkeleton(l,e,a,s.attrName);if(!u){switch(s.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,n);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new c.Bone;break;default:u=new c.Group}u.name=s.attrName?c.PropertyBinding.sanitizeNodeName(s.attrName):"",u.ID=a}this.getTransformData(u,s),r.set(a,u)}return r}buildSkeleton(e,t,n,r){let i=null;return e.parents.forEach((function(e){for(const o in t){const a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=i;i=new c.Bone,i.matrixWorld.copy(t.transformLink),i.name=r?c.PropertyBinding.sanitizeNodeName(r):"",i.ID=n,a.bones[o]=i,null!==e&&i.add(e)}}))}})),i}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=T.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new c.Object3D;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);let i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,a=n.AspectHeight.value);const s=o/a;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new c.PerspectiveCamera(l,s,r,i),null!==u&&t.setFocalLength(u);break;case 1:t=new c.OrthographicCamera(-o/2,o/2,a/2,-a/2,r,i);break;default:A.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new c.Object3D}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=T.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new c.Object3D;else{let e;e=void 0===n.LightType?0:n.LightType.value;let r=16777215;void 0!==n.Color&&(r=(new c.Color).fromArray(n.Color.value));let i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);let o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new c.PointLight(r,i,o,a);break;case 1:t=new c.DirectionalLight(r,i);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=c.MathUtils.degToRad(n.InnerAngle.value));let s=0;void 0!==n.OuterAngle&&(s=c.MathUtils.degToRad(n.OuterAngle.value),s=Math.max(s,1)),t=new c.SpotLight(r,i,o,e,s,a);break;default:A.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a THREE.PointLight."),t=new c.PointLight(r,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,i=null,o=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new c.MeshPhongMaterial({color:13421772}),a.push(o)),"color"in i.attributes&&a.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new c.SkinnedMesh(i,o),r.normalizeSkinWeights()):r=new c.Mesh(i,o),r}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new c.LineBasicMaterial({color:3342591,linewidth:1});return new c.Line(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?U(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){M.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=T.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),E.add(e.target)):e.lookAt((new c.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const i in e){const o=e[i];M.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;M.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new c.Skeleton(o.bones),r[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in T.Objects){const t=T.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType){const r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new c.Matrix4).fromArray(t.Matrix.a)})):e[r.Node]=(new c.Matrix4).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in T&&"AmbientColor"in T.GlobalSettings){const e=T.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const e=new c.Color(t,n,r);E.add(new c.AmbientLight(e,1))}}}}class GeometryParser{parse(e){const t=new Map;if("Geometry"in T.Objects){const n=T.Objects.Geometry;for(const r in n){const i=M.get(parseInt(r)),o=this.parseGeometry(i,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],o=e.parents.map((function(e){return T.Objects.Model[e.ID]}));if(0===o.length)return;const a=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const s=o[0],c={};"RotationOrder"in s&&(c.eulerOrder=U(s.RotationOrder.value)),"InheritType"in s&&(c.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(c.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(c.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(c.scale=s.GeometricScaling.value);const l=D(c);return this.genGeometry(t,a,i,l)}genGeometry(e,t,n,r){const i=new c.BufferGeometry;e.attrName&&(i.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new c.Float32BufferAttribute(a.vertex,3);if(s.applyMatrix4(r),i.setAttribute("position",s),a.colors.length>0&&i.setAttribute("color",new c.Float32BufferAttribute(a.colors,3)),t&&(i.setAttribute("skinIndex",new c.Uint16BufferAttribute(a.weightsIndices,4)),i.setAttribute("skinWeight",new c.Float32BufferAttribute(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){const e=(new c.Matrix3).getNormalMatrix(r),t=new c.Float32BufferAttribute(a.normal,3);t.applyNormalMatrix(e),i.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){let n="uv"+(t+1).toString();0===t&&(n="uv"),i.setAttribute(n,new c.Float32BufferAttribute(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(n,r){n!==e&&(i.addGroup(t,r-t,e),e=n,t=r)})),i.groups.length>0){const t=i.groups[i.groups.length-1],n=t.start+t.count;n!==a.materialIndex.length&&i.addGroup(n,a.materialIndex.length-n,e)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,o=[],a=[],s=[],c=[],l=[],u=[];const h=this;return e.vertexIndices.forEach((function(d,f){let p,m=!1;d<0&&(d^=-1,m=!0);let g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){const t=P(f,n,d,e.color);s.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(A.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let i=n,o=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const a=e[n];e[n]=o,o=a}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)l.push(v[e]),u.push(g[e])}if(e.normal){const t=P(f,n,d,e.normal);a.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=P(f,n,d,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const r=P(f,n,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(r[0]),c[t].push(r[1])})),r++,m&&(h.genFace(t,e,o,p,a,s,c,l,u,r),n++,r=0,o=[],a=[],s=[],c=[],l=[],u=[])})),t}genFace(e,t,n,r,i,o,a,s,c,l){for(let u=2;u<l;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[4*(u-1)]),e.weightsIndices.push(c[4*(u-1)+1]),e.weightsIndices.push(c[4*(u-1)+2]),e.weightsIndices.push(c[4*(u-1)+3]),e.weightsIndices.push(c[4*u]),e.weightsIndices.push(c[4*u+1]),e.weightsIndices.push(c[4*u+2]),e.weightsIndices.push(c[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(u-1)]),e.normal.push(i[3*(u-1)+1]),e.normal.push(i[3*(u-1)+2]),e.normal.push(i[3*u]),e.normal.push(i[3*u+1]),e.normal.push(i[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const o=T.Objects.Geometry[n.geoID];void 0!==o&&i.genMorphGeometry(e,t,o,r,n.name)}))}))}genMorphGeometry(e,t,n,r,i){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],s=void 0!==n.Indexes?n.Indexes.a:[],l=3*e.attributes.position.count,u=new Float32Array(l);for(let e=0;e<s.length;e++){const t=3*s[e];u[t]=a[3*e],u[t+1]=a[3*e+1],u[t+2]=a[3*e+2]}const h={vertexIndices:o,vertexPositions:u},d=this.genBuffers(h),f=new c.Float32BufferAttribute(d.vertex,3);f.name=i||n.attrName,f.applyMatrix4(r),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let e=0;e<r.length;++e)i.push(e);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(void 0===c.NURBSCurve)return A.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new c.BufferGeometry;const t=parseInt(e.Order);if(isNaN(t))return A.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new c.BufferGeometry;const n=t-1,r=e.KnotVector.a,i=[],o=e.Points.a;for(let e=0,t=o.length;e<t;e+=4)i.push((new c.Vector4).fromArray(o,e));let a,s;if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){a=n,s=r.length-1-a;for(let e=0;e<n;++e)i.push(i[e])}const l=new c.NURBSCurve(n,r,i,a,s).getPoints(12*i.length);return(new c.BufferGeometry).setFromPoints(l)}}class AnimationParser{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===T.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=T.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=T.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(R),values:t[n].KeyValueFloat.a},i=M.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=T.Objects.AnimationLayer,n=new Map;for(const r in t){const t=[],i=M.get(parseInt(r));if(void 0!==i){i.children.forEach((function(n,r){if(e.has(n.ID)){const i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){const e=M.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const i=T.Objects.Model[e.toString()];if(void 0===i)return void A.warn("THREE.FBXLoader: Encountered a unused curve.",n);const o={modelName:i.attrName?c.PropertyBinding.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};E.traverse((function(e){e.ID===i.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new c.Matrix4),"PreRotation"in i&&(o.preRotation=i.PreRotation.value),"PostRotation"in i&&(o.postRotation=i.PostRotation.value),t[r]=o}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){const e=M.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,i=M.get(e).parents[0].ID,o=M.get(i).parents[0].ID,a=M.get(o).parents[0].ID,s=T.Objects.Model[a],l={modelName:s.attrName?c.PropertyBinding.sanitizeNodeName(s.attrName):"",morphName:T.Objects.Deformer[e].attrName};t[r]=l}t[r][i.attr]=i}}})),n.set(parseInt(r),t)}}return n}parseAnimStacks(e){const t=T.Objects.AnimationStack,n={};for(const r in t){const i=M.get(parseInt(r)).children;i.length>1&&A.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new c.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let n=new c.Vector3,r=new c.Quaternion,i=new c.Vector3;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new c.Euler).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,r){const i=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(i,t,n);return new c.VectorKeyframeTrack(e+"."+r,i,o)}generateRotationTrack(e,t,n,r,i,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(c.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(c.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(c.MathUtils.degToRad));const a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,n);void 0!==r&&((r=r.map(c.MathUtils.degToRad)).push(o),r=(new c.Euler).fromArray(r),r=(new c.Quaternion).setFromEuler(r)),void 0!==i&&((i=i.map(c.MathUtils.degToRad)).push(o),i=(new c.Euler).fromArray(i),i=(new c.Quaternion).setFromEuler(i).invert());const l=new c.Quaternion,u=new c.Euler,h=[];for(let e=0;e<s.length;e+=3)u.set(s[e],s[e+1],s[e+2],o),l.setFromEuler(u),void 0!==r&&l.premultiply(r),void 0!==i&&l.multiply(i),l.toArray(h,e/3*4);return new c.QuaternionKeyframeTrack(e+".quaternion",a,h)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=E.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new c.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==a){const e=t.y.values[a];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==s){const e=t.z.values[s];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){const o=i/180,a=r/o;let s=n+a;const c=e.times[t-1],l=(e.times[t]-c)/o;let u=c+l;const h=[],d=[];for(;u<e.times[t];)h.push(u),u+=l,d.push(s),s+=a;e.times=I(e.times,t,h),e.values=I(e.values,t,d)}}}}class TextParser{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new FBXTree,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(i||o)return;const a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"==typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let a=i.split(",").slice(3);a=a.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,a),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=O(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=O(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3];let c=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=O(c)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:c},this.setCurrentProp(this.getPrevNode(),i)}}class BinaryParser{parse(e){const t=new BinaryReader(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new FBXTree;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(0===r)return null;const s=[];for(let t=0;t<i;t++)s.push(this.parseProperty(e));const c=s.length>0?s[0]:"",l=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(a,n,r)}return n.propertyList=s,"number"==typeof c&&(n.id=c),""!==l&&(n.attrName=l),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],o=n.propertyList[3];let a;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),a="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:o,value:a}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}"undefined"==typeof fflate&&A.error("THREE.FBXLoader: External library fflate.min.js required.");const a=fflate.unzlibSync(new Uint8Array(e.getArrayBuffer(o))),s=new BinaryReader(a.buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class BinaryReader{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1==(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let n=0;n<e;n++)t[n]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),c.LoaderUtils.decodeText(new Uint8Array(t))}}class FBXTree{add(e,t){this[e]=t}}function S(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function R(e){return e/46186158e3}const L=[];function P(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:A.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(let i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(L,r.buffer,o,a)}const C=new c.Euler,F=new c.Vector3;function D(e){const t=new c.Matrix4,n=new c.Matrix4,r=new c.Matrix4,i=new c.Matrix4,o=new c.Matrix4,a=new c.Matrix4,s=new c.Matrix4,l=new c.Matrix4,u=new c.Matrix4,h=new c.Matrix4,d=new c.Matrix4,f=new c.Matrix4,p=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(F.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(c.MathUtils.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(C.fromArray(t))}if(e.rotation){const t=e.rotation.map(c.MathUtils.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(C.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(c.MathUtils.degToRad);t.push(e.eulerOrder),i.makeRotationFromEuler(C.fromArray(t)),i.invert()}e.scale&&o.scale(F.fromArray(e.scale)),e.scalingOffset&&s.setPosition(F.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(F.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(F.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(F.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const m=n.clone().multiply(r).multiply(i),g=new c.Matrix4;g.extractRotation(h);const v=new c.Matrix4;v.copyPosition(h);const _=v.clone().invert().multiply(h),y=g.clone().invert().multiply(_),b=o,x=new c.Matrix4;if(0===p)x.copy(g).multiply(m).multiply(y).multiply(b);else if(1===p)x.copy(g).multiply(y).multiply(m).multiply(b);else{const e=(new c.Matrix4).scale((new c.Vector3).setFromMatrixScale(d)).clone().invert(),t=y.clone().multiply(e);x.copy(g).multiply(m).multiply(t).multiply(b)}const w=u.clone().invert(),A=a.clone().invert();let T=t.clone().multiply(l).multiply(u).multiply(n).multiply(r).multiply(i).multiply(w).multiply(s).multiply(a).multiply(o).multiply(A);const M=(new c.Matrix4).copyPosition(T),E=h.clone().multiply(M);return f.copyPosition(E),T=f.clone().multiply(x),T.premultiply(h.invert()),T}function U(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(A.warn("THREE.FBXLoader: unsupported THREE.Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function O(e){return e.split(",").map((function(e){return parseFloat(e)}))}function k(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),c.LoaderUtils.decodeText(new Uint8Array(e,t,n))}function I(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}c.FBXLoader=FBXLoader;var B=FBXLoader,N=n(5108);function Z(e,t=!1){const n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),i=new Set(Object.keys(e[0].morphAttributes)),o={},a={},s=e[0].morphTargetsRelative,l=new c.BufferGeometry;let u=0;for(let c=0;c<e.length;++c){const h=e[c];let d=0;if(n!==(null!==h.index))return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const e in h.attributes){if(!r.has(e))return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+e+'" attribute exists among all geometries, or in none of them.'),null;void 0===o[e]&&(o[e]=[]),o[e].push(h.attributes[e]),d++}if(d!==r.size)return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(s!==h.morphTargetsRelative)return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const e in h.morphAttributes){if(!i.has(e))return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[e]&&(a[e]=[]),a[e].push(h.morphAttributes[e])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(h.userData),t){let e;if(n)e=h.index.count;else{if(void 0===h.attributes.position)return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;e=h.attributes.position.count}l.addGroup(u,e,c),u+=e}}if(n){let t=0;const n=[];for(let r=0;r<e.length;++r){const i=e[r].index;for(let e=0;e<i.count;++e)n.push(i.getX(e)+t);t+=e[r].attributes.position.count}l.setIndex(n)}for(const e in o){const t=j(o[e]);if(!t)return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+e+" attribute."),null;l.setAttribute(e,t)}for(const e in a){const t=a[e][0].length;if(0===t)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[e]=[];for(let n=0;n<t;++n){const t=[];for(let r=0;r<a[e].length;++r)t.push(a[e][r][n]);const r=j(t);if(!r)return N.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+e+" morphAttribute."),null;l.morphAttributes[e].push(r)}}return l}function j(e){let t,n,r,i=0;for(let o=0;o<e.length;++o){const a=e[o];if(a.isInterleavedBufferAttribute)return N.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return N.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return N.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===r&&(r=a.normalized),r!==a.normalized)return N.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;i+=a.array.length}const o=new t(i);let a=0;for(let t=0;t<e.length;++t)o.set(e[t].array,a),a+=e[t].array.length;return new c.BufferAttribute(o,n,r)}var z=n(5108);function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var V=new w,W=new B,H={},X=function(e){(0,o.Z)(n,e);var t=G(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,i.Z)(this,n),e=t.apply(this,arguments);var a=r.split(".");switch(a=a[a.length-1]){case"obj":var s=new c.BoxBufferGeometry;for(var h in H[r]?s=H[r].clone():setTimeout((function(){V.load(r,(function(t){z.log("LOADED ASSET-GEOMETRY ".concat(r),t);var n=new c.BufferGeometry;if(t instanceof c.Group)if(t.children.length>1){var i=[];t.children.forEach((function(e){if(e instanceof c.Mesh){var t=e.geometry.getAttribute("position").count;void 0===e.geometry.attributes.uv&&e.geometry.setAttribute("uv",new c.BufferAttribute(new Float32Array(2*t),2)),void 0===e.geometry.attributes.normal&&e.geometry.setAttribute("normal",new c.BufferAttribute(new Float32Array(3*t),3)),i.push(e.geometry)}}));var a=Z(i,!0);for(var s in a)n[s]=a[s]}else{n=t.children[0].geometry;var h=void 0;(0,l.Z)(t.children[0].material)&&(h=(0,u.Z)(t.children[0].material,(function(e){return e.name}))),n.materials_order=h}else t instanceof c.Mesh&&(n=t.geometry.clone());for(var d in H[r]=n,n)e[d]=n[d];setTimeout((function(){e.scale(o,o,o)}))}))})),s)e[h]=s[h];break;case"fbx":W.load(r,(function(t){if(t instanceof c.Group){if(t.children&&t.children[0]&&t.children[0]instanceof c.Mesh)for(var n in t.children[0].geometry)e[n]=t.children[0].geometry[n]}else if(t instanceof c.Mesh)for(var r in t.geometry)e[r]=t.geometry[r];e.scale(o,o,o)}))}return e}return(0,r.Z)(n)}(c.BufferGeometry),Q=X},5613:function(e,t,n){"use strict";n.r(t);var r=n(2826),i=n(5785),o=n(5671),a=n(3144),s=n(7326),c=n(136),l=n(2963),u=n(1120),h=n(4942),d=n(5017),f=n(1489),p=n(3882),m=n(3836),g=n(290),v=n(3505),_=n(5290),y=n(5840),b=n(6378),x=n(9360);n(7845);function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,h.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var M=n(6470);function E(e){return Number(e)||0}var S={newmtl:["name"],d:["opacity"],Kd:["color"],Ns:["shininess"],Ks:["specular"],Ka:["reflectivity","metalness"],Ni:["refractionRatio"],map_d:["alphaMap"],map_Bump:["normalMap","bumpMap"],map_Kd:["map"],map_Ks:["specularMap"],map_Ns:["roughnessMap"],map_Ke:["emissiveMap"],refl:["metalnessMap"]},R=["map_d","map_Bump","map_Kd","map_Ns","map_Ke","map_Ks","refl"],L=function(e){(0,c.Z)(n,e);var t=T(n);function n(e){var r;(0,o.Z)(this,n),r=t.call(this,e),(0,h.Z)((0,s.Z)(r),"src",""),(0,h.Z)((0,s.Z)(r),"bump_scale",.001),(0,h.Z)((0,s.Z)(r),"shininess",.3333),(0,h.Z)((0,s.Z)(r),"displacement_scale",.01),(0,h.Z)((0,s.Z)(r),"doubleside",!1);var i=r.src=e.src;r.bump_scale=(0,g.Z)(e.bump_scale)?e.bump_scale:1e-4,r.displacement_scale=(0,g.Z)(e.displacement_scale)?e.displacement_scale:.01,r.shininess=(0,g.Z)(e.shininess)?e.shininess:.5,r.roughness=(0,g.Z)(e.roughness)?e.roughness:1,r.metalness=(0,g.Z)(e.metalness)?e.metalness:0,r.reflectivity=(0,g.Z)(e.reflectivity)?e.reflectivity:0,r.doubleside=!!(0,v.Z)(e.doubleside)&&e.doubleside,r.color=e.color||"#ffffff",r.transparent=!!(0,v.Z)(e.transparent)&&e.transparent,r.emissive_color=e.emissive_color||void 0,r.add_clearcoat=!!(0,v.Z)(e.add_clearcoat)&&e.add_clearcoat,r.diffuse_to_emissive=!!(0,v.Z)(e.diffuse_to_emissive)&&e.diffuse_to_emissive,r.add_sheen=!!(0,v.Z)(e.add_sheen)&&e.add_sheen,r.emissive_intensity=(0,g.Z)(e.emissive_intensity)?e.emissive_intensity:1;var a=[],c=i.split(".");if("mtl"===(c=c[c.length-1])){var u=(0,f.p1)(e.src),d=r.parse_mtl(u,i);d.forEach((function(e){return a.push(e)})),d.sorted=!1}return 1===a.length?(0,l.Z)(r,a[0]):(0,l.Z)(r,a)}return(0,a.Z)(n,[{key:"parse_mtl",value:function(e,t){for(var o,a=this,s=n.ResourceManager,c=[],l=M.dirname(t),u=[],h=/newmtl.*/gim,v=[];o=h.exec(e);)v.push(o.index);function w(e){var t=(0,_.Z)(S),n={};t.forEach((function(t){var r=function(e){if("string"==typeof e){var t=e.split(" ");return t=t.slice(1,t.length)}return}(function(e,t){var n=t.match(new RegExp("^".concat(e,".*"),"gm"));return Array.isArray(n)?n[0]:void 0}(t,e));n[t]=r}));var o={};return(0,y.Z)(n,(function(e,t){var n,a=S[t],s=e;if(Array.isArray(s))if(1===s.length)s=isNaN(parseFloat(s[0]))?s[0]:E(s[0]);else if(3===s.length)switch(t){case"Ka":s=E(s[0])/2;break;case"d":s=E(s[0]);break;default:s=(0,r.Z)(d.Color,(0,i.Z)((n=s,(0,m.Z)(n,(function(e){return E(e)})))))}(0,b.Z)(s)&&R.indexOf(t)>-1&&(s=M.basename(s.replace(/\\\\/gm,"/")),(s="".concat(l,"/maps/").concat(s)).indexOf("?")>-1?s+="&wrapS=1000&wrapT=1000":s+="?wrapS=1000&wrapT=1000"),(0,y.Z)(a,(function(e){o[e]=s})),void 0!==o.emissiveMap&&(o.emissiveIntensity=1,o.emissive=new d.Color(16777215))})),(0,y.Z)(o,(function(e,t){void 0===e&&delete o[t]})),o}return v.forEach((function(t,n){var r=void 0===v[n+1]?e.length:v[n+1],i=e.substring(t,r);u.push(i)})),u.forEach((function(e){var t=[],n=p.Z.is_mobile?"MeshLambertMaterial":"MeshPhysicalMaterial",r=w(e);if(r.color&&r.color.set_any((0,f.aH)("multiply",r.color,a.color,"array")),r.emissive&&a.emissive_color&&r.emissive.set_any((0,f.aH)("multiply",r.emissive,a.emissive_color,"array")),void 0!==r.emissiveIntensity&&(r.emissiveIntensity*=a.emissive_intensity),a.use_map_as_alphamap&&(r.alphaMap=r.map),(r.opacity&&r.opacity<1||void 0!==r.alphaMap)&&(r.transparent=!0),(0,g.Z)(r.roughness)?r.roughness*=a.roughness:r.roughness=a.roughness,(0,g.Z)(r.metalness)?r.metalness*=a.metalness:r.metalness=a.metalness,(0,g.Z)(r.shininess)&&(r.shininess*=a.shininess),(0,g.Z)(r.reflectivity)?r.reflectivity*=a.reflectivity:r.reflectivity=a.reflectivity,a.add_clearcoat&&(r.clearcoat=(0,g.Z)(r.reflectivity)?r.reflectivity:1,r.clearcoatRoughness=(0,g.Z)(r.roughness)?r.roughness:1,(0,b.Z)(r.metalnessMap)&&(r.clearcoatMap=r.metalnessMap),(0,b.Z)(r.normalMap)&&(r.clearcoatNormalMap=r.normalMap),(0,b.Z)(r.roughnessMap)&&(r.clearcoatRoughnessMap=r.roughnessMap)),a.add_sheen&&(r.sheen=(0,x.Z)(r.specular)?1:r.specular.r,r.sheenRoughness=(0,g.Z)(r.roughness)?r.roughness:1,(0,b.Z)(r.roughnessMap)&&(r.sheenRoughnessMap=r.specularMap),(0,x.Z)(r.specularMap)||(r.sheenColorMap=r.specularMap),(0,x.Z)(r.specular)||(r.sheenColor=new d.Color(r.specular.r,r.specular.g,r.specular.b))),a.diffuse_to_emissive&&(r.emissiveMap=r.map),!0===a.transparent&&(r.transparent=!0),!0===a.doubleside&&(r.side=d.DoubleSide),r.bumpScale=5e-4,void 0!==r.shininess||void 0!==r.specular||void 0!==r.specularMap||void 0!==r.refractionRatio||void 0!==r.reflectivity){var i=new d.MeshPhongMaterial(A(A({},r),{},{color:0,userData:{layer_name:"phong"}}));i.blending=2,t.push(i)}var o=new s.classes_of_materials[n](r);t.length>0&&(o.material_layers=t),c.push(o)})),c}}]),n}(d.Material);t.default=L},8171:function(e,t,n){"use strict";n.r(t);var r=n(3144),i=n(5671),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(1002),h=(n(3882),n(290)),d=n(5017);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}function p(e){this.material_layers=this.material_layers||[];var t,n=new d.Vector2(1,1);"number"==typeof e.tiling?n.set(e.tiling,e.tiling):Array.isArray(e.tiling)?n.set(e.tiling[0]||0,e.tiling[1]||0):"object"===(0,u.Z)(e.tiling)&&"number"==typeof e.tiling.y&&n.set(e.tiling.x,n.tiling.y),this.file_format=e.file_format||"jpg",this.color=new d.Color(e.color),this.pbr=e.pbr||"",this.map="".concat(this.pbr,"_c.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.aoMap="".concat(this.pbr,"_ao.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.normalMap="".concat(this.pbr,"_n.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.roughnessMap="".concat(this.pbr,"_r.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.metalnessMap="".concat(this.pbr,"_m.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.reflectivityMap="".concat(this.pbr,"_m.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.displacementMap="".concat(this.pbr,"_h.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.bumpMap="".concat(this.pbr,"_h.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.emissiveMap="".concat(this.pbr,"_e.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y),this.bumpScale="number"==typeof e.bumpScale?e.bumpScale:1,this.reflectivity=(0,h.Z)(e.reflectivity)?e.reflectivity:.2,this.displacementScale=-.001,this.metalness=(0,h.Z)(e.metalness)?e.metalness:.5,this.roughness=(0,h.Z)(e.roughness)?e.roughness:1,this.specular=new d.Color(1,1,1),this.emissive=new d.Color(1,1,1),this.material_layers.push(new d.MeshPhongMaterial((t={shininess:1,color:new d.Color(0,0,0),map:this.map,metalness:this.metalness,roughness:this.roughness,specular:this.specular,emissive:this.emissive,normalMap:this.normalMap,roughnessMap:this.roughnessMap,metalnessMap:this.metalnessMap,reflectivityMap:this.metalnessMap,bumpMap:this.bumpMap,emissiveMap:this.emissiveMap},(0,l.Z)(t,"emissiveMap",this.emissiveMap),(0,l.Z)(t,"bumpScale",this.bumpScale),(0,l.Z)(t,"reflectivity",this.reflectivity),(0,l.Z)(t,"blending",2),(0,l.Z)(t,"transparent",!0),(0,l.Z)(t,"userData",{layer_name:"phong"}),t))),this.material_layers.push(new d.MeshBasicMaterial({color:new d.Color(0,0,0),alphaMap:"".concat(this.pbr,"_ao.").concat(this.file_format,"?wrapS=1000&wrapT=1000&repeat.x=").concat(n.x,"&repeat.y=").concat(n.y,"&maxsize=1024&filter=[invert]"),opacity:1,transparent:!0,blending:1,userData:{layer_name:"ao"}}))}var m=function(e){(0,a.Z)(n,e);var t=f(n);function n(e){var r;return(0,i.Z)(this,n),r=t.call(this,e),(0,l.Z)((0,o.Z)(r),"file_format","png"),(0,l.Z)((0,o.Z)(r),"pbr",""),p.call((0,o.Z)(r),e),r}return(0,r.Z)(n)}(d.MeshPhysicalMaterial);t.default=m},8554:function(e,t,n){"use strict";n.r(t);var r=n(3144),i=n(5671),o=n(136),a=n(2963),s=n(1120),c=n(5017);function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,s.Z)(e);if(t){var i=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var u=function(e){(0,o.Z)(n,e);var t=l(n);function n(){return(0,i.Z)(this,n),t.apply(this,arguments)}return(0,r.Z)(n)}(c.MeshBasicMaterial);t.default=u},4086:function(e,t,n){"use strict";n.r(t);var r=n(4942),i=n(5671),o=n(3144),a=n(136),s=n(2963),c=n(1120),l=n(290),u=n(5017);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var f=function(e){(0,a.Z)(n,e);var t=d(n);function n(e){var o;(0,i.Z)(this,n),e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({map:void 0,alphaMap:void 0},e);var a=new u.PlaneBufferGeometry(1,1,1),s=new u.ShaderMaterial({vertexShader:"\n                attribute vec3 postion;\n                varying vec2 vUv;\n                uniform float scale;\n                void main(){\n                    vUv =  uv;\n                    gl_Position = vec4(position * 2. * scale, 1.);\n                }\n            ",fragmentShader:"\n                varying vec2 vUv;\n                uniform sampler2D map;\n                uniform sampler2D alphaMap;\n                uniform float opacity;\n                void main(){\n                    vec4 color = texture2D(map, vUv);\n                    vec4 a_color = texture2D(alphaMap, vUv);\n                    gl_FragColor = vec4(color.xyz, color.a * opacity);\n                }\n            ",uniforms:{map:{value:e.map,type:"t"},alphaMap:{value:e.alphaMap,type:"t"},scale:{value:(0,l.Z)(e.scale)?e.scale:1,type:"f"},opacity:{value:(0,l.Z)(e.opacity)?e.opacity:1,type:"f"}},transparent:void 0!==e.alphaMap||e.opacity<1});return(o=t.call(this,a,s)).frustumCulled=!1,o}return(0,o.Z)(n,[{key:"on_tick",value:function(e){}}]),n}(u.Mesh);t.default=f},5620:function(e,t,n){"use strict";n.r(t);var r=n(3144),i=n(5671),o=n(7326),a=n(136),s=n(2963),c=n(1120),l=n(4942),u=n(5017);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var d=function(e){(0,a.Z)(n,e);var t=h(n);function n(){var e;(0,i.Z)(this,n),e=t.call(this),(0,l.Z)((0,o.Z)(e),"isSky",!0);var r=n.shader_data,a=new u.ShaderMaterial({name:"SkyMeshShader",fragmentShader:r.fragment_shader,vertexShader:r.vertex_shader,uniforms:u.UniformsUtils.clone(r.uniforms),side:u.BackSide,depthWrite:!1,fog:!1});return e.receiveShadow=!1,e.castShadow=!1,e.material=a,e.geometry=new u.BoxBufferGeometry(1,1,1),e.scale.setScalar(45e3),e}return(0,r.Z)(n)}(u.Mesh);d.shader_data={uniforms:{turbidity:{value:2},rayleigh:{value:1},mie_coefficient:{value:.005},opacity:{value:1},mie_directional_g:{value:.8},sun_position:{value:new u.Vector3},up:{value:new u.Vector3(0,1,0)}},vertex_shader:"\n        uniform vec3 sun_position;\n        uniform float rayleigh;\n        uniform float turbidity;\n        uniform float mie_coefficient;\n        uniform vec3 up;\n\n        varying vec3 vWorldPosition;\n        varying vec3 vSunDirection;\n        varying float vSunfade;\n        varying vec3 vBetaR;\n        varying vec3 vBetaM;\n        varying float vSunE;\n\n        // constants for atmospheric scattering\n        const float e = 2.71828182845904523536028747135266249775724709369995957;\n        const float pi = 3.141592653589793238462643383279502884197169;\n\n        // wavelength of used primaries, according to preetham\n        const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n        // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n        // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n        const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n        // mie stuff\n        // K coefficient for the primaries\n        const float v = 4.0;\n        const vec3 K = vec3( 0.686, 0.678, 0.666 );\n        // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n        const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n        // earth shadow hack\n        // cutoffAngle = pi / 1.95;\n        const float cutoffAngle = 1.6110731556870734;\n        const float steepness = 1.5;\n        const float EE = 1000.0;\n\n        float sunIntensity( float zenithAngleCos ) {\n            zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n            return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n        }\n\n        vec3 totalMie( float T ) {\n            float c = ( 0.2 * T ) * 10E-18;\n            return 0.434 * c * MieConst;\n        }\n\n        void main() {\n\n            vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n            vWorldPosition = worldPosition.xyz;\n\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            gl_Position.z = gl_Position.w; // set z to camera.far\n\n            vSunDirection = normalize( sun_position );\n\n            vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n            vSunfade = 1.0 - clamp( 1.0 - exp( ( sun_position.y / 450000.0 ) ), 0.0, 1.0 );\n\n            float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n        // extinction (absorbtion + out scattering)\n        // rayleigh coefficients\n            vBetaR = totalRayleigh * rayleighCoefficient;\n\n        // mie coefficients\n            vBetaM = totalMie( turbidity ) * mie_coefficient;\n\n        }\n    ",fragment_shader:"\n        varying vec3 vWorldPosition;\n        varying vec3 vSunDirection;\n        varying float vSunfade;\n        varying vec3 vBetaR;\n        varying vec3 vBetaM;\n        varying float vSunE;\n        \n        uniform float opacity;\n        uniform float mie_directional_g;\n        uniform vec3 up;\n\n        const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n        // constants for atmospheric scattering\n        const float pi = 3.141592653589793238462643383279502884197169;\n\n        const float n = 1.0003; // refractive index of air\n        const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n        // optical length at zenith for molecules\n        const float rayleighZenithLength = 8.4E3;\n        const float mieZenithLength = 1.25E3;\n        // 66 arc seconds -> degrees, and the cosine of that\n        const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n        // 3.0 / ( 16.0 * pi )\n        const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n        // 1.0 / ( 4.0 * pi )\n        const float ONE_OVER_FOURPI = 0.07957747154594767;\n\n        float rayleighPhase( float cosTheta ) {\n            return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n        }\n\n        float hgPhase( float cosTheta, float g ) {\n            float g2 = pow( g, 2.0 );\n            float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n            return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n        }\n\n        void main() {\n\n            vec3 direction = normalize( vWorldPosition - cameraPos );\n\n        // optical length\n        // cutoff angle at 90 to avoid singularity in next formula.\n            float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n            float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n            float sR = rayleighZenithLength * inverse;\n            float sM = mieZenithLength * inverse;\n\n        // combined extinction factor\n            vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n        // in scattering\n            float cosTheta = dot( direction, vSunDirection );\n\n            float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n            vec3 betaRTheta = vBetaR * rPhase;\n\n            float mPhase = hgPhase( cosTheta, mie_directional_g );\n            vec3 betaMTheta = vBetaM * mPhase;\n\n            vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n            Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n        // nightsky\n            float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n            float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n            vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n            vec3 L0 = vec3( 0.1 ) * Fex;\n\n        // composition + solar disc\n            float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n            L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n            vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n            vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n            gl_FragColor = vec4( retColor, opacity );\n\n        #include <tonemapping_fragment>\n        #include <encodings_fragment>\n\n        }\n    "},t.default=d},2899:function(e,t,n){"use strict";function r(e){void 0===String.prototype.splice&&(String.prototype.splice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=e<0?this.length+e:e;return this.substring(0,r)+t+this.substring(r+n)})}n.r(t),n.d(t,{default:function(){return r}})},4743:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});n(3544);var r=n(9192),i=n(9706),o=n(5108);function a(e){o.log(r.V),r.V.cube.fragmentShader="\n        #include <envmap_common_pars_fragment>\n        uniform float opacity;\n        uniform float brightness;\n        uniform vec3 tint;\n        \n        varying vec3 vWorldDirection;\n        \n        #include <cube_uv_reflection_fragment>\n        \n        void main() {\n        \n            vec3 vReflect = vWorldDirection;\n            #include <envmap_fragment>\n        \n            gl_FragColor = envColor;\n            gl_FragColor.xyz *= tint * brightness;\n            gl_FragColor.a *= opacity;\n        \n            #include <tonemapping_fragment>\n            #include <encodings_fragment>\n        \n        }\n    ",r.V.cube.uniforms.tint={value:new i.I(1,1,1)},r.V.cube.uniforms.brightness={value:1}}},6406:function(){},2711:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var r=n(4942),i=n(3144),o=n(5671),a=n(136),s=n(2963),c=n(1120),l=n(5017);class Water extends l.Mesh{constructor(e,t={}){super(e);const n=this,r=void 0!==t.textureWidth?t.textureWidth:512,i=void 0!==t.textureHeight?t.textureHeight:512,o=void 0!==t.clipBias?t.clipBias:0,a=void 0!==t.alpha?t.alpha:1,s=void 0!==t.time?t.time:0,c=void 0!==t.waterNormals?t.waterNormals:null,u=void 0!==t.sunDirection?t.sunDirection:new l.Vector3(.70707,.70707,0),h=new l.Color(void 0!==t.sunColor?t.sunColor:16777215),d=new l.Color(void 0!==t.waterColor?t.waterColor:8355711),f=void 0!==t.eye?t.eye:new l.Vector3(0,0,0),p=void 0!==t.distortionScale?t.distortionScale:20,m=void 0!==t.side?t.side:l.FrontSide,g=void 0!==t.fog&&t.fog,v=new l.Plane,_=new l.Vector3,y=new l.Vector3,b=new l.Vector3,x=new l.Matrix4,w=new l.Vector3(0,0,-1),A=new l.Vector4,T=new l.Vector3,M=new l.Vector3,E=new l.Vector4,S=new l.Matrix4,R=new l.PerspectiveCamera,L={minFilter:l.LinearFilter,magFilter:l.LinearFilter,format:l.RGBFormat},P=new l.WebGLRenderTarget(r,i,L);l.MathUtils.isPowerOfTwo(r)&&l.MathUtils.isPowerOfTwo(i)||(P.texture.generateMipmaps=!1);const C={uniforms:l.UniformsUtils.merge([l.UniformsLib.fog,l.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new l.Matrix4},sunColor:{value:new l.Color(8355711)},sunDirection:{value:new l.Vector3(.70707,.70707,0)},eye:{value:new l.Vector3},waterColor:{value:new l.Color(5592405)}}]),vertexShader:"\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}",fragmentShader:"\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t}"},F=new l.ShaderMaterial({fragmentShader:C.fragmentShader,vertexShader:C.vertexShader,uniforms:l.UniformsUtils.clone(C.uniforms),lights:!0,side:m,fog:g});F.uniforms.mirrorSampler.value=P.texture,F.uniforms.textureMatrix.value=S,F.uniforms.alpha.value=a,F.uniforms.time.value=s,F.uniforms.normalSampler.value=c,F.uniforms.sunColor.value=h,F.uniforms.waterColor.value=d,F.uniforms.sunDirection.value=u,F.uniforms.distortionScale.value=p,F.uniforms.eye.value=f,n.material=F,n.onBeforeRender=function(e,t,r){if(y.setFromMatrixPosition(n.matrixWorld),b.setFromMatrixPosition(r.matrixWorld),x.extractRotation(n.matrixWorld),_.set(0,0,1),_.applyMatrix4(x),T.subVectors(y,b),T.dot(_)>0)return;T.reflect(_).negate(),T.add(y),x.extractRotation(r.matrixWorld),w.set(0,0,-1),w.applyMatrix4(x),w.add(b),M.subVectors(y,w),M.reflect(_).negate(),M.add(y),R.position.copy(T),R.up.set(0,1,0),R.up.applyMatrix4(x),R.up.reflect(_),R.lookAt(M),R.far=r.far,R.updateMatrixWorld(),R.projectionMatrix.copy(r.projectionMatrix),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(R.projectionMatrix),S.multiply(R.matrixWorldInverse),v.setFromNormalAndCoplanarPoint(_,y),v.applyMatrix4(R.matrixWorldInverse),A.set(v.normal.x,v.normal.y,v.normal.z,v.constant);const i=R.projectionMatrix;E.x=(Math.sign(A.x)+i.elements[8])/i.elements[0],E.y=(Math.sign(A.y)+i.elements[9])/i.elements[5],E.z=-1,E.w=(1+i.elements[10])/i.elements[14],A.multiplyScalar(2/A.dot(E)),i.elements[2]=A.x,i.elements[6]=A.y,i.elements[10]=A.z+1-o,i.elements[14]=A.w,f.setFromMatrixPosition(r.matrixWorld);const a=e.getRenderTarget(),s=e.xr.enabled,c=e.shadowMap.autoUpdate;n.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(P),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,R),n.visible=!0,e.xr.enabled=s,e.shadowMap.autoUpdate=c,e.setRenderTarget(a);const l=r.viewport;void 0!==l&&e.state.viewport(l)}}}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}Water.prototype.isWater=!0;var f=function(e){(0,a.Z)(n,e);var t=d(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,n);var r=void 0;switch((e=h({textureWidth:256,textureHeight:256,width:100,height:100,radius:50,segments:32,side:l.DoubleSide,geometry:"plane",waterNormals:"res/retro/waternormals.jpg?wrapT=1000&wrapS=1000",sunDirection:new l.Vector3,sunColor:16777215,waterColor:7695,distortionScale:1.7,fog:!0},e)).geometry){case"cicle":r=new l.CircleBufferGeometry(e.radius,e.segments).rotateX(-Math.PI/2);break;case"plane":r=new l.PlaneBufferGeometry(e.width,e.height).rotateX(-Math.PI/2)}return t.call(this,r,e)}return(0,i.Z)(n)}(Water),p=f},9273:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var r=n(4942),i=n(3144),o=n(5671),a=n(136),s=n(2963),c=n(1120),l=n(5017);class Reflector extends l.Mesh{constructor(e,t={}){super(e),this.type="Reflector";const n=this,r=void 0!==t.color?new l.Color(t.color):new l.Color(8355711),i=t.textureWidth||512,o=t.textureHeight||512,a=t.clipBias||0,s=t.shader||Reflector.ReflectorShader,c=new l.Plane,u=new l.Vector3,h=new l.Vector3,d=new l.Vector3,f=new l.Matrix4,p=new l.Vector3(0,0,-1),m=new l.Vector4,g=new l.Vector3,v=new l.Vector3,_=new l.Vector4,y=new l.Matrix4,b=new l.PerspectiveCamera,x={minFilter:l.LinearFilter,magFilter:l.LinearFilter,format:l.RGBFormat},w=new l.WebGLRenderTarget(i,o,x);l.MathUtils.isPowerOfTwo(i)&&l.MathUtils.isPowerOfTwo(o)||(w.texture.generateMipmaps=!1);const A=new l.ShaderMaterial({uniforms:l.UniformsUtils.clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});A.uniforms.tDiffuse.value=w.texture,A.uniforms.color.value=r,A.uniforms.textureMatrix.value=y,this.material=A,this.onBeforeRender=function(e,t,r){if(h.setFromMatrixPosition(n.matrixWorld),d.setFromMatrixPosition(r.matrixWorld),f.extractRotation(n.matrixWorld),u.set(0,0,1),u.applyMatrix4(f),g.subVectors(h,d),g.dot(u)>0)return;g.reflect(u).negate(),g.add(h),f.extractRotation(r.matrixWorld),p.set(0,0,-1),p.applyMatrix4(f),p.add(d),v.subVectors(h,p),v.reflect(u).negate(),v.add(h),b.position.copy(g),b.up.set(0,1,0),b.up.applyMatrix4(f),b.up.reflect(u),b.lookAt(v),b.far=r.far,b.updateMatrixWorld(),b.projectionMatrix.copy(r.projectionMatrix),y.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),y.multiply(b.projectionMatrix),y.multiply(b.matrixWorldInverse),y.multiply(n.matrixWorld),c.setFromNormalAndCoplanarPoint(u,h),c.applyMatrix4(b.matrixWorldInverse),m.set(c.normal.x,c.normal.y,c.normal.z,c.constant);const i=b.projectionMatrix;_.x=(Math.sign(m.x)+i.elements[8])/i.elements[0],_.y=(Math.sign(m.y)+i.elements[9])/i.elements[5],_.z=-1,_.w=(1+i.elements[10])/i.elements[14],m.multiplyScalar(2/m.dot(_)),i.elements[2]=m.x,i.elements[6]=m.y,i.elements[10]=m.z+1-a,i.elements[14]=m.w,w.texture.encoding=e.outputEncoding,n.visible=!1;const o=e.getRenderTarget(),s=e.xr.enabled,l=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(w),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,b),e.xr.enabled=s,e.shadowMap.autoUpdate=l,e.setRenderTarget(o);const x=r.viewport;void 0!==x&&e.state.viewport(x),n.visible=!0},this.getRenderTarget=function(){return w}}}Reflector.prototype.isReflector=!0,Reflector.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}",fragmentShader:"\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};class Refractor extends l.Mesh{constructor(e,t={}){super(e),this.type="Refractor";const n=this,r=void 0!==t.color?new l.Color(t.color):new l.Color(8355711),i=t.textureWidth||512,o=t.textureHeight||512,a=t.clipBias||0,s=t.shader||Refractor.RefractorShader,c=new l.PerspectiveCamera;c.matrixAutoUpdate=!1,c.userData.refractor=!0;const u=new l.Plane,h=new l.Matrix4,d={minFilter:l.LinearFilter,magFilter:l.LinearFilter,format:l.RGBFormat},f=new l.WebGLRenderTarget(i,o,d);l.MathUtils.isPowerOfTwo(i)&&l.MathUtils.isPowerOfTwo(o)||(f.texture.generateMipmaps=!1),this.material=new l.ShaderMaterial({uniforms:l.UniformsUtils.clone(s.uniforms),vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,transparent:!0}),this.material.uniforms.color.value=r,this.material.uniforms.tDiffuse.value=f.texture,this.material.uniforms.textureMatrix.value=h;const p=function(){const e=new l.Vector3,t=new l.Vector3,r=new l.Matrix4,i=new l.Vector3,o=new l.Vector3;return function(a){return e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(a.matrixWorld),i.subVectors(e,t),r.extractRotation(n.matrixWorld),o.set(0,0,1),o.applyMatrix4(r),i.dot(o)<0}}(),m=function(){const e=new l.Vector3,t=new l.Vector3,r=new l.Quaternion,i=new l.Vector3;return function(){n.matrixWorld.decompose(t,r,i),e.set(0,0,1).applyQuaternion(r).normalize(),e.negate(),u.setFromNormalAndCoplanarPoint(e,t)}}(),g=function(){const e=new l.Plane,t=new l.Vector4,n=new l.Vector4;return function(r){c.matrixWorld.copy(r.matrixWorld),c.matrixWorldInverse.copy(c.matrixWorld).invert(),c.projectionMatrix.copy(r.projectionMatrix),c.far=r.far,e.copy(u),e.applyMatrix4(c.matrixWorldInverse),t.set(e.normal.x,e.normal.y,e.normal.z,e.constant);const i=c.projectionMatrix;n.x=(Math.sign(t.x)+i.elements[8])/i.elements[0],n.y=(Math.sign(t.y)+i.elements[9])/i.elements[5],n.z=-1,n.w=(1+i.elements[10])/i.elements[14],t.multiplyScalar(2/t.dot(n)),i.elements[2]=t.x,i.elements[6]=t.y,i.elements[10]=t.z+1-a,i.elements[14]=t.w}}();this.onBeforeRender=function(e,t,r){f.texture.encoding=e.outputEncoding,!0!==r.userData.refractor&&!0!=!p(r)&&(m(),function(e){h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(e.projectionMatrix),h.multiply(e.matrixWorldInverse),h.multiply(n.matrixWorld)}(r),g(r),function(e,t,r){n.visible=!1;const i=e.getRenderTarget(),o=e.xr.enabled,a=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(f),!1===e.autoClear&&e.clear(),e.render(t,c),e.xr.enabled=o,e.shadowMap.autoUpdate=a,e.setRenderTarget(i);const s=r.viewport;void 0!==s&&e.state.viewport(s),n.visible=!0}(e,t,r))},this.getRenderTarget=function(){return f}}}Refractor.prototype.isRefractor=!0,Refractor.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:"\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}"};var u=n(5108);class Water extends l.Mesh{constructor(e,t={}){super(e),this.type="Water";const n=this,r=void 0!==t.color?new l.Color(t.color):new l.Color(16777215),i=t.textureWidth||512,o=t.textureHeight||512,a=t.clipBias||0,s=t.flowDirection||new l.Vector2(1,0),c=t.flowSpeed||.03,h=t.reflectivity||.02,d=t.scale||1,f=t.shader||Water.WaterShader,p=void 0!==t.encoding?t.encoding:l.LinearEncoding,m=new l.TextureLoader,g=t.flowMap||void 0,v=t.normalMap0||m.load("textures/water/Water_1_M_Normal.jpg"),_=t.normalMap1||m.load("textures/water/Water_2_M_Normal.jpg"),y=.15,b=.075,x=new l.Matrix4,w=new l.Clock;if(void 0===Reflector)return void u.error("THREE.Water: Required component Reflector not found.");if(void 0===Refractor)return void u.error("THREE.Water: Required component Refractor not found.");const A=new Reflector(e,{textureWidth:i,textureHeight:o,clipBias:a,encoding:p}),T=new Refractor(e,{textureWidth:i,textureHeight:o,clipBias:a,encoding:p});A.matrixAutoUpdate=!1,T.matrixAutoUpdate=!1,this.material=new l.ShaderMaterial({uniforms:l.UniformsUtils.merge([l.UniformsLib.fog,f.uniforms]),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,transparent:!0,fog:!0}),void 0!==g?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:g}):this.material.uniforms.flowDirection={type:"v2",value:s},v.wrapS=v.wrapT=l.RepeatWrapping,_.wrapS=_.wrapT=l.RepeatWrapping,this.material.uniforms.tReflectionMap.value=A.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=T.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=v,this.material.uniforms.tNormalMap1.value=_,this.material.uniforms.color.value=r,this.material.uniforms.reflectivity.value=h,this.material.uniforms.textureMatrix.value=x,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=b,this.material.uniforms.config.value.z=b,this.material.uniforms.config.value.w=d,this.onBeforeRender=function(e,t,r){!function(e){x.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),x.multiply(e.projectionMatrix),x.multiply(e.matrixWorldInverse),x.multiply(n.matrixWorld)}(r),function(){const e=w.getDelta(),t=n.material.uniforms.config;t.value.x+=c*e,t.value.y=t.value.x+b,t.value.x>=y?(t.value.x=0,t.value.y=b):t.value.y>=y&&(t.value.y=t.value.y-y)}(),n.visible=!1,A.matrixWorld.copy(n.matrixWorld),T.matrixWorld.copy(n.matrixWorld),A.onBeforeRender(e,t,r),T.onBeforeRender(e,t,r),n.visible=!0}}}Water.prototype.isWater=!0,Water.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new l.Vector4}},vertexShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}",fragmentShader:"\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}"};var h=n(7845);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var m=function(e){(0,a.Z)(n,e);var t=p(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.Z)(this,n);var r=void 0;switch((e=f({textureWidth:1024,textureHeight:1024,scale:1e3,width:100,height:100,radius:50,segments:32,geometry:"plane",reflectivity:.1,normalMap0:h.default.load_texture("res/retro/Water_1_M_Normal.jpg"),normalMap1:h.default.load_texture("res/retro/Water_1_M_Normal.jpg"),sunDirection:new l.Vector3,sunColor:16777215,waterColor:7695,distortionScale:1.7,fog:!0},e)).geometry){case"cicle":r=new l.CircleBufferGeometry(e.radius,e.segments).rotateX(-Math.PI/2);break;case"plane":r=new l.PlaneBufferGeometry(e.width,e.height).rotateX(-Math.PI/2)}return t.call(this,r,e)}return(0,i.Z)(n)}(Water),g=m},7667:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(1752),i=n(4942),o=n(7326),a=n(3144),s=n(5671),c=n(136),l=n(2963),u=n(1120),h=n(445),d=n(7845),f=n(5017),p=n(3882);new f.Vector2(1/1024,1/512);var m=n(5108);const g=new f.OrthographicCamera(-1,1,1,-1,0,1),v=new f.BufferGeometry;v.setAttribute("position",new f.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),v.setAttribute("uv",new f.Float32BufferAttribute([0,2,0,0,2,0],2));class FullScreenQuad{constructor(e){this._mesh=new f.Mesh(v,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,g)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}var _={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},y=n(5108);const b=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];class TAARenderPass extends class SSAARenderPass extends class Pass{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){m.error("THREE.Pass: .render() must be implemented in derived pass.")}}{constructor(e,t,n,r){super(),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==r?r:0,this._oldClearColor=new f.Color,void 0===_&&y.error("THREE.SSAARenderPass relies on CopyShader");const i=_;this.copyUniforms=f.UniformsUtils.clone(i.uniforms),this.copyMaterial=new f.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:f.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.fsQuad=new FullScreenQuad(this.copyMaterial)}dispose(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)}setSize(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)}render(e,t,n){this.sampleRenderTarget||(this.sampleRenderTarget=new f.WebGLRenderTarget(n.width,n.height,{minFilter:f.LinearFilter,magFilter:f.LinearFilter,format:f.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");const r=b[Math.max(0,Math.min(this.sampleLevel,5))],i=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const o=e.getClearAlpha(),a=1/r.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;const s={fullWidth:n.width,fullHeight:n.height,offsetX:0,offsetY:0,width:n.width,height:n.height},c=Object.assign({},this.camera.view);c.enabled&&Object.assign(s,c);for(let n=0;n<r.length;n++){const i=r[n];this.camera.setViewOffset&&this.camera.setViewOffset(s.fullWidth,s.fullHeight,s.offsetX+.0625*i[0],s.offsetY+.0625*i[1],s.width,s.height);let o=a;if(this.unbiased){o+=.03125*((n+.5)/r.length-.5)}this.copyUniforms.opacity.value=o,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===n&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.setViewOffset&&c.enabled?this.camera.setViewOffset(c.fullWidth,c.fullHeight,c.offsetX,c.offsetY,c.width,c.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=i,e.setClearColor(this._oldClearColor,o)}}{constructor(e,t,n,r){super(e,t,n,r),this.sampleLevel=0,this.accumulate=!1}render(e,t,n,r){if(!this.accumulate)return super.render(e,t,n,r),void(this.accumulateIndex=-1);const i=x[5];this.sampleRenderTarget||(this.sampleRenderTarget=new f.WebGLRenderTarget(n.width,n.height,this.params),this.sampleRenderTarget.texture.name="TAARenderPass.sample"),this.holdRenderTarget||(this.holdRenderTarget=new f.WebGLRenderTarget(n.width,n.height,this.params),this.holdRenderTarget.texture.name="TAARenderPass.hold"),this.accumulate&&-1===this.accumulateIndex&&(super.render(e,this.holdRenderTarget,n,r),this.accumulateIndex=0);const o=e.autoClear;e.autoClear=!1;const a=1/i.length;if(this.accumulateIndex>=0&&this.accumulateIndex<i.length){this.copyUniforms.opacity.value=a,this.copyUniforms.tDiffuse.value=t.texture;const r=Math.pow(2,this.sampleLevel);for(let o=0;o<r;o++){const r=i[this.accumulateIndex];if(this.camera.setViewOffset&&this.camera.setViewOffset(n.width,n.height,.0625*r[0],.0625*r[1],n.width,n.height),e.setRenderTarget(t),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.sampleRenderTarget),0===this.accumulateIndex&&e.clear(),this.fsQuad.render(e),this.accumulateIndex++,this.accumulateIndex>=i.length)break}this.camera.clearViewOffset&&this.camera.clearViewOffset()}const s=this.accumulateIndex*a;s>0&&(this.copyUniforms.opacity.value=1,this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture,e.setRenderTarget(t),e.clear(),this.fsQuad.render(e)),s<1&&(this.copyUniforms.opacity.value=1-s,this.copyUniforms.tDiffuse.value=this.holdRenderTarget.texture,e.setRenderTarget(t),0===s&&e.clear(),this.fsQuad.render(e)),e.autoClear=o}}const x=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var w=n(3836);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var T=n(2497),M=(T.ShaderPass,T.Resizer);var E=function(e){(0,c.Z)(n,e);var t=A(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.blendFunction,i=void 0===r?T.BlendFunction.NORMAL:r;(0,s.Z)(this,n);var o=d.default.get_material_template("retro/plugins/postfx.fxaa");return t.call(this,"fxaa",o.params.fragmentShader,{blendFunction:i,uniforms:new Map((0,w.Z)(o.params.uniforms,(function(e,t){return[t,new f.Uniform(e.value)]}))),vertexShader:o.vertexShader})}return(0,a.Z)(n)}(T.Effect),S=function(e){(0,c.Z)(n,e);var t=A(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.blendFunction,i=void 0===r?T.BlendFunction.NORMAL:r;(0,s.Z)(this,n);var o=d.default.get_material_template("retro/plugins/postfx.fidelityfx");return t.call(this,"FidelityFX",o.params.fragmentShader,{blendFunction:i,uniforms:new Map((0,w.Z)(o.params.uniforms,(function(e,t){return[t,new f.Uniform(e.value)]})))})}return(0,a.Z)(n)}(T.Effect),R=function(e){(0,c.Z)(n,e);var t=A(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.blendFunction,l=void 0===c?T.BlendFunction.NORMAL:c,u=a.normal_buffer,h=void 0===u?null:u,p=a.width,m=void 0===p?M.AUTO_SIZE:p,g=a.height,v=void 0===g?M.AUTO_SIZE:g,_=a.resolution_scale,y=void 0===_?1:_;(0,s.Z)(this,n);var b=d.default.get_material_template("retro/plugins/postfx.ssgi");return(i=t.call(this,"ssgi",b.params.fragmentShader,{blendFunction:l,width:m,height:v,uniforms:new Map((0,w.Z)(b.params.uniforms,(function(e,t){return[t,new f.Uniform(e.value)]})))})).resolution_scale=y,i.renderTarget=new f.WebGLRenderTarget(1024,1024,{minFilter:f.LinearFilter,magFilter:f.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),i.noise_texture=new T.NoiseTexture(100,100),i.noise_texture.wrapS=i.noise_texture.wrapT=f.RepeatWrapping,i.renderTarget.texture.name="ssgi.blur",i.renderTarget.texture.generateMipmaps=!1,i.depthPass=new T.DepthPass(e,r),i.blurPass=new T.BlurPass({resolutionScale:1,width:m,height:v,kernelSize:T.KernelSize.VERY_LARGE}),i.render_pass_scene=new f.Scene,i.blurPass.convolutionMaterial.uniforms.scale.value=6,i.blurPass.resolution.resizable=(0,o.Z)(i),i.uniforms.get("normal_buffer").value=h,i.uniforms.get("depth_buffer").value=i.depthPass.texture,i.uniforms.get("noise_texture").value=i.noise_texture,i}return(0,a.Z)(n,[{key:"update",value:function(e,t,n){var r,i=this.renderTarget;this.blurPass.scene.children=null!==(r=this.render_pass_list)&&void 0!==r?r:[],this.blurPass.render(e,t,i)}},{key:"resolution",get:function(){return this.blurPass.resolution}},{key:"setSize",value:function(e,t){var n=e*this.resolution_scale,r=t*this.resolution_scale;this.renderTarget.setSize(n,r),this.blurPass.setSize(n,r),this.depthPass.setSize(n,r),this.uniforms.get("aspect").value=n/r}},{key:"initialize",value:function(e,t,n){this.blurPass.initialize(e,t,n),this.depthPass.initialize(e,t,n),t||n!==f.UnsignedByteType||(this.renderTarget.texture.format=f.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n)}}]),n}(T.Effect),L=function(e){(0,c.Z)(n,e);var t=A(n);function n(){var e;(0,s.Z)(this,n),e=t.apply(this,arguments),(0,i.Z)((0,o.Z)(e),"outline_selection",[]),(0,i.Z)((0,o.Z)(e),"composer",void 0),(0,i.Z)((0,o.Z)(e),"outline_effect",void 0),(0,i.Z)((0,o.Z)(e),"use_ffx",!0),(0,i.Z)((0,o.Z)(e),"use_ssgi",!0),(0,i.Z)((0,o.Z)(e),"use_fxaa",!0),(0,i.Z)((0,o.Z)(e),"use_smaa",!1),(0,i.Z)((0,o.Z)(e),"use_taa",!1),(0,i.Z)((0,o.Z)(e),"use_ssao",!0),(0,i.Z)((0,o.Z)(e),"use_bloom",!0),(0,i.Z)((0,o.Z)(e),"use_outline",!0),(0,i.Z)((0,o.Z)(e),"use_godrays",!0),(0,i.Z)((0,o.Z)(e),"use_tonemapping",!0),(0,i.Z)((0,o.Z)(e),"use_chromatic_abberation",!0),(0,i.Z)((0,o.Z)(e),"use_hs",!0),(0,i.Z)((0,o.Z)(e),"use_bc",!0),(0,i.Z)((0,o.Z)(e),"use_grain",!1),(0,i.Z)((0,o.Z)(e),"use_vignette",!1),(0,i.Z)((0,o.Z)(e),"use_gc",!1),(0,i.Z)((0,o.Z)(e),"chromatic_abberation_offset_x",0),(0,i.Z)((0,o.Z)(e),"chromatic_abberation_offset_y",1),(0,i.Z)((0,o.Z)(e),"godrays_autodetect_sun",!0),(0,i.Z)((0,o.Z)(e),"grain_power",.015),(0,i.Z)((0,o.Z)(e),"vignette_power",.05),(0,i.Z)((0,o.Z)(e),"vignette_offset",.5),(0,i.Z)((0,o.Z)(e),"bloom_smoothing",1),(0,i.Z)((0,o.Z)(e),"bloom_threshold",.2),(0,i.Z)((0,o.Z)(e),"gc_gamma",1),(0,i.Z)((0,o.Z)(e),"hue",0),(0,i.Z)((0,o.Z)(e),"saturation",.4),(0,i.Z)((0,o.Z)(e),"brightness",.033),(0,i.Z)((0,o.Z)(e),"contrast",-.033),(0,i.Z)((0,o.Z)(e),"ffx_effect",void 0),(0,i.Z)((0,o.Z)(e),"ffx_pass",void 0),(0,i.Z)((0,o.Z)(e),"ssao_effect",void 0),(0,i.Z)((0,o.Z)(e),"ssao_pass",void 0),(0,i.Z)((0,o.Z)(e),"local_sun",void 0),(0,i.Z)((0,o.Z)(e),"outline_selection",[]);var r=e.local_sun=new f.Mesh(new f.BufferGeometry(.1,32,32),new f.MeshBasicMaterial);return r.frustumCulled=!1,r.matrixAutoUpdate=!1,e}return(0,a.Z)(n,[{key:"get_reactive_props",value:function(){return["use_ssgi","use_ffx","use_fxaa","use_ssao","use_bloom","use_outline","use_godrays","use_tonemapping","use_chromatic_abberation","use_hs","use_bc","use_grain","use_vignette","use_gc","outline_selection","grain_power","bloom_smoothing","bloom_threshold","saturation","brightness","contrast","hue"].concat((0,r.Z)((0,u.Z)(n.prototype),"get_reactive_props",this).call(this))}},{key:"on_create",value:function(){this.postfx_render_function=this.postfx_render_function.bind(this),this.setup_postfx()}},{key:"on_tick",value:function(e){var t=this.find_component_of_type("Renderer");if(this.use_godrays&&this.godrays_autodetect_sun){var n=this.find_component_of_type("Sun");n&&(this.godrays_effect.lightSource=n.sphere)}if(this.normal_pass_scene){var r=t.get_object_layer_list({normal:!0});this.normal_pass_scene.children=r}if(this.ssgi_effect){var i=t.get_object_layer_list({rendering:!0,gizmo:!1});this.ssgi_effect.render_pass_list=i}}},{key:"on_update",value:function(e){var t=this;(0,r.Z)((0,u.Z)(n.prototype),"on_update",this).call(this,e),e.forEach((function(e){switch(e){case"outline_selection":void 0!==t.outline_effect&&t.outline_effect.selection.set(t.outline_selection);break;case"grain_power":t.grain_effect&&(t.grain_effect.blendMode.opacity.value=t.grain_power);break;case"bloom_smoothing":t.bloom_effect&&(t.bloom_effect.luminanceMaterial.uniforms.smoothing.value=t.bloom_smoothing);break;case"bloom_threshold":t.bloom_effect&&(t.bloom_effect.luminanceMaterial.uniforms.threshold.value=t.bloom_threshold);break;case"chromatic_abberation_offset_x":case"chromatic_abberation_offset_y":break;case"use_ssao":t.ssao_pass.enabled=t.use_ssao;break;case"use_bloom":t.bloom_pass.enabled=t.use_bloom;break;case"use_ffx":t.ffx_pass.enabled=t.use_ffx;break;case"use_ssgi":t.ssgi_pass.enabled=t.use_ssgi;break;default:t.hs_effect&&(t.hs_effect.uniforms.get("saturation").value=t.saturation),t.bc_effect&&(t.bc_effect.uniforms.get("brightness").value=t.brightness,t.bc_effect.uniforms.get("contrast").value=t.contrast)}}))}},{key:"setup_postfx",value:function(){var e=this.find_component_of_type("Renderer");if(e){var t=this.composer=new T.EffectComposer(e.renderer),n=this.find_component_of_type("CameraComponent").subject,r=e.render_scene,i=this.render_pass=new T.RenderPass(r,n);t.addPass(i);p.Z.is_mobile;this.use_ssao&&this.setup_ssao(e,r,n,t),this.use_ssgi&&this.setup_ssgi(e,r,n,t),this.use_ffx&&this.setup_ffx(e,r,n,t),this.use_fxaa&&this.setup_fxaa(e,r,n,t),this.use_tonemapping&&this.setup_tonemapping(e,r,n,t),this.use_chromatic_abberation&&this.setup_chromatic_abberation(e,r,n,t),this.use_godrays&&this.setup_godrays(e,r,n,t),this.use_bloom&&this.setup_bloom(e,r,n,t),this.use_outline&&this.setup_outline(e,r,n,t),this.use_grain&&this.setup_grain(e,r,n,t),this.use_vignette&&this.setup_vignette(e,r,n,t),this.use_hs&&this.setup_hs(e,r,n,t),this.use_bc&&this.setup_bc(e,r,n,t),this.use_gc&&this.setup_gc(e,r,n,t),this.use_smaa&&this.setup_smaa(e,r,n,t),this.use_taa&&this.setup_taa(e,r,n,t)}else this.log("Renderer not found")}},{key:"setup_taa",value:function(e,t,n,r){this.taa_effect=new T.EffectPass(n,new TAARenderPass(t,n));var i=this.taa_pass=new T.EffectPass(n,this.taa_effect);r.addPass(i)}},{key:"setup_smaa",value:function(e,t,n,r){this.smaa_effect=new E;var i=this.smaa_pass=new T.EffectPass(n,this.smaa_effect);r.addPass(i)}},{key:"setup_fxaa",value:function(e,t,n,r){var i=this.fxaa_effect=new E,o=this.fxaa_pass=new T.EffectPass(n,this.fxaa_effect);i.uniforms.get("resolution2").value=this.globals.uniforms.resolution2.value,r.addPass(o)}},{key:"setup_ffx",value:function(e,t,n,r){this.ffx_effect=new S;var i=this.ffx_pass=new T.EffectPass(n,this.ffx_effect);r.addPass(i)}},{key:"setup_gc",value:function(e,t,n,r){var i=new T.GammaCorrectionEffect({blendFunction:T.BlendFunction.NORMAL,gamma:this.gc_gamma});r.addPass(new T.EffectPass(n,i))}},{key:"setup_vignette",value:function(e,t,n,r){var i=new T.VignetteEffect({eskil:!1,offset:this.vignette_offset,darkness:this.vignette_power});r.addPass(new T.EffectPass(n,i))}},{key:"setup_grain",value:function(e,t,n,r){var i=this.grain_effect=new T.NoiseEffect({blendFunction:T.BlendFunction.DIVIDE});i.blendMode.opacity.value=this.grain_power,r.addPass(new T.EffectPass(n,i))}},{key:"setup_bc",value:function(e,t,n,r){var i=this.bc_effect=new T.BrightnessContrastEffect({brightness:this.brightness,contrast:this.contrast});this.bc_pass=new T.EffectPass(n,i),r.addPass(this.bc_pass)}},{key:"setup_hs",value:function(e,t,n,r){var i=this.hs_effect=new T.HueSaturationEffect({saturation:this.saturation,hue:this.hue});this.hs_pass=new T.EffectPass(n,i),r.addPass(this.hs_pass)}},{key:"setup_chromatic_abberation",value:function(e,t,n,r){var i=this.chromatic_abberation_effect=new T.ChromaticAberrationEffect({blendFunction:T.BlendFunction.ADD,offset:new f.Vector2(this.chromatic_abberation_offset_x/1e3,this.chromatic_abberation_offset_y/1e3)});this.chromatic_abberation_pass=new T.EffectPass(n,i),r.addPass(this.chromatic_abberation_pass)}},{key:"setup_tonemapping",value:function(e,t,n,r){var i=this.tonemapping_effect=new T.ToneMappingEffect({mode:T.ToneMappingMode.REINHARD2,resolution:256,whitePoint:128,middleGrey:.003,minLuminance:.003,averageLuminance:.01,adaptationRate:1,adaptive:!1});r.addPass(new T.EffectPass(n,i))}},{key:"setup_godrays",value:function(e,t,n,r){var i=this.godrays_effect=new T.GodRaysEffect(n,this.local_sun,{height:240,kernelSize:T.KernelSize.MEDIUM,density:.985,decay:.985,weight:.3,exposure:.9,samples:30,clampMax:1}),o=new T.EffectPass(n,i);r.addPass(o)}},{key:"setup_bloom",value:function(e,t,n,r){var i=this.bloom_effect=new T.BloomEffect({blendFunction:T.BlendFunction.SOFTLIGHT,kernelSize:T.KernelSize.MEDIUM,luminanceThreshold:.7,luminanceSmoothing:.5,height:240});this.bloom_pass=new T.EffectPass(n,i),r.addPass(this.bloom_pass)}},{key:"setup_outline",value:function(e,t,n,r){var i=this.outline_effect=new T.OutlineEffect(t,n,{blendFunction:T.BlendFunction.SCREEN,edgeStrength:5.5,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538,height:1280,blur:!1,xRay:!0});r.addPass(new T.EffectPass(n,i))}},{key:"setup_ssao",value:function(e,t,n,r){var i=this.normal_pass_scene=new f.Scene,o=this.normal_pass||new T.NormalPass(i,n);this.normal_pass=o;var a=this.depth_downsampling_pass=new T.DepthDownsamplingPass({normalBuffer:o.texture,resolutionScale:1}),s=(this.normal_depth_buffer=e.capabilities.isWebGL2?a.texture:null,this.ssao_effect=new T.SSAOEffect(n,o.texture,{blendFunction:T.BlendFunction.MULTIPLY,distanceScaling:!1,depthAwareUpsampling:!1,samples:8,rings:7,distanceThreshold:.1,distanceFalloff:.1,rangeThreshold:3e-4,rangeFalloff:1e-4,luminanceInfluence:1,minRadiusScale:32,radius:.125,intensity:12,bias:.4,fade:3,color:264,resolutionScale:1})),c=this.ssao_texture_effect=new T.TextureEffect({blendFunction:T.BlendFunction.SKIP,texture:a.texture});r.addPass(o),this.ssao_pass=new T.EffectPass(n,c,s),r.addPass(this.ssao_pass)}},{key:"setup_ssgi",value:function(e,t,n,r){var i=this.normal_pass_scene||new f.Scene;this.normal_pass_scene=i;var o=this.normal_pass||new T.NormalPass(i,n);this.normal_pass=o,r.addPass(o);this.ssgi_effect=new R(t,n,{normal_buffer:o.texture,height:1024});var a=this.ssgi_pass=new T.EffectPass(n,this.ssgi_effect);r.addPass(a)}},{key:"on_enable",value:function(){var e=this.find_component_of_type("Renderer");e&&(e.custom_render_function=this.postfx_render_function,e.clear_depth=!1,e.clear_stencil=!1)}},{key:"on_disable",value:function(){var e=this.find_component_of_type("Renderer");e&&(e.custom_render_function=void 0,e.clear_depth=!0,e.clear_stencil=!0)}},{key:"postfx_render_function",value:function(e,t){var n=this.find_component_of_type("Renderer");this.composer.setSize(n.resolution.x,n.resolution.y),this.composer.render()}}]),n}(h.Z);L.DEFAULT={};var P=L},1489:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{AQ:function(){return camel_to_snake},Ks:function(){return hsl_to_rgb},Og:function(){return is_none},QF:function(){return get_unique_props},UQ:function(){return hex_to_rgb},W4:function(){return hex_to_hsl},YO:function(){return makeid},aH:function(){return blend_colors},cM:function(){return log},dN:function(){return spawn_retro_greetings},dx:function(){return get_query_string_params},gR:function(){return is_inline_dict},i1:function(){return rgb_to_hsl},iV:function(){return console},p1:function(){return request_text_sync},rj:function(){return tools},vF:function(){return parse_inline_dict},vU:function(){return error}});var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(5861),_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(1002),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5785),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4687),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),lodash_es__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6378),lodash_es__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7226),lodash_es__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(7771),lodash_es__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(5840),lodash_es__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(290),lodash_es__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3836),lodash_es__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(3234),lodash_es__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2446),lodash_es__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(7601),lodash_es__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(8146),lodash_es__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(9360),lodash_es__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(3505),lodash_es__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(8800),lodash_es__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(298),lodash_es__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(111),lodash_es__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(6682),datetime_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(6685),datetime_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(datetime_js__WEBPACK_IMPORTED_MODULE_1__),constants__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9369),constants__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(constants__WEBPACK_IMPORTED_MODULE_2__),three__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5017),three__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(three__WEBPACK_IMPORTED_MODULE_3__),_Device__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(3882),dateformat__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(1280),accounting__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(743),accounting__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(accounting__WEBPACK_IMPORTED_MODULE_6__),currency_symbol_map__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1463),currency_symbol_map__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(currency_symbol_map__WEBPACK_IMPORTED_MODULE_7__),hotkeys_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8515),ResourceManager=__webpack_require__(7845),_this=void 0;function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var VERBOSE=!1,url_app_params={},color_blend=__webpack_require__(5256),easings={linear:function(e){return e},ease_in_quad:function(e){return e*e},ease_out_quad:function(e){return e*(2-e)},ease_in_out_quad:function(e){return e<.5?2*e*e:(4-2*e)*e-1},ease_in_cubic:function(e){return e*e*e},ease_out_cubic:function(e){return--e*e*e+1},ease_in_out_cubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},ease_in_quart:function(e){return e*e*e*e},ease_out_quart:function(e){return 1- --e*e*e*e},ease_in_out_quart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},ease_in_quint:function(e){return e*e*e*e*e},ease_out_quint:function(e){return 1+--e*e*e*e*e},ease_in_out_quint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},ease_in_back:function(e){return e*e*(3.5*e-2.5)},ease_out_back:function(e){return--e*e*(3.5*e+2.5)+1},ease_in_out_back:function(e){return((e*=2)<1?e*e*(3.5*e-2.5):(e-=2)*e*(3.5*e+2.5)+2)/2}},cached_tag_colors={},spawn_retro_greetings=function(){console.log("         \n            %c_____ _____ _____ _____ _____              \n            %c| __  |   __|_   _| __  |     |            \n            %c|    -|   __| | | |    -|  |  |            \n            %c|__|__|_____| |_| |__|__|_____| %cv. ".concat("1.0.558","\n            %c- - - - - - - - - - - - - - - - - - - - - - - \n            %chttps://github.com/sanyabeast/retro\n        "),"color:#f44336; background: #222","color:#607d8b; background: #222","color:#ffc107; background: #222","color:#03a9f4; background: #222","color:#8bc34a; background: #222","color:#444; background: #222;","color:#9c27b0; background: #222")},get_random_color_for_string=function(e){if(cached_tag_colors[e])return cached_tag_colors[e];for(var t=0,n=0;n<10;n+=2)t+=(e.charCodeAt(n)||0)%18.5113*14.35546;return t=Math.floor(t)%360,cached_tag_colors[e]="hsl(".concat(t,", ").concat(100,"%, ").concat(75,"%)"),cached_tag_colors[e]},get_random_color_for_string2=function(e){if(cached_tag_colors[e])return cached_tag_colors[e];for(var t=0,n=0;n<e.length;n+=2)t+=(e.charCodeAt(n)||0)%18.5113*14.35546;return t=Math.floor(t)%360,cached_tag_colors[e]=rgb_to_hex(hsl_to_rgb(t/360,1,.75)),cached_tag_colors[e]},_console=window.console,log=function e(t){if(VERBOSE){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(t))return e.apply(void 0,["ANONYMOUS"].concat(r));_console.log.apply(_console,["%c[".concat(t,"]"),"color: ".concat(get_random_color_for_string(t))].concat(r))}},log2=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e))return log.apply(void 0,["ANONYMOUS"].concat(n));_console.log.apply(_console,["%c[".concat(e,"]"),"color: ".concat(get_random_color_for_string(e))].concat(n))},error=function e(t){if(VERBOSE){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(t))return e.apply(void 0,["ANONYMOUS"].concat(r));_console.log.apply(_console,["%c[".concat(t,"]"),"color: red"].concat(r))}},get_query_string_params=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if((0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e)){e=e.indexOf(!1)?e.split("?")[1]:e;var r,i=new URLSearchParams(e),o=_createForOfIteratorHelper(i.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;n[a]=i.get(a)}}catch(e){o.e(e)}finally{o.f()}}return n},get_query_string_params2=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t;if((0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e)){e=e.indexOf(!1)?e.split("?")[1]:e;var r,i=new URLSearchParams(e),o=_createForOfIteratorHelper(i.keys());try{for(o.s();!(r=o.n()).done;){var a=r.value;try{n[a]=JSON.parse(i.get(a))}catch(e){n[a]=i.get(a)}}}catch(e){o.e(e)}finally{o.f()}}return n},get_unique_props=function(e){var t=[];return e.forEach((function(e){(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(e)&&Object.getOwnPropertyNames(e).forEach((function(e){t.indexOf(e)<0&&t.push(e)}))})),t},get_app_name=function(){var e="";get_query_string_params(window.location.search.replace("?",""));return log("TOOLS","APP_NAME: ".concat(e="demo")),e},request_text_sync=function(e){var t=new XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},hex_to_hsl=function(e){var t=0,n=0,r=0;4==e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),t/=255,n/=255,r/=255;var i=Math.min(t,n,r),o=Math.max(t,n,r),a=o-i,s=0,c=0;return s=0==a?0:o==t?(n-r)/a%6:o==n?(r-t)/a+2:(t-n)/a+4,(s=Math.round(60*s))<0&&(s+=360),c=(o+i)/2,[s/360,+(100*(0==a?0:a/(1-Math.abs(2*c-1)))).toFixed(1)/100,(c=+(100*c).toFixed(1))/100]},rgb_to_hsl=function(e,t,n){var r=Math.min(e,t,n),i=Math.max(e,t,n),o=i-r,a=0,s=0;return a=0==o?0:i==e?(t-n)/o%6:i==t?(n-e)/o+2:(e-t)/o+4,(a=Math.round(60*a))<0&&(a+=360),s=(i+r)/2,[a/360,+(100*(0==o?0:o/(1-Math.abs(2*s-1)))).toFixed(1)/100,(s=+(100*s).toFixed(1))/100]},hsl_to_rgb=function(e,t,n){e*=360;var r=(1-Math.abs(2*n-1))*t,i=r*(1-Math.abs(e/60%2-1)),o=n-r/2,a=0,s=0,c=0;return 0<=e&&e<60?(a=r,s=i,c=0):60<=e&&e<120?(a=i,s=r,c=0):120<=e&&e<180?(a=0,s=r,c=i):180<=e&&e<240?(a=0,s=i,c=r):240<=e&&e<300?(a=i,s=0,c=r):300<=e&&e<360&&(a=r,s=0,c=i),[a=Math.round(255*(a+o))/255,s=Math.round(255*(s+o))/255,c=Math.round(255*(c+o))/255]},hex_to_rgb=function(e){var t=0,n=0,r=0;return 4==e.length?(t="0x"+e[1]+e[1],n="0x"+e[2]+e[2],r="0x"+e[3]+e[3]):7==e.length&&(t="0x"+e[1]+e[2],n="0x"+e[3]+e[4],r="0x"+e[5]+e[6]),[+t/255,+n/255,+r/255]},rgb_to_hex=function e(t,n,r){return(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(t)?e.apply(void 0,(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__.Z)(t)):(t=(255*+t).toString(16),n=(255*+n).toString(16),r=(255*+r).toString(16),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),1==r.length&&(r="0"+r),"#"+t+n+r)},$color1=new three__WEBPACK_IMPORTED_MODULE_3__.Color,$color2=new three__WEBPACK_IMPORTED_MODULE_3__.Color,$color3=new three__WEBPACK_IMPORTED_MODULE_3__.Color,$v3=new three__WEBPACK_IMPORTED_MODULE_3__.Vector3,blend_colors=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"rgb";$color1.set_any(t),$color2.set_any(n);var i=color_blend[e]({r:255*$color1.r,g:255*$color1.g,b:255*$color1.b,a:1},{r:255*$color2.r,g:255*$color2.g,b:255*$color2.b,a:1}),o=i.r,a=i.g,s=i.b;i.a;switch(r){case"rgb":default:return $color3.set(o/255,a/255,s/255),$color3;case"hex":return rgb_to_hex(o/255,a/255,s/255);case"0hex":return parseInt(rgb_to_hex(o/255,a/255,s/255).replace("#",""),16);case"array":return[o/255,a/255,s/255];case"v3":return void $v3.set(o/255,a/255,s/255)}},is_none=function(e){return null==e||NaN===e},camel_to_snake=function(e){var t=e.replace(/([A-Z])/g," $1");return(t=t.split(" ").join("_").toLowerCase()).startsWith("_")&&(t=t.replace("_","")),t},is_inline_dict=function(e){return(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e)&&e.startsWith("??")},parse_inline_dict=function(e){var t={};return e.replace("??","").split("&").forEach((function(e){var n=e.split("=")[0],r=e.split("=")[1];t[n]=r})),t},makeid=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:24,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZ",a="abcdefghijklmnopqrstuvwxyz",s="0123456789",c=(n?o:"")+(t?a:"")+(r?s:""),l=c.length,u=0;u<e;u++)i+=c.charAt(Math.floor(Math.random()*l));return i},datetime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"%H:%i:%s",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return datetime_js__WEBPACK_IMPORTED_MODULE_1___default()(t,e)},get_most_suitable_dict_keys=function(e,t){if(!(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(t)||!(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(e))return[];var n=[];return(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(e,(function(e,r){r.match(new RegExp(t,"gm"))&&n.push(r)})),n},console=_console;var shuffle_array=function(e){return e.sort((function(){return Math.random()>.5?1:-1}))},random_range=function(e,t){return Math.random()*(t-e)+e},random_choice=function e(t,n){if(null==n||t.length<2)return t[Math.floor(Math.random()*t.length)];var r=t[Math.floor(Math.random()*t.length)];return n.indexOf(r)>-1?e(t,n):r},random_string=function(e){for(var t="";t.length<e;)t+=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);return t.substring(0,e)},wait=function(e){return new Promise((function(t){setTimeout((function(){t()}),e)}))},round=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?Math.ceil(e/t)*t:Math.floor(e/t)*t},lerp=function e(t,n,r){if((0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(n))return(1-r)*t+r*n;if((0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(n)){var i=[];return t.forEach((function(o,a){var s,c;i[a]=e(null!==(s=t[a])&&void 0!==s?s:0,null!==(c=n[a])&&void 0!==c?c:0,r)})),i}if((0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(n)){var o=[];return(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)((function(i,a){var s,c;o[a]=e(null!==(s=t[a])&&void 0!==s?s:0,null!==(c=n[a])&&void 0!==c?c:0,r)})),o}_this.log('cannot lerp: unknown type "'.concat((0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(t),'"'),t,n)},multiply=function e(t,n){if((0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(n))return t*n;if((0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(n)){var r=[];return t.forEach((function(e,t){var i;r[t]=(null!=e?e:0)*(null!==(i=n[t])&&void 0!==i?i:0)})),r}if((0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(n)){var i=[];return t.forEach((function(e,t){i[t]=(null!=e?e:0)*n})),i}if((0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(n))return e(n,t);if((0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(n)){var o=[];return(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)((function(e,t){var r;o[t]=(null!=e?e:0)*(null!==(r=n[t])&&void 0!==r?r:0)})),o}if((0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(n)){var a=[];return(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)((function(e,t){a[t]=(null!=e?e:0)*n})),a}if((0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(t)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(n))return e(n,t);_this.log('cannot lerp: unknown type "'.concat((0,_babel_runtime_helpers_typeof__WEBPACK_IMPORTED_MODULE_15__.Z)(t),'"'),t,n)},clamp=function(e,t,n){return e=Math.max(t,e),e=Math.min(n,e)},direction=function(e,t){if(3===e.length)return normalize([t[0]-e[0],t[1]-e[1],t[2]-e[2]])},normalize=function(e){var t=(0,_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_12__.Z)(e),n=Math.max.apply(Math,(0,lodash_es__WEBPACK_IMPORTED_MODULE_16__.Z)(t,(function(e){return Math.abs(e)})));return t=(0,lodash_es__WEBPACK_IMPORTED_MODULE_16__.Z)(t,(function(e){return e/n}))},distance=function(e,t){if(3===Math.min(e.length,t.length))return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))},dot=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},magnitude=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])},angle=function(e,t){return Math.acos(dot(e,t)/(magnitude(e)*magnitude(t)))},translate_range=function(e,t,n,r,i){return lerp(r,i,(e-t)/(n-t))},for_x=function(e,t){for(var n=0;n<e;n++)t(e)},async_for_x=function(){var e=(0,_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_17__.Z)(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().mark((function e(t,n){var r;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t)){e.next=7;break}return e.next=4,n(t);case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),join_uris=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("/")},parse_numeric_float=function(e){return e.toString().replace(/[^0-9\.]/g,"")},define_getters=function(e,t){return(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(t,(function(n,r){(0,lodash_es__WEBPACK_IMPORTED_MODULE_18__.Z)(n)?Object.defineProperty(e,r,{get:n}):Object.defineProperty(e,r,{get:function(){return t[r]}})})),e},recreate_reference_properties=function(e,t){var n=Object.getOwnPropertyDescriptors(e);(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(n,(function(n,r){var i=n.value;(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(i)&&null!==i&&(i.__proto__!==window.Object.prototype&&i.__proto__!==window.Array.prototype||t.indexOf(r)<0&&(e[r]=ResourceManager.mixin_object(i)))}))},average_in_array=function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t/e.length};accounting__WEBPACK_IMPORTED_MODULE_6___default().settings={currency:{symbol:"$",format:"%v%s",decimal:".",thousand:",",precision:2},number:{precision:0,thousand:",",decimal:"."}},accounting__WEBPACK_IMPORTED_MODULE_6___default().settings.currency.format="%s %v",accounting__WEBPACK_IMPORTED_MODULE_6___default().settings.currency.format={pos:"%v %s",neg:"%v (%s)",zero:"%v  -- "},accounting__WEBPACK_IMPORTED_MODULE_6___default().settings.number=(0,lodash_es__WEBPACK_IMPORTED_MODULE_19__.Z)({precision:2,thousand:" "},accounting__WEBPACK_IMPORTED_MODULE_6___default().settings.number);var _format_currency_params={default_currency:"USD",default_currency_precision:2,default_number_precision:2},set_format_currency_params=function(e){_format_currency_params.default_currency=e.default_currency||_format_currency_params.default_currency},format_currency=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_format_currency_params.default_currency;return 0===e&&(e=1e-5),e=accounting__WEBPACK_IMPORTED_MODULE_6___default().unformat(e.toString()),accounting__WEBPACK_IMPORTED_MODULE_6___default().formatMoney(e,currency_symbol_map__WEBPACK_IMPORTED_MODULE_7___default()(t),_format_currency_params.default_currency_precision)},format_number=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_format_currency_params.default_number_precision;return e=accounting__WEBPACK_IMPORTED_MODULE_6___default().unformat(e.toString()),(0,accounting__WEBPACK_IMPORTED_MODULE_6__.formatNumber)(e,t)},parse_float=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";arguments.length>1&&void 0!==arguments[1]||_format_currency_params.default_number_precision;return e=accounting__WEBPACK_IMPORTED_MODULE_6___default().unformat(e.toString()),parseFloat(e)},parse_int=function(){return Math.round(parse_float.apply(void 0,arguments))},format_ms_to_s=function(e){return"".concat((e/1e3).toFixed(2),"s")},find_relative_parent=function(e){for(var t=e.parentElement,n=window.getComputedStyle(t).position;"absolute"!==n&&"relative"!==n&&null!==t;)t=t.parentElement,window,n=window.getComputedStyle(t).position;return t},get_html_rect=function(e){return e.getBoundingClientRect()},add_html_class=function e(t,n){(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(n)?(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(n,(function(n){return e(t,n)})):t.classList.add(n)},remove_html_class=function e(t,n){(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(n)?(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(n,(function(n){return e(t,n)})):t.classList.add(n)},set_html_class=function(e,t){(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(t)?e.setAttribute("class",t.join(" ")):e.setAttribute("class",t)},set_html_style=function(e,t){(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(t,(function(t,n){(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(t)||(0,lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z)(t)?e.style[n]=t:(0,lodash_es__WEBPACK_IMPORTED_MODULE_18__.Z)(t)?e.style[n]=t(e,n):error('unknown html style token at "'.concat(n,'"'),t)}))},add_html_attributes=function(e,t){(0,lodash_es__WEBPACK_IMPORTED_MODULE_13__.Z)(t,(function(t,n){e.setAttribute(n,t)}))},parse_html=function(e){var t=document.createElement("div");return t.innerHTML=e,t.children[0]},add_css=function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.appendChild(n)},create_dom=function(e){var t=(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e.layout)?parse_html(e.layout):document.createElement(e.tag||"div");return set_html_style(t,e.style||{}),add_html_class(t,e.cls||[]),t},is_html_descedant=function(e,t){for(var n=t.parentNode;n;){if(n===e)return!0;n=n.parentNode}return!1},exec_code=function exec_code(code){var safe=arguments.length>1&&void 0!==arguments[1]&&arguments[1],f_code="\n        (function () {\n            function resolve(data){\n                result = data;\n            }\n            /* … */\n            ".concat(code,"\n        })();\n    "),result=void 0;if(safe)try{eval(f_code)}catch(e){console.warn(e)}else eval(f_code);return result},resolve_code=function resolve_code(code){var safe=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(resolve,reject){var f_code="\n            (function () {\n                /* … */\n                ".concat(code,"\n            })();\n        ");if(safe)try{eval(f_code)}catch(e){console.warn(e),resolve(void 0)}else eval(f_code)}))},hotkeys_bind=function(e,t){(0,hotkeys_js__WEBPACK_IMPORTED_MODULE_8__.Z)(e,t)},hotkeys_clear=function(){hotkeys_js__WEBPACK_IMPORTED_MODULE_8__.Z.unbind()},hotkeys_trigger=function(e){hotkeys_js__WEBPACK_IMPORTED_MODULE_8__.Z.trigger(e)},get_screen_orientation=function(e){return(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(window.screen)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(window.screen.orientation)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(window.screen.orientation.type)?screen.orientation.type:window.innerWidth>window.innerHeight?"landscape-primary":"portrait-primary"},exit_fullscreen=function(){null!==document.fullscreenElement&&document.exitFullscreen()},osk_state_is_any_html_input_focused_now=!1,osk_state_active_html_input_element=void 0,oks_fade_duration=2e3,osk_blur_timestamp=0;window.addEventListener("focus",(function(e){osk_blur_timestamp=0,e.target!==window&&(osk_state_active_html_input_element&&osk_state_active_html_input_element!==e.target&&osk_state_active_html_input_element.blur(),exit_fullscreen(),e.target.retro_focus_is_setup||(console.dir(e.target),e.target.setAttribute("spellcheck",!1),e.target.retro_focus_is_setup=!0),osk_state_active_html_input_element=e.target,osk_state_is_any_html_input_focused_now=!0)}),{capture:!0}),window.addEventListener("blur",(function(e){osk_state_active_html_input_element=void 0,osk_state_is_any_html_input_focused_now=!1,osk_blur_timestamp=+new Date}),{capture:!0});var is_onscreen_kb_active=function(){var e=+new Date-osk_blur_timestamp<oks_fade_duration;return _Device__WEBPACK_IMPORTED_MODULE_4__.Z.is_mobile&&(osk_state_is_any_html_input_focused_now||e)},close_onscreen_kb=function(){(0,lodash_es__WEBPACK_IMPORTED_MODULE_20__.Z)(osk_state_active_html_input_element)||osk_state_active_html_input_element.blur()},is_document_visible=!0;document.addEventListener("visibilitychange",(function(e){is_document_visible="visible"===document.visibilityState}),!1);var tools={screen:{get_orientation:get_screen_orientation,is_onscreen_kb_active:is_onscreen_kb_active,close_onscreen_kb:close_onscreen_kb,exit_fullscreen:exit_fullscreen,get is_document_visible(){return is_document_visible}},device:_Device__WEBPACK_IMPORTED_MODULE_4__.Z,hotkeys:{bind:hotkeys_bind,clear:hotkeys_clear,trigger:hotkeys_trigger},parsers:{parse_float:parse_float,parse_int:parse_int,parse_html:parse_html,parse_inline_dict:parse_inline_dict,parse_numeric_float:parse_numeric_float,get_query_string_params:get_query_string_params,get_query_string_params2:get_query_string_params2},string:{parse_float:parse_float,parse_int:parse_int,get_query_string_params:get_query_string_params,get_query_string_params2:get_query_string_params2},number:{parse_float:parse_float,parse_int:parse_int},array:{shuffle:shuffle_array},type:{is_none:is_none,is_array:lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z,is_number:lodash_es__WEBPACK_IMPORTED_MODULE_14__.Z,is_object:function(e){return(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(e)&&!(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(e)&&!(0,lodash_es__WEBPACK_IMPORTED_MODULE_21__.Z)(e)},is_function:lodash_es__WEBPACK_IMPORTED_MODULE_18__.Z,is_undefined:lodash_es__WEBPACK_IMPORTED_MODULE_22__.Z,is_string:lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z,is_null:lodash_es__WEBPACK_IMPORTED_MODULE_21__.Z,is_boolean:lodash_es__WEBPACK_IMPORTED_MODULE_23__.Z,is_nan:lodash_es__WEBPACK_IMPORTED_MODULE_24__.Z,is_typed_array:lodash_es__WEBPACK_IMPORTED_MODULE_25__.Z},loop:{for_x:for_x,async_for_x:async_for_x},color:{hsl_to_rgb:hsl_to_rgb,rgb_to_hex:rgb_to_hex,rgb_to_hsl:rgb_to_hsl,hex_to_hsl:hex_to_hsl,hex_to_rgb:hex_to_rgb},console:{log:log,log2:log2,error:error},easings:easings,extra:{url_app_params:url_app_params,get_random_color_for_string:get_random_color_for_string,get_random_color_for_string2:get_random_color_for_string2,get_query_string_params:get_query_string_params,get_query_string_params2:get_query_string_params2,get_unique_props:get_unique_props,get_app_name:get_app_name,join_uris:join_uris,parse_html:parse_html,add_css:add_css,parse_numeric_float:parse_numeric_float,define_getters:define_getters,recreate_reference_properties:recreate_reference_properties},intl:{format_currency:format_currency,format_number:format_number,set_format_currency_params:set_format_currency_params,format_ms_to_s:format_ms_to_s},math:{average_in_array:average_in_array,round:round,lerp:lerp,clamp:clamp,direction:direction,distance:distance,normalize:normalize,dot:dot,magnitude:magnitude,angle:angle,translate_range:translate_range,parse_float:parse_float,multiply:multiply},net:{request_text_sync:request_text_sync},random:{range:random_range,choice:random_choice,string:random_string},time:{wait:wait,throttle:lodash_es__WEBPACK_IMPORTED_MODULE_26__.Z,debounce:lodash_es__WEBPACK_IMPORTED_MODULE_27__.Z},date:{format:dateformat__WEBPACK_IMPORTED_MODULE_5__.ZP},html:{find_relative_parent:find_relative_parent,get_rect:get_html_rect,set_style:set_html_style,add_class:add_html_class,remove_class:remove_html_class,set_class:set_html_class,parse_html:parse_html,add_css:add_css,create_dom:create_dom,is_descedant:is_html_descedant,add_attributes:add_html_attributes},runtime:{exec:exec_code,resolve:resolve_code}};get_query_string_params2(window.location.search,url_app_params),1==url_app_params.verbose&&(VERBOSE=!0)},9890:function(e){e.exports="data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FZQUFBQnplbnIwQUFBSXAzcFVXSFJTWVhjZ2NISnZabWxzWlNCMGVYQmxJR1Y0YVdZQUFIamFyWmhwc3VTNERZVC84eFErQXZmbE9KUW9SZmdHUHI2L0JGWDExbW5QUkxqVXJ5UXVJcEZJSUlscWQvM24zN2Y3RjU5WVNuZTV0RjVIclo1UEhubkV5VVAzK3pQc08vaHMzL2FKenhEdEwvM3VQUkRwU3R6VGJyYjV6Si8wbDQ4WFhudUU0MnUvNjg5STdNOUN3WC9aT21sblBhL1BSdElmZDMvSXowTGoyZzkxOVBiWjFPTlo2SHdtbWluUFgzNmJ0VzlxdXk4ZERTK3R3a1lweGl1RjVQbU82YkVnNlMra3lYM1lkMlZlU0pYbmtvTGpGbE45RnNNaFgrQzk3dDUvZHRBWEo3K2UzSGZ2djUrK09UL09wejk5ODJWOWZNVERyd09oZk90UDcyM2k1NDNUMjZMNGRlQnNiNFovT1BtK1Y3L3ZhNk9idWVMUitrU1VPVHU4bG1IaWdjdVR2VmE1R24rRjUyYlg0T3ArK2hQS2x6Lzl3WFdHRVNLczNDN2tzTUlNZDdqc2ZvWVRFM084WXVNZTR3bFI2dXVweFJIUEpKNnlybkRIQm5zcmRjZzY0K1ZTb2p1K2JRbTI3N0Q5enREWmVRV214c0JpZ1ZmKzhuSi9HdndubDd2dlV5NEt2cjk5aFYxUmNZMFpZazdmeklLUWNEKzhGWFB3NjNybzk1L2loMUNGd1dKdTdnQ2MvdGhMSENWOHhGWXluaFB6Q3ZlZFFzRzE5U3lBaTlpN1lFeElNT0JyU0NYVTRGdU1MUVQ4MkNGb1lubE1PUjR3RUVxSkN5TmpUbVNMYTdGSDdjMDdMZGpjV0dLTjZrYWJJS0tRVFExdXlDL0l5cmtRUHkxM1ltaVdWSElwcFphR3NKVlJaazAxMTFKcmJWVWlOMXRxdVpWV1cydTlqVFo3NnJtWFhudnJ2WTgrUnh3SkRTeWpqamI2R0dQTzZDWWJUZGFhekovMEhQRklSejdLVVk5MjlHTWM4eVI4em55V3M1N3Q3T2M0NTRvckxXUmkxZFZXWDJQTks3Z0xwYmp5VmE1NnRhdGY0NW8zc1hhbk85L2xybmU3K3ozdStXYnRZZlhIOVE5WUN3OXIwWmpTdlBabWpWN1gybXVKSURrcDRnekdZZzR3M3NRQUFSM0ZtZThoNXlqbXhKa2ZrYVFvRVNPTHVIRXJpREVvekZlSTVRNXY3ajZZKzF1OHVkTC9GbS94ZnpIblJOMy9nemtIZFQ5NSs0VzFwWFB1Tk1aMkZzcW5QcEY5dHo5bjdHN0dZL2JyOER6enovOXlIM2UrcHZ3K01ESmlTZlJIQ053elZtY1dpYUFaTG82VmV6eExVK3Nhak1RVGR5NDFZajk2S056bldYQ3Y3RmlCdGNRaDdsb2hGOFN5MjVadTZwRFY5bisrWXhhSHJWeGMyZEZQWkc4MldRVjFuSUJIZGlWZFRCb0hsSzgwemVuZWJOb3dmTW9kSGlNOFpCc0lNSlZXUkpGcVBGYXFlNkJVaW9oWlM3N0JXbEV6V0pzbncyUG9ITVVRMXVnU0Z3UHg2ejFkblRPYnBDM1F6NW96QXhwREw4em5wRWtDYzJPOUw2dXowNkJSSHBkZmhuQ1VjK0wwRXZkYm5HdXJ4c0JTNWx4ZkJlUWc2TWNnYkdSOTNQYjZUQTZVSkl5VkZEdW9xM2dvWFpHM3pwd2RLYlZzWmpzR0NaYmxHU2IyN3lnT1BKUGs2Rng0UnZ4a1paKzhmQUdwWWhHWU1oRE0wZjRRUUhQL3pSdGtvRENvQWFnZEwrcndpeE52Vmhrd0VJSk1CcDV1UStMVWU1bGFDNXI4ZGp0NVM1QVZZcFlXc1hUaXNGZXI1QkNGRnptdXBwQ1Q2QkpXQlEwYWhIWHlCTzVxQklHNU9hK1IwNFhKV1NhRnZFY0Vqa0pvUHpyaG5hVVNVaGRMYUFqVEZXd0FKT1lOVVN0R1RFMEhvVzJoQXkySFl2Nmh4ZmZwNU9kREhvZVdQdGRIYXhSNVVZMkNnbFhHNk40c0RXV0tqYWJDeWpIUE83dHpFdlI0TGgvaFJxYVNQSm8xUm5kQ1V3QUNxQ0xYSGdDSnpETEtETW5HYTBPT3Njd0x5MFo4bVlFczVnbGdtNXNIbHNpMUNFdWtxbjlSTTNCN1owSEN6U0dFVmNxR1NSRmt0T3JFZzVDRHlsWHdFRnRRMVh0VXFoYjJNcUEwQTRUdnFkRG1uUVhuTlpEeU9ZM1hMSEVmYUxGOGdzMTlacXlsM1JTcjBtelpuaFNFbmlsQ2lXT0hxME0wM2JoRWRwY28zZnFJejYwV2dOT0M0c3dTWmtrSFNuMm5pRkxDWVd1WmdPZ3hpS2Z3TUlINUhFaWU0T1hMNDU0K2IvaXpac3ExbnRiVU9pZ0ZOQlorMU5pUm9wVGM0SlJQcXRPYmVBczZDekFuaTFFVkZOU09LMFRTY20zb2hOb0t3dWNlVDBCZXJBcmJvVGNHTks5WGxoSTBodFpFT2pScFJUVVVVNEtyOEpKbERzWGRvT0ltZ2JQdC9LQ0UxaE43TDRZMm1hZk1leEJ1L0c1NXZWbGZiMDVxV2Znd2dQbjA5T2wwcENkRE9hMzZ0SURmOU1ieFF1ZXErbGtYOUsrcGFoVVJYZlp4K1pyN1RKV280TkZidTJXUnBwOUFRTlBlb25BY0Zsam1SSUl1aXJXZ1ZJQTFjaWJvUFpuYVJlZ3pVWUUwRGh0ejcyWDJWTkdHcTMyekpTQXorMkJIYzdsK0lCcWp2bTBlRHFPcE9hZU1oaWRsMjhmb0lVU0oyR1BSTXMxclFxZ3F3OXZwQnRGMTJhODhmb29xMGFRcHFCMUhHNzNYb3hScUZjbVFaUmRvQURwZXdWcUVYMndTVjh6TnhlazRRWExQWmRpdTdUNStkV1JaNWFVamgxZUVHWnhSSW1mOWVpeHNIMUFuMlg5Yk1EWkRvMFFpUnBBQ1ZHY1JNbzB5Y0RRZWt4WkNXNENkenlPWUEwbExpaVJlcmJKSStNclpxTXFHd2hBMXFXYXlFSHVLaUdVSGx3bWhOMzhjQWhWRFB4LzZvNWdLdzRsSG8xaHhxWkMwOWFqYXV3RlFRSExLcVlqYmJPZy9HY2FPcUJjNWxvaXVXSVpSWVZZSnh6UWhWZUhDVWJUZFFsZ2lPQnhhOTBZanExVXhZUXFTTVMrVEZYSk5oMW81aHgzUklzaFQzQW5Cc3BPNW5Mc3V0Rk82eG1JMG1uSUk4Mlc2VGdJaWMyaDJLM2J3QlF2QW9WeEdDSzVBSmxTcm96aElXRUZmWkVaRnB3Ri9tTWFuYktUWW1OczR6QittR1I4d3FGYzBKdXJRN1V1bHNZYWVZSXdYc1cxV0hkbGZGd2VrR2NGdThjRFhWYWVzVG9KMW1xSEM2OGZSaTFWZVJoZmxKdGdrWTJUeEpsSzFOdlNqZG4ydytITmk3eUkwUEdtM3ROMER4eGpqckxrVWpMS1Nzendkb2hDV25BaklTckNCQ080UTFPQkhQaDM4bEpZZjhvYXdEQUZSNXlIc01FNW85TTR2U0JWNk9xU2x4R1VqSy9zL1QyWTBiZUNYWVhsUlJCV3F5czV5Y09tM3k2dU1jai9xS2NzOWR2OFVTNGRFdklQUHpwQkp6YmdKb1Z5eWxJb0lodlJvN29xOGtadXRXTUh0VlkxSytxMjhETWRMTHRiTTIrNDlRa1dwQTZTQkp6cVZlWmNNdDVDVW9LbGFwNUhhNC9nL0Y3VjJKNXNkS2NEdmF3bnhYRllzRUZSSkFzSUpIVjUrSnVPcVZ4MGxxWjE1SUN4V1hYRkY5V091VTZ4Y3A3ZUlVUlF4ay9wTVh0OUo0MWZmSWY1YmhmcmN3MzNmRG4zejdyOVpBUFBiRnhEVGhnQUFBWVZwUTBOUVNVTkRJSEJ5YjJacGJHVUFBSGljZlpFOVNNTkFITVZmVTdVcUxRNTJFQkhNVU1YQmdxaUlvMVN4Q0JaS1c2RlZCNU5MdjZCSlE1TGk0aWk0Rmh6OFdLdzZ1RGpyNnVBcUNJSWZJRzV1VG9vdVV1TC9ra0tMV0ErTysvSHUzdVB1SFNEVVNrdzFPeVlBVmJPTVJEUWlwak9yb3U4VlBlaENBR01ZbHBpcHg1S0xLYlFkWC9mdzhQVXV6TFBhbi90ekJKU3N5UUNQU0R6SGRNTWkzaUNlMmJSMHp2dkVRVmFRRk9KejRuR0RMa2o4eUhYWjVUZk9lWWNGbmhrMFVvbDU0aUN4bUc5aHVZVlp3VkNKcDRsRGlxcFJ2cEIyV2VHOHhWa3RWVmpqbnZ5Ri9xeTJrdVE2elNGRXNZUVk0aEFobzRJaVNyQVFwbFVqeFVTQzlpTnQvSU9PUDA0dW1WeEZNSElzb0F3Vmt1TUgvNFBmM1pxNXFVazN5UjhCT2w5cysyTUU4TzBDOWFwdGZ4L2JkdjBFOEQ0RFYxclRYNjRCczUra1Y1dGE2QWpvMndZdXJwdWF2QWRjN2dBRFQ3cGtTSTdrcFNua2NzRDdHWDFUQnVpL0JYclgzTjRhK3poOUFGTFUxZklOY0hBSWpPWXBlNzNOdTd0YmUvdjNUS08vSDRQK2NxNnFXblRKQUFBRitrbEVRVlJZdzUyWDY2N2p5cTJFUHhiWjhzeExCTWo3UCtCWlZ2T1NINjNsbVpOZ1kwOWlRTEFoUzJUeFVrVzIvWU4vRG4vd2NRbVpFUmhteGdnY01XMjBDaHVudXlrS0NqYjFKMmFKdjN2Z1pZSndsZ204aVhsaEdxQ1JBbWltZzJIb01XWkVHZmc0ZXpiVjg3OEJjSnhZWXBrSWQ5d2RzMEltcEFHRUkxcGllaGptWkdPYWt0RmpSQmw3bXZmZS94MkE1U2ZpRllGckNCZG1jR2toQ1RNSGd4Z0RhOUlOOVZEZVpEWGxUVldRZHFOeVlobGZ1YW1adndldzNIbDU0QTRyakdXTGNHZEpSQWdoSkFGRDRFQ1RESENpVHpWRmMzdmg5V0xuUm5VeGlOMmJYZlhYQUM0TExqK1JyekFpbkI4V2hEOWxRQ3czekJ6TmdEdWFJakVBc3BwbHplN0NFWnZFQ2Q2MkdRWnluVWI5TFJNZkFHN0d0Y1FLWnkxanhlS0Z1Q0pZY2lMMGxNWXhDUVA4d0taSXJPSHREVlhjSGV4SnRJV1R0SDE3S2NhQyszN1k4anVBMTlOby9qaDVJVjRydUh6eHc0M3d4WktRaVhBOWphckhyT2h1WXVDMndtclFRREI4S1pnQ2pRRTMwODU0VXZVYmdPVk8rRVc0c2NKNUtiakN1WHh4aFhqcEl2eGhSSnh5TUR5OUFOM1EwL1FVMFNMVmZGVlRISG9DVkVQZ2RCUXpRVkhzcWdlQUZoNkd5N2gwSW56RnhSWEJUNGxyaWZEZ3A4WEprZ2F6aFFScXFDaXFnOTJOS3ZFbnZXK1N4YWJiK2VITlROQmhWRys4bkUwUkx4T3V3V1ZFQkV2aVVyRGN1QVRYQ2w2NitPSEN0VTR2MkFIaEJIaVQ0NHlHZTVyUzhDVWRnV0l4QStWR01YZ1BxNXVTS0MrOG5MQVFMa2VDWlVZb2NEZVd4Rkt3TExnRTdvdVhpMnN0bGoyOVlBWmpsQTM5Ukw4UlE4SkE4VDdLMkVhUGN5a3BFNmJCeklpQUVJSFpJRE1rSWRuVDdZdFFIQTJJazRFVmk1KzJDRGZDOVpIaWJzaEsvRW43TkxSRW10UGVSRHZlZWVhSlRnYkxoeHdSc3Nicy9PSHdVVG9acHh4bWhCMDEvS25GRmM0ckhtMTRXSkJxYmdRa2lSSFRCRW1NMlB0STlyRXJsa1JLbUl4Z0VaTGp1bzV6KzM0WVRDY2pKc2Q5c1JTblROSmhpSnhsUWN1STJwZ2xJOUVOVzQ3VWp6MlF3RXM0MzRKZ0dNNXdFelBOc0dGZXYrUzRoVmI4S29zWk1najVFU29GTHpsckxjemdaa2dHcjBZU1VVWU1uOGhsK3MwV3lPeFgyWTlMbmVHQ2NETkdqVTA5V0FleitUd3p6TGtuNTVMd2dlRU1JNmFCOHd3R28rK1ErckZWSHp2ZmZzT2VnUUpuaU5UTUl5elFjL2c5WTNTZlp2dGMwM3hsWTliTUZBbGd4K004QXFYZmR3RTcwTC9Cd0NOY1dHTXMrbm1aZ2RadjcxSE16S04wU2JlNE83RXlkaC9nZTVxcVluZVRWVkJGTlNRbm1FVGtETVYzSU9jQ2lPNm1wNkdhMGlPcERXMlEyZHd5dkpQd1lQZWdhb3pOVEorRnhNNDc3MnF5aXozTlBjM3VwQWVLWTdzYlpwS3ljMi9HS0lyb25nK2llc3FRbmR3U2JpK3lOMVhHYlFia2s3b2daZ2lHdHJNTFpqVjdUaGFxRHBDc3phNmg2QVBtVTc1aHhxRTIwV01QVWlNelNUc0t1THU1YXJQdDRwN0J1cGh0REl2cXdydWZjWndrdzh6d2xjV2VzM1JrTlpsTjFlYnVwSHFUZGJJOTdYUnZraUdLb2dwU3c5S0xlNGJvd211NEpWVEovUXpmVVZIN2FMazk4d0QwS2R2ZHlaN2t6dWI5T0g3VFZBMzNrK0hkUlZhZGZpcUlYY1VscDNyWVhkQWl5MG5nYmZtTE1VQzdFNTVVR1ZKaGR2NmRHYnFUTEQ3MXYzZWU0VlRGVjIyeThuUDFGSHZxOUFEQTNZVlZrRW9rNDQwQU1kaWpBVkE5ckU1V0Naa2pOL1FVNGJEREtEdHB6MDdlVldSOWY1L2VlTmZwcHk0bmEvOWFTSFlWamo5cVZUaUpGR2dLbm8yNlZjd3NiaDh1YStnajNkL2d2cW42VGNYOVpPUmR4ZnNCVW1WazNXZForYWJoZDNwM0ZiSkJHUmpOS0E4N1BDaUdKV2Q1RTcxSUE3UG5aS1JuR2dMZGVYNzNONURtWGNsWEpabk56dVp1L3Q5bUhML1d4ZUxkdzlRWGd3TVg3Zk9zWEUxSHNOdFlPb2NUczhITXNUbzBIcHc5K1ZEeXNHQjNzc2ZZdStnV1dYT0U2cS9XOHVybTNvTTZZRzU4ak80Z0ZjVDBHYVVXU01lSXJORkEwc0J4dnFjLzMxbEYxYkN6cUc3ZWRYOVMvNWNIazVyaHE5NnNXVnlJOFdHbTJHMmsramdWLzdZVjk2RmpKMWxEQVZrMzFVYlZZY0wvVmY3NTBheG1xTG9wbkZXTDhrTzVVaUQxY3pnRkh6M09uMGFkWnRySVRxYWRxdWFlL0kvVDBCK2ZqbmNWWGRBcDVFT3BEd1ZOakJVMk1GYWZJVFl6ekloN0VuTHpudjdiNC9tL0FDaU9uZU1DdEJEeUFBQUFBRWxGVGtTdVFtQ0Mi"},7490:function(e){e.exports="data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFRQUFBQUVBQ0FNQUFBQnJyRmhVQUFBVU5IcFVXSFJTWVhjZ2NISnZabWxzWlNCMGVYQmxJR1Y0YVdZQUFIamFyWnBaa3NRcWtHei9XVVV2UWN5d0hFYXozc0ZiZmg5SHlxenh6cS9LS3BVbGdZUUlEM2NQSkxQKzMvOXU4ei84SkdjdkUySXVxYVowOFJOcXFLN3hwVnozVHoyZjlncm44L1Zqbjg4dis4MzdxMlByMmZyN1FHNVByOGIrK05IaGRRM2J2KzQzNVRuaXluT2kxNVhkdmZHNnNyN1B6NE5rdjd2MzIvQ2NxSzc3UzZvbGZ4NXFmMDQwbm9abktNOWZLRjl1OHZ4dnZ1ekl6TktNWE1nN3Q3ejFGNS9PUHlQdytyTytzYTNuTTlITytzVDM0SzA1bS95Y2pBbjVjbnNmRS94NWduNmRmUE45OXY5bzhsMTc5dnR2YzVsZVVVdS9IN0R4MjM3L3ZvejdmR0gvSHBIN2V1QWFOdis0bmVkdjcxbjJYdmZkdFpDWTBmUWc2bzJqY3hvYWRxYmNuMjZKMzh4ZjVIcyt2NVhmY2pVdUZRRER1RHEvdzFicmlNbzJOdGhwbTkxMm5lMndneUVHdDF4bTY5d2dVTnBYZkhiVkRhODRCZjNhN1RMUm03NFF5K0dXOFo3ZDdqMFdlNjViei9XR0xWeDVXcG82eThrc1hmN3cxL3pad1gveWEvWWVtaUo3bGZkY01TNG5YRE1NUlU2ZnRDSWdkajl4aTJlQ1g3L3ZwTDArQmRZVHdYaW11WENEN2VyM0tYcTBIOWp5Sjg2ZWRwSHRuVUxXNVBtY2dDbmkycEhCV0U4RXJtUjl0TWxlMmJsc0xmTllDRkJqNU00SDE0bUFqZEZOQnVtQ0oxdE1kc1hwMnZUSjlyUjEwU1duM1hBVGdZaGtVeVkyNUJmQkNpR0NueHdLR0dyUnh4QmpUREhIWW1LTkxma1VVa3dwNVNTU2E5bm5rR05PT2VlU2EyN0ZsMUJpU1NXWFVtcHAxVlVQQjhhYWFxNmwxdHFhTTQwTE5jN1ZhTi9ZMDEzM1BmVFlVOCs5OU5yYkFENGpqRGpTeUtPTU90cDAwMDlvWXFhWlo1bDF0bVhOZ2lsV1dIR2xsVmRaZGJVTjFyYmZZY2VkZHQ1bDE5M2VVWHVpK3VQM0gwVE5QbEZ6SjFKcWw5OVJZNi9KK1hVS0t6cUppaGtSYzhFUzhhd0lBR2lubUYzRmh1QVVPY1hzcW82a2lJNUJSc1hHVEt1SUVjS3dySXZidm1QM0VibS9GVGNUeTkrS20vdXJ5Qm1GN3Y5SDVBeWgreG0zWDZJMnBYUGpST3pPUXMzcDVjaytqcS9TakN0Tm90YStidnU4OHJwMkxzRnY1ZzVJdE9GZEhDSDNIdmIwbTZuazZobTFzcnZhdkZHUjNTNGZWeDVYQ3V2S3NlM0d3R3ppSExDcWhUV0ZuTmhIOWk3Tkdkek9saG4wRFB5cUlLNUJ2WDdIWVJEUW5OTGNpYm1HNmtycGUyMENYV3RQT2tsZEJISlBjclA3dFZLZWJUS0xPcEo2QzQ2QWVucHZiNGFESHZzaTdVL1BULzNzWHBQWU1ZbmxlclZuY0tjREVIMTN1UzltL3FTWC95Y1hNWDkybFg5eUVmTnZiK1Y3Si9QclZZakZoR2JLdGQzSGFjZ1RMdEpHQkFDQTFBZllBUDBaaVh3cjJXeDY5K1ZqYmFIbnN0TUNmaVdsNVVEZkluaCtlMFU0NzBDN3NWdGZ2ZTdTUUlqZnV3UUFmMDBTZXhoSEF1dzFPdEJJczZ3V3lybk9JcmQzV1Z3amdBb0piWnZlbG1oRGxMWDZ1VFUvRDF3dmFJSis4RmQ4UDdnc29mV1JrT3JLQU5hYVNpS1NMd0RzQWZPWXZFS0V1MGdYaGtnV1ptQWJHK2kvMFQxeThTZ2ZrMndIbWh2NzdwUHVjU3hSUXNpajlWMnVrWkhzU3BRY21GMGRpb2xYNzdER1RNblRkbkpYTGpVZ2ZQYTVPY0tFRStpQ3BYUzd4MnRIdnl1YWxKcXhxMlhtY3lUMjUxNmJYek55V3NVeXJ4bWdpcjFPZkV0dWRZL1ZiWDlhUEIwNForV3IrWFRTLzNSTzgrbWsvK21jNXVkQW1ZVXl4eEI1dEp5cTI2RXQ1bWVsT1dZZE1HSnNvMDk4dVlkTEEraUpHZlNZYlV2SCtnRGYwbmFaalo1eitkbUJYQ01sU3NFMGxPaUNMZ3U5N0tsMmpSTTdzQnNIYXNWdFhMWG9STGxZa094TDhpQmdwMGozRGpmVEd4cXRzSjlsOU5rcUpSeTJBYStCRXZpWkNwcHh0Y09xQ09Ucnk0L3ROekRtQThiK0J1UDZCRVpoMGJ6QldCZDY1b3VkNlU2blNJNTd1OFMxYmo1TSs4QnhEZ0RydmpEdFJMSnozRGVjaDd2UkdIZVhCRzJQNXVYc2RvUlNYWTB6ZEM3Q0xLUzRpSXhiVGRzQ2h6czZjNkl5QnZkUUd1UVFyamJRb3pnc2NXVWlWV3N4YmRvUEFLQWZXRjE3L2M5ajVzOE8vcE5qNW5Vd1NxZVdLTzhjQUZFMU95R3d1WTRxdC9qQ1QwZGZNallncHZFQnFOcE5PSTNXYkdHcVVlaWZkNXowQkFLYm11c1JTd3NQOUREUC9QZU1XQWJtRi85aTRLd1dLcG1STjlQZnNKZ3I5MGdjWGtqN0JMUklTT0JnK0pNQVVyVjlBRzNEMlgrZkJNVjVSRWgxSCtCY2hVdG5mMmRGRFVacFlhc3VPQ2RwVVdmcHBXN2gzRjE3b0x2OGg0TW1MV2drMW9xandQTmpZK2M0RVZtVDVuTFlHcC9JcWR1ODFPVXI5ZW11a1d0Wm1tY2Y1eFhKVmVBcUxCVytIeXdkRE1uVEhNb1Q0S29ocFhZVVFiaUtSZWpWcFU0OUMydDNabnc1dGlSOGdCdnJWS01XejdkV3BFbEVtZmxkYWx0TmQ2T2VES1FReGdRNStDUkVuRnFkU0YrMEs0T095SlEwdjhsU0VHUmpuYy9lcHhGcVViYjUxMzJwM25aSHNOckc4OVFKc2kvbXlqdXhldzBFSlFBZDVBQWN3VGR0YzZjTENscVpPVDE3WnFMa0M0Y3RrWVdJZzdTeDUyUnVCdFR4dUE3L1RjSDFJSEcxZGRQWGRoTVc4VkptQ1RQRWwycUxIOEpNTUozNVRabFh6WWREaWRxUThoOW9FdTBYTkoyZ0NiR0xBL0VWUzlBMGYwQ0MxRndETXVMclNBZVJBdU5yRzcrQlVWaEUrOXVmZ1ZGRzk3Q2VGb1VZUEZJOHlaT3I1K0dTSDdnYUxHQ0dkQTNhbVRlV1c1QWNPMzRESkVPazN3M0RxNjExS0czZENIOVlieVdLK0JadlFNcjBjSWZWL3lBK3lMdkNzdUpQTkFIMm1MSGYyeFREZmxwTTM3ZWhCWjRLL3dSUEFoZk1qSTRsVzA4U08zQ3pOc1VHZGdIVzNFTyt2UXRVZmRyekdYRkI0TkViUVhxZjV1SHVSSmNKN1gzcTRRb2NKeTYvNklPQm12c3dYaVJIdVJSYUIzODU3UEdHMEFMMWxLaDBQT1NIMnBKU1RtcmlEZ3o3Z2VIQmFwdksyTytNYWI1VDVnZEI5Zy9HQkZBZHd2WG5WRnRXd052OW1UR1I3UGlOTXI4dzVyZ1YyZzhWRnAxVXVxM1h5emlHeHpkdWVwby9NSTdSWGRKbFp2aVRMRDhWajR6aG1hVjVBYU41RDgxWVZ6VTJxc3AzNmROL2xENW5hQytXRkRvd2tzUE56eXdKWjNQTDF3UEsraHNvOFkyM0V2L2dTTUNaSHRnOURDbFUwZGp0bi93WW1lSVBhSjV2QTFMRzRrWVBEYVdPSjhqNFQ2TVVUTGsxUzdFWDlzRmo4eXI4U0ZzMklBUTlsKzFvMktwK2tzYm5XZ0ZkalRBSjJDbW4xREFLS0pWWWdoa1RDRDQ3US9PbkJUYmt5cU8yN2kxa2pEcHpuNmtCU2hBWGltcFdVTWlRT1JxcFJTTElKQ25Hb0Z4UDdmQW10QWxzQmNSOENaaUMyQ1VnQ2FzVDJJd2ZuSGxHdE9wTmtLTE1MNHo1M3ZIUVpYelRaZmhLbDZtYkwzejVqUzdya2ZBTnhtOW5jUG1EeVhqZG1PeG5YY21XaFAraUZFWC9laUk1SE5NeDRMSXlzQXpscElJVkFJdTdzRzNYNHhnMzRDcyt2d3loSDBBaENPWG11eVBFeE1LMmdGempPZlYzT1lKUHBWT1ZLS1JYL3FoUkVBdklXUFdnV1J2SFluTUlaUkZ2SEFlSFNiaDVzeU9pZ21DLzJYRzhiT0ZNOW9hbTJORUxpeUsyOUYvWXNRTkxFYUlCQWdVbnhVR21hQi9wdm1wY3JaRHhVV2tmdFNwTGw1TFlZREVuL3J2TVNNYWswOXgyQ2t0cUVYczIvcXFJVjg2MmhTdmNSKzREUWZVRXBua0FkZlVWT0h1TXRtQ1Z3LzBQc3hxMDZ0ZGdYM0FiTWVUa29EdEVtUXEzR05KVjhaUVBNdTNWRDU3bS9KMUV6YThzT3ViRG91MDMzL21OTTFla01DRkY2ZzhXZFMvZm1iVkkwLzF2SkRwZVZZNFVOTVJjellxRW1oN2hsczVrSloyMU5HQ21DaWVyd29FdU16TnNtZnFsRmQ3VjRkOXFiNnlXWWFYcnpKRkRzdnFUT25BQVBvN1VLV0FnRVV4bURXeU9zbXd0UCtqU1BhWlNkQWtnWllFdjBHcWJiR25Wb2dSVkh2MFg1cjdDdC9rNmxmUUZydEg1OWFPUXR2S01Cais0di9JbmlBNUxsVXZBUE1ZaEdtenpOcEVkdXlUYXBFbDBENEZtSVpJcU94K2twdkNBc1V1NWc0c1VFVXNVR2tPS1FrVFJycGFkajdoK0gyT0FNbWt1cW92b1VNQWVLMWM3QkZ0SURTR1lDR0xJY1VJeitiSnFLTlJoUU9PYW5HUEowK3NFTVdwZHNuWHczcHFyd0owVE1TY05lTUpmZ3FRRGttUGhuTm9Fb3JLa1ZVeTZCVkV0Y29MZkZ6UXJTR3hNejRHYXdZL2Q2cjh1L1U4ZEdGQXBJWFJtbFVWWVRmTHI1bDk0VStRcVduQVBaTE83ZVhPWS9saUJkRE9wR3NXSEVCZUtWa1o5U0F4K1liS3hxOXN1NnFZZHlUOFVGSFNSUjM2YmI2UWFQMGkxN0Z2b3M0VGVYK09UMElNek8ycWl2TkVDRGVacFpxUENCenl0YlpOczZ6NXdTaERMcWFnVzVNN2NaTnc1aVRGRnhQWU5KMHRRTjhFU25yWHFKeTNZQjlCV3RQVklBV2ZJdWkzWTZvUVZhNUxuVlI5QTI0T2wwVUJndkJGSTNjOTVKL2R6OWx4cmFZY2FUYm1LQjROZWJaaDFtTDAyN0M2NTBMUVNpdHlNZk11MkVUcTdoR1hmb280U1hvTmJFN0hhR2hXcUZLVG9SMFVwMXFBMUY0aWZEcmJLLzhxRUZBd3o0ZlFzWTY0MlNlcTJoc2VOQ01zVXlJaktkSlhwbEhNdkY5WFZnS216S2txck12SmFVUjFUWWJJWlNISmFvWTZ4QlBoQVMvQ1FIYVE3RVQrR05VcVZDOGhzdE13Qm50QTZmU2VNbkM4NWUzVGJJTzZaWXcxV21VZjU4KzBlNXZsMk1PaHBDQXMyZjVkTDB3Si9sWGV5NXc4Q21leEtXazVJQTZLc0NiNDU3bVNqVjZRQnpLRjZ6YWtxZ1c0d2RXaEFYMW9pNFJ0Q2pnUTdXNHFRYTNTekZPY3h4MzczM2pYdFE3ZGQ2OW5BVW5SN0tVa2VZK2dUQW82SUQ2NUQ5cWhnOGFzWVBVYkdxWk4vZG1BL1ZXUjFNaVBPTXhCL2FTQ3l2eDVnNGhXb05lYThoTkNBM3dDSXRwekZtbXlZeTd0cVNudkVmZGJUVlJaeHQwVWtkaTl0K1VLS296VkZqMEFXeXNoZ0xET2ZLcFlETWx4NjVIT1hPVmFybU8zQi9iTUREM054LysxZzlBaTV3TFp3dHZjT010RGVQcm5PYm9wQUtpMC9qUXBPMUQ4TzFCNlRTcEFQaCtiRHVUMmxYRmIzQWluSDZnRmxBS1NObXJiRkEyRk83QnVRcFU0aDliREg1NTl4RTNRb1kxSjlWbHhGMHZLaVA1L0lPL09Ib2xPc0drcnlqeU9pTmZ3WE1Lek1Vb054SmUvUTY4VWRzR01oQWRqd29NczRqWW1zRHJlZ213WnlHaFkrSmluZHNRckYrYWNnWWtJYmJ2OXNkVi9sK0ZibHByNGRJUWVTalNraTF6Q29zekoxL2JTUll2V25QQ0xQa0FUdWtNRWpTQnpKaDR2MXJBcGhqdVZWMDlhYTlERHpsQS9VWEoxR1cydDVGRzNyQXBJdlpRWXo2TTNBaWdrbkFGZzRvUzMxZGVhR1k1RlBOazk5elltS3g2MG1MQUlPV291SzNJOTBianZBUWlnQytrTUpmMWRJdDVsTVpOQlRkWFdEcHhuVFhlbUI3Vm54UGc2M0hXTE5DL21hR0VkdUMzK3R4NmszY2pVaVlLclZwNE5jOHgyNldwV2x1c0N2a0VDcTh0R3RBOWVBRVFpOUZUbFJCNmVLVURGTC9kbGh6aDZCVXd1OHdxYldpa1NmRFo4RnFmb0lKZmdibkhpaGZOcWc4RUpuZmxoWSttOHllTU1seXFOU0ZjblMwVWpxZjZEYnEwV1R6eXJwWVZ0eXJaNFZOajBOVkdGVWo1TmNjUnJMQjJGUFo1ZlgwVFoyelpSUnVnVFY1ejRWRVR4NkJhWWFmRHFpU3lqUWZ3b2l4RGxZZlRjd2h1aHVIQktWY0F0cTBLN3pSOWEvUWJEZkZOcWcwbkFJRkx5NXBaVVhBSG1EVVF0SDRjRDBDNE9LbGpQZkxGakhzbGtxclBnc3JtQ2NBV0tGbG1YTXFMSlJEenRWUHF3a29rbGc3aUZNRVMrRTJWK0V5WFEvdGZUOFFabEduS2xpR2lLMlIwd3Y0YzBQRitTVDBFT1Y2Z2VTTnhTcGNDNVY0RnIxYnN4TGY1alVIQ29kWDZqME4weVNLdFNPcXZQWHcrYjNFa1M4WkFveHowYnVtWDNVK2Z0ZWd2aWs4MHFGK0owMU96WHlqVUo3Sy85Tm8rWTdqNzZJdFgvbTBiK2tVVjloeUVPY2NnQ0FJdC9MU2FKTGx3TFExSm9SaU1RdVkwMnFsa0gxSk9hS1d1NHYvRFdZd3kvdXlwek5KWDRCMmVvelQxdjd1WWZXakR6S1ArOU96V2wrQVFiNktVUkNpWTZpQnV5SHM1NTBIQ1FjKzIvNEVRK3BpdWpOai9Qd1k3YW56cEhzNGxNT211Wjk1UENqdjJINTVrZkJNay96NWtjOW16bkxLNVd3M2N1UzFQZ09lb1FjdFd6WTdOYnlxRDBlTDNyVis4bktHNStpeGVqNTg3cTRaOHdBQmd5V2RScTVsa3h5L1cwMUU5cVV1cC9GVG8zd1hwYWs3bzlQY1JVNU9mSkh5cFZZRXk2R0UwSFYrTnNvNXRWWWtQaEFzWDV0d1VsUHdHRGZkUjYvN21LUXVQTlVLRkpacDhjL3MydVRIdHpXUytnL3lQTGFuOGx5eTZ6aTRITFV3NE5QaEFsZmpyTnduRzd5WTd5ZkdKT3UxMU15NVp0V3R5d04wT3pPREdicmxBSTNhNkt0Wk05WlBhZ2RMT21wc1lmbEtFMHgvVVhXdTVDUzVMWlcwczllUVc1M0EvZWgyaGxqTnJaNno3UDc3L1RWSlQ0NkcvVU9XcTYvdFA1WTRVM2dnK3hkVTVWMHZpMmtUT2U2emFSV2kyaXl2ckFrQ1dTcXJDNDFqbXprT0R3NWprU0xWK1U2ZnpJbGNmRWFqOVdUNHpkYm1odVh6S01lYVlvdDYvckpsdk50TC90WkUvM0tsbGFyWU9hN3czeXpwVUNwSnp1NUJHQ0FhenhsWmZ5amgwSkc3OWlvclB6OHlQQmxRL1hJcWo3YzZXNDlEMXNMQU5zcEEyNFhpaTVMbDR3cTllOWEzbjV4b1c4cDN5L3VUSGVWeER5SktzMlI4SDZiaEsvaythZmNlU3M0aHBMcWlXeDIza0FpU1MvYVFmQlEyVmxjRzFDZm4rMytwTFpiUStYa1h4d3ovN2JqeHpHS0l5alRZRFh0T1JDMURuTWVhNFhmS0ZEYTJ3N2FoS2gwc1BYaVA5Qlp6UEdJQkNFZHNLbDBMRmxQWmxUaTNpdk16SHlKKzZ5WTNFaWo1UGhnUUx6YmVXWm9CQkU5R1lBQXM5N2NFQUhLcHQ4VVNNcS9LUEEzQm56TW9Tb0o4K09Ob1I5YlBaMlVOL2xDaUllelgzeElUWEtSL1hyT3FhbzgrL2xIaE5qT0kxWnF0bGR5UU9kYWxyZVBYaVBYeHYvVTY5MHNwNDhlVVBrSFZPbU5JVXNobnBnRDhQclFZY0k4Rkd3TlV5a2FvN3hQVENsRU5LdGV1a3FEa1lZakhRUy9FL1BnZDFXbDdaOFc5dTRRTzVSRXJzbURPekZUT3c4VjRyR1UvK0tjNXROSi85TTV6ZThEL2VXY1dpSytJRVBOendQTktINmd0TllyZXdEeVIzRzk4cVo0SkVMWDh6NE1TaFc4dSs3M1lhaXV0ZjU5M29jWlU2dDRaLzJiVXJUZFZwTlNZcjhRT2VSOWhVZi9nY2YxT3g2TEhneWg2a2JDM3YrVSszN1ova0tGNXgydDUzMGs2cHN3cUYvaTllTER6MTV5VXdzemJDa0w5YjVkNzJRNjcwRVZrL3pIb2xGNkxScnArWUh6K1g3Y0trbUYxcWhNOUxLVGE1M0FNZC80MmNGUDJGV25uR1pUWFlEdSs4V3V1WjQzc2taMDFwYnoybHRROEdBTVcrNVgwRTYzcllVWlBhZ1pPNTlYNkxxV3h0VGpXM3VWdlgvUTQrbncvUkptLzFXUHYza0o4OGZYK0dlWE1ILzdOam9UZVFGajVFZFI0WGp1MGpIU2duSnFtKzdQcXVPamJkb0wzM2gvUTl0L2VwRVI1bm5Xam9UdStCM2RSdkNHaHdyQUZEUVJUWDllU1hwV2JtcFVSWjRLWGlUY0JmbCtGK1R1dFg2RVpsNkdLbk45ZjJENWFZdnZtTlg4SDFPZkw3c2JMWXpOQUFBQmhXbERRMUJKUTBNZ2NISnZabWxzWlFBQWVKeDlrVDFJdzBBY3hWOVR0U290RG5ZUUVjeFF4Y0dDcUlpalZMRUlGa3Bib1ZVSGswdS9vRWxEa3VMaUtMZ1dIUHhZckRxNE9PdnE0Q29JZ2g4Z2JtNU9paTVTNHYrU1FvdFlENDc3OGU3ZTQrNGRJTlJLVERVN0pnQlZzNHhFTkNLbU02dWk3eFU5NkVJQVl4aVdtS25Ia29zcHRCMWY5L0R3OVM3TXM5cWYrM01FbEt6SkFJOUlQTWQwd3lMZUlKN1p0SFRPKzhSQlZwQVU0blBpY1lNdVNQeklkZG5sTjg1NWh3V2VHVFJTaVhuaUlMR1liMkc1aFZuQlVJbW5pVU9LcWxHK2tIWlo0YnpGV1MxVldPT2UvSVgrckxhUzVEck5JVVN4aEJqaUVDR2pnaUpLc0JDbVZTUEZSSUwySTIzOGc0NC9UaTZaWEVVd2NpeWdEQldTNHdmL2c5L2Rtcm1wU1RmSkh3RTZYMno3WXdUdzdRTDFxbTEvSDl0Mi9RVHdQZ05YV3ROZnJnR3puNlJYbTFyb0NPamJCaTZ1bTVxOEIxenVBQU5QdW1SSWp1U2xLZVJ5d1BzWmZWTUc2TDhGZXRmYzNocjdPSDBBVXRUVjhnMXdjQWlNNWlsN3ZjMjd1MXQ3Ky9kTW83OGZnLzV5cnFwYWRNa0FBQURBVUV4VVJRQUFBQU1HQVFjTEJnMFFEQklVRVJZWUZSb2JHUjBmSFNFaklDUW1JeWdwSnl3dUt6QXlMekkwTVRVM05EYzVOanM5T2o5QlBrTkZRMGRKUmt0TlMxQlNUMU5WVWxkWlYxdGRXbDVnWFdCaVgyUm1ZMmhxWjIxdmJISjBjWFo0ZFhwOGVYK0Jmb09GZ29pS2g0eU9pNUNTajVPVmtwYVpsWnFjbVoraG5xU21vNmlycDYyd3JiRzBzYlc0dGJpN3Q3dSt1c0REdjhYSXhNbkx5TXpPeTlEU3o5UFcwdGphMTl6ZjNPTGs0ZWJwNWVyczZlN3c3ZkwwOGZiNTlmbjcrTSswTWpvQUFBQUJZa3RIUkFDSUJSMUlBQUFBQ1hCSVdYTUFBQXNUQUFBTEV3RUFtcHdZQUFBQUIzUkpUVVVINVFrR0RTa3ZSV2tzM1FBQUNNaEpSRUZVZU5ydG5ZbDYyamdVaFVrTE5KbDAybWs3VXhhYmRFdEl1Z1VJSVFscHdPLy9WaU9iQUFadmtuWHZQWHlmZEo2Z092bjdXNHV4R2cyN2RHYmdkQnJRTkNjUk9KTW10SUR1WWduT29nc0dZTG1BWm9sRm9CZXBBcDZBVVFWRVBUQUFUMytBZWNJaW9BeWd4djhJVE53QXpnTE5td1NBeHprc1NRSFJUUk5tQUdYQXA4ZkgrUU1vODhmSHA4VUNab0ZuQStER0h6ZUF0TURhQVBPSGUxQmlCSEFXMkJyZzRmNE9FbFVBMGdLOTVRYUF1enZFS2lCcFlJWEFzZ2Mxd1AzZDdCYVFtU29BYUlGZEFLYUFZQkhZTWNEc2Rub2pubW1DQU13Q2V3RGMzRXlFb3hwQUlyQm5nS2thLzFnMHFvRXAwZ0paQU1ZajBZeXhDR1FNTUpFdllJSzBRQzRBMTVMQklwQmpBRFgrMzc5RThqdk85V2lFdEVCL3VWeG1BQkFhLzNNTEdRdW9mMUpmM0FCN0FQd1V5NjljQk1Rc2tHc0F5ZkhIRFFBZkJIbHpnQlVBUDRTeVFnQTJGK2duVzhHcmZRQlZ3TVlBYXZ6ZlJhSWEyRmdnTHVCK3RUVzBqS0krMWdCQzQxY05RQzFRWUlBRWdDdVI3Q0FnYm9HaU9VQUN3TldsUUs1S0VCQ3dRSmtCcnE0dWgreTUzRU5BMkFLbEJsRGp2MkRQc0JRQmRndmtHZUI2QThCd2VISE9uSXZoY0lNQVlFVlFDY0Q1T1g4RFNBU3FESEJ4L28wNVNRRXdDMmdBd0Y0QUZJRnFBM3o3OXBVMUNRSXdDK1FBTU00QThQVUxZNzVtRUJoTEl0QXZXZ2FtQWZqeWhidUJEUUlGaThJKzFBQ3FnTTlzeVVOQTBBTDlmQVBzQS9ENTh5ZW1yQnRJSTNBdGgwQnptck1WdkNrZ0JjQ25UMmNzVVEya0VjanVDNnczaUtkTk1BQm5UTUVpVUxJUjlIMGZnQUZMOWhINExyczFaQUlBVXdGUUJFd01NQmlFRE1raUlHb0JNd0NZQ2dBaW9Ec0pYQU1Ra0NjUEFjSHBZR0FHUUJEMGlhTWFNRUlnWURMQWc1NEJXQXJRc3NBRGp3WE1BZWdSQjR0QXk5Z0EvVjZYTkwyK3NRVmFsQUJFeGdCMHV4M0NQRGRnZ2tBVXNCcGdWQTFBNXlOWk90VUlqRGd0VU1NQXBPUGZOb0N4UUQwRGRENytSeFlkQkJndEVKUnVCYTkzQXJlVHdQZ1JFQU5BV0lCcUlINFFiS2VEbWQzQnZBM2lnRzBTT05JRDRGK2k2Q0hBdGpWa2FJQVVBSVFGWkJDUXMwRExBb0FQSkxGQW9NVnVnTXNTQTVBV1VHU0JTMjRMNEFFQUkyQmpnQThmM2hPa0NBRVpDMWdDOFA2ZGRkNWpFUWdqcmNPZ3pDVHdHWUIzNzBnYVdDTlFNUjNNT1NhS1FqUUEvMWdHakVDZ2N4eGNDb0I5QWZzSUZGbmdGNE1GV2xON0FONWF4UjZCcVEwQ1ljMWxZQm9BK3dJTUxKQ0hRSWcxd051M2J5eENnWUNGQlFJS0FONjgrYnQyVkFNRUNBVFdCcGdiN3dPa0FmamJJbWtFalBjRjVyWVdDSWtBZUYwN1JBaUUwZ2JZQStEMTY5TmFVUVhVUVlETUFnRVpBS2VudFJzQVdxQmxlQnhjRE1CcDdaZ2g4SVBXQWlFbEFIL1ZDQ1VDSVlrQjZqMEM2bzUvMVlEbGc4RENBbUZFQ3NDSmNVZ1JNRjhVbHF3Q2ZoaE1BdGNBbkp6VWJXQVhBYmtWQWJFQlRrNk9EVU9NZ0trRmlGWUJXd0NPaitzMlFJU0FvUVhJRFhCOC9Nb281QWlZV1lCbUgyQVhBTk1DanBFV1lEREFxMWRnQkV3c3dHRUFOYWEyZGxnUU1MQkFHQjhHL2FrNERqWUdvTjAyYktBMkF0bGpvai94TVZFSU5vQnhBVEFMaEhhSFFibHpnR1Q4TGMwa0RWVE5CV29jRTRWZ0FGb3QvUWFRQ0lSV3g4RWxCakFwUU1NQ05RNkxRelFBVGEyQUVhZ3hCOUEyZ0VFQm1oYWdud3ZnQVFBalVMQUtzSjhEbUJiUXhxd0l1QUY0V1Jrd0FqeXJnQTBBTDE5cU5jQ0hRSlVGV3Jkb0FMZ1J1QzFIWUlBSGdCdUJBZG9BTDBvRHRvQ0VBYW9Md0ZrZ3h3QmpXUURvRVJpYldHQUFCMEFFZ1VJTHRPRUdFTEpBKzJBTmdMWEF4Z0J6Mi9jQmJBQXdRTUQ0ZllGNXVRVUdCd0VBemdLU0JqaktEZGdDZzBnTWdLT2owZ2I0RVlnR21GWEFDNzBDWGtCV0JJSUdPRHFDSTVDMVFIc3FOd21zTEVCZ09waXh3QUVZQUdxQlF6QUExQUlIWVFDZ0JmQnpBUEJjNEVBTUFMUEFvUmdBWmdGbUF6UU5BTmhCb0Nsa2dmWUJBU0NLUUx1ZUFZeU9ndzBOWUdFQjgvY0YxaFk0TEFBQUNBek1Yd2loZWdTcy9nS0VENEt3aGdXUUFKUVdJSVhBR1c0T3NMWXdiaTV3ZGdnQWdCRUFyZ0syTXpIa2ltQ0dCd0NKd013WDRQeC9BZWNsNlB4ajBFK0VuSjhLKzhXUTg4dGh2eUhpL0phWTN4UjFmbHZjSDR3NGZ6VG1EMGVkUHg3M0wwZzQvNHFNZjBuSytkZmsvSXVTenI4cTYxK1dkdjUxZWYrRENlZC9NdU4vTk9YOHorYjhEeWVkLyttcy8vRzA4eitmOXg5UWNQNFRHdjRqS3M1L1JzZC9TTW41VDJuNWo2azUvems5LzBGRjV6K3A2VCtxNnZ4bmRmMkhsWjMvdExiL3VMcnpuOWYzRnl3NGY4V0d2MlRGK1d0Mi9FVkx6bCsxNVM5YmMvNjZQWC9ob3ZOWGJ2cExWNTIvZHRkZnZIeVFWMjhIZ2xkdis4dlhjeGVGSXlNTFdFZmZBQ09TWlNBMUFnVGpCd0pnUEJmWVB5WWlpTlZoVUdBN2Zsc0VTSUlFUUNGZ2RWaE1OdjU2eDhIMkFCd0NBbGdBN0N4QUU2QUI0alF0RUNBcm9CNEFUWklDS2l3d0xMRUFWUW9OTUdRM2dPVUdNVlVCWWx2QnRQc0NkQkhlQjhoWW9PYWlrSHo4WnN2QUpsa0J5Z0oxRUNCTW5jTWdPZ0RxV29BeVNBUFV0QUJ4Z0FZb3NFRFZNUkZ4ZEErRE9BeFFEd0g2QW9BQTVFNEhLeXhBSFVNREVBUFFhUFFOVndUME1RS2dUejMrclFVMEQ0dFpDdEEvRGlZSHdCUUJqa0FCVUFoTVRDekFVb0MyQVNZTUFKZ2h3Qk1vQUdZVzRCay8wZ0JtQ0RBRkM0REIxaEJiWkRlQzlCRElPU2Jpak1aaEVCc0ErdE5CM3ZITFR3SzM2ZWtjRnJORzR6aTR4emQrUFF2d0JtaUF4QUlheDBUTUJWUWRCdlU1eDYrREFIZWdBT2hZZ0gzOE9BTm9JY0FlTEFEVkZtQVAwZ0FGaThJMEFnSXBBMkRDRGtDK0JiWUlTR1FIQUZrRFZGcEFKa0FEVkZsQVp2eEFBMVJzRFFsRmRpTkkyd0kvQllNelFMa0Y1TWFQTThEenZzQXk3MEVnbHl3QVM4NTlBTTI1UUJ5aDhhUG1BS1VXdUpZTTBBQTdGa2h2RUlzbXV4VjhJd2hBQVFLeUJTQUJ5SjhMaUFacWdId0VoSU1GSU1jQzRrRWFJQWNCUUtBQVpDd0FDTklBV1FRQXdRS3dad0ZJa0FhSTAxMXNFQUJsRGNDaWl4aC8yZ0tvQUEyUVdFQVZzTm9hZ28zLzhXbXhpS0llWnZ3cEM2Q0NORURhQXJnQURaQ3lBREJJQTZ3c0VEY0FUTHdWM01PTmY0VUFORmdBRWd1QUF6VEFNd0xnWUFGb05Eb3pjRHFXQS9nZmF0dHUwdkJRL2w4QUFBQUFTVVZPUks1Q1lJST0i"},4926:function(e){e.exports="data:image/png;base64,bW9kdWxlLmV4cG9ydHMgPSAiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFRQUFBQUVBQ0FNQUFBQnJyRmhVQUFBQzVucFVXSFJTWVhjZ2NISnZabWxzWlNCMGVYQmxJR1Y0YVdZQUFIamE3WmRiY2gwckRFWC9HVVdHZ0NTRXhIQm9IbFdad1IxK05uU2Y5bkhzdkNyNXVWV25xUVlzUUZMdkJkZ080Nyt2TTN6QlF5VnpTR3FlUzg0UlR5cXBjRVhINC9tVVhWTk11MzQ4ZE5YdjdPSHVNbHBCSytlQTFXdFZoVjNmRmp4aTBQSGVIdndhWWI4Y1BTSmZEbVZGWm5UNmM1S3c4Mm1uZERrcTQrems0dmFjNnNGbjI2NkpPNVhyOWJKeldjN09JZndjbmczSm9GSlhCQkxtSVNRUk5jdVZnYXlYcEtJdHU4NllSNUxSVHlKaE53OEpJY2k3ejNzVCtGbWdUOFVQMzZ2L0kvRzVYbmI1VHN2OG9KWS9IeUQ5WFB3dDhWTmd1VFBpOXdNbUQxY2ZSWjZ6KzV6ai9McWFNaFROMTQ2Njk5RjJnNGtISkplOUxLTVlYa1hmZGlrb0htdHNRTjVqaXdkS28wSU1Lak5Rb2s2VkpvM2RObXBJTWZGZ1E4dmNBR3JaWEl3TE4xbWMwaW8wMlVDdmk0Tmw0eEZFWU9ZN0Y5cHh5NDdYeUJHNUU2WXl3UmxoeVE5TCtObmduNVF3WjFzU1VmUmJLK1RGYTRzaWpVVnUxWmdGSURRdmJyb0ZmcFQ3ME1ZbnNBS0N1bVYyZkdDTngrbmlVSHJiVzdJNUMrWXAydk1JVWJCK09ZQkVpSzFJaGdRRVlpWlJ5aFNOMllpZ293TlFSZVlzaVE4UUlGWHVTSkp4UUhBZkdUdXYyRmhqdE9leWN1Wmx4dDBFRUlyVFpHQ0Q4d1ZZS1NuMmp5WEhIcW9xbWxRMXE2a0hMVnF6NUpRMTUyeDVYWExWeEpLcFpUTnpLMVpkUExsNmRuUDM0clZ3RWR5QlduS3g0cVdVV2psVUJLcndWVEcvd25Md0lVYzY5TWlISFg2VW96WnNuNWFhdHR5c2VTdXRkdTdTY1UzMDNLMTdMNzBPQ2dNM3hVaERSeDQyZkpSUkovYmFsSm1temp4dCtpeXozdFF1cWgvS0gxQ2ppeHB2VW11ZTNkUmdEV1lQRjdTdUUxM01RSXdUZ2JndEF0alF2SmhGcDVSNGtWdk1ZbUVjQ21Va3FZdE42TFNJQVdFYXhEcnBadmRHN3JlNEJmWGY0c2EvSWhjV3VuOUJMZ0RkUjI2ZlVPdnI5MXpieE01VHVEU05ndE9IT1pVOTRJMFIxZCsyTDBjdlJ5OUhMMGN2Unk5SEwwZi9mMGN5OGNjRC9va04zd0JGTnAxYXROSTlsUUFBQVlWcFEwTlFTVU5ESUhCeWIyWnBiR1VBQUhpY2ZaRTlTTU5BSE1WZlU3VXFMUTUyRUJITVVNWEJncWlJbzFTeENCWktXNkZWQjVOTHY2QkpRNUxpNGlpNEZoejhXS3c2dURqcjZ1QXFDSUlmSUc1dVRvb3VVdUwva2tLTFdBK08rL0h1M3VQdUhTRFVTa3cxT3lZQVZiT01SRFFpcGpPcm91OFZQZWhDQUdNWWxwaXB4NUtMS2JRZFgvZnc4UFV1ekxQYW4vdHpCSlNzeVFDUFNEekhkTU1pM2lDZTJiUjB6dnZFUVZhUUZPSno0bkdETGtqOHlIWFo1VGZPZVljRm5oazBVb2w1NGlDeG1HOWh1WVZad1ZDSnA0bERpcXBSdnBCMldlRzh4Vmt0VlZqam52eUYvcXkya3VRNnpTRkVzWVFZNGhBaG80SWlTckFRcGxVanhVU0M5aU50L0lPT1AwNHVtVnhGTUhJc29Bd1ZrdU1ILzRQZjNacTVxVWszeVI4Qk9sOXMrMk1FOE8wQzlhcHRmeC9iZHYwRThENERWMXJUWDY0QnM1K2tWNXRhNkFqbzJ3WXVycHVhdkFkYzdnQURUN3BrU0k3a3BTbmtjc0Q3R1gxVEJ1aS9CWHJYM040YSt6aDlBRkxVMWZJTmNIQUlqT1lwZTczTnU3dGJlL3YzVEtPL0g0UCtjcTZxV25USkFBQURBRkJNVkVYLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vKy9Ma2hoQUFBQUFYUlNUbE1BUU9iWVpnQUFBQUZpUzBkRUFJZ0ZIVWdBQUFBSmNFaFpjd0FBQ3hJQUFBc1NBZExkZnZ3QUFBQUhkRWxOUlFmbENRWU5LeWpwTzl2OEFBQUVDRWxFUVZSNDJ1MmNTNDVqTVF3RHBmdGZ1b0ZaREhyWnNhaGZWRHhBUkJYeUhENWJzVm1uL0ovc3F2eS9ydmQvazREN2JRTHV0d200SHljQUFBRGNCdUIrbkFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUEyR0g3TEFDbDFZVUF0R2JYQS9EQkFIS0lpdTBtQXNqNVRxbjk1Z0ZJZXFyVWh0TUFaSzByTG5hY0JTQi9ZUkY5ZWhJQUx3Ymd3d0RVTEsyU2owK3g2ZzBBZkJBQWJ3SGdZd0I0RXdBZkFzQnpBYWdKZUVXeUtrZ0N6elVxZ2xWQkduNnZVcENyOUM5RVNnTDVzU3JqRlZ0SUlEMVY1ZXd4NkNwbGg2cXNQUlpacmVSTWxiZkhwS3FXRzZreTk5aEU5VklUVmU0ZW82WmlacURLM21PVjFFek1VL2w3eklxcWVYR3FZbzlkVURjdFRkV2NNY1FyWjRXcHFqT1djTzJrTEZWM3hoU3RuaE9sS3MvWWd2VlRrbFR0R1dQTVFVYVFxajVqRFhsSXlGSDFaOHdSRi9vWTFYSEdIdkFoVDFFOU13YnZUdFFocW12RzR0bUxPRVAxelppOHV0RkdxTTRabTBjLzBnVFZPMlAwNWtnWm9McG5ySjQ4Q2ZOVC80eVppTURhL3Q5OHFlTGpqQm5EQjJlaTlEaGx4dkp6YjVyd09HZkdORTVnZC85eEF0djdqeExZMzMrTXdEZjAvM1JLL3dYcmY1REEwdnhmUzJCUC96bXpTcHY2ejVqVzI5Vi93cnptc3Y3bEJOYjFyNTdaM3RkLzBRaWMyUzRDYzlhVUpnSmlBR2JMQ0V4WlVib0lUSG1ldWdoTWVaeTZDSXg1bkhvUVRIcWN0dXA2LzFsL2lGL0h3QkJDQ0NHRUVFSUlJWVNRVUM3U1VxOHUxSmIyZjN0MTMwTWd3NnY3SGdJWlh0MzNFRWp4ZWgyQSt4NENLVjRCQUFBQUFPQTBBTHNOZ0J3QUFONEZlQnRrUDBENHVZdDJoTmdHUkFnaGhCQkNDQ0dFRUJxdTB6czQxN2V4dG03a3FSd3YzY3U4L3UveDYvY0hYTDlCNHZvZEl0ZHZrYmwrajlEMW02U3UzeVYyL1RhNTYvY0pYcjlSOHZxZG90ZHZsZjNjNk4vYTJFTGdZNTkvN21NSGdVRC9YMEVnMVA4WEVBajJ2NTVBdVAvbEJENTM5M2tia3duNDZ3L2dSMTNNSmZEaTdLV0pxUVEwL2U4bDhPVHFzWWVKQk40OHZiWXdqOENqbytjT3BoRjQ5ZlBld0N3Q3oyNEMvaWNSZVBjU3NUK0hRTUJKeVAwVUFoRWZNZk16Q0lSY0JMMVBJQkR6RUxYZVR5RG9JT3k4bTBDMGZ0eDRMNEZ3ZFlIdlRnTHgyZ3JiZlFRRWxTV3V1d2dvNm1wTTl4Q1FWQlY1N2lDZ3FhbXlYRTlBVkZIbXVKcUFxcDdPY0MwQldUV2gzMG9DdWxvMVkwUSt0dithVVRvMUFXV2RqWU5VVXM1bGMwUkQrMWNES0ppbkZEOW5jcS9aQk5UcmpONXFHd0FiQXNDYUFOZ1lBTllDd0FZQnNBWUFOZ3FBbFFNWVp6WHZaN0JpQWpyRlp5YUFrVi9Xd2h3MDlHbk5laFVvaUMxNnA1bnZnblBYNjZ3LzIrZUhGcHV1SmIvWUJRanNMSURjM1FVQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFjSWFBQVFBQUFMaE13T3cyQWJQYkJNeHVFN0NyR3REK0R6d3FNQk8ycDVGQkFBQUFBRWxGVGtTdVFtQ0Mi"},9742:function(e,t){"use strict";t.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=c(e),a=o[0],s=o[1],l=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),u=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,l[u++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,c=r-i;s<c;s+=a)o.push(l(e,s,s+a>c?c:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},8764:function(e,t,n){"use strict";var r=n(5108);const i=n(9742),o=n(645),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=l,t.h2=50;const s=2147483647;function c(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return d(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let r=c(n);const i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(K(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(K(e,ArrayBuffer)||e&&K(e.buffer,ArrayBuffer))return p(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(K(e,SharedArrayBuffer)||e&&K(e.buffer,SharedArrayBuffer)))return p(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return l.from(r,t,n);const i=function(e){if(l.isBuffer(e)){const t=0|m(e.length),n=c(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||q(e.length)?c(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),c(e<0?0:0|m(e))}function f(e){const t=e.length<0?0:0|m(e.length),n=c(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function p(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,l.prototype),r}function m(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function g(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||K(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(e).length;default:if(i)return r?-1:X(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return L(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),q(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=l.from(t,r)),l.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){let o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===c)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){let n=!0;for(let r=0;r<c;r++)if(l(e,o+r)!==l(t,r)){n=!1;break}if(n)return o}return-1}function x(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(q(r))return a;e[n+a]=r}return a}function w(e,t,n,r){return Y(X(t,e.length-n),e,n,r)}function A(e,t,n,r){return Y(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return Y(Q(t),e,n,r)}function M(e,t,n,r){return Y(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,c;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(o=c));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=R));return n}(r)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,n){return function(e,t,n){return h(e),e<=0?c(e):void 0!==t?"string"==typeof n?c(e).fill(t,n):c(e).fill(t):c(e)}(e,t,n)},l.allocUnsafe=function(e){return d(e)},l.allocUnsafeSlow=function(e){return d(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=l.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(K(t,Uint8Array))i+t.length>r.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)_(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let e="";const n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(l.prototype[a]=l.prototype.inspect),l.prototype.compare=function(e,t,n,r,i){if(K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0);const s=Math.min(o,a),c=this.slice(r,i),u=e.slice(t,n);for(let e=0;e<s;++e)if(c[e]!==u[e]){o=c[e],a=u[e];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},l.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":case"latin1":case"binary":return A(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function L(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function P(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=J[e[r]];return i}function F(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,n,r,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r,i){G(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function k(e,t,n,r,i){G(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function I(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function N(e,t,n,r,i){return t=+t,n>>>=0,i||I(e,0,n,8),o.write(e,t,n,r,52,8),n+8}l.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=$((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=$((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},l.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=$((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=$((function(e){V(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||W(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),o.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),o.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){U(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){U(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=$((function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=$((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},l.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);U(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=$((function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=$((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,n){return B(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return B(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,r){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},l.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const o=l.isBuffer(e)?e:l.from(e,r),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=o[i%a]}return this};const Z={};function j(e,t,n){Z[e]=class NodeError extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function z(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function G(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new Z.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){V(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||W(t,e.length-(n+1))}(r,i,o)}function V(e,t){if("number"!=typeof e)throw new Z.ERR_INVALID_ARG_TYPE(t,"number",e)}function W(e,t,n){if(Math.floor(e)!==e)throw V(e,n),new Z.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new Z.ERR_BUFFER_OUT_OF_BOUNDS;throw new Z.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=z(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=z(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const H=/[^+/0-9A-Za-z-_]/g;function X(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Q(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function K(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function q(e){return e!=e}const J=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function $(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}},1924:function(e,t,n){"use strict";var r=n(210),i=n(5559),o=i(r("String.prototype.indexOf"));e.exports=function(e,t){var n=r(e,!!t);return"function"==typeof n&&o(e,".prototype.")>-1?i(n):n}},5559:function(e,t,n){"use strict";var r=n(8612),i=n(210),o=i("%Function.prototype.apply%"),a=i("%Function.prototype.call%"),s=i("%Reflect.apply%",!0)||r.call(a,o),c=i("%Object.getOwnPropertyDescriptor%",!0),l=i("%Object.defineProperty%",!0),u=i("%Math.max%");if(l)try{l({},"a",{value:1})}catch(e){l=null}e.exports=function(e){var t=s(r,a,arguments);if(c&&l){var n=c(t,"length");n.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var h=function(){return s(r,o,arguments)};l?l(e.exports,"apply",{value:h}):e.exports.apply=h},5256:function(e,t,n){"use strict";function r(e,t,n){return{r:255*n(e.r/255,t.r/255),g:255*n(e.g/255,t.g/255),b:255*n(e.b/255,t.b/255)}}function i(e,t){return t}function o(e,t){return e*t}function a(e,t){return e+t-e*t}function s(e,t){return d(t,e)}function c(e,t){return Math.min(e,t)}function l(e,t){return Math.min(Math.max(e,t),1)}function u(e,t){return 0===e?0:1===t?1:Math.min(1,e/(1-t))}function h(e,t){return 1===e?1:0===t?0:1-Math.min(1,(1-e)/t)}function d(e,t){return t<=.5?o(e,2*t):a(e,2*t-1)}function f(e,t){return t<=.5?e-(1-2*t)*e*(1-e):e+(2*t-1)*((e<=.25?((16*e-12)*e+4)*e:Math.sqrt(e))-e)}function p(e,t){return Math.abs(e-t)}function m(e,t){return e+t-2*e*t}function g(e,t,n){return Math.min(Math.max(e||0,t),n)}function v(e){return{r:g(e.r,0,255),g:g(e.g,0,255),b:g(e.b,0,255),a:g(e.a,0,1)}}function _(e){return{r:255*e.r,g:255*e.g,b:255*e.b,a:e.a}}function y(e){return{r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}}function b(e,t){void 0===t&&(t=0);var n=Math.pow(10,t);return{r:Math.round(e.r*n)/n,g:Math.round(e.g*n)/n,b:Math.round(e.b*n)/n,a:e.a}}function x(e,t,n,r,i,o){return(1-t/n)*r+t/n*Math.round((1-e)*i+e*o)}function w(e,t,n,r,i){void 0===i&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(e=_(e),t=_(t)),e=v(e);var o=(t=v(t)).a+e.a-t.a*e.a,a=n(e,t,r),s=v({r:x(e.a,t.a,o,e.r,t.r,a.r),g:x(e.a,t.a,o,e.g,t.g,a.g),b:x(e.a,t.a,o,e.b,t.b,a.b),a:o});return s=i.unitOutput?y(s):i.roundOutput?b(s):function(e){return b(e,9)}(s),s}function A(e,t,n){return _(n(y(e),y(t)))}function T(e){return.3*e.r+.59*e.g+.11*e.b}function M(e,t){var n=t-T(e);return function(e){var t=T(e),n=e.r,r=e.g,i=e.b,o=Math.min(n,r,i),a=Math.max(n,r,i);function s(e){return t+(e-t)*t/(t-o)}function c(e){return t+(e-t)*(1-t)/(a-t)}return o<0&&(n=s(n),r=s(r),i=s(i)),a>1&&(n=c(n),r=c(r),i=c(i)),{r:n,g:r,b:i}}({r:e.r+n,g:e.g+n,b:e.b+n})}function E(e){return Math.max(e.r,e.g,e.b)-Math.min(e.r,e.g,e.b)}function S(e,t){var n=["r","g","b"].sort((function(t,n){return e[t]-e[n]})),r=n[0],i=n[1],o=n[2],a={r:e.r,g:e.g,b:e.b};return a[o]>a[r]?(a[i]=(a[i]-a[r])*t/(a[o]-a[r]),a[o]=t):a[i]=a[o]=0,a[r]=0,a}function R(e,t){return M(S(t,E(e)),T(e))}function L(e,t){return M(S(e,E(t)),T(e))}function P(e,t){return M(t,T(e))}function C(e,t){return M(e,T(t))}function F(e,t){return w(e,t,r,i)}function D(e,t){return w(e,t,r,o)}function U(e,t){return w(e,t,r,a)}function O(e,t){return w(e,t,r,s)}function k(e,t){return w(e,t,r,c)}function I(e,t){return w(e,t,r,l)}function B(e,t){return w(e,t,r,u)}function N(e,t){return w(e,t,r,h)}function Z(e,t){return w(e,t,r,d)}function j(e,t){return w(e,t,r,f)}function z(e,t){return w(e,t,r,p)}function G(e,t){return w(e,t,r,m)}function V(e,t){return w(e,t,A,R)}function W(e,t){return w(e,t,A,L)}function H(e,t){return w(e,t,A,P)}function X(e,t){return w(e,t,A,C)}n.r(t),n.d(t,{color:function(){return H},colorBurn:function(){return N},colorDodge:function(){return B},darken:function(){return k},difference:function(){return z},exclusion:function(){return G},hardLight:function(){return Z},hue:function(){return V},lighten:function(){return I},luminosity:function(){return X},multiply:function(){return D},normal:function(){return F},overlay:function(){return O},saturation:function(){return W},screen:function(){return U},softLight:function(){return j}})},5108:function(e,t,n){var r=n(9539),i=n(9282);function o(){return(new Date).getTime()}var a,s=Array.prototype.slice,c={};a=void 0!==n.g&&n.g.console?n.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var l=[[function(){},"log"],[function(){a.log.apply(a,arguments)},"info"],[function(){a.log.apply(a,arguments)},"warn"],[function(){a.warn.apply(a,arguments)},"error"],[function(e){c[e]=o()},"time"],[function(e){var t=c[e];if(!t)throw new Error("No such label: "+e);delete c[e];var n=o()-t;a.log(e+": "+n+"ms")},"timeEnd"],[function(){var e=new Error;e.name="Trace",e.message=r.format.apply(null,arguments),a.error(e.stack)},"trace"],[function(e){a.log(r.inspect(e)+"\n")},"dir"],[function(e){if(!e){var t=s.call(arguments,1);i.ok(!1,r.format.apply(null,t))}},"assert"]],u=0;u<l.length;u++){var h=l[u],d=h[0],f=h[1];a[f]||(a[f]=d)}e.exports=a},9369:function(e,t,n){n(2688)},2688:function(e){e.exports=function(t){return e.exports.definer(t)},e.exports.define=function(t,n,r){var i;if("object"==typeof n)for(i in n)n.hasOwnProperty(i)&&e.exports.define(t,i,n[i]);else Object.defineProperty(t,n,{value:r,enumerable:!0,writable:!1,configurable:!1});return t},e.exports.definer=function(t){return t=t||Object.create(null),function(n,r){return e.exports.define(t,n,r)}}},7374:function(e,t,n){"use strict";n.r(t);var r=n(8081),i=n.n(r),o=n(3645),a=n.n(o)()(i());a.push([e.id,".dev-gui{position:relative;width:100%;height:100%;color:#fff;font-family:monospace;font-size:14px;opacity:.2;text-align:right}.dev-gui.hidden{display:none}.dev-gui.--mobile{font-size:8px}.dev-gui.--mobile .status .status-line{font-size:8px;line-height:1em}.dev-gui .status{position:absolute;top:16px;right:16px}.dev-gui .status .status-line{color:#eee;font-size:10px;line-height:1em}",""]),t.default=a},3645:function(e){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),i&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=i):u[4]="".concat(i)),t.push(u))}},t}},8081:function(e){"use strict";e.exports=function(e){return e[1]}},1463:function(e,t,n){const r=n(6411);e.exports=function(e){if("string"!=typeof e)return;const t=e.toUpperCase();return Object.prototype.hasOwnProperty.call(r,t)?r[t]:void 0},e.exports.currencySymbolMap=r},6411:function(e){e.exports={AED:"د.إ",AFN:"؋",ALL:"L",AMD:"֏",ANG:"ƒ",AOA:"Kz",ARS:"$",AUD:"$",AWG:"ƒ",AZN:"₼",BAM:"KM",BBD:"$",BDT:"৳",BGN:"лв",BHD:".د.ب",BIF:"FBu",BMD:"$",BND:"$",BOB:"$b",BOV:"BOV",BRL:"R$",BSD:"$",BTC:"₿",BTN:"Nu.",BWP:"P",BYN:"Br",BYR:"Br",BZD:"BZ$",CAD:"$",CDF:"FC",CHE:"CHE",CHF:"CHF",CHW:"CHW",CLF:"CLF",CLP:"$",CNH:"¥",CNY:"¥",COP:"$",COU:"COU",CRC:"₡",CUC:"$",CUP:"₱",CVE:"$",CZK:"Kč",DJF:"Fdj",DKK:"kr",DOP:"RD$",DZD:"دج",EEK:"kr",EGP:"£",ERN:"Nfk",ETB:"Br",ETH:"Ξ",EUR:"€",FJD:"$",FKP:"£",GBP:"£",GEL:"₾",GGP:"£",GHC:"₵",GHS:"GH₵",GIP:"£",GMD:"D",GNF:"FG",GTQ:"Q",GYD:"$",HKD:"$",HNL:"L",HRK:"kn",HTG:"G",HUF:"Ft",IDR:"Rp",ILS:"₪",IMP:"£",INR:"₹",IQD:"ع.د",IRR:"﷼",ISK:"kr",JEP:"£",JMD:"J$",JOD:"JD",JPY:"¥",KES:"KSh",KGS:"лв",KHR:"៛",KMF:"CF",KPW:"₩",KRW:"₩",KWD:"KD",KYD:"$",KZT:"₸",LAK:"₭",LBP:"£",LKR:"₨",LRD:"$",LSL:"M",LTC:"Ł",LTL:"Lt",LVL:"Ls",LYD:"LD",MAD:"MAD",MDL:"lei",MGA:"Ar",MKD:"ден",MMK:"K",MNT:"₮",MOP:"MOP$",MRO:"UM",MRU:"UM",MUR:"₨",MVR:"Rf",MWK:"MK",MXN:"$",MXV:"MXV",MYR:"RM",MZN:"MT",NAD:"$",NGN:"₦",NIO:"C$",NOK:"kr",NPR:"₨",NZD:"$",OMR:"﷼",PAB:"B/.",PEN:"S/.",PGK:"K",PHP:"₱",PKR:"₨",PLN:"zł",PYG:"Gs",QAR:"﷼",RMB:"￥",RON:"lei",RSD:"Дин.",RUB:"₽",RWF:"R₣",SAR:"﷼",SBD:"$",SCR:"₨",SDG:"ج.س.",SEK:"kr",SGD:"S$",SHP:"£",SLL:"Le",SOS:"S",SRD:"$",SSP:"£",STD:"Db",STN:"Db",SVC:"$",SYP:"£",SZL:"E",THB:"฿",TJS:"SM",TMT:"T",TND:"د.ت",TOP:"T$",TRL:"₤",TRY:"₺",TTD:"TT$",TVD:"$",TWD:"NT$",TZS:"TSh",UAH:"₴",UGX:"USh",USD:"$",UYI:"UYI",UYU:"$U",UYW:"UYW",UZS:"лв",VEF:"Bs",VES:"Bs.S",VND:"₫",VUV:"VT",WST:"WS$",XAF:"FCFA",XBT:"Ƀ",XCD:"$",XOF:"CFA",XPF:"₣",XSU:"Sucre",XUA:"XUA",YER:"﷼",ZAR:"R",ZMW:"ZK",ZWD:"Z$",ZWL:"$"}},1691:function(e){var t,n,r,i,o,a,s;t=function(e,t){var c={month:e.getUTCMonth(),day:e.getDay(),year:e.getFullYear(),date:e.getDate(),hour:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds(),ampm:e.getHours()<12?"am":"pm",fullStr:e.toString()},l=[["%m",c.month<9?"0"+(c.month+1):c.month+1],["%M:s",o(c.month,"short")],["%M",o(c.month)],["%d:o",n(c.date)],["%d",c.date<10?"0"+s(c.date):s(c.date)],["%D:s",i(c.day,"short")],["%D",i(c.day)],["%Y:r",r(c.year)],["%Y",c.year],["%y",s(c.year).substr(2)],["%h",a(function(){var e=c.hour>12?c.hour-12:c.hour;return e=0===e?12:e}())],["%H",a(c.hour)],["%i",a(c.minutes)],["%s",a(c.seconds)],["%ampm",c.ampm],["%AMPM",c.ampm.toUpperCase()],["%AmPm",c.ampm.charAt(0).toUpperCase()+c.ampm.charAt(1)]];if("string"==typeof t&&t)for(var u=0;u<l.length;u++){var h=l[u],d=h[0],f=h[1],p=new RegExp(d,"g");t=t.replace(p,f)}else t=c.fullStr;return t},n=function(e){if((e=(e||"").toString()).length<1)return e;var t="",n=parseInt(e,10),r=n>99?parseInt(e.slice(e.length-2),10):n<20&&n;if(r>=11&&r<20)t="th";else switch(parseInt(e.charAt(e.length-1),10)){case 1:t="st";break;case 2:t="nd";break;case 3:t="rd";break;default:t="th"}return e+t},r=function(e){e=parseInt(e,10);var t,n=[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]],r=[];for(t=0;t<n.length;t++)for(var i=n[t],o=i[0],a=i[1];e>=a;)r.push(o),e-=a;return r.join("")},i=function(e,t){var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e];return"short"===t&&(n=n.slice(0,3)),n},o=function(e,t){var n=["January","February","March","April","May","June","July","August","September","October","November","December"][e]||"";return"short"===t&&(n=n.slice(0,3)),n},a=function(e){return e<10?"0"+s(e):e},s=function(e){return(e=isNaN(e)?"":e).toString()},e.exports&&(e.exports=t)},6685:function(e,t,n){DateTime=n(1691),e.exports=DateTime},9996:function(e){"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)};var n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function i(e,t,n){return e.concat(t).map((function(e){return r(e,n)}))}function o(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,t,n){var i={};return n.isMergeableObject(e)&&o(e).forEach((function(t){i[t]=r(e[t],n)})),o(t).forEach((function(o){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(a(e,o)&&n.isMergeableObject(t[o])?i[o]=function(e,t){if(!t.customMerge)return c;var n=t.customMerge(e);return"function"==typeof n?n:c}(o,n)(e[o],t[o],n):i[o]=r(t[o],n))})),i}function c(e,n,o){(o=o||{}).arrayMerge=o.arrayMerge||i,o.isMergeableObject=o.isMergeableObject||t,o.cloneUnlessOtherwiseSpecified=r;var a=Array.isArray(n);return a===Array.isArray(e)?a?o.arrayMerge(e,n,o):s(e,n,o):r(n,o)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return c(e,n,t)}),{})};var l=c;e.exports=l},4289:function(e,t,n){"use strict";var r=n(2215),i="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),o=Object.prototype.toString,a=Array.prototype.concat,s=Object.defineProperty,c=n(1044)(),l=s&&c,u=function(e,t,n,r){var i;(!(t in e)||"function"==typeof(i=r)&&"[object Function]"===o.call(i)&&r())&&(l?s(e,t,{configurable:!0,enumerable:!1,value:n,writable:!0}):e[t]=n)},h=function(e,t){var n=arguments.length>2?arguments[2]:{},o=r(t);i&&(o=a.call(o,Object.getOwnPropertySymbols(t)));for(var s=0;s<o.length;s+=1)u(e,o[s],t[o[s]],n[o[s]])};h.supportsDescriptors=!!l,e.exports=h},8091:function(e){"use strict";function t(e,t){if(null==e)throw new TypeError("Cannot convert first argument to object");for(var n=Object(e),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var o=Object.keys(Object(i)),a=0,s=o.length;a<s;a++){var c=o[a],l=Object.getOwnPropertyDescriptor(i,c);void 0!==l&&l.enumerable&&(n[c]=i[c])}}return n}e.exports={assign:t,polyfill:function(){Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:t})}}},6650:function(e,t){!function(e){"use strict";var t=function(e){return function(t){var n=e(t);return t.add(n),n}},n=function(e){return function(t,n){return e.set(t,n),n}},r=void 0===Number.MAX_SAFE_INTEGER?9007199254740991:Number.MAX_SAFE_INTEGER,i=536870912,o=2*i,a=function(e,t){return function(n){var a=t.get(n),s=void 0===a?n.size:a<o?a+1:0;if(!n.has(s))return e(n,s);if(n.size<i){for(;n.has(s);)s=Math.floor(Math.random()*o);return e(n,s)}if(n.size>r)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(s);)s=Math.floor(Math.random()*r);return e(n,s)}},s=new WeakMap,c=n(s),l=a(c,s),u=t(l);e.addUniqueNumber=u,e.generateUniqueNumber=l,Object.defineProperty(e,"__esModule",{value:!0})}(t)},4029:function(e,t,n){"use strict";var r=n(5320),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,n){for(var r=0,i=e.length;r<i;r++)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))},s=function(e,t,n){for(var r=0,i=e.length;r<i;r++)null==n?t(e.charAt(r),r,e):t.call(n,e.charAt(r),r,e)},c=function(e,t,n){for(var r in e)o.call(e,r)&&(null==n?t(e[r],r,e):t.call(n,e[r],r,e))};e.exports=function(e,t,n){if(!r(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=n),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):c(e,t,o)}},7648:function(e){"use strict";var t="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,r=Object.prototype.toString,i="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||r.call(o)!==i)throw new TypeError(t+o);for(var a,s=n.call(arguments,1),c=function(){if(this instanceof a){var t=o.apply(this,s.concat(n.call(arguments)));return Object(t)===t?t:this}return o.apply(e,s.concat(n.call(arguments)))},l=Math.max(0,o.length-s.length),u=[],h=0;h<l;h++)u.push("$"+h);if(a=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),o.prototype){var d=function(){};d.prototype=o.prototype,a.prototype=new d,d.prototype=null}return a}},8612:function(e,t,n){"use strict";var r=n(7648);e.exports=Function.prototype.bind||r},210:function(e,t,n){"use strict";var r,i=SyntaxError,o=Function,a=TypeError,s=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(e){c=null}var l=function(){throw new a},u=c?function(){try{return l}catch(e){try{return c(arguments,"callee").get}catch(e){return l}}}():l,h=n(1405)(),d=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"==typeof Uint8Array?r:d(Uint8Array),m={"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":h?d([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":f,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?d(d([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&h?d((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&h?d((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?d(""[Symbol.iterator]()):r,"%Symbol%":h?Symbol:r,"%SyntaxError%":i,"%ThrowTypeError%":u,"%TypedArray%":p,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet},g=function e(t){var n;if("%AsyncFunction%"===t)n=s("async function () {}");else if("%GeneratorFunction%"===t)n=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)n=s("async function* () {}");else if("%AsyncGenerator%"===t){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&(n=d(i.prototype))}return m[t]=n,n},v={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=n(8612),y=n(7642),b=_.call(Function.call,Array.prototype.concat),x=_.call(Function.apply,Array.prototype.splice),w=_.call(Function.call,String.prototype.replace),A=_.call(Function.call,String.prototype.slice),T=_.call(Function.call,RegExp.prototype.exec),M=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,E=/\\(\\)?/g,S=function(e){var t=A(e,0,1),n=A(e,-1);if("%"===t&&"%"!==n)throw new i("invalid intrinsic syntax, expected closing `%`");if("%"===n&&"%"!==t)throw new i("invalid intrinsic syntax, expected opening `%`");var r=[];return w(e,M,(function(e,t,n,i){r[r.length]=n?w(i,E,"$1"):t||e})),r},R=function(e,t){var n,r=e;if(y(v,r)&&(r="%"+(n=v[r])[0]+"%"),y(m,r)){var o=m[r];if(o===f&&(o=g(r)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:n,name:r,value:o}}throw new i("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===T(/^%?[^%]*%?$/g,e))throw new i("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=S(e),r=n.length>0?n[0]:"",o=R("%"+r+"%",t),s=o.name,l=o.value,u=!1,h=o.alias;h&&(r=h[0],x(n,b([0,1],h)));for(var d=1,f=!0;d<n.length;d+=1){var p=n[d],g=A(p,0,1),v=A(p,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new i("property names with quotes must have matching quotes");if("constructor"!==p&&f||(u=!0),y(m,s="%"+(r+="."+p)+"%"))l=m[s];else if(null!=l){if(!(p in l)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&d+1>=n.length){var _=c(l,p);l=(f=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:l[p]}else f=y(l,p),l=l[p];f&&!u&&(m[s]=l)}}return l}},1044:function(e,t,n){"use strict";var r=n(210)("%Object.defineProperty%",!0),i=function(){if(r)try{return r({},"a",{value:1}),!0}catch(e){return!1}return!1};i.hasArrayLengthDefineBug=function(){if(!i())return null;try{return 1!==r([],"length",{value:1}).length}catch(e){return!0}},e.exports=i},1405:function(e,t,n){"use strict";var r="undefined"!=typeof Symbol&&Symbol,i=n(5419);e.exports=function(){return"function"==typeof r&&("function"==typeof Symbol&&("symbol"==typeof r("foo")&&("symbol"==typeof Symbol("bar")&&i())))}},5419:function(e){"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),n=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(n))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var r=Object.getOwnPropertySymbols(e);if(1!==r.length||r[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0}},6410:function(e,t,n){"use strict";var r=n(5419);e.exports=function(){return r()&&!!Symbol.toStringTag}},7642:function(e,t,n){"use strict";var r=n(8612);e.exports=r.call(Function.call,Object.prototype.hasOwnProperty)},8515:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r="undefined"!=typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>0;function i(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on".concat(t),(function(){n(window.event)}))}function o(e,t){for(var n=t.slice(0,t.length-1),r=0;r<n.length;r++)n[r]=e[n[r].toLowerCase()];return n}function a(e){"string"!=typeof e&&(e="");for(var t=(e=e.replace(/\s/g,"")).split(","),n=t.lastIndexOf("");n>=0;)t[n-1]+=",",t.splice(n,1),n=t.lastIndexOf("");return t}for(var s={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":r?173:189,"=":r?61:187,";":r?59:186,"'":222,"[":219,"]":221,"\\":220},c={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},l={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},u={16:!1,18:!1,17:!1,91:!1},h={},d=1;d<20;d++)s["f".concat(d)]=111+d;var f=[],p=!1,m="all",g=[],v=function(e){return s[e.toLowerCase()]||c[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)};function _(e){m=e||"all"}function y(){return m||"all"}var b=function(e){var t=e.key,n=e.scope,r=e.method,i=e.splitKey,s=void 0===i?"+":i;a(t).forEach((function(e){var t=e.split(s),i=t.length,a=t[i-1],l="*"===a?"*":v(a);if(h[l]){n||(n=y());var u=i>1?o(c,t):[];h[l]=h[l].filter((function(e){return!((!r||e.method===r)&&e.scope===n&&function(e,t){for(var n=e.length>=t.length?e:t,r=e.length>=t.length?t:e,i=!0,o=0;o<n.length;o++)-1===r.indexOf(n[o])&&(i=!1);return i}(e.mods,u))}))}}))};function x(e,t,n,r){var i;if(t.element===r&&(t.scope===n||"all"===t.scope)){for(var o in i=t.mods.length>0,u)Object.prototype.hasOwnProperty.call(u,o)&&(!u[o]&&t.mods.indexOf(+o)>-1||u[o]&&-1===t.mods.indexOf(+o))&&(i=!1);(0!==t.mods.length||u[16]||u[18]||u[17]||u[91])&&!i&&"*"!==t.shortcut||!1===t.method(e,t)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}function w(e,t){var n=h["*"],r=e.keyCode||e.which||e.charCode;if(A.filter.call(this,e)){if(93!==r&&224!==r||(r=91),-1===f.indexOf(r)&&229!==r&&f.push(r),["ctrlKey","altKey","shiftKey","metaKey"].forEach((function(t){var n=l[t];e[t]&&-1===f.indexOf(n)?f.push(n):!e[t]&&f.indexOf(n)>-1?f.splice(f.indexOf(n),1):"metaKey"===t&&e[t]&&3===f.length&&(e.ctrlKey||e.shiftKey||e.altKey||(f=f.slice(f.indexOf(n))))})),r in u){for(var i in u[r]=!0,c)c[i]===r&&(A[i]=!0);if(!n)return}for(var o in u)Object.prototype.hasOwnProperty.call(u,o)&&(u[o]=e[l[o]]);e.getModifierState&&(!e.altKey||e.ctrlKey)&&e.getModifierState("AltGraph")&&(-1===f.indexOf(17)&&f.push(17),-1===f.indexOf(18)&&f.push(18),u[17]=!0,u[18]=!0);var a=y();if(n)for(var s=0;s<n.length;s++)n[s].scope===a&&("keydown"===e.type&&n[s].keydown||"keyup"===e.type&&n[s].keyup)&&x(e,n[s],a,t);if(r in h)for(var d=0;d<h[r].length;d++)if(("keydown"===e.type&&h[r][d].keydown||"keyup"===e.type&&h[r][d].keyup)&&h[r][d].key){for(var p=h[r][d],m=p.splitKey,g=p.key.split(m),_=[],b=0;b<g.length;b++)_.push(v(g[b]));_.sort().join("")===f.sort().join("")&&x(e,p,a,t)}}}function A(e,t,n){f=[];var r=a(e),s=[],l="all",d=document,m=0,_=!1,y=!0,b="+",x=!1;for(void 0===n&&"function"==typeof t&&(n=t),"[object Object]"===Object.prototype.toString.call(t)&&(t.scope&&(l=t.scope),t.element&&(d=t.element),t.keyup&&(_=t.keyup),void 0!==t.keydown&&(y=t.keydown),void 0!==t.capture&&(x=t.capture),"string"==typeof t.splitKey&&(b=t.splitKey)),"string"==typeof t&&(l=t);m<r.length;m++)s=[],(e=r[m].split(b)).length>1&&(s=o(c,e)),(e="*"===(e=e[e.length-1])?"*":v(e))in h||(h[e]=[]),h[e].push({keyup:_,keydown:y,scope:l,mods:s,shortcut:r[m],method:n,key:r[m],splitKey:b,element:d});void 0!==d&&!function(e){return g.indexOf(e)>-1}(d)&&window&&(g.push(d),i(d,"keydown",(function(e){w(e,d)}),x),p||(p=!0,i(window,"focus",(function(){f=[]}),x)),i(d,"keyup",(function(e){w(e,d),function(e){var t=e.keyCode||e.which||e.charCode,n=f.indexOf(t);if(n>=0&&f.splice(n,1),e.key&&"meta"===e.key.toLowerCase()&&f.splice(0,f.length),93!==t&&224!==t||(t=91),t in u)for(var r in u[t]=!1,c)c[r]===t&&(A[r]=!1)}(e)}),x))}var T={setScope:_,getScope:y,deleteScope:function(e,t){var n,r;for(var i in e||(e=y()),h)if(Object.prototype.hasOwnProperty.call(h,i))for(n=h[i],r=0;r<n.length;)n[r].scope===e?n.splice(r,1):r++;y()===e&&_(t||"all")},getPressedKeyCodes:function(){return f.slice(0)},isPressed:function(e){return"string"==typeof e&&(e=v(e)),-1!==f.indexOf(e)},filter:function(e){var t=e.target||e.srcElement,n=t.tagName,r=!0;return!t.isContentEditable&&("INPUT"!==n&&"TEXTAREA"!==n&&"SELECT"!==n||t.readOnly)||(r=!1),r},trigger:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";Object.keys(h).forEach((function(n){var r=h[n].find((function(n){return n.scope===t&&n.shortcut===e}));r&&r.method&&r.method()}))},unbind:function(e){if(void 0===e)Object.keys(h).forEach((function(e){return delete h[e]}));else if(Array.isArray(e))e.forEach((function(e){e.key&&b(e)}));else if("object"==typeof e)e.key&&b(e);else if("string"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n[0],o=n[1];"function"==typeof i&&(o=i,i=""),b({key:e,scope:i,method:o,splitKey:"+"})}},keyMap:s,modifier:c,modifierMap:l};for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&(A[M]=T[M]);if("undefined"!=typeof window){var E=window.hotkeys;A.noConflict=function(e){return e&&window.hotkeys===A&&(window.hotkeys=E),A},window.hotkeys=A}},645:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,l=c>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=l}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,l=8*o-i-1,u=(1<<l)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*c-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+f]=255&a,f+=p,a/=256,l-=8);e[n+f-p]|=128*m}},5717:function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},2584:function(e,t,n){"use strict";var r=n(6410)(),i=n(1924)("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},a=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},s=function(){return o(arguments)}();o.isLegacyArguments=a,e.exports=s?o:a},5320:function(e){"use strict";var t,n,r=Function.prototype.toString,i="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof i&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw n}}),n={},i((function(){throw 42}),null,t)}catch(e){e!==n&&(i=null)}else i=null;var o=/^\s*class\b/,a=function(e){try{var t=r.call(e);return o.test(t)}catch(e){return!1}},s=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,l="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=i?function(e){if(e===l)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{i(e,null,t)}catch(e){if(e!==n)return!1}return!a(e)}:function(e){if(e===l)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(c)return function(e){try{return!a(e)&&(r.call(e),!0)}catch(e){return!1}}(e);if(a(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},8662:function(e,t,n){"use strict";var r,i=Object.prototype.toString,o=Function.prototype.toString,a=/^\s*(?:function)?\*/,s=n(6410)(),c=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(a.test(o.call(e)))return!0;if(!s)return"[object GeneratorFunction]"===i.call(e);if(!c)return!1;if(void 0===r){var t=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}}();r=!!t&&c(t)}return c(e)===r}},8611:function(e){"use strict";e.exports=function(e){return e!=e}},360:function(e,t,n){"use strict";var r=n(5559),i=n(4289),o=n(8611),a=n(9415),s=n(3194),c=r(a(),Number);i(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},9415:function(e,t,n){"use strict";var r=n(8611);e.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},3194:function(e,t,n){"use strict";var r=n(4289),i=n(9415);e.exports=function(){var e=i();return r(Number,{isNaN:e},{isNaN:function(){return Number.isNaN!==e}}),e}},5692:function(e,t,n){"use strict";var r=n(4029),i=n(3083),o=n(1924),a=o("Object.prototype.toString"),s=n(6410)(),c="undefined"==typeof globalThis?n.g:globalThis,l=i(),u=o("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},h=o("String.prototype.slice"),d={},f=n(882),p=Object.getPrototypeOf;s&&f&&p&&r(l,(function(e){var t=new c[e];if(Symbol.toStringTag in t){var n=p(t),r=f(n,Symbol.toStringTag);if(!r){var i=p(n);r=f(i,Symbol.toStringTag)}d[e]=r.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!s||!(Symbol.toStringTag in e)){var t=h(a(e),8,-1);return u(l,t)>-1}return!!f&&function(e){var t=!1;return r(d,(function(n,r){if(!t)try{t=n.call(e)===r}catch(e){}})),t}(e)}},6486:function(e,t,n){var r;e=n.nmd(e),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",c=16,l=32,u=64,h=128,d=256,f=1/0,p=9007199254740991,m=NaN,g=4294967295,v=[["ary",h],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",u],["rearg",d]],_="[object Arguments]",y="[object Array]",b="[object Boolean]",x="[object Date]",w="[object Error]",A="[object Function]",T="[object GeneratorFunction]",M="[object Map]",E="[object Number]",S="[object Object]",R="[object Promise]",L="[object RegExp]",P="[object Set]",C="[object String]",F="[object Symbol]",D="[object WeakMap]",U="[object ArrayBuffer]",O="[object DataView]",k="[object Float32Array]",I="[object Float64Array]",B="[object Int8Array]",N="[object Int16Array]",Z="[object Int32Array]",j="[object Uint8Array]",z="[object Uint8ClampedArray]",G="[object Uint16Array]",V="[object Uint32Array]",W=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,X=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Q=/&(?:amp|lt|gt|quot|#39);/g,Y=/[&<>"']/g,K=RegExp(Q.source),q=RegExp(Y.source),J=/<%-([\s\S]+?)%>/g,$=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ie=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(ie.source),ae=/^\s+/,se=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ue=/,? & /,he=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,de=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,_e=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,xe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,we=/($^)/,Ae=/['\n\r\u2028\u2029\\]/g,Te="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Me="\\u2700-\\u27bf",Ee="a-z\\xdf-\\xf6\\xf8-\\xff",Se="A-Z\\xc0-\\xd6\\xd8-\\xde",Re="\\ufe0e\\ufe0f",Le="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['’]",Ce="[\\ud800-\\udfff]",Fe="["+Le+"]",De="["+Te+"]",Ue="\\d+",Oe="[\\u2700-\\u27bf]",ke="["+Ee+"]",Ie="[^\\ud800-\\udfff"+Le+Ue+Me+Ee+Se+"]",Be="\\ud83c[\\udffb-\\udfff]",Ne="[^\\ud800-\\udfff]",Ze="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",ze="["+Se+"]",Ge="(?:"+ke+"|"+Ie+")",Ve="(?:"+ze+"|"+Ie+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",He="(?:['’](?:D|LL|M|RE|S|T|VE))?",Xe="(?:"+De+"|"+Be+")"+"?",Qe="[\\ufe0e\\ufe0f]?",Ye=Qe+Xe+("(?:\\u200d(?:"+[Ne,Ze,je].join("|")+")"+Qe+Xe+")*"),Ke="(?:"+[Oe,Ze,je].join("|")+")"+Ye,qe="(?:"+[Ne+De+"?",De,Ze,je,Ce].join("|")+")",Je=RegExp(Pe,"g"),$e=RegExp(De,"g"),et=RegExp(Be+"(?="+Be+")|"+qe+Ye,"g"),tt=RegExp([ze+"?"+ke+"+"+We+"(?="+[Fe,ze,"$"].join("|")+")",Ve+"+"+He+"(?="+[Fe,ze+Ge,"$"].join("|")+")",ze+"?"+Ge+"+"+We,ze+"+"+He,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ue,Ke].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Te+Re+"]"),rt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,at={};at[k]=at[I]=at[B]=at[N]=at[Z]=at[j]=at[z]=at[G]=at[V]=!0,at[_]=at[y]=at[U]=at[b]=at[O]=at[x]=at[w]=at[A]=at[M]=at[E]=at[S]=at[L]=at[P]=at[C]=at[D]=!1;var st={};st[_]=st[y]=st[U]=st[O]=st[b]=st[x]=st[k]=st[I]=st[B]=st[N]=st[Z]=st[M]=st[E]=st[S]=st[L]=st[P]=st[C]=st[F]=st[j]=st[z]=st[G]=st[V]=!0,st[w]=st[A]=st[D]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,ut=parseInt,ht="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,dt="object"==typeof self&&self&&self.Object===Object&&self,ft=ht||dt||Function("return this")(),pt=t&&!t.nodeType&&t,mt=pt&&e&&!e.nodeType&&e,gt=mt&&mt.exports===pt,vt=gt&&ht.process,_t=function(){try{var e=mt&&mt.require&&mt.require("util").types;return e||vt&&vt.binding&&vt.binding("util")}catch(e){}}(),yt=_t&&_t.isArrayBuffer,bt=_t&&_t.isDate,xt=_t&&_t.isMap,wt=_t&&_t.isRegExp,At=_t&&_t.isSet,Tt=_t&&_t.isTypedArray;function Mt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Et(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function St(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Rt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Lt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Pt(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function Ct(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function Ft(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Dt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Ut(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ot(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function kt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function It(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Bt=Wt("length");function Nt(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Zt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function jt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):Zt(e,Gt,n)}function zt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Gt(e){return e!=e}function Vt(e,t){var n=null==e?0:e.length;return n?Qt(e,t)/n:m}function Wt(e){return function(t){return null==t?i:t[e]}}function Ht(e){return function(t){return null==e?i:e[t]}}function Xt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Qt(e,t){for(var n,r=-1,o=e.length;++r<o;){var a=t(e[r]);a!==i&&(n=n===i?a:n+a)}return n}function Yt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function Kt(e){return e?e.slice(0,mn(e)+1).replace(ae,""):e}function qt(e){return function(t){return e(t)}}function Jt(e,t){return Dt(t,(function(t){return e[t]}))}function $t(e,t){return e.has(t)}function en(e,t){for(var n=-1,r=e.length;++n<r&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}var rn=Ht({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),on=Ht({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function an(e){return"\\"+ct[e]}function sn(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function un(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return sn(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Bt(e)}function pn(e){return sn(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function mn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var gn=Ht({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var vn=function e(t){var n,r=(t=null==t?ft:vn.defaults(ft.Object(),t,vn.pick(ft,it))).Array,se=t.Date,Te=t.Error,Me=t.Function,Ee=t.Math,Se=t.Object,Re=t.RegExp,Le=t.String,Pe=t.TypeError,Ce=r.prototype,Fe=Me.prototype,De=Se.prototype,Ue=t["__core-js_shared__"],Oe=Fe.toString,ke=De.hasOwnProperty,Ie=0,Be=(n=/[^.]+$/.exec(Ue&&Ue.keys&&Ue.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ne=De.toString,Ze=Oe.call(Se),je=ft._,ze=Re("^"+Oe.call(ke).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=gt?t.Buffer:i,Ve=t.Symbol,We=t.Uint8Array,He=Ge?Ge.allocUnsafe:i,Xe=ln(Se.getPrototypeOf,Se),Qe=Se.create,Ye=De.propertyIsEnumerable,Ke=Ce.splice,qe=Ve?Ve.isConcatSpreadable:i,et=Ve?Ve.iterator:i,nt=Ve?Ve.toStringTag:i,ct=function(){try{var e=po(Se,"defineProperty");return e({},"",{}),e}catch(e){}}(),ht=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,dt=se&&se.now!==ft.Date.now&&se.now,pt=t.setTimeout!==ft.setTimeout&&t.setTimeout,mt=Ee.ceil,vt=Ee.floor,_t=Se.getOwnPropertySymbols,Bt=Ge?Ge.isBuffer:i,Ht=t.isFinite,_n=Ce.join,yn=ln(Se.keys,Se),bn=Ee.max,xn=Ee.min,wn=se.now,An=t.parseInt,Tn=Ee.random,Mn=Ce.reverse,En=po(t,"DataView"),Sn=po(t,"Map"),Rn=po(t,"Promise"),Ln=po(t,"Set"),Pn=po(t,"WeakMap"),Cn=po(Se,"create"),Fn=Pn&&new Pn,Dn={},Un=jo(En),On=jo(Sn),kn=jo(Rn),In=jo(Ln),Bn=jo(Pn),Nn=Ve?Ve.prototype:i,Zn=Nn?Nn.valueOf:i,jn=Nn?Nn.toString:i;function zn(e){if(is(e)&&!Xa(e)&&!(e instanceof Hn)){if(e instanceof Wn)return e;if(ke.call(e,"__wrapped__"))return zo(e)}return new Wn(e)}var Gn=function(){function e(){}return function(t){if(!rs(t))return{};if(Qe)return Qe(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Vn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Hn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=g,this.__views__=[]}function Xn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Yn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Yn;++t<n;)this.add(e[t])}function qn(e){var t=this.__data__=new Qn(e);this.size=t.size}function Jn(e,t){var n=Xa(e),r=!n&&Ha(e),i=!n&&!r&&qa(e),o=!n&&!r&&!i&&ds(e),a=n||r||i||o,s=a?Yt(e.length,Le):[],c=s.length;for(var l in e)!t&&!ke.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||xo(l,c))||s.push(l);return s}function $n(e){var t=e.length;return t?e[Kr(0,t-1)]:i}function er(e,t){return Bo(Ci(e),lr(t,0,e.length))}function tr(e){return Bo(Ci(e))}function nr(e,t,n){(n!==i&&!Ga(e[t],n)||n===i&&!(t in e))&&sr(e,t,n)}function rr(e,t,n){var r=e[t];ke.call(e,t)&&Ga(r,n)&&(n!==i||t in e)||sr(e,t,n)}function ir(e,t){for(var n=e.length;n--;)if(Ga(e[n][0],t))return n;return-1}function or(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ar(e,t){return e&&Fi(t,Us(t),e)}function sr(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function cr(e,t){for(var n=-1,o=t.length,a=r(o),s=null==e;++n<o;)a[n]=s?i:Ls(e,t[n]);return a}function lr(e,t,n){return e==e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function ur(e,t,n,r,o,a){var s,c=1&t,l=2&t,u=4&t;if(n&&(s=o?n(e,r,o,a):n(e)),s!==i)return s;if(!rs(e))return e;var h=Xa(e);if(h){if(s=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&ke.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Ci(e,s)}else{var d=vo(e),f=d==A||d==T;if(qa(e))return Mi(e,c);if(d==S||d==_||f&&!o){if(s=l||f?{}:yo(e),!c)return l?function(e,t){return Fi(e,go(e),t)}(e,function(e,t){return e&&Fi(t,Os(t),e)}(s,e)):function(e,t){return Fi(e,mo(e),t)}(e,ar(s,e))}else{if(!st[d])return o?e:{};s=function(e,t,n){var r=e.constructor;switch(t){case U:return Ei(e);case b:case x:return new r(+e);case O:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case k:case I:case B:case N:case Z:case j:case z:case G:case V:return Si(e,n);case M:return new r;case E:case C:return new r(e);case L:return function(e){var t=new e.constructor(e.source,me.exec(e));return t.lastIndex=e.lastIndex,t}(e);case P:return new r;case F:return i=e,Zn?Se(Zn.call(i)):{}}var i}(e,d,c)}}a||(a=new qn);var p=a.get(e);if(p)return p;a.set(e,s),ls(e)?e.forEach((function(r){s.add(ur(r,t,n,r,e,a))})):os(e)&&e.forEach((function(r,i){s.set(i,ur(r,t,n,i,e,a))}));var m=h?i:(u?l?ao:oo:l?Os:Us)(e);return St(m||e,(function(r,i){m&&(r=e[i=r]),rr(s,i,ur(r,t,n,i,e,a))})),s}function hr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Se(e);r--;){var o=n[r],a=t[o],s=e[o];if(s===i&&!(o in e)||!a(s))return!1}return!0}function dr(e,t,n){if("function"!=typeof e)throw new Pe(o);return Uo((function(){e.apply(i,n)}),t)}function fr(e,t,n,r){var i=-1,o=Ct,a=!0,s=e.length,c=[],l=t.length;if(!s)return c;n&&(t=Dt(t,qt(n))),r?(o=Ft,a=!1):t.length>=200&&(o=$t,a=!1,t=new Kn(t));e:for(;++i<s;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else o(t,h,r)||c.push(u)}return c}zn.templateSettings={escape:J,evaluate:$,interpolate:ee,variable:"",imports:{_:zn}},zn.prototype=Vn.prototype,zn.prototype.constructor=zn,Wn.prototype=Gn(Vn.prototype),Wn.prototype.constructor=Wn,Hn.prototype=Gn(Vn.prototype),Hn.prototype.constructor=Hn,Xn.prototype.clear=function(){this.__data__=Cn?Cn(null):{},this.size=0},Xn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Xn.prototype.get=function(e){var t=this.__data__;if(Cn){var n=t[e];return n===a?i:n}return ke.call(t,e)?t[e]:i},Xn.prototype.has=function(e){var t=this.__data__;return Cn?t[e]!==i:ke.call(t,e)},Xn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Cn&&t===i?a:t,this},Qn.prototype.clear=function(){this.__data__=[],this.size=0},Qn.prototype.delete=function(e){var t=this.__data__,n=ir(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ke.call(t,n,1),--this.size,!0)},Qn.prototype.get=function(e){var t=this.__data__,n=ir(t,e);return n<0?i:t[n][1]},Qn.prototype.has=function(e){return ir(this.__data__,e)>-1},Qn.prototype.set=function(e,t){var n=this.__data__,r=ir(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Yn.prototype.clear=function(){this.size=0,this.__data__={hash:new Xn,map:new(Sn||Qn),string:new Xn}},Yn.prototype.delete=function(e){var t=ho(this,e).delete(e);return this.size-=t?1:0,t},Yn.prototype.get=function(e){return ho(this,e).get(e)},Yn.prototype.has=function(e){return ho(this,e).has(e)},Yn.prototype.set=function(e,t){var n=ho(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Kn.prototype.add=Kn.prototype.push=function(e){return this.__data__.set(e,a),this},Kn.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.clear=function(){this.__data__=new Qn,this.size=0},qn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},qn.prototype.get=function(e){return this.__data__.get(e)},qn.prototype.has=function(e){return this.__data__.has(e)},qn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Qn){var r=n.__data__;if(!Sn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Yn(r)}return n.set(e,t),this.size=n.size,this};var pr=Oi(wr),mr=Oi(Ar,!0);function gr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function vr(e,t,n){for(var r=-1,o=e.length;++r<o;){var a=e[r],s=t(a);if(null!=s&&(c===i?s==s&&!hs(s):n(s,c)))var c=s,l=a}return l}function _r(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function yr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?yr(s,t-1,n,r,i):Ut(i,s):r||(i[i.length]=s)}return i}var br=ki(),xr=ki(!0);function wr(e,t){return e&&br(e,t,Us)}function Ar(e,t){return e&&xr(e,t,Us)}function Tr(e,t){return Pt(t,(function(t){return es(e[t])}))}function Mr(e,t){for(var n=0,r=(t=xi(t,e)).length;null!=e&&n<r;)e=e[Zo(t[n++])];return n&&n==r?e:i}function Er(e,t,n){var r=t(e);return Xa(e)?r:Ut(r,n(e))}function Sr(e){return null==e?e===i?"[object Undefined]":"[object Null]":nt&&nt in Se(e)?function(e){var t=ke.call(e,nt),n=e[nt];try{e[nt]=i;var r=!0}catch(e){}var o=Ne.call(e);r&&(t?e[nt]=n:delete e[nt]);return o}(e):function(e){return Ne.call(e)}(e)}function Rr(e,t){return e>t}function Lr(e,t){return null!=e&&ke.call(e,t)}function Pr(e,t){return null!=e&&t in Se(e)}function Cr(e,t,n){for(var o=n?Ft:Ct,a=e[0].length,s=e.length,c=s,l=r(s),u=1/0,h=[];c--;){var d=e[c];c&&t&&(d=Dt(d,qt(t))),u=xn(d.length,u),l[c]=!n&&(t||a>=120&&d.length>=120)?new Kn(c&&d):i}d=e[0];var f=-1,p=l[0];e:for(;++f<a&&h.length<u;){var m=d[f],g=t?t(m):m;if(m=n||0!==m?m:0,!(p?$t(p,g):o(h,g,n))){for(c=s;--c;){var v=l[c];if(!(v?$t(v,g):o(e[c],g,n)))continue e}p&&p.push(g),h.push(m)}}return h}function Fr(e,t,n){var r=null==(e=Po(e,t=xi(t,e)))?e:e[Zo($o(t))];return null==r?i:Mt(r,e,n)}function Dr(e){return is(e)&&Sr(e)==_}function Ur(e,t,n,r,o){return e===t||(null==e||null==t||!is(e)&&!is(t)?e!=e&&t!=t:function(e,t,n,r,o,a){var s=Xa(e),c=Xa(t),l=s?y:vo(e),u=c?y:vo(t),h=(l=l==_?S:l)==S,d=(u=u==_?S:u)==S,f=l==u;if(f&&qa(e)){if(!qa(t))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new qn),s||ds(e)?ro(e,t,n,r,o,a):function(e,t,n,r,i,o,a){switch(n){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case U:return!(e.byteLength!=t.byteLength||!o(new We(e),new We(t)));case b:case x:case E:return Ga(+e,+t);case w:return e.name==t.name&&e.message==t.message;case L:case C:return e==t+"";case M:var s=cn;case P:var c=1&r;if(s||(s=hn),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var u=ro(s(e),s(t),r,i,o,a);return a.delete(e),u;case F:if(Zn)return Zn.call(e)==Zn.call(t)}return!1}(e,t,l,n,r,o,a);if(!(1&n)){var p=h&&ke.call(e,"__wrapped__"),m=d&&ke.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return a||(a=new qn),o(g,v,n,r,a)}}if(!f)return!1;return a||(a=new qn),function(e,t,n,r,o,a){var s=1&n,c=oo(e),l=c.length,u=oo(t).length;if(l!=u&&!s)return!1;var h=l;for(;h--;){var d=c[h];if(!(s?d in t:ke.call(t,d)))return!1}var f=a.get(e),p=a.get(t);if(f&&p)return f==t&&p==e;var m=!0;a.set(e,t),a.set(t,e);var g=s;for(;++h<l;){var v=e[d=c[h]],_=t[d];if(r)var y=s?r(_,v,d,t,e,a):r(v,_,d,e,t,a);if(!(y===i?v===_||o(v,_,n,r,a):y)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var b=e.constructor,x=t.constructor;b==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,n,r,o,a)}(e,t,n,r,Ur,o))}function Or(e,t,n,r){var o=n.length,a=o,s=!r;if(null==e)return!a;for(e=Se(e);o--;){var c=n[o];if(s&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<a;){var l=(c=n[o])[0],u=e[l],h=c[1];if(s&&c[2]){if(u===i&&!(l in e))return!1}else{var d=new qn;if(r)var f=r(u,h,l,e,t,d);if(!(f===i?Ur(h,u,3,r,d):f))return!1}}return!0}function kr(e){return!(!rs(e)||(t=e,Be&&Be in t))&&(es(e)?ze:_e).test(jo(e));var t}function Ir(e){return"function"==typeof e?e:null==e?ac:"object"==typeof e?Xa(e)?Gr(e[0],e[1]):zr(e):mc(e)}function Br(e){if(!Eo(e))return yn(e);var t=[];for(var n in Se(e))ke.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Nr(e){if(!rs(e))return function(e){var t=[];if(null!=e)for(var n in Se(e))t.push(n);return t}(e);var t=Eo(e),n=[];for(var r in e)("constructor"!=r||!t&&ke.call(e,r))&&n.push(r);return n}function Zr(e,t){return e<t}function jr(e,t){var n=-1,i=Ya(e)?r(e.length):[];return pr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function zr(e){var t=fo(e);return 1==t.length&&t[0][2]?Ro(t[0][0],t[0][1]):function(n){return n===e||Or(n,e,t)}}function Gr(e,t){return Ao(e)&&So(t)?Ro(Zo(e),t):function(n){var r=Ls(n,e);return r===i&&r===t?Ps(n,e):Ur(t,r,3)}}function Vr(e,t,n,r,o){e!==t&&br(t,(function(a,s){if(o||(o=new qn),rs(a))!function(e,t,n,r,o,a,s){var c=Fo(e,n),l=Fo(t,n),u=s.get(l);if(u)return void nr(e,n,u);var h=a?a(c,l,n+"",e,t,s):i,d=h===i;if(d){var f=Xa(l),p=!f&&qa(l),m=!f&&!p&&ds(l);h=l,f||p||m?Xa(c)?h=c:Ka(c)?h=Ci(c):p?(d=!1,h=Mi(l,!0)):m?(d=!1,h=Si(l,!0)):h=[]:ss(l)||Ha(l)?(h=c,Ha(c)?h=bs(c):rs(c)&&!es(c)||(h=yo(l))):d=!1}d&&(s.set(l,h),o(h,l,r,a,s),s.delete(l));nr(e,n,h)}(e,t,s,n,Vr,r,o);else{var c=r?r(Fo(e,s),a,s+"",e,t,o):i;c===i&&(c=a),nr(e,s,c)}}),Os)}function Wr(e,t){var n=e.length;if(n)return xo(t+=t<0?n:0,n)?e[t]:i}function Hr(e,t,n){t=t.length?Dt(t,(function(e){return Xa(e)?function(t){return Mr(t,1===e.length?e[0]:e)}:e})):[ac];var r=-1;t=Dt(t,qt(uo()));var i=jr(e,(function(e,n,i){var o=Dt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;for(;++r<a;){var c=Ri(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function Xr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=Mr(e,a);n(s,a)&&ti(o,xi(a,e),s)}return o}function Qr(e,t,n,r){var i=r?zt:jt,o=-1,a=t.length,s=e;for(e===t&&(t=Ci(t)),n&&(s=Dt(e,qt(n)));++o<a;)for(var c=0,l=t[o],u=n?n(l):l;(c=i(s,u,c,r))>-1;)s!==e&&Ke.call(s,c,1),Ke.call(e,c,1);return e}function Yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;xo(i)?Ke.call(e,i,1):fi(e,i)}}return e}function Kr(e,t){return e+vt(Tn()*(t-e+1))}function qr(e,t){var n="";if(!e||t<1||t>p)return n;do{t%2&&(n+=e),(t=vt(t/2))&&(e+=e)}while(t);return n}function Jr(e,t){return Oo(Lo(e,t,ac),e+"")}function $r(e){return $n(Gs(e))}function ei(e,t){var n=Gs(e);return Bo(n,lr(t,0,n.length))}function ti(e,t,n,r){if(!rs(e))return e;for(var o=-1,a=(t=xi(t,e)).length,s=a-1,c=e;null!=c&&++o<a;){var l=Zo(t[o]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=s){var h=c[l];(u=r?r(h,l,c):i)===i&&(u=rs(h)?h:xo(t[o+1])?[]:{})}rr(c,l,u),c=c[l]}return e}var ni=Fn?function(e,t){return Fn.set(e,t),e}:ac,ri=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:rc(t),writable:!0})}:ac;function ii(e){return Bo(Gs(e))}function oi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!hs(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return ci(e,t,ac,n)}function ci(e,t,n,r){var o=0,a=null==e?0:e.length;if(0===a)return 0;for(var s=(t=n(t))!=t,c=null===t,l=hs(t),u=t===i;o<a;){var h=vt((o+a)/2),d=n(e[h]),f=d!==i,p=null===d,m=d==d,g=hs(d);if(s)var v=r||m;else v=u?m&&(r||f):c?m&&f&&(r||!p):l?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=t:d<t);v?o=h+1:a=h}return xn(a,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],s=t?t(a):a;if(!n||!Ga(s,c)){var c=s;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:hs(e)?m:+e}function hi(e){if("string"==typeof e)return e;if(Xa(e))return Dt(e,hi)+"";if(hs(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function di(e,t,n){var r=-1,i=Ct,o=e.length,a=!0,s=[],c=s;if(n)a=!1,i=Ft;else if(o>=200){var l=t?null:qi(e);if(l)return hn(l);a=!1,i=$t,c=new Kn}else c=t?[]:s;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),s.push(u)}else i(c,h,n)||(c!==s&&c.push(h),s.push(u))}return s}function fi(e,t){return null==(e=Po(e,t=xi(t,e)))||delete e[Zo($o(t))]}function pi(e,t,n,r){return ti(e,t,n(Mr(e,t)),r)}function mi(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?oi(e,r?0:o,r?o+1:i):oi(e,r?o+1:0,r?i:o)}function gi(e,t){var n=e;return n instanceof Hn&&(n=n.value()),Ot(t,(function(e,t){return t.func.apply(t.thisArg,Ut([e],t.args))}),n)}function vi(e,t,n){var i=e.length;if(i<2)return i?di(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=e[o],c=-1;++c<i;)c!=o&&(a[o]=fr(a[o]||s,e[c],t,n));return di(yr(a,1),t,n)}function _i(e,t,n){for(var r=-1,o=e.length,a=t.length,s={};++r<o;){var c=r<a?t[r]:i;n(s,e[r],c)}return s}function yi(e){return Ka(e)?e:[]}function bi(e){return"function"==typeof e?e:ac}function xi(e,t){return Xa(e)?e:Ao(e,t)?[e]:No(xs(e))}var wi=Jr;function Ai(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:oi(e,t,n)}var Ti=ht||function(e){return ft.clearTimeout(e)};function Mi(e,t){if(t)return e.slice();var n=e.length,r=He?He(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Si(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ri(e,t){if(e!==t){var n=e!==i,r=null===e,o=e==e,a=hs(e),s=t!==i,c=null===t,l=t==t,u=hs(t);if(!c&&!u&&!a&&e>t||a&&s&&l&&!c&&!u||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!u&&e<t||u&&n&&o&&!r&&!a||c&&n&&o||!s&&o||!l)return-1}return 0}function Li(e,t,n,i){for(var o=-1,a=e.length,s=n.length,c=-1,l=t.length,u=bn(a-s,0),h=r(l+u),d=!i;++c<l;)h[c]=t[c];for(;++o<s;)(d||o<a)&&(h[n[o]]=e[o]);for(;u--;)h[c++]=e[o++];return h}function Pi(e,t,n,i){for(var o=-1,a=e.length,s=-1,c=n.length,l=-1,u=t.length,h=bn(a-c,0),d=r(h+u),f=!i;++o<h;)d[o]=e[o];for(var p=o;++l<u;)d[p+l]=t[l];for(;++s<c;)(f||o<a)&&(d[p+n[s]]=e[o++]);return d}function Ci(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Fi(e,t,n,r){var o=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],l=r?r(n[c],e[c],c,n,e):i;l===i&&(l=e[c]),o?sr(n,c,l):rr(n,c,l)}return n}function Di(e,t){return function(n,r){var i=Xa(n)?Et:or,o=t?t():{};return i(n,e,uo(r,2),o)}}function Ui(e){return Jr((function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=e.length>3&&"function"==typeof a?(o--,a):i,s&&wo(n[0],n[1],s)&&(a=o<3?i:a,o=1),t=Se(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t}))}function Oi(e,t){return function(n,r){if(null==n)return n;if(!Ya(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Se(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ki(e){return function(t,n,r){for(var i=-1,o=Se(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}function Ii(e){return function(t){var n=sn(t=xs(t))?pn(t):i,r=n?n[0]:t.charAt(0),o=n?Ai(n,1).join(""):t.slice(1);return r[e]()+o}}function Bi(e){return function(t){return Ot(ec(Hs(t).replace(Je,"")),e,"")}}function Ni(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Gn(e.prototype),r=e.apply(n,t);return rs(r)?r:n}}function Zi(e){return function(t,n,r){var o=Se(t);if(!Ya(t)){var a=uo(n,3);t=Us(t),n=function(e){return a(o[e],e,o)}}var s=e(t,n,r);return s>-1?o[a?t[s]:s]:i}}function ji(e){return io((function(t){var n=t.length,r=n,a=Wn.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new Pe(o);if(a&&!c&&"wrapper"==co(s))var c=new Wn([],!0)}for(r=c?r:n;++r<n;){var l=co(s=t[r]),u="wrapper"==l?so(s):i;c=u&&To(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?c[co(u[0])].apply(c,u[3]):1==s.length&&To(s)?c[l]():c.thru(s)}return function(){var e=arguments,r=e[0];if(c&&1==e.length&&Xa(r))return c.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function zi(e,t,n,o,a,s,c,l,u,d){var f=t&h,p=1&t,m=2&t,g=24&t,v=512&t,_=m?i:Ni(e);return function i(){for(var h=arguments.length,y=r(h),b=h;b--;)y[b]=arguments[b];if(g)var x=lo(i),w=nn(y,x);if(o&&(y=Li(y,o,a,g)),s&&(y=Pi(y,s,c,g)),h-=w,g&&h<d){var A=un(y,x);return Yi(e,t,zi,i.placeholder,n,y,A,l,u,d-h)}var T=p?n:this,M=m?T[e]:e;return h=y.length,l?y=Co(y,l):v&&h>1&&y.reverse(),f&&u<h&&(y.length=u),this&&this!==ft&&this instanceof i&&(M=_||Ni(M)),M.apply(T,y)}}function Gi(e,t){return function(n,r){return function(e,t,n,r){return wr(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Vi(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=hi(n),r=hi(r)):(n=ui(n),r=ui(r)),o=e(n,r)}return o}}function Wi(e){return io((function(t){return t=Dt(t,qt(uo())),Jr((function(n){var r=this;return e(t,(function(e){return Mt(e,r,n)}))}))}))}function Hi(e,t){var n=(t=t===i?" ":hi(t)).length;if(n<2)return n?qr(t,e):t;var r=qr(t,mt(e/fn(t)));return sn(t)?Ai(pn(r),0,e).join(""):r.slice(0,e)}function Xi(e){return function(t,n,o){return o&&"number"!=typeof o&&wo(t,n,o)&&(n=o=i),t=gs(t),n===i?(n=t,t=0):n=gs(n),function(e,t,n,i){for(var o=-1,a=bn(mt((t-e)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=e,e+=n;return s}(t,n,o=o===i?t<n?1:-1:gs(o),e)}}function Qi(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=ys(t),n=ys(n)),e(t,n)}}function Yi(e,t,n,r,o,a,s,c,h,d){var f=8&t;t|=f?l:u,4&(t&=~(f?u:l))||(t&=-4);var p=[e,t,o,f?a:i,f?s:i,f?i:a,f?i:s,c,h,d],m=n.apply(i,p);return To(e)&&Do(m,p),m.placeholder=r,ko(m,e,t)}function Ki(e){var t=Ee[e];return function(e,n){if(e=ys(e),(n=null==n?0:xn(vs(n),292))&&Ht(e)){var r=(xs(e)+"e").split("e");return+((r=(xs(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var qi=Ln&&1/hn(new Ln([,-0]))[1]==f?function(e){return new Ln(e)}:hc;function Ji(e){return function(t){var n=vo(t);return n==M?cn(t):n==P?dn(t):function(e,t){return Dt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,n,a,f,p,m,g){var v=2&t;if(!v&&"function"!=typeof e)throw new Pe(o);var _=a?a.length:0;if(_||(t&=-97,a=f=i),m=m===i?m:bn(vs(m),0),g=g===i?g:vs(g),_-=f?f.length:0,t&u){var y=a,b=f;a=f=i}var x=v?i:so(e),w=[e,t,n,a,f,y,b,p,m,g];if(x&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==h&&8==n||r==h&&n==d&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Li(l,c,t[4]):c,e[4]=l?un(e[3],s):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Pi(l,c,t[6]):c,e[6]=l?un(e[5],s):t[6]);(c=t[7])&&(e[7]=c);r&h&&(e[8]=null==e[8]?t[8]:xn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(w,x),e=w[0],t=w[1],n=w[2],a=w[3],f=w[4],!(g=w[9]=w[9]===i?v?0:e.length:bn(w[9]-_,0))&&24&t&&(t&=-25),t&&1!=t)A=8==t||t==c?function(e,t,n){var o=Ni(e);return function a(){for(var s=arguments.length,c=r(s),l=s,u=lo(a);l--;)c[l]=arguments[l];var h=s<3&&c[0]!==u&&c[s-1]!==u?[]:un(c,u);return(s-=h.length)<n?Yi(e,t,zi,a.placeholder,i,c,h,i,i,n-s):Mt(this&&this!==ft&&this instanceof a?o:e,this,c)}}(e,t,g):t!=l&&33!=t||f.length?zi.apply(i,w):function(e,t,n,i){var o=1&t,a=Ni(e);return function t(){for(var s=-1,c=arguments.length,l=-1,u=i.length,h=r(u+c),d=this&&this!==ft&&this instanceof t?a:e;++l<u;)h[l]=i[l];for(;c--;)h[l++]=arguments[++s];return Mt(d,o?n:this,h)}}(e,t,n,a);else var A=function(e,t,n){var r=1&t,i=Ni(e);return function t(){return(this&&this!==ft&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return ko((x?ni:Do)(A,w),e,t)}function eo(e,t,n,r){return e===i||Ga(e,De[n])&&!ke.call(r,n)?t:e}function to(e,t,n,r,o,a){return rs(e)&&rs(t)&&(a.set(t,e),Vr(e,t,i,to,a),a.delete(t)),e}function no(e){return ss(e)?i:e}function ro(e,t,n,r,o,a){var s=1&n,c=e.length,l=t.length;if(c!=l&&!(s&&l>c))return!1;var u=a.get(e),h=a.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=2&n?new Kn:i;for(a.set(e,t),a.set(t,e);++d<c;){var m=e[d],g=t[d];if(r)var v=s?r(g,m,d,t,e,a):r(m,g,d,e,t,a);if(v!==i){if(v)continue;f=!1;break}if(p){if(!It(t,(function(e,t){if(!$t(p,t)&&(m===e||o(m,e,n,r,a)))return p.push(t)}))){f=!1;break}}else if(m!==g&&!o(m,g,n,r,a)){f=!1;break}}return a.delete(e),a.delete(t),f}function io(e){return Oo(Lo(e,i,Qo),e+"")}function oo(e){return Er(e,Us,mo)}function ao(e){return Er(e,Os,go)}var so=Fn?function(e){return Fn.get(e)}:hc;function co(e){for(var t=e.name+"",n=Dn[t],r=ke.call(Dn,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function lo(e){return(ke.call(zn,"placeholder")?zn:e).placeholder}function uo(){var e=zn.iteratee||sc;return e=e===sc?Ir:e,arguments.length?e(arguments[0],arguments[1]):e}function ho(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function fo(e){for(var t=Us(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,So(i)]}return t}function po(e,t){var n=function(e,t){return null==e?i:e[t]}(e,t);return kr(n)?n:i}var mo=_t?function(e){return null==e?[]:(e=Se(e),Pt(_t(e),(function(t){return Ye.call(e,t)})))}:_c,go=_t?function(e){for(var t=[];e;)Ut(t,mo(e)),e=Xe(e);return t}:_c,vo=Sr;function _o(e,t,n){for(var r=-1,i=(t=xi(t,e)).length,o=!1;++r<i;){var a=Zo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&ns(i)&&xo(a,i)&&(Xa(e)||Ha(e))}function yo(e){return"function"!=typeof e.constructor||Eo(e)?{}:Gn(Xe(e))}function bo(e){return Xa(e)||Ha(e)||!!(qe&&e&&e[qe])}function xo(e,t){var n=typeof e;return!!(t=null==t?p:t)&&("number"==n||"symbol"!=n&&be.test(e))&&e>-1&&e%1==0&&e<t}function wo(e,t,n){if(!rs(n))return!1;var r=typeof t;return!!("number"==r?Ya(n)&&xo(t,n.length):"string"==r&&t in n)&&Ga(n[t],e)}function Ao(e,t){if(Xa(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!hs(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Se(t))}function To(e){var t=co(e),n=zn[t];if("function"!=typeof n||!(t in Hn.prototype))return!1;if(e===n)return!0;var r=so(n);return!!r&&e===r[0]}(En&&vo(new En(new ArrayBuffer(1)))!=O||Sn&&vo(new Sn)!=M||Rn&&vo(Rn.resolve())!=R||Ln&&vo(new Ln)!=P||Pn&&vo(new Pn)!=D)&&(vo=function(e){var t=Sr(e),n=t==S?e.constructor:i,r=n?jo(n):"";if(r)switch(r){case Un:return O;case On:return M;case kn:return R;case In:return P;case Bn:return D}return t});var Mo=Ue?es:yc;function Eo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||De)}function So(e){return e==e&&!rs(e)}function Ro(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in Se(n)))}}function Lo(e,t,n){return t=bn(t===i?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=bn(i.length-t,0),s=r(a);++o<a;)s[o]=i[t+o];o=-1;for(var c=r(t+1);++o<t;)c[o]=i[o];return c[t]=n(s),Mt(e,this,c)}}function Po(e,t){return t.length<2?e:Mr(e,oi(t,0,-1))}function Co(e,t){for(var n=e.length,r=xn(t.length,n),o=Ci(e);r--;){var a=t[r];e[r]=xo(a,n)?o[a]:i}return e}function Fo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Do=Io(ni),Uo=pt||function(e,t){return ft.setTimeout(e,t)},Oo=Io(ri);function ko(e,t,n){var r=t+"";return Oo(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return St(v,(function(n){var r="_."+n[0];t&n[1]&&!Ct(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ue):[]}(r),n)))}function Io(e){var t=0,n=0;return function(){var r=wn(),o=16-(r-n);if(n=r,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Bo(e,t){var n=-1,r=e.length,o=r-1;for(t=t===i?r:t;++n<t;){var a=Kr(n,o),s=e[a];e[a]=e[n],e[n]=s}return e.length=t,e}var No=function(e){var t=Ia(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,n,r,i){t.push(r?i.replace(fe,"$1"):n||e)})),t}));function Zo(e){if("string"==typeof e||hs(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return Oe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function zo(e){if(e instanceof Hn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Ci(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Go=Jr((function(e,t){return Ka(e)?fr(e,yr(t,1,Ka,!0)):[]})),Vo=Jr((function(e,t){var n=$o(t);return Ka(n)&&(n=i),Ka(e)?fr(e,yr(t,1,Ka,!0),uo(n,2)):[]})),Wo=Jr((function(e,t){var n=$o(t);return Ka(n)&&(n=i),Ka(e)?fr(e,yr(t,1,Ka,!0),i,n):[]}));function Ho(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),Zt(e,uo(t,3),i)}function Xo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=vs(n),o=n<0?bn(r+o,0):xn(o,r-1)),Zt(e,uo(t,3),o,!0)}function Qo(e){return(null==e?0:e.length)?yr(e,1):[]}function Yo(e){return e&&e.length?e[0]:i}var Ko=Jr((function(e){var t=Dt(e,yi);return t.length&&t[0]===e[0]?Cr(t):[]})),qo=Jr((function(e){var t=$o(e),n=Dt(e,yi);return t===$o(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Cr(n,uo(t,2)):[]})),Jo=Jr((function(e){var t=$o(e),n=Dt(e,yi);return(t="function"==typeof t?t:i)&&n.pop(),n.length&&n[0]===e[0]?Cr(n,i,t):[]}));function $o(e){var t=null==e?0:e.length;return t?e[t-1]:i}var ea=Jr(ta);function ta(e,t){return e&&e.length&&t&&t.length?Qr(e,t):e}var na=io((function(e,t){var n=null==e?0:e.length,r=cr(e,t);return Yr(e,Dt(t,(function(e){return xo(e,n)?+e:e})).sort(Ri)),r}));function ra(e){return null==e?e:Mn.call(e)}var ia=Jr((function(e){return di(yr(e,1,Ka,!0))})),oa=Jr((function(e){var t=$o(e);return Ka(t)&&(t=i),di(yr(e,1,Ka,!0),uo(t,2))})),aa=Jr((function(e){var t=$o(e);return t="function"==typeof t?t:i,di(yr(e,1,Ka,!0),i,t)}));function sa(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(Ka(e))return t=bn(e.length,t),!0})),Yt(t,(function(t){return Dt(e,Wt(t))}))}function ca(e,t){if(!e||!e.length)return[];var n=sa(e);return null==t?n:Dt(n,(function(e){return Mt(t,i,e)}))}var la=Jr((function(e,t){return Ka(e)?fr(e,t):[]})),ua=Jr((function(e){return vi(Pt(e,Ka))})),ha=Jr((function(e){var t=$o(e);return Ka(t)&&(t=i),vi(Pt(e,Ka),uo(t,2))})),da=Jr((function(e){var t=$o(e);return t="function"==typeof t?t:i,vi(Pt(e,Ka),i,t)})),fa=Jr(sa);var pa=Jr((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,ca(e,n)}));function ma(e){var t=zn(e);return t.__chain__=!0,t}function ga(e,t){return t(e)}var va=io((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return cr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Hn&&xo(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:ga,args:[o],thisArg:i}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));var _a=Di((function(e,t,n){ke.call(e,n)?++e[n]:sr(e,n,1)}));var ya=Zi(Ho),ba=Zi(Xo);function xa(e,t){return(Xa(e)?St:pr)(e,uo(t,3))}function wa(e,t){return(Xa(e)?Rt:mr)(e,uo(t,3))}var Aa=Di((function(e,t,n){ke.call(e,n)?e[n].push(t):sr(e,n,[t])}));var Ta=Jr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ya(e)?r(e.length):[];return pr(e,(function(e){a[++i]=o?Mt(t,e,n):Fr(e,t,n)})),a})),Ma=Di((function(e,t,n){sr(e,n,t)}));function Ea(e,t){return(Xa(e)?Dt:jr)(e,uo(t,3))}var Sa=Di((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ra=Jr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&wo(e,t[0],t[1])?t=[]:n>2&&wo(t[0],t[1],t[2])&&(t=[t[0]]),Hr(e,yr(t,1),[])})),La=dt||function(){return ft.Date.now()};function Pa(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,$i(e,h,i,i,i,i,t)}function Ca(e,t){var n;if("function"!=typeof t)throw new Pe(o);return e=vs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Fa=Jr((function(e,t,n){var r=1;if(n.length){var i=un(n,lo(Fa));r|=l}return $i(e,r,t,n,i)})),Da=Jr((function(e,t,n){var r=3;if(n.length){var i=un(n,lo(Da));r|=l}return $i(t,r,e,n,i)}));function Ua(e,t,n){var r,a,s,c,l,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new Pe(o);function m(t){var n=r,o=a;return r=a=i,h=t,c=e.apply(o,n)}function g(e){return h=e,l=Uo(_,t),d?m(e):c}function v(e){var n=e-u;return u===i||n>=t||n<0||f&&e-h>=s}function _(){var e=La();if(v(e))return y(e);l=Uo(_,function(e){var n=t-(e-u);return f?xn(n,s-(e-h)):n}(e))}function y(e){return l=i,p&&r?m(e):(r=a=i,c)}function b(){var e=La(),n=v(e);if(r=arguments,a=this,u=e,n){if(l===i)return g(u);if(f)return Ti(l),l=Uo(_,t),m(u)}return l===i&&(l=Uo(_,t)),c}return t=ys(t)||0,rs(n)&&(d=!!n.leading,s=(f="maxWait"in n)?bn(ys(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),b.cancel=function(){l!==i&&Ti(l),h=0,r=u=a=l=i},b.flush=function(){return l===i?c:y(La())},b}var Oa=Jr((function(e,t){return dr(e,1,t)})),ka=Jr((function(e,t,n){return dr(e,ys(t)||0,n)}));function Ia(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(o);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ia.Cache||Yn),n}function Ba(e){if("function"!=typeof e)throw new Pe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ia.Cache=Yn;var Na=wi((function(e,t){var n=(t=1==t.length&&Xa(t[0])?Dt(t[0],qt(uo())):Dt(yr(t,1),qt(uo()))).length;return Jr((function(r){for(var i=-1,o=xn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Mt(e,this,r)}))})),Za=Jr((function(e,t){var n=un(t,lo(Za));return $i(e,l,i,t,n)})),ja=Jr((function(e,t){var n=un(t,lo(ja));return $i(e,u,i,t,n)})),za=io((function(e,t){return $i(e,d,i,i,i,t)}));function Ga(e,t){return e===t||e!=e&&t!=t}var Va=Qi(Rr),Wa=Qi((function(e,t){return e>=t})),Ha=Dr(function(){return arguments}())?Dr:function(e){return is(e)&&ke.call(e,"callee")&&!Ye.call(e,"callee")},Xa=r.isArray,Qa=yt?qt(yt):function(e){return is(e)&&Sr(e)==U};function Ya(e){return null!=e&&ns(e.length)&&!es(e)}function Ka(e){return is(e)&&Ya(e)}var qa=Bt||yc,Ja=bt?qt(bt):function(e){return is(e)&&Sr(e)==x};function $a(e){if(!is(e))return!1;var t=Sr(e);return t==w||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ss(e)}function es(e){if(!rs(e))return!1;var t=Sr(e);return t==A||t==T||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ts(e){return"number"==typeof e&&e==vs(e)}function ns(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=p}function rs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function is(e){return null!=e&&"object"==typeof e}var os=xt?qt(xt):function(e){return is(e)&&vo(e)==M};function as(e){return"number"==typeof e||is(e)&&Sr(e)==E}function ss(e){if(!is(e)||Sr(e)!=S)return!1;var t=Xe(e);if(null===t)return!0;var n=ke.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Oe.call(n)==Ze}var cs=wt?qt(wt):function(e){return is(e)&&Sr(e)==L};var ls=At?qt(At):function(e){return is(e)&&vo(e)==P};function us(e){return"string"==typeof e||!Xa(e)&&is(e)&&Sr(e)==C}function hs(e){return"symbol"==typeof e||is(e)&&Sr(e)==F}var ds=Tt?qt(Tt):function(e){return is(e)&&ns(e.length)&&!!at[Sr(e)]};var fs=Qi(Zr),ps=Qi((function(e,t){return e<=t}));function ms(e){if(!e)return[];if(Ya(e))return us(e)?pn(e):Ci(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=vo(e);return(t==M?cn:t==P?hn:Gs)(e)}function gs(e){return e?(e=ys(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function vs(e){var t=gs(e),n=t%1;return t==t?n?t-n:t:0}function _s(e){return e?lr(vs(e),0,g):0}function ys(e){if("number"==typeof e)return e;if(hs(e))return m;if(rs(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=rs(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Kt(e);var n=ve.test(e);return n||ye.test(e)?ut(e.slice(2),n?2:8):ge.test(e)?m:+e}function bs(e){return Fi(e,Os(e))}function xs(e){return null==e?"":hi(e)}var ws=Ui((function(e,t){if(Eo(t)||Ya(t))Fi(t,Us(t),e);else for(var n in t)ke.call(t,n)&&rr(e,n,t[n])})),As=Ui((function(e,t){Fi(t,Os(t),e)})),Ts=Ui((function(e,t,n,r){Fi(t,Os(t),e,r)})),Ms=Ui((function(e,t,n,r){Fi(t,Us(t),e,r)})),Es=io(cr);var Ss=Jr((function(e,t){e=Se(e);var n=-1,r=t.length,o=r>2?t[2]:i;for(o&&wo(t[0],t[1],o)&&(r=1);++n<r;)for(var a=t[n],s=Os(a),c=-1,l=s.length;++c<l;){var u=s[c],h=e[u];(h===i||Ga(h,De[u])&&!ke.call(e,u))&&(e[u]=a[u])}return e})),Rs=Jr((function(e){return e.push(i,to),Mt(Is,i,e)}));function Ls(e,t,n){var r=null==e?i:Mr(e,t);return r===i?n:r}function Ps(e,t){return null!=e&&_o(e,t,Pr)}var Cs=Gi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),e[t]=n}),rc(ac)),Fs=Gi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Ne.call(t)),ke.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ds=Jr(Fr);function Us(e){return Ya(e)?Jn(e):Br(e)}function Os(e){return Ya(e)?Jn(e,!0):Nr(e)}var ks=Ui((function(e,t,n){Vr(e,t,n)})),Is=Ui((function(e,t,n,r){Vr(e,t,n,r)})),Bs=io((function(e,t){var n={};if(null==e)return n;var r=!1;t=Dt(t,(function(t){return t=xi(t,e),r||(r=t.length>1),t})),Fi(e,ao(e),n),r&&(n=ur(n,7,no));for(var i=t.length;i--;)fi(n,t[i]);return n}));var Ns=io((function(e,t){return null==e?{}:function(e,t){return Xr(e,t,(function(t,n){return Ps(e,n)}))}(e,t)}));function Zs(e,t){if(null==e)return{};var n=Dt(ao(e),(function(e){return[e]}));return t=uo(t),Xr(e,n,(function(e,n){return t(e,n[0])}))}var js=Ji(Us),zs=Ji(Os);function Gs(e){return null==e?[]:Jt(e,Us(e))}var Vs=Bi((function(e,t,n){return t=t.toLowerCase(),e+(n?Ws(t):t)}));function Ws(e){return $s(xs(e).toLowerCase())}function Hs(e){return(e=xs(e))&&e.replace(xe,rn).replace($e,"")}var Xs=Bi((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Qs=Bi((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ys=Ii("toLowerCase");var Ks=Bi((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var qs=Bi((function(e,t,n){return e+(n?" ":"")+$s(t)}));var Js=Bi((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),$s=Ii("toUpperCase");function ec(e,t,n){return e=xs(e),(t=n?i:t)===i?function(e){return rt.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(he)||[]}(e):e.match(t)||[]}var tc=Jr((function(e,t){try{return Mt(e,i,t)}catch(e){return $a(e)?e:new Te(e)}})),nc=io((function(e,t){return St(t,(function(t){t=Zo(t),sr(e,t,Fa(e[t],e))})),e}));function rc(e){return function(){return e}}var ic=ji(),oc=ji(!0);function ac(e){return e}function sc(e){return Ir("function"==typeof e?e:ur(e,1))}var cc=Jr((function(e,t){return function(n){return Fr(n,e,t)}})),lc=Jr((function(e,t){return function(n){return Fr(e,n,t)}}));function uc(e,t,n){var r=Us(t),i=Tr(t,r);null!=n||rs(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Tr(t,Us(t)));var o=!(rs(n)&&"chain"in n&&!n.chain),a=es(e);return St(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=Ci(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Ut([this.value()],arguments))})})),e}function hc(){}var dc=Wi(Dt),fc=Wi(Lt),pc=Wi(It);function mc(e){return Ao(e)?Wt(Zo(e)):function(e){return function(t){return Mr(t,e)}}(e)}var gc=Xi(),vc=Xi(!0);function _c(){return[]}function yc(){return!1}var bc=Vi((function(e,t){return e+t}),0),xc=Ki("ceil"),wc=Vi((function(e,t){return e/t}),1),Ac=Ki("floor");var Tc,Mc=Vi((function(e,t){return e*t}),1),Ec=Ki("round"),Sc=Vi((function(e,t){return e-t}),0);return zn.after=function(e,t){if("function"!=typeof t)throw new Pe(o);return e=vs(e),function(){if(--e<1)return t.apply(this,arguments)}},zn.ary=Pa,zn.assign=ws,zn.assignIn=As,zn.assignInWith=Ts,zn.assignWith=Ms,zn.at=Es,zn.before=Ca,zn.bind=Fa,zn.bindAll=nc,zn.bindKey=Da,zn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Xa(e)?e:[e]},zn.chain=ma,zn.chunk=function(e,t,n){t=(n?wo(e,t,n):t===i)?1:bn(vs(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var a=0,s=0,c=r(mt(o/t));a<o;)c[s++]=oi(e,a,a+=t);return c},zn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},zn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Ut(Xa(n)?Ci(n):[n],yr(t,1))},zn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Dt(e,(function(e){if("function"!=typeof e[1])throw new Pe(o);return[n(e[0]),e[1]]})):[],Jr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Mt(i[0],this,n))return Mt(i[1],this,n)}}))},zn.conforms=function(e){return function(e){var t=Us(e);return function(n){return hr(n,e,t)}}(ur(e,1))},zn.constant=rc,zn.countBy=_a,zn.create=function(e,t){var n=Gn(e);return null==t?n:ar(n,t)},zn.curry=function e(t,n,r){var o=$i(t,8,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},zn.curryRight=function e(t,n,r){var o=$i(t,c,i,i,i,i,i,n=r?i:n);return o.placeholder=e.placeholder,o},zn.debounce=Ua,zn.defaults=Ss,zn.defaultsDeep=Rs,zn.defer=Oa,zn.delay=ka,zn.difference=Go,zn.differenceBy=Vo,zn.differenceWith=Wo,zn.drop=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=n||t===i?1:vs(t))<0?0:t,r):[]},zn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,0,(t=r-(t=n||t===i?1:vs(t)))<0?0:t):[]},zn.dropRightWhile=function(e,t){return e&&e.length?mi(e,uo(t,3),!0,!0):[]},zn.dropWhile=function(e,t){return e&&e.length?mi(e,uo(t,3),!0):[]},zn.fill=function(e,t,n,r){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&wo(e,t,n)&&(n=0,r=o),function(e,t,n,r){var o=e.length;for((n=vs(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:vs(r))<0&&(r+=o),r=n>r?0:_s(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},zn.filter=function(e,t){return(Xa(e)?Pt:_r)(e,uo(t,3))},zn.flatMap=function(e,t){return yr(Ea(e,t),1)},zn.flatMapDeep=function(e,t){return yr(Ea(e,t),f)},zn.flatMapDepth=function(e,t,n){return n=n===i?1:vs(n),yr(Ea(e,t),n)},zn.flatten=Qo,zn.flattenDeep=function(e){return(null==e?0:e.length)?yr(e,f):[]},zn.flattenDepth=function(e,t){return(null==e?0:e.length)?yr(e,t=t===i?1:vs(t)):[]},zn.flip=function(e){return $i(e,512)},zn.flow=ic,zn.flowRight=oc,zn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},zn.functions=function(e){return null==e?[]:Tr(e,Us(e))},zn.functionsIn=function(e){return null==e?[]:Tr(e,Os(e))},zn.groupBy=Aa,zn.initial=function(e){return(null==e?0:e.length)?oi(e,0,-1):[]},zn.intersection=Ko,zn.intersectionBy=qo,zn.intersectionWith=Jo,zn.invert=Cs,zn.invertBy=Fs,zn.invokeMap=Ta,zn.iteratee=sc,zn.keyBy=Ma,zn.keys=Us,zn.keysIn=Os,zn.map=Ea,zn.mapKeys=function(e,t){var n={};return t=uo(t,3),wr(e,(function(e,r,i){sr(n,t(e,r,i),e)})),n},zn.mapValues=function(e,t){var n={};return t=uo(t,3),wr(e,(function(e,r,i){sr(n,r,t(e,r,i))})),n},zn.matches=function(e){return zr(ur(e,1))},zn.matchesProperty=function(e,t){return Gr(e,ur(t,1))},zn.memoize=Ia,zn.merge=ks,zn.mergeWith=Is,zn.method=cc,zn.methodOf=lc,zn.mixin=uc,zn.negate=Ba,zn.nthArg=function(e){return e=vs(e),Jr((function(t){return Wr(t,e)}))},zn.omit=Bs,zn.omitBy=function(e,t){return Zs(e,Ba(uo(t)))},zn.once=function(e){return Ca(2,e)},zn.orderBy=function(e,t,n,r){return null==e?[]:(Xa(t)||(t=null==t?[]:[t]),Xa(n=r?i:n)||(n=null==n?[]:[n]),Hr(e,t,n))},zn.over=dc,zn.overArgs=Na,zn.overEvery=fc,zn.overSome=pc,zn.partial=Za,zn.partialRight=ja,zn.partition=Sa,zn.pick=Ns,zn.pickBy=Zs,zn.property=mc,zn.propertyOf=function(e){return function(t){return null==e?i:Mr(e,t)}},zn.pull=ea,zn.pullAll=ta,zn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Qr(e,t,uo(n,2)):e},zn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Qr(e,t,i,n):e},zn.pullAt=na,zn.range=gc,zn.rangeRight=vc,zn.rearg=za,zn.reject=function(e,t){return(Xa(e)?Pt:_r)(e,Ba(uo(t,3)))},zn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Yr(e,i),n},zn.rest=function(e,t){if("function"!=typeof e)throw new Pe(o);return Jr(e,t=t===i?t:vs(t))},zn.reverse=ra,zn.sampleSize=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:vs(t),(Xa(e)?er:ei)(e,t)},zn.set=function(e,t,n){return null==e?e:ti(e,t,n)},zn.setWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:ti(e,t,n,r)},zn.shuffle=function(e){return(Xa(e)?tr:ii)(e)},zn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&wo(e,t,n)?(t=0,n=r):(t=null==t?0:vs(t),n=n===i?r:vs(n)),oi(e,t,n)):[]},zn.sortBy=Ra,zn.sortedUniq=function(e){return e&&e.length?li(e):[]},zn.sortedUniqBy=function(e,t){return e&&e.length?li(e,uo(t,2)):[]},zn.split=function(e,t,n){return n&&"number"!=typeof n&&wo(e,t,n)&&(t=n=i),(n=n===i?g:n>>>0)?(e=xs(e))&&("string"==typeof t||null!=t&&!cs(t))&&!(t=hi(t))&&sn(e)?Ai(pn(e),0,n):e.split(t,n):[]},zn.spread=function(e,t){if("function"!=typeof e)throw new Pe(o);return t=null==t?0:bn(vs(t),0),Jr((function(n){var r=n[t],i=Ai(n,0,t);return r&&Ut(i,r),Mt(e,this,i)}))},zn.tail=function(e){var t=null==e?0:e.length;return t?oi(e,1,t):[]},zn.take=function(e,t,n){return e&&e.length?oi(e,0,(t=n||t===i?1:vs(t))<0?0:t):[]},zn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=r-(t=n||t===i?1:vs(t)))<0?0:t,r):[]},zn.takeRightWhile=function(e,t){return e&&e.length?mi(e,uo(t,3),!1,!0):[]},zn.takeWhile=function(e,t){return e&&e.length?mi(e,uo(t,3)):[]},zn.tap=function(e,t){return t(e),e},zn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Pe(o);return rs(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ua(e,t,{leading:r,maxWait:t,trailing:i})},zn.thru=ga,zn.toArray=ms,zn.toPairs=js,zn.toPairsIn=zs,zn.toPath=function(e){return Xa(e)?Dt(e,Zo):hs(e)?[e]:Ci(No(xs(e)))},zn.toPlainObject=bs,zn.transform=function(e,t,n){var r=Xa(e),i=r||qa(e)||ds(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:rs(e)&&es(o)?Gn(Xe(e)):{}}return(i?St:wr)(e,(function(e,r,i){return t(n,e,r,i)})),n},zn.unary=function(e){return Pa(e,1)},zn.union=ia,zn.unionBy=oa,zn.unionWith=aa,zn.uniq=function(e){return e&&e.length?di(e):[]},zn.uniqBy=function(e,t){return e&&e.length?di(e,uo(t,2)):[]},zn.uniqWith=function(e,t){return t="function"==typeof t?t:i,e&&e.length?di(e,i,t):[]},zn.unset=function(e,t){return null==e||fi(e,t)},zn.unzip=sa,zn.unzipWith=ca,zn.update=function(e,t,n){return null==e?e:pi(e,t,bi(n))},zn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:pi(e,t,bi(n),r)},zn.values=Gs,zn.valuesIn=function(e){return null==e?[]:Jt(e,Os(e))},zn.without=la,zn.words=ec,zn.wrap=function(e,t){return Za(bi(t),e)},zn.xor=ua,zn.xorBy=ha,zn.xorWith=da,zn.zip=fa,zn.zipObject=function(e,t){return _i(e||[],t||[],rr)},zn.zipObjectDeep=function(e,t){return _i(e||[],t||[],ti)},zn.zipWith=pa,zn.entries=js,zn.entriesIn=zs,zn.extend=As,zn.extendWith=Ts,uc(zn,zn),zn.add=bc,zn.attempt=tc,zn.camelCase=Vs,zn.capitalize=Ws,zn.ceil=xc,zn.clamp=function(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=(n=ys(n))==n?n:0),t!==i&&(t=(t=ys(t))==t?t:0),lr(ys(e),t,n)},zn.clone=function(e){return ur(e,4)},zn.cloneDeep=function(e){return ur(e,5)},zn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:i)},zn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:i)},zn.conformsTo=function(e,t){return null==t||hr(e,t,Us(t))},zn.deburr=Hs,zn.defaultTo=function(e,t){return null==e||e!=e?t:e},zn.divide=wc,zn.endsWith=function(e,t,n){e=xs(e),t=hi(t);var r=e.length,o=n=n===i?r:lr(vs(n),0,r);return(n-=t.length)>=0&&e.slice(n,o)==t},zn.eq=Ga,zn.escape=function(e){return(e=xs(e))&&q.test(e)?e.replace(Y,on):e},zn.escapeRegExp=function(e){return(e=xs(e))&&oe.test(e)?e.replace(ie,"\\$&"):e},zn.every=function(e,t,n){var r=Xa(e)?Lt:gr;return n&&wo(e,t,n)&&(t=i),r(e,uo(t,3))},zn.find=ya,zn.findIndex=Ho,zn.findKey=function(e,t){return Nt(e,uo(t,3),wr)},zn.findLast=ba,zn.findLastIndex=Xo,zn.findLastKey=function(e,t){return Nt(e,uo(t,3),Ar)},zn.floor=Ac,zn.forEach=xa,zn.forEachRight=wa,zn.forIn=function(e,t){return null==e?e:br(e,uo(t,3),Os)},zn.forInRight=function(e,t){return null==e?e:xr(e,uo(t,3),Os)},zn.forOwn=function(e,t){return e&&wr(e,uo(t,3))},zn.forOwnRight=function(e,t){return e&&Ar(e,uo(t,3))},zn.get=Ls,zn.gt=Va,zn.gte=Wa,zn.has=function(e,t){return null!=e&&_o(e,t,Lr)},zn.hasIn=Ps,zn.head=Yo,zn.identity=ac,zn.includes=function(e,t,n,r){e=Ya(e)?e:Gs(e),n=n&&!r?vs(n):0;var i=e.length;return n<0&&(n=bn(i+n,0)),us(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&jt(e,t,n)>-1},zn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vs(n);return i<0&&(i=bn(r+i,0)),jt(e,t,i)},zn.inRange=function(e,t,n){return t=gs(t),n===i?(n=t,t=0):n=gs(n),function(e,t,n){return e>=xn(t,n)&&e<bn(t,n)}(e=ys(e),t,n)},zn.invoke=Ds,zn.isArguments=Ha,zn.isArray=Xa,zn.isArrayBuffer=Qa,zn.isArrayLike=Ya,zn.isArrayLikeObject=Ka,zn.isBoolean=function(e){return!0===e||!1===e||is(e)&&Sr(e)==b},zn.isBuffer=qa,zn.isDate=Ja,zn.isElement=function(e){return is(e)&&1===e.nodeType&&!ss(e)},zn.isEmpty=function(e){if(null==e)return!0;if(Ya(e)&&(Xa(e)||"string"==typeof e||"function"==typeof e.splice||qa(e)||ds(e)||Ha(e)))return!e.length;var t=vo(e);if(t==M||t==P)return!e.size;if(Eo(e))return!Br(e).length;for(var n in e)if(ke.call(e,n))return!1;return!0},zn.isEqual=function(e,t){return Ur(e,t)},zn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:i)?n(e,t):i;return r===i?Ur(e,t,i,n):!!r},zn.isError=$a,zn.isFinite=function(e){return"number"==typeof e&&Ht(e)},zn.isFunction=es,zn.isInteger=ts,zn.isLength=ns,zn.isMap=os,zn.isMatch=function(e,t){return e===t||Or(e,t,fo(t))},zn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:i,Or(e,t,fo(t),n)},zn.isNaN=function(e){return as(e)&&e!=+e},zn.isNative=function(e){if(Mo(e))throw new Te("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return kr(e)},zn.isNil=function(e){return null==e},zn.isNull=function(e){return null===e},zn.isNumber=as,zn.isObject=rs,zn.isObjectLike=is,zn.isPlainObject=ss,zn.isRegExp=cs,zn.isSafeInteger=function(e){return ts(e)&&e>=-9007199254740991&&e<=p},zn.isSet=ls,zn.isString=us,zn.isSymbol=hs,zn.isTypedArray=ds,zn.isUndefined=function(e){return e===i},zn.isWeakMap=function(e){return is(e)&&vo(e)==D},zn.isWeakSet=function(e){return is(e)&&"[object WeakSet]"==Sr(e)},zn.join=function(e,t){return null==e?"":_n.call(e,t)},zn.kebabCase=Xs,zn.last=$o,zn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=vs(n))<0?bn(r+o,0):xn(o,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,o):Zt(e,Gt,o,!0)},zn.lowerCase=Qs,zn.lowerFirst=Ys,zn.lt=fs,zn.lte=ps,zn.max=function(e){return e&&e.length?vr(e,ac,Rr):i},zn.maxBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Rr):i},zn.mean=function(e){return Vt(e,ac)},zn.meanBy=function(e,t){return Vt(e,uo(t,2))},zn.min=function(e){return e&&e.length?vr(e,ac,Zr):i},zn.minBy=function(e,t){return e&&e.length?vr(e,uo(t,2),Zr):i},zn.stubArray=_c,zn.stubFalse=yc,zn.stubObject=function(){return{}},zn.stubString=function(){return""},zn.stubTrue=function(){return!0},zn.multiply=Mc,zn.nth=function(e,t){return e&&e.length?Wr(e,vs(t)):i},zn.noConflict=function(){return ft._===this&&(ft._=je),this},zn.noop=hc,zn.now=La,zn.pad=function(e,t,n){e=xs(e);var r=(t=vs(t))?fn(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Hi(vt(i),n)+e+Hi(mt(i),n)},zn.padEnd=function(e,t,n){e=xs(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?e+Hi(t-r,n):e},zn.padStart=function(e,t,n){e=xs(e);var r=(t=vs(t))?fn(e):0;return t&&r<t?Hi(t-r,n)+e:e},zn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),An(xs(e).replace(ae,""),t||0)},zn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&wo(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=gs(e),t===i?(t=e,e=0):t=gs(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Tn();return xn(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Kr(e,t)},zn.reduce=function(e,t,n){var r=Xa(e)?Ot:Xt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},zn.reduceRight=function(e,t,n){var r=Xa(e)?kt:Xt,i=arguments.length<3;return r(e,uo(t,4),n,i,mr)},zn.repeat=function(e,t,n){return t=(n?wo(e,t,n):t===i)?1:vs(t),qr(xs(e),t)},zn.replace=function(){var e=arguments,t=xs(e[0]);return e.length<3?t:t.replace(e[1],e[2])},zn.result=function(e,t,n){var r=-1,o=(t=xi(t,e)).length;for(o||(o=1,e=i);++r<o;){var a=null==e?i:e[Zo(t[r])];a===i&&(r=o,a=n),e=es(a)?a.call(e):a}return e},zn.round=Ec,zn.runInContext=e,zn.sample=function(e){return(Xa(e)?$n:$r)(e)},zn.size=function(e){if(null==e)return 0;if(Ya(e))return us(e)?fn(e):e.length;var t=vo(e);return t==M||t==P?e.size:Br(e).length},zn.snakeCase=Ks,zn.some=function(e,t,n){var r=Xa(e)?It:ai;return n&&wo(e,t,n)&&(t=i),r(e,uo(t,3))},zn.sortedIndex=function(e,t){return si(e,t)},zn.sortedIndexBy=function(e,t,n){return ci(e,t,uo(n,2))},zn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&Ga(e[r],t))return r}return-1},zn.sortedLastIndex=function(e,t){return si(e,t,!0)},zn.sortedLastIndexBy=function(e,t,n){return ci(e,t,uo(n,2),!0)},zn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(Ga(e[n],t))return n}return-1},zn.startCase=qs,zn.startsWith=function(e,t,n){return e=xs(e),n=null==n?0:lr(vs(n),0,e.length),t=hi(t),e.slice(n,n+t.length)==t},zn.subtract=Sc,zn.sum=function(e){return e&&e.length?Qt(e,ac):0},zn.sumBy=function(e,t){return e&&e.length?Qt(e,uo(t,2)):0},zn.template=function(e,t,n){var r=zn.templateSettings;n&&wo(e,t,n)&&(t=i),e=xs(e),t=Ts({},t,r,eo);var o,a,s=Ts({},t.imports,r.imports,eo),c=Us(s),l=Jt(s,c),u=0,h=t.interpolate||we,d="__p += '",f=Re((t.escape||we).source+"|"+h.source+"|"+(h===ee?pe:we).source+"|"+(t.evaluate||we).source+"|$","g"),p="//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,(function(t,n,r,i,s,c){return r||(r=i),d+=e.slice(u,c).replace(Ae,an),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=c+t.length,t})),d+="';\n";var m=ke.call(t,"variable")&&t.variable;if(m){if(de.test(m))throw new Te("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(a?d.replace(W,""):d).replace(H,"$1").replace(X,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=tc((function(){return Me(c,p+"return "+d).apply(i,l)}));if(g.source=d,$a(g))throw g;return g},zn.times=function(e,t){if((e=vs(e))<1||e>p)return[];var n=g,r=xn(e,g);t=uo(t),e-=g;for(var i=Yt(r,t);++n<e;)t(n);return i},zn.toFinite=gs,zn.toInteger=vs,zn.toLength=_s,zn.toLower=function(e){return xs(e).toLowerCase()},zn.toNumber=ys,zn.toSafeInteger=function(e){return e?lr(vs(e),-9007199254740991,p):0===e?e:0},zn.toString=xs,zn.toUpper=function(e){return xs(e).toUpperCase()},zn.trim=function(e,t,n){if((e=xs(e))&&(n||t===i))return Kt(e);if(!e||!(t=hi(t)))return e;var r=pn(e),o=pn(t);return Ai(r,en(r,o),tn(r,o)+1).join("")},zn.trimEnd=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.slice(0,mn(e)+1);if(!e||!(t=hi(t)))return e;var r=pn(e);return Ai(r,0,tn(r,pn(t))+1).join("")},zn.trimStart=function(e,t,n){if((e=xs(e))&&(n||t===i))return e.replace(ae,"");if(!e||!(t=hi(t)))return e;var r=pn(e);return Ai(r,en(r,pn(t))).join("")},zn.truncate=function(e,t){var n=30,r="...";if(rs(t)){var o="separator"in t?t.separator:o;n="length"in t?vs(t.length):n,r="omission"in t?hi(t.omission):r}var a=(e=xs(e)).length;if(sn(e)){var s=pn(e);a=s.length}if(n>=a)return e;var c=n-fn(r);if(c<1)return r;var l=s?Ai(s,0,c).join(""):e.slice(0,c);if(o===i)return l+r;if(s&&(c+=l.length-c),cs(o)){if(e.slice(c).search(o)){var u,h=l;for(o.global||(o=Re(o.source,xs(me.exec(o))+"g")),o.lastIndex=0;u=o.exec(h);)var d=u.index;l=l.slice(0,d===i?c:d)}}else if(e.indexOf(hi(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+r},zn.unescape=function(e){return(e=xs(e))&&K.test(e)?e.replace(Q,gn):e},zn.uniqueId=function(e){var t=++Ie;return xs(e)+t},zn.upperCase=Js,zn.upperFirst=$s,zn.each=xa,zn.eachRight=wa,zn.first=Yo,uc(zn,(Tc={},wr(zn,(function(e,t){ke.call(zn.prototype,t)||(Tc[t]=e)})),Tc),{chain:!1}),zn.VERSION="4.17.21",St(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){zn[e].placeholder=zn})),St(["drop","take"],(function(e,t){Hn.prototype[e]=function(n){n=n===i?1:bn(vs(n),0);var r=this.__filtered__&&!t?new Hn(this):this.clone();return r.__filtered__?r.__takeCount__=xn(n,r.__takeCount__):r.__views__.push({size:xn(n,g),type:e+(r.__dir__<0?"Right":"")}),r},Hn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),St(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Hn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),St(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Hn.prototype[e]=function(){return this[n](1).value()[0]}})),St(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Hn.prototype[e]=function(){return this.__filtered__?new Hn(this):this[n](1)}})),Hn.prototype.compact=function(){return this.filter(ac)},Hn.prototype.find=function(e){return this.filter(e).head()},Hn.prototype.findLast=function(e){return this.reverse().find(e)},Hn.prototype.invokeMap=Jr((function(e,t){return"function"==typeof e?new Hn(this):this.map((function(n){return Fr(n,e,t)}))})),Hn.prototype.reject=function(e){return this.filter(Ba(uo(e)))},Hn.prototype.slice=function(e,t){e=vs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Hn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(n=(t=vs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Hn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Hn.prototype.toArray=function(){return this.take(g)},wr(Hn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=zn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);o&&(zn.prototype[t]=function(){var t=this.__wrapped__,s=r?[1]:arguments,c=t instanceof Hn,l=s[0],u=c||Xa(t),h=function(e){var t=o.apply(zn,Ut([e],s));return r&&d?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(c=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=a&&!d,m=c&&!f;if(!a&&u){t=m?t:new Hn(this);var g=e.apply(t,s);return g.__actions__.push({func:ga,args:[h],thisArg:i}),new Wn(g,d)}return p&&m?e.apply(this,s):(g=this.thru(h),p?r?g.value()[0]:g.value():g)})})),St(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ce[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);zn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Xa(i)?i:[],e)}return this[n]((function(n){return t.apply(Xa(n)?n:[],e)}))}})),wr(Hn.prototype,(function(e,t){var n=zn[t];if(n){var r=n.name+"";ke.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:t,func:n})}})),Dn[zi(i,2).name]=[{name:"wrapper",func:i}],Hn.prototype.clone=function(){var e=new Hn(this.__wrapped__);return e.__actions__=Ci(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ci(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ci(this.__views__),e},Hn.prototype.reverse=function(){if(this.__filtered__){var e=new Hn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Hn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Xa(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=xn(t,e+a);break;case"takeRight":e=bn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,s=o.end,c=s-a,l=r?s:a-1,u=this.__iteratees__,h=u.length,d=0,f=xn(c,this.__takeCount__);if(!n||!r&&i==c&&f==c)return gi(e,this.__actions__);var p=[];e:for(;c--&&d<f;){for(var m=-1,g=e[l+=t];++m<h;){var v=u[m],_=v.iteratee,y=v.type,b=_(g);if(2==y)g=b;else if(!b){if(1==y)continue e;break e}}p[d++]=g}return p},zn.prototype.at=va,zn.prototype.chain=function(){return ma(this)},zn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},zn.prototype.next=function(){this.__values__===i&&(this.__values__=ms(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?i:this.__values__[this.__index__++]}},zn.prototype.plant=function(e){for(var t,n=this;n instanceof Vn;){var r=zo(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t},zn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Hn){var t=e;return this.__actions__.length&&(t=new Hn(this)),(t=t.reverse()).__actions__.push({func:ga,args:[ra],thisArg:i}),new Wn(t,this.__chain__)}return this.thru(ra)},zn.prototype.toJSON=zn.prototype.valueOf=zn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},zn.prototype.first=zn.prototype.head,et&&(zn.prototype[et]=function(){return this}),zn}();ft._=vn,(r=function(){return vn}.call(t,n,t,e))===i||(e.exports=r)}.call(this)},4244:function(e){"use strict";var t=function(e){return e!=e};e.exports=function(e,n){return 0===e&&0===n?1/e==1/n:e===n||!(!t(e)||!t(n))}},609:function(e,t,n){"use strict";var r=n(4289),i=n(5559),o=n(4244),a=n(5624),s=n(2281),c=i(a(),Object);r(c,{getPolyfill:a,implementation:o,shim:s}),e.exports=c},5624:function(e,t,n){"use strict";var r=n(4244);e.exports=function(){return"function"==typeof Object.is?Object.is:r}},2281:function(e,t,n){"use strict";var r=n(5624),i=n(4289);e.exports=function(){var e=r();return i(Object,{is:e},{is:function(){return Object.is!==e}}),e}},8987:function(e,t,n){"use strict";var r;if(!Object.keys){var i=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=n(1414),s=Object.prototype.propertyIsEnumerable,c=!s.call({toString:null},"toString"),l=s.call((function(){}),"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var e in window)try{if(!d["$"+e]&&i.call(window,e)&&null!==window[e]&&"object"==typeof window[e])try{h(window[e])}catch(e){return!0}}catch(e){return!0}return!1}();r=function(e){var t=null!==e&&"object"==typeof e,n="[object Function]"===o.call(e),r=a(e),s=t&&"[object String]"===o.call(e),d=[];if(!t&&!n&&!r)throw new TypeError("Object.keys called on a non-object");var p=l&&n;if(s&&e.length>0&&!i.call(e,0))for(var m=0;m<e.length;++m)d.push(String(m));if(r&&e.length>0)for(var g=0;g<e.length;++g)d.push(String(g));else for(var v in e)p&&"prototype"===v||!i.call(e,v)||d.push(String(v));if(c)for(var _=function(e){if("undefined"==typeof window||!f)return h(e);try{return h(e)}catch(e){return!1}}(e),y=0;y<u.length;++y)_&&"constructor"===u[y]||!i.call(e,u[y])||d.push(u[y]);return d}}e.exports=r},2215:function(e,t,n){"use strict";var r=Array.prototype.slice,i=n(1414),o=Object.keys,a=o?function(e){return o(e)}:n(8987),s=Object.keys;a.shim=function(){if(Object.keys){var e=function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2);e||(Object.keys=function(e){return i(e)?s(r.call(e)):s(e)})}else Object.keys=a;return Object.keys||a},e.exports=a},1414:function(e){"use strict";var t=Object.prototype.toString;e.exports=function(e){var n=t.call(e),r="[object Arguments]"===n;return r||(r="[object Array]"!==n&&null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Function]"===t.call(e.callee)),r}},6470:function(e,t,n){"use strict";var r=n(4155);function i(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function o(e,t){for(var n,r="",i=0,o=-1,a=0,s=0;s<=e.length;++s){if(s<e.length)n=e.charCodeAt(s);else{if(47===n)break;n=47}if(47===n){if(o===s-1||1===a);else if(o!==s-1&&2===a){if(r.length<2||2!==i||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var c=r.lastIndexOf("/");if(c!==r.length-1){-1===c?(r="",i=0):i=(r=r.slice(0,c)).length-1-r.lastIndexOf("/"),o=s,a=0;continue}}else if(2===r.length||1===r.length){r="",i=0,o=s,a=0;continue}t&&(r.length>0?r+="/..":r="..",i=2)}else r.length>0?r+="/"+e.slice(o+1,s):r=e.slice(o+1,s),i=s-o-1;o=s,a=0}else 46===n&&-1!==a?++a:a=-1}return r}var a={resolve:function(){for(var e,t="",n=!1,a=arguments.length-1;a>=-1&&!n;a--){var s;a>=0?s=arguments[a]:(void 0===e&&(e=r.cwd()),s=e),i(s),0!==s.length&&(t=s+"/"+t,n=47===s.charCodeAt(0))}return t=o(t,!n),n?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(i(e),0===e.length)return".";var t=47===e.charCodeAt(0),n=47===e.charCodeAt(e.length-1);return 0!==(e=o(e,!t)).length||t||(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return i(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];i(n),n.length>0&&(void 0===e?e=n:e+="/"+n)}return void 0===e?".":a.normalize(e)},relative:function(e,t){if(i(e),i(t),e===t)return"";if((e=a.resolve(e))===(t=a.resolve(t)))return"";for(var n=1;n<e.length&&47===e.charCodeAt(n);++n);for(var r=e.length,o=r-n,s=1;s<t.length&&47===t.charCodeAt(s);++s);for(var c=t.length-s,l=o<c?o:c,u=-1,h=0;h<=l;++h){if(h===l){if(c>l){if(47===t.charCodeAt(s+h))return t.slice(s+h+1);if(0===h)return t.slice(s+h)}else o>l&&(47===e.charCodeAt(n+h)?u=h:0===h&&(u=0));break}var d=e.charCodeAt(n+h);if(d!==t.charCodeAt(s+h))break;47===d&&(u=h)}var f="";for(h=n+u+1;h<=r;++h)h!==r&&47!==e.charCodeAt(h)||(0===f.length?f+="..":f+="/..");return f.length>0?f+t.slice(s+u):(s+=u,47===t.charCodeAt(s)&&++s,t.slice(s))},_makeLong:function(e){return e},dirname:function(e){if(i(e),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,o=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!o){r=a;break}}else o=!1;return-1===r?n?"/":".":n&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');i(e);var n,r=0,o=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,c=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!a){r=n+1;break}}else-1===c&&(a=!1,c=n+1),s>=0&&(l===t.charCodeAt(s)?-1==--s&&(o=n):(s=-1,o=c))}return r===o?o=c:-1===o&&(o=e.length),e.slice(r,o)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){r=n+1;break}}else-1===o&&(a=!1,o=n+1);return-1===o?"":e.slice(r,o)},extname:function(e){i(e);for(var t=-1,n=0,r=-1,o=!0,a=0,s=e.length-1;s>=0;--s){var c=e.charCodeAt(s);if(47!==c)-1===r&&(o=!1,r=s+1),46===c?-1===t?t=s:1!==a&&(a=1):-1!==t&&(a=-1);else if(!o){n=s+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var n=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return n?n===t.root?n+r:n+e+r:r}("/",e)},parse:function(e){i(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=e.charCodeAt(0),o=47===r;o?(t.root="/",n=1):n=0;for(var a=-1,s=0,c=-1,l=!0,u=e.length-1,h=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===c&&(l=!1,c=u+1),46===r?-1===a?a=u:1!==h&&(h=1):-1!==a&&(h=-1);else if(!l){s=u+1;break}return-1===a||-1===c||0===h||1===h&&a===c-1&&a===s+1?-1!==c&&(t.base=t.name=0===s&&o?e.slice(1,c):e.slice(s,c)):(0===s&&o?(t.name=e.slice(1,a),t.base=e.slice(1,c)):(t.name=e.slice(s,a),t.base=e.slice(s,c)),t.ext=e.slice(a,c)),s>0?t.dir=e.slice(0,s-1):o&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};a.posix=a,e.exports=a},4155:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,c=[],l=!1,u=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):u=-1,c.length&&d())}function d(){if(!l){var e=a(h);l=!0;for(var t=c.length;t;){for(s=c,c=[];++u<t;)s&&s[u].run();u=-1,t=c.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||l||a(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},4679:function(e,t,n){"use strict";n.d(t,{xv:function(){return re}});var r=n(5017),i=n(5108);n(4155);function o(){var e,t=0,n=[],r=0,i=0;var a=f((function(e){i||c(1,e)})),s=f((function(e){i||c(-1,e)}));function c(n,r){i++;var o=0;try{r===g&&p();var a=n>0&&d(r);a?a.call(r,f((function(e){o++,c(1,e)})),f((function(e){o++,c(-1,e)}))):(t=n,e=r,l())}catch(e){t||o||c(-1,e)}}function l(){r||(setTimeout(u,0),r=1)}function u(){var e=n;r=0,n=[],e.forEach(h)}function h(e){e()}function d(e){var t=e&&(m(e)||"object"==typeof e)&&e.then;return m(t)&&t}function f(e){var t=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];t++||e.apply(this,n)}}function p(){throw new TypeError("Chaining cycle detected")}var m=function(e){return"function"==typeof e},g={then:function(r,i){var a=o();return n.push((function(){var n=t>0?r:i;if(m(n))try{var o=n(e);o===a&&p();var s=d(o);s?s.call(o,a.resolve,a.reject):a.resolve(o)}catch(e){a.reject(e)}else a[t>0?"resolve":"reject"](e)})),t&&l(),a},resolve:a,reject:s};return g}function a(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{then:n.then.bind(n),resolve:e,reject:t}}o.all=a.all=function(e){var t=0,n=[],r=s();return 0===e.length?r.resolve([]):e.forEach((function(i,o){var a=s();a.resolve(i),a.then((function(i){t++,n[o]=i,t===e.length&&r.resolve(n)}),r.reject)})),r};var s="function"==typeof Promise?a:o;function c(){var e=Object.create(null);function t(r,o){var a=r.id,s=r.name,c=r.dependencies;void 0===c&&(c=[]);var l=r.init;void 0===l&&(l=function(){});var u=r.getTransferables;if(void 0===u&&(u=null),!e[a])try{c=c.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+s+">.init",l),u&&(u=n("<"+s+">.getTransferables",u));var h=null;"function"==typeof l?h=l.apply(void 0,c):i.error("worker module init function failed to rehydrate"),e[a]={id:a,value:h,getTransferables:u},o(h)}catch(e){e&&e.noLog||i.error(e),o(e)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){i.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,o=r.messageId,a=r.action,s=r.data;try{"registerModule"===a&&t(s,(function(e){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===a&&function(t,n){var r,o=t.id,a=t.args;e[o]&&"function"==typeof e[o].value||n(new Error("Worker module "+o+": not found or its 'init' did not return a function"));try{var s=(r=e[o]).value.apply(r,a);s&&"function"==typeof s.then?s.then(c,(function(e){return n(e instanceof Error?e:new Error(""+e))})):c(s)}catch(e){n(e)}function c(t){try{var r=e[o].getTransferables&&e[o].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){i.error(e),n(e)}}}(s,(function(e,t){e instanceof Error?postMessage({messageId:o,success:!1,error:e.message}):postMessage({messageId:o,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:o,success:!1,error:e.stack})}}))}var l=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){i.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return l=function(){return e},e},u=0,h=0,d=!1,f=Object.create(null),p=Object.create(null),m=Object.create(null);function g(e){if(!(e&&"function"==typeof e.init||d))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!l())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=s.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++u,a=e.name||o,c=null;function h(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!c){c=_(i,"registerModule",h.workerModuleData);var n=function(){c=null,p[i].delete(n)};(p[i]||(p[i]=new Set)).add(n)}return c.then((function(t){if(t.isCallable)return _(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(d=!0,e=g({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+v(e)+"\n)}"}),d=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),h.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:v(n),getTransferables:r&&v(r)},h}function v(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function _(e,t,n){var r=s(),i=++h;return m[i]=function(e){e.success?r.resolve(e.result):r.reject(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=f[e];if(!t){var n=v(c);(t=f[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=m[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete m[n],r(t)}}return t}(e).postMessage({messageId:i,action:t,data:n}),r}var y=g({name:"Thenable",dependencies:[s],init:function(e){return e}}),b=n(5108);function x(){var e=function(e){function t(e,t,n,r,i,o,a,s,c,l){var u=1-c;l.x=u*u*u*e+3*u*u*c*n+3*u*c*c*i+c*c*c*a,l.y=u*u*u*t+3*u*u*c*r+3*u*c*c*o+c*c*c*s}function n(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var c=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=c[0],a=i=c[1];break;case"L":c[0]===o&&c[1]===a||t("L",o,a,o=c[0],a=c[1]);break;case"Q":t("Q",o,a,o=c[2],a=c[3],c[0],c[1]);break;case"C":t("C",o,a,o=c[4],a=c[5],c[0],c[1],c[2],c[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function r(e,r,i){void 0===i&&(i=16);var o={x:0,y:0};n(e,(function(e,n,a,s,c,l,u,h,d){switch(e){case"L":r(n,a,s,c);break;case"Q":for(var f=n,p=a,m=1;m<i;m++)y=a,b=u,x=c,T=void 0,T=1-(w=m/(i-1)),(A=o).x=T*T*n+2*T*w*l+w*w*s,A.y=T*T*y+2*T*w*b+w*w*x,r(f,p,o.x,o.y),f=o.x,p=o.y;break;case"C":for(var g=n,v=a,_=1;_<i;_++)t(n,a,l,u,h,d,s,c,_/(i-1),o),r(g,v,o.x,o.y),g=o.x,v=o.y}var y,b,x,w,A,T}))}var i="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",o=new WeakMap,a={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function s(e,t){var n=e.getContext?e.getContext("webgl",a):e,r=o.get(n);if(!r){var i="undefined"!=typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,s={},c={},l={},u=-1,h=[];function d(e){var t=s[e];if(!t&&!(t=s[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function f(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function p(e,t,r,o){if(!c[e]){var a={},s={},l=n.createProgram();n.attachShader(l,f(t,n.VERTEX_SHADER)),n.attachShader(l,f(r,n.FRAGMENT_SHADER)),n.linkProgram(l),c[e]={program:l,transaction:function(e){n.useProgram(l),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=s[t]||(s[t]=n.getUniformLocation(l,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,s){var c=a[e];c||(c=a[e]={buf:n.createBuffer(),loc:n.getAttribLocation(l,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,c.buf),n.vertexAttribPointer(c.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(c.loc),i?n.vertexAttribDivisor(c.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(c.loc,o),s!==c.data&&(n.bufferData(n.ARRAY_BUFFER,s,r),c.data=s)}})}}}c[e].transaction(o)}function m(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=l[e];r||(r=l[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}}function g(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function v(){s={},c={},l={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){v(),e.preventDefault()}),!1),o.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:p,withTexture:m,withTextureFramebuffer:g,handleContextLoss:v})}t(r)}function c(e,t,n,r,o,a,c,l){void 0===c&&(c=15),void 0===l&&(l=null),s(e,(function(e){var s=e.gl,u=e.withProgram;(0,e.withTexture)("copy",(function(e,h){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,o,a,0,s.RGBA,s.UNSIGNED_BYTE,t),u("copy",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,s.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",h),s.bindFramebuffer(s.FRAMEBUFFER,l||null),s.disable(s.BLEND),s.colorMask(8&c,4&c,2&c,1&c),s.viewport(n,r,o,a),s.scissor(n,r,o,a),s.drawArrays(s.TRIANGLES,0,3)}))}))}))}var l=Object.freeze({__proto__:null,withWebGLContext:s,renderImageData:c,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;s(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,c(a,s,0,0,r,i)}))}});function u(e,t,n,i,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),c=i[2]-i[0],l=i[3]-i[1],u=[];r(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var p=g(i[0]+c*(h+.5)/e,i[1]+l*(d+.5)/t),m=Math.pow(1-Math.abs(p)/o,a)/2;p<0&&(m=1-m),m=Math.max(0,Math.min(255,Math.round(255*m))),s[d*e+h]=m}return s;function g(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=f(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!=i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function h(e,t,n,r,i,o,a,s,c,l){void 0===o&&(o=1),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=0),d(e,t,n,r,i,o,a,null,s,c,l)}function d(e,t,n,r,i,o,a,s,l,h,d){void 0===o&&(o=1),void 0===l&&(l=0),void 0===h&&(h=0),void 0===d&&(d=0);for(var f=u(e,t,n,r,i,o),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+d]=f[m];c(a,p,l,h,e,t,1<<3-d,s)}function f(e,t,n,r,i,o){var a=i-n,s=o-r,c=a*a+s*s,l=c?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/c)):0,u=e-(n+l*a),h=t-(r+l*s);return u*u+h*h}var p=Object.freeze({__proto__:null,generate:u,generateIntoCanvas:h,generateIntoFramebuffer:d}),m=new Float32Array([0,0,2,0,0,2]),g=null,v=!1,_={},y=new WeakMap;function x(e){if(!v&&!M(e))throw new Error("WebGL generation not supported")}function w(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=g)){var c="function"==typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!=typeof document?document.createElement("canvas"):null;if(!c)throw new Error("OffscreenCanvas or DOM canvas not supported");a=g=c.getContext("webgl",{depth:!1})}x(a);var l=new Uint8Array(e*t*4);s(a,(function(a){var s=a.gl,c=a.withTexture,u=a.withTextureFramebuffer;c("readable",(function(a,c){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,c,(function(a){T(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,l)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<l.length;h+=4)u[d++]=l[h];return u}function A(e,t,n,r,i,o,a,s,c,l){void 0===o&&(o=1),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=0),T(e,t,n,r,i,o,a,null,s,c,l)}function T(e,t,n,o,a,c,l,u,h,d,f){void 0===c&&(c=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),x(l);var p=[];r(n,(function(e,t,n,r){p.push(e,t,n,r)})),p=new Float32Array(p),s(l,(function(n){var r=n.gl,s=n.isWebGL2,l=n.getExtension,g=n.withProgram,v=n.withTexture,_=n.withTextureFramebuffer,y=n.handleContextLoss;if(v("rawDistances",(function(n,v){e===n._lastWidth&&t===n._lastHeight||r.texImage2D(r.TEXTURE_2D,0,r.RGBA,n._lastWidth=e,n._lastHeight=t,0,r.RGBA,r.UNSIGNED_BYTE,null),g("main","precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}","precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",(function(i){var u=i.setAttribute,h=i.setUniform,d=!s&&l("ANGLE_instanced_arrays"),f=!s&&l("EXT_blend_minmax");u("aUV",2,r.STATIC_DRAW,0,m),u("aLineSegment",4,r.DYNAMIC_DRAW,1,p),h.apply(void 0,["4f","uGlyphBounds"].concat(o)),h("1f","uMaxDistance",a),h("1f","uExponent",c),_(n,v,(function(n){r.enable(r.BLEND),r.colorMask(!0,!0,!0,!0),r.viewport(0,0,e,t),r.scissor(0,0,e,t),r.blendFunc(r.ONE,r.ONE),r.blendEquationSeparate(r.FUNC_ADD,s?r.MAX:f.MAX_EXT),r.clear(r.COLOR_BUFFER_BIT),s?r.drawArraysInstanced(r.TRIANGLES,0,3,p.length/4):d.drawArraysInstancedANGLE(r.TRIANGLES,0,3,p.length/4)}))})),g("post",i,"precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",(function(n){n.setAttribute("aUV",2,r.STATIC_DRAW,0,m),n.setUniform("1i","tex",v),r.bindFramebuffer(r.FRAMEBUFFER,u),r.disable(r.BLEND),r.colorMask(0===f,1===f,2===f,3===f),r.viewport(h,d,e,t),r.scissor(h,d,e,t),r.drawArrays(r.TRIANGLES,0,3)}))})),r.isContextLost())throw y(),new Error("webgl context lost")}))}function M(e){var t=e&&e!==g?e.canvas||e:_,n=y.get(t);if(void 0===n){v=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=w(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);(n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})))||(r="bad trial run results",b.info(i,o))}catch(e){n=!1,r=e.message}r&&b.warn("WebGL SDF generation not supported:",r),v=!1,y.set(t,n)}return n}var E=Object.freeze({__proto__:null,generate:w,generateIntoCanvas:A,generateIntoFramebuffer:T,isSupported:M});return e.forEachPathCommand=n,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return w.apply(E,arguments)}catch(e){return b.info("WebGL SDF generation failed, falling back to JS",e),u.apply(p,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,c,l){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===c&&(c=0),void 0===l&&(l=0);try{return A.apply(E,arguments)}catch(e){return b.info("WebGL SDF generation failed, falling back to JS",e),h.apply(p,arguments)}},e.javascript=p,e.pathToLineSegments=r,e.webgl=E,e.webglUtils=l,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}var w=function(){return function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,c=n.S|n.WS|n.B|i|n.PDI|s,l=null;function u(e){return function(){if(!l){l=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,l.set(r+=o,n[e]);for(var s=0;s<a;s++)l.set(++r,n[e])}))}};for(var r in t)e(r)}}(),l.get(e.codePointAt(0))||n.L}var h,d,f,p="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var c=a.split(">"),l=c[0],u=c[1];l=String.fromCodePoint(r+=parseInt(l,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(l,u),t&&o.set(u,l)}})),{map:i,reverseMap:o}}function v(){if(!h){var e=g(p,!0),t=e.map,n=e.reverseMap;h=t,d=n,f=g(m,!1).map}}function _(e){return v(),h.get(e)||null}function y(e){return v(),d.get(e)||null}function b(e){return v(),f.get(e)||null}var x=n.L,w=n.R,A=n.EN,T=n.ES,M=n.ET,E=n.AN,S=n.CS,R=n.B,L=n.S,P=n.ON,C=n.BN,F=n.NSM,D=n.AL,U=n.LRO,O=n.RLO,k=n.LRE,I=n.RLE,B=n.PDF,N=n.LRI,Z=n.RLI,j=n.FSI,z=n.PDI;var G;function V(e){return function(){if(!G){var e=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),G=t}}(),G.get(e)||null}function W(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var l=t.levels.slice(a,s+1),h=s;h>=a&&u(e[h])&c;h--)l[h]=i.level;for(var d=i.level,f=1/0,p=0;p<l.length;p++){var m=l[p];m>d&&(d=m),m<f&&(f=1|m)}for(var g=d;g>=f;g--)for(var v=0;v<l.length;v++)if(l[v]>=g){for(var _=v;v+1<l.length&&l[v+1]>=g;)v++;v>_&&o.push([_+n,v+n])}}})),o}function H(e,t,n,r){for(var i=W(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=b,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var l=new Map;function h(e,t){var r=n[e];n[e]=t,l.set(r,l.get(r)-1),r&a&&l.set(a,l.get(a)-1),l.set(t,(l.get(t)||0)+1),t&a&&l.set(a,(l.get(a)||0)+1)}for(var d=new Uint8Array(e.length),f=new Map,p=[],m=null,g=0;g<e.length;g++)m||p.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:jt(g,!1)}),n[g]&R&&(m.end=g,m=null);for(var v=I|k|O|U|i|z|B|R,G=function(e){return e+(1&e?1:2)},V=function(e){return e+(1&e?2:1)},W=0;W<p.length;W++){var H=[{_level:(m=p[W]).level,_override:0,_isolate:0}],X=void 0,Q=0,Y=0,K=0;l.clear();for(var q=m.start;q<=m.end;q++){var J=n[q];if(X=H[H.length-1],l.set(J,(l.get(J)||0)+1),J&a&&l.set(a,(l.get(a)||0)+1),J&v)if(J&(I|k)){d[q]=X._level;var $=(J===I?V:G)(X._level);$<=125&&!Q&&!Y?H.push({_level:$,_override:0,_isolate:0}):Q||Y++}else if(J&(O|U)){d[q]=X._level;var ee=(J===O?V:G)(X._level);ee<=125&&!Q&&!Y?H.push({_level:ee,_override:J&O?w:x,_isolate:0}):Q||Y++}else if(J&i){J&j&&(J=1===jt(q+1,!0)?Z:N),d[q]=X._level,X._override&&h(q,X._override);var te=(J===Z?V:G)(X._level);te<=125&&0===Q&&0===Y?(K++,H.push({_level:te,_override:0,_isolate:1,_isolInitIndex:q})):Q++}else if(J&z){if(Q>0)Q--;else if(K>0){for(Y=0;!H[H.length-1]._isolate;)H.pop();var ne=H[H.length-1]._isolInitIndex;null!=ne&&(f.set(ne,q),f.set(q,ne)),H.pop(),K--}X=H[H.length-1],d[q]=X._level,X._override&&h(q,X._override)}else J&B?(0===Q&&(Y>0?Y--:!X._isolate&&H.length>1&&(H.pop(),X=H[H.length-1])),d[q]=X._level):J&R&&(d[q]=m.level);else d[q]=X._level,X._override&&J!==C&&h(q,X._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=d[oe],ce=ae&i,le=ae===z;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=ce):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:le,_endsWithIsolInit:ce})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!f.has(de._start)){for(var fe=[ie=de],pe=void 0;ie&&ie._endsWithIsolInit&&null!=(pe=f.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===pe){fe.push(ie=re[me]);break}for(var ge=[],ve=0;ve<fe.length;ve++)for(var _e=fe[ve],ye=_e._start;ye<=_e._end;ye++)ge.push(ye);for(var be=d[ge[0]],xe=m.level,we=ge[0]-1;we>=0;we--)if(!(n[we]&s)){xe=d[we];break}var Ae=ge[ge.length-1],Te=d[Ae],Me=m.level;if(!(n[Ae]&i))for(var Ee=Ae+1;Ee<=m.end;Ee++)if(!(n[Ee]&s)){Me=d[Ee];break}ue.push({_seqIndices:ge,_sosType:Math.max(xe,be)%2?w:x,_eosType:Math.max(Me,Te)%2?w:x})}}for(var Se=0;Se<ue.length;Se++){var Re=ue[Se],Le=Re._seqIndices,Pe=Re._sosType,Ce=Re._eosType;if(l.get(F))for(var Fe=0;Fe<Le.length;Fe++){var De=Le[Fe];if(n[De]&F){for(var Ue=Pe,Oe=Fe-1;Oe>=0;Oe--)if(!(n[Le[Oe]]&s)){Ue=n[Le[Oe]];break}h(De,Ue&(i|z)?P:Ue)}}if(l.get(A))for(var ke=0;ke<Le.length;ke++){var Ie=Le[ke];if(n[Ie]&A)for(var Be=ke-1;Be>=-1;Be--){var Ne=-1===Be?Pe:n[Le[Be]];if(Ne&o){Ne===D&&h(Ie,E);break}}}if(l.get(D))for(var Ze=0;Ze<Le.length;Ze++){var je=Le[Ze];n[je]&D&&h(je,w)}if(l.get(T)||l.get(S))for(var ze=1;ze<Le.length-1;ze++){var Ge=Le[ze];if(n[Ge]&(T|S)){for(var Ve=0,We=0,He=ze-1;He>=0&&(Ve=n[Le[He]])&s;He--);for(var Xe=ze+1;Xe<Le.length&&(We=n[Le[Xe]])&s;Xe++);Ve===We&&(n[Ge]===T?Ve===A:Ve&(A|E))&&h(Ge,Ve)}}if(l.get(A))for(var Qe=0;Qe<Le.length;Qe++){var Ye=Le[Qe];if(n[Ye]&A){for(var Ke=Qe-1;Ke>=0&&n[Le[Ke]]&(M|s);Ke--)h(Le[Ke],A);for(var qe=Qe+1;qe<Le.length&&n[Le[qe]]&(M|s);qe++)h(Le[qe],A)}}if(l.get(M)||l.get(T)||l.get(S))for(var Je=0;Je<Le.length;Je++){var $e=Le[Je];if(n[$e]&(M|T|S)){h($e,P);for(var et=Je-1;et>=0&&n[Le[et]]&s;et--)h(Le[et],P);for(var tt=Je+1;tt<Le.length&&n[Le[tt]]&s;tt++)h(Le[tt],P)}}if(l.get(A))for(var nt=0,rt=Pe;nt<Le.length;nt++){var it=Le[nt],ot=n[it];ot&A?rt===x&&h(it,x):ot&o&&(rt=ot)}if(l.get(a)){for(var at=w|A|E,st=at|x,ct=[],lt=[],ut=0;ut<Le.length;ut++)if(n[Le[ut]]&a){var ht=e[Le[ut]],dt=void 0;if(null!==_(ht)){if(!(lt.length<63))break;lt.push({char:ht,seqIndex:ut})}else if(null!==(dt=y(ht)))for(var ft=lt.length-1;ft>=0;ft--){var pt=lt[ft].char;if(pt===dt||pt===y(b(ht))||_(b(pt))===ht){ct.push([lt[ft].seqIndex,ut]),lt.length=ft;break}}}ct.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<ct.length;mt++){for(var gt=ct[mt],vt=gt[0],_t=gt[1],yt=!1,bt=0,xt=vt+1;xt<_t;xt++){var wt=Le[xt];if(n[wt]&st){yt=!0;var At=n[wt]&at?w:x;if(At===Gt(wt)){bt=At;break}}}if(yt&&!bt){bt=Pe;for(var Tt=vt-1;Tt>=0;Tt--){var Mt=Le[Tt];if(n[Mt]&st){var Et=n[Mt]&at?w:x;bt=Et!==Gt(Mt)?Et:Gt(Mt);break}}}if(bt){if(n[Le[vt]]=n[Le[_t]]=bt,bt!==Gt(Le[vt]))for(var St=vt+1;St<Le.length;St++)if(!(n[Le[St]]&s)){u(e[Le[St]])&F&&(n[Le[St]]=bt);break}if(bt!==Gt(Le[_t]))for(var Rt=_t+1;Rt<Le.length;Rt++)if(!(n[Le[Rt]]&s)){u(e[Le[Rt]])&F&&(n[Le[Rt]]=bt);break}}}for(var Lt=0;Lt<Le.length;Lt++)if(n[Le[Lt]]&a){for(var Pt=Lt,Ct=Lt,Ft=Pe,Dt=Lt-1;Dt>=0;Dt--){if(!(n[Le[Dt]]&s)){Ft=n[Le[Dt]]&at?w:x;break}Pt=Dt}for(var Ut=Ce,Ot=Lt+1;Ot<Le.length;Ot++){if(!(n[Le[Ot]]&(a|s))){Ut=n[Le[Ot]]&at?w:x;break}Ct=Ot}for(var kt=Pt;kt<=Ct;kt++)n[Le[kt]]=Ft===Ut?Ft:Gt(Le[kt]);Lt=Ct}}}for(var It=m.start;It<=m.end;It++){var Bt=d[It],Nt=n[It];if(1&Bt?Nt&(x|A|E)&&d[It]++:Nt&w?d[It]++:Nt&(E|A)&&(d[It]+=2),Nt&s&&(d[It]=0===It?m.level:d[It-1]),It===m.end||u(e[It])&(L|R))for(var Zt=It;Zt>=0&&u(e[Zt])&c;Zt--)d[Zt]=m.level}}return{levels:d,paragraphs:p};function jt(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(w|D))return 1;if(a&(R|x)||r&&a===z)return 0;if(a&i){var s=zt(o);o=-1===s?e.length:s}}return 0}function zt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&R)break;if(a&z){if(0==--r)return o}else a&i&&r++}return-1}function Gt(e){return 1&d[e]?w:x}},e.getMirroredCharacter=V,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=V(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=W,e.getReorderedIndices=H,e.getReorderedString=function(e,t,n,r){var i=H(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?V(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=_,Object.defineProperty(e,"__esModule",{value:!0}),e}({})};const A=/\bvoid\s+main\s*\(\s*\)\s*{/g;function T(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=r.ShaderChunk[t];return n?T(n):e}))}const M=[];for(let e=0;e<256;e++)M[e]=(e<16?"0":"")+e.toString(16);const E=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},S=Date.now(),R=new WeakMap,L=new Map;let P=1e10;function C(e,t){const n=function(e){const t=JSON.stringify(e,D);let n=O.get(t);null==n&&O.set(t,n=++U);return n}(t);let i=R.get(e);if(i||R.set(e,i=Object.create(null)),i[n])return new i[n];const o=`_onBeforeCompile${n}`,a=function(r){e.onBeforeCompile.call(this,r);const i=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let a=L[i];if(!a){const e=function({vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:s,fragmentDefs:c,fragmentMainIntro:l,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:d,timeUniform:f}=n;i=i||"",o=o||"",a=a||"",c=c||"",l=l||"",u=u||"",(s||d)&&(e=T(e));(h||d)&&(t=T(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(d){let n=d({vertexShader:e,fragmentShader:t});e=n.vertexShader,t=n.fragmentShader}if(h){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${h}\n${e.join("\n")}\n${u}`}if(f){const e=`\nuniform float ${f};\n`;i=e+i,c=e+c}s&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${s}\n}\n`,o=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${o}\n`,e=(e=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`)));return e=F(e,r,i,o,a),t=F(t,r,c,l,u),{vertexShader:e,fragmentShader:t}}(r,t,n);a=L[i]=e}r.vertexShader=a.vertexShader,r.fragmentShader=a.fragmentShader,E(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-S}}),this[o]&&this[o](r)},s=function(){return c(t.chained?e:e.clone())},c=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:P++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(M[255&e]+M[e>>8&255]+M[e>>16&255]+M[e>>24&255]+"-"+M[255&t]+M[t>>8&255]+"-"+M[t>>16&15|64]+M[t>>24&255]+"-"+M[63&n|128]+M[n>>8&255]+"-"+M[n>>16&255]+M[n>>24&255]+M[255&r]+M[r>>8&255]+M[r>>16&255]+M[r>>24&255]).toUpperCase()}(),i.uniforms=E({},r.uniforms,t.uniforms),i.defines=E({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=E({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:s},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>a,set(e){this[o]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(E(this.extensions,t.extensions),E(this.defines,t.defines),E(this.uniforms,r.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return c(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=C(e.isDerivedMaterial?e.getDepthMaterial():new r.MeshDepthMaterial({depthPacking:r.RGBADepthPacking}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=C(e.isDerivedMaterial?e.getDistanceMaterial():new r.MeshDistanceMaterial,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=s,new s}function F(e,t,n,r,i){return(r||i||n)&&(e=e.replace(A,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function D(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let U=0;const O=new Map;r.DoubleSide;var k=n(5108);const I=()=>(self.performance||Date).now(),B=x();let N;const Z=function(){const e=[];let t=0;function n(){const r=I();for(;e.length&&I()-r<5;)e.shift()();t=e.length?setTimeout(n,0):0}return(...r)=>{const i=s();return e.push((()=>{const e=I();try{B.webgl.generateIntoCanvas(...r),i.resolve({timing:I()-e})}catch(e){i.reject(e)}})),t||(t=setTimeout(n,0)),i}}(),j=function(){const e={};let t=0;return function(n,r,i,o,a,s,c,l,u,h){const d="TroikaTextSDFGenerator_JS_"+t++%4;let m=e[d];return m||(m=e[d]={workerModule:g({name:d,workerId:d,dependencies:[x,I],init(e,t){const n=e().javascript.generate;return function(...e){const r=t();return{textureData:n(...e),timing:t()-r}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),m.requests++,clearTimeout(m.idleTimer),m.workerModule(n,r,i,o,a,s).then((({textureData:e,timing:t})=>{const i=I(),o=new Uint8Array(4*e.length);for(let t=0;t<e.length;t++)o[4*t+h]=e[t];return B.webglUtils.renderImageData(c,o,l,u,n,r,1<<3-h),t+=I()-i,0==--m.requests&&(m.idleTimer=setTimeout((()=>{!function(e){p[e]&&p[e].forEach((function(e){e()})),f[e]&&(f[e].terminate(),delete f[e])}(d)}),2e3)),{timing:t}}))}}();const z=B.webglUtils.resizeWebGLCanvasWithoutClearing;const G=g({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var c=n.readUint(r,i);i+=4,a.push(t._readFont(r,c))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:e,_offset:i},c={},l=0;l<o;l++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,c[u]={offset:h,length:d}}for(l=0;l<a.length;l++){var f=a[l];c[f]&&(s[f.trim()]=t[f.trim()].parse(e,c[f].offset,c[f].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var c=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var l=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,c==n)return l}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},c=n;a.readFixed(e,n),n+=4;var l=a.readUshort(e,n);n+=2;var u=a.readUshort(e,n);n+=2;var h=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,c+l),s.featureList=t._lctf.readFeatureList(e,c+u),s.lookupList=t._lctf.readLookupList(e,c+h,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var c=0;c<s;c++){var l=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+l,r);a.push(u)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var c=a.ltype,l=0;l<s;l++){var u=i.readUshort(e,n);n+=2;var h=r(e,c,o+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var c=0;c<s;c++)i.push(a+c),i.push(a+c),i.push(r.readUshort(e,n)),n+=2}if(2==o){var l=r.readUshort(e,n);for(n+=2,c=0;c<l;c++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var c=r.readASCII(e,n,4);n+=4;var l=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+l);u.tag=c.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var c=0;c<s;c++)o.tab.push(r.readUshort(e,n+2*c));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var c=r.readASCII(e,n,4);n+=4;var l=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readScriptTable(e,i+l)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,o.default=t._lctf.readLangSysTable(e,i+a);var s=r.readUshort(e,n);n+=2;for(var c=0;c<s;c++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var c=[];n=t.CFF.readIndex(e,n,c);var l=[];for(s=0;s<c.length-1;s++)l.push(t.CFF.readDict(e,n+c[s],n+c[s+1]));n+=c[c.length-1];var u=l[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=f}if(u.ROS){n=u.FDArray;var p=[];for(n=t.CFF.readIndex(e,n,p),u.FDArray=[],s=0;s<p.length-1;s++){var m=t.CFF.readDict(e,n+p[s],n+p[s+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=p[p.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var v=i.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var c=0;c<o.length-1;c++)r.Subrs.push(i.readBytes(e,n+o[c],o[c+1]-o[c]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var c=i.readUshort(e,n);n+=2,o.push(c)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){c=i.readUshort(e,n),n+=2;var l=0;for(1==a?(l=e[n],n++):(l=i.readUshort(e,n),n+=2),s=0;s<=l;s++)o.push(c),c++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,c=null,l=null;o<=20&&(c=o,s=1),12==o&&(c=100*o+a,s=2),21<=o&&o<=27&&(c=o,s=1),28==o&&(l=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(c=o,s=1),32<=o&&o<=246&&(l=o-139,s=1),247<=o&&o<=250&&(l=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(l=256*-(o-251)-a-108,s=2),255==o&&(l=i.readInt(e,n+1)/65535,s=5),r.val=null!=l?l:"o"+c,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],c=e[n+1];e[n+2],e[n+3],e[n+4];var l=1,u=null,h=null;s<=20&&(u=s,l=1),12==s&&(u=100*s+c,l=2),19!=s&&20!=s||(u=s,l=2),21<=s&&s<=27&&(u=s,l=1),28==s&&(h=o.readShort(e,n+1),l=3),29<=s&&s<=31&&(u=s,l=1),32<=s&&s<=246&&(h=s-139,l=1),247<=s&&s<=250&&(h=256*(s-247)+c+108,l=2),251<=s&&s<=254&&(h=256*-(s-251)-c-108,l=2),255==s&&(h=o.readInt(e,n+1)/65535,l=5),a.push(null!=h?h:"o"+u),n+=l}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],c=e[n+1];e[n+2],e[n+3],e[n+4];var l=1,u=null,h=null;if(28==s&&(h=i.readShort(e,n+1),l=3),29==s&&(h=i.readInt(e,n+1),l=5),32<=s&&s<=246&&(h=s-139,l=1),247<=s&&s<=250&&(h=256*(s-247)+c+108,l=2),251<=s&&s<=254&&(h=256*-(s-251)-c-108,l=2),255==s)throw h=i.readInt(e,n+1)/65535,l=5,"unknown number";if(30==s){var d=[];for(l=1;;){var f=e[n+l];l++;var p=f>>4,m=15&f;if(15!=p&&d.push(p),15!=m&&d.push(m),15==m)break}for(var g="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<d.length;_++)g+=v[d[_]];h=parseFloat(g)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],l=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],l=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=l}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var c=0;c<a;c++){var l=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+l+"e"+u,f=s.indexOf(h);if(-1==f){var p;f=o.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?p=t.cmap.parse0(e,h):4==m?p=t.cmap.parse4(e,h):6==m?p=t.cmap.parse6(e,h):12==m?p=t.cmap.parse12(e,h):k.debug("unknown format: "+m,l,u,h),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=f}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var c=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,c),n+=2*c,n+=2,o.startCount=r.readUshorts(e,n,c),n+=2*c,o.idDelta=[];for(var l=0;l<c;l++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,c),n+=2*c,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,c=r.readUint(e,s+0),l=r.readUint(e,s+4),u=r.readUint(e,s+8);i.groups.push([c,l,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var c=r.readUshort(i,o);if(o+=2,i.length-o<c)return null;a.instructions=r.readBytes(i,o,c),o+=c;var l=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<l;s++){var u=i[o];if(o++,a.flags.push(u),0!=(8&u)){var h=i[o];o++;for(var d=0;d<h;d++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<l;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?i[o]:-i[o]),o++):p?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<l;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?i[o]:-i[o]),o++):p?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,g=0;for(s=0;s<l;s++)m+=a.xs[s],g+=a.ys[s],a.xs[s]=m,a.ys[s]=g}else{var v;a.parts=[];do{v=r.readUshort(i,o),o+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(_),_.glyphIndex=r.readUshort(i,o),o+=2,1&v){var y=r.readShort(i,o);o+=2;var b=r.readShort(i,o);o+=2}else y=r.readInt8(i,o),o++,b=r.readInt8(i,o),o++;2&v?(_.m.tx=y,_.m.ty=b):(_.p1=y,_.p2=b),8&v?(_.m.a=_.m.d=r.readF2dot14(i,o),o+=2):64&v?(_.m.a=r.readF2dot14(i,o),o+=2,_.m.d=r.readF2dot14(i,o),o+=2):128&v&&(_.m.a=r.readF2dot14(i,o),o+=2,_.m.b=r.readF2dot14(i,o),o+=2,_.m.c=r.readF2dot14(i,o),o+=2,_.m.d=r.readF2dot14(i,o),o+=2)}while(32&v);if(256&v){var x=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<x;s++)a.instr.push(i[o]),o++}}return a},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var c=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,c+a)}if(1==n&&1==s.fmt){var l=o.readUshort(e,r);r+=2;var u=t._lctf.numOfOnes(l);0!=l&&(s.pos=t.GPOS.readValueRecord(e,r,l))}else if(2==n&&s.fmt>=1&&s.fmt<=2){l=o.readUshort(e,r),r+=2;var h=o.readUshort(e,r);r+=2,u=t._lctf.numOfOnes(l);var d=t._lctf.numOfOnes(h);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(e,r);r+=2;for(var p=0;p<f;p++){var m=a+o.readUshort(e,r);r+=2;var g=o.readUshort(e,m);m+=2;for(var v=[],_=0;_<g;_++){var y=o.readUshort(e,m);m+=2,0!=l&&(M=t.GPOS.readValueRecord(e,m,l),m+=2*u),0!=h&&(E=t.GPOS.readValueRecord(e,m,h),m+=2*d),v.push({gid2:y,val1:M,val2:E})}s.pairsets.push(v)}}if(2==s.fmt){var b=o.readUshort(e,r);r+=2;var x=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);r+=2;var A=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+b),s.classDef2=t._lctf.readClassDef(e,a+x),s.matrix=[],p=0;p<w;p++){var T=[];for(_=0;_<A;_++){var M=null,E=null;0!=l&&(M=t.GPOS.readValueRecord(e,r,l),r+=2*u),0!=h&&(E=t.GPOS.readValueRecord(e,r,h),r+=2*d),T.push({val1:M,val2:E})}s.matrix.push(T)}}}else{if(9==n&&1==s.fmt){var S=o.readUshort(e,r);r+=2;var R=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=S;else if(i.ltype!=S)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+R)}k.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var c=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+c)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var l=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,l),r+=2*s.newg.length}}else if(4==n){s.vals=[],l=o.readUshort(e,r),r+=2;for(var u=0;u<l;u++){var h=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+h))}}else if(5==n&&2==s.fmt){if(2==s.fmt){var d=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+d),s.scset=[];var f=o.readUshort(e,r);for(r+=2,u=0;u<f;u++){var p=o.readUshort(e,r);r+=2,s.scset.push(0==p?null:t.GSUB.readSubClassSet(e,a+p))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){l=o.readUshort(e,r),r+=2;for(var m=[],g=0;g<l;g++)m.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*g)));r+=2*l,0==u&&(s.backCvg=m),1==u&&(s.inptCvg=m),2==u&&(s.ahedCvg=m)}l=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,l)}}else{if(7==n&&1==s.fmt){var v=o.readUshort(e,r);r+=2;var _=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=v;else if(i.ltype!=v)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+_)}k.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var c=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+c))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var c=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+c))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var c=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+c))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,c=0,l=0;l<i.maxp.numGlyphs;l++)l<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,c=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(c);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var c={glyph1:[],rval:[]},l=0;l<s;l++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,c)}return c},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},c=0;c<a;c++){o.readUint(e,n),n+=4;var l=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=l>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var c=i.readUshort(e,n);n+=2;var l=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,c!=o&&(r.glyph1.push(c),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(l),h.vals.push(u),o=c}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,c=i.maxp.numGlyphs+1;if(0==s)for(var l=0;l<c;l++)a.push(o.readUshort(e,n+(l<<1))<<1);if(1==s)for(l=0;l<c;l++)a.push(o.readUint(e,n+(l<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],l=n+=2,u=0;u<a;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var v,_=c[p],y=l+12*a+g;if(0==h)v=i.readUnicode(e,y,m/2);else if(3==h&&0==d)v=i.readUnicode(e,y,m/2);else if(0==d)v=i.readASCII(e,y,m);else if(1==d)v=i.readUnicode(e,y,m/2);else if(3==d)v=i.readUnicode(e,y,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;v=i.readASCII(e,y,m),k.debug("reading unknown MAC encoding "+d+" as ASCII")}var b="p"+h+","+f.toString(16);null==o[b]&&(o[b]={}),o[b][void 0!==_?_:p]=v,o[b]._lang=f}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return k.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var c=0;a.FDSelect[c+2]<=n;)c+=2;s=a.FDArray[a.FDSelect[c+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,c=a==o?i:a+1,l=1&e.flags[a],u=1&e.flags[s],h=1&e.flags[c],d=e.xs[a],f=e.ys[a];if(a==i)if(l){if(!u){t.U.P.moveTo(n,d,f);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+f)/2);l?u&&t.U.P.lineTo(n,d,f):h?t.U.P.qcurveTo(n,d,f,e.xs[c],e.ys[c]):t.U.P.qcurveTo(n,d,f,(d+e.xs[c])/2,(f+e.ys[c])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,c=0;c<o.crds.length;c+=2){var l=o.crds[c],u=o.crds[c+1];r.crds.push(l*s.a+u*s.b+s.tx),r.crds.push(l*s.c+u*s.d+s.ty)}for(c=0;c<o.cmds.length;c++)r.cmds.push(o.cmds[c])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=0,o=!1;if(e.GPOS)for(var a=e.GPOS,s=a.lookupList,c=a.featureList,l=[],u=0;u<c.length;u++){var h=c[u];if("kern"==h.tag){o=!0;for(var d=0;d<h.tab.length;d++)if(!l[h.tab[d]]){l[h.tab[d]]=!0;for(var f=s[h.tab[d]],p=0;p<f.tabs.length;p++)if(null!=f.tabs[p]){var m,g=f.tabs[p];if(!g.coverage||-1!=(m=t._lctf.coverageIndex(g.coverage,n)))if(1==f.ltype);else if(2==f.ltype){var v;if(1==g.fmt){var _=g.pairsets[m];for(u=0;u<_.length;u++)_[u].gid2==r&&(v=_[u])}else if(2==g.fmt){var y=t.U._getGlyphClass(n,g.classDef1),b=t.U._getGlyphClass(r,g.classDef2);v=g.matrix[y][b]}v&&v.val1&&v.val1[2]&&(i+=v.val1[2]),v&&v.val2&&v.val2[0]&&(i+=v.val2[0])}}}}}if(e.kern&&!o){var x=e.kern.glyph1.indexOf(n);if(-1!=x){var w=e.kern.rval[x].glyph2.indexOf(r);-1!=w&&(i+=e.kern.rval[x].vals[w])}}return i},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,c=r.tabs[a];if(!c.coverage||-1!=(s=t._lctf.coverageIndex(c.coverage,e[n])))if(1==r.ltype)e[n],1==c.fmt?e[n]=e[n]+c.delta:e[n]=c.newg[s];else if(4==r.ltype)for(var l=c.vals[s],u=0;u<l.length;u++){var h=l[u],d=h.chain.length;if(!(d>o)){for(var f=!0,p=0,m=0;m<d;m++){for(;-1==e[n+p+(1+m)];)p++;h.chain[m]!=e[n+p+(1+m)]&&(f=!1)}if(f){for(e[n]=h.nglyph,m=0;m<d+p;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==c.fmt)for(var g=t._lctf.getInterval(c.cDef,e[n]),v=c.cDef[g+2],_=c.scset[v],y=0;y<_.length;y++){var b=_[y],x=b.input;if(!(x.length>o)){for(f=!0,m=0;m<x.length;m++){var w=t._lctf.getInterval(c.cDef,e[n+1+m]);if(-1==g&&c.cDef[w+2]!=x[m]){f=!1;break}}if(f){var A=b.substLookupRecords;for(u=0;u<A.length;u+=2)A[u],A[u+1]}}}else if(6==r.ltype&&3==c.fmt){if(!t.U._glsCovered(e,c.backCvg,n-c.backCvg.length))continue;if(!t.U._glsCovered(e,c.inptCvg,n))continue;if(!t.U._glsCovered(e,c.ahedCvg,n+c.inptCvg.length))continue;var T=c.lookupRec;for(y=0;y<T.length;y+=2){g=T[y];var M=i[T[y+1]];t.U._applySubs(e,n+g,M,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var c=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,l=t.U.glyphToPath(e,s),u=0;u<l.crds.length;u+=2)i.crds.push(l.crds[u]+o),i.crds.push(l.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<l.cmds.length;u++)i.cmds.push(l.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,c))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,c=n.haveWidth,l=n.width,u=n.open,h=0,d=n.x,f=n.y,p=0,m=0,g=0,v=0,_=0,y=0,b=0,x=0,w=0,A=0,T={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,T);var M=T.val;if(h+=T.size,"o1"==M||"o18"==M)a.length%2!=0&&!c&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,c=!0;else if("o3"==M||"o23"==M)a.length%2!=0&&!c&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,c=!0;else if("o4"==M)a.length>1&&!c&&(l=a.shift()+i.nominalWidthX,c=!0),u&&t.U.P.closePath(o),f+=a.pop(),t.U.P.moveTo(o,d,f),u=!0;else if("o5"==M)for(;a.length>0;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);else if("o6"==M||"o7"==M)for(var E=a.length,S="o6"==M,R=0;R<E;R++){var L=a.shift();S?d+=L:f+=L,S=!S,t.U.P.lineTo(o,d,f)}else if("o8"==M||"o24"==M){E=a.length;for(var P=0;P+6<=E;)p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f),P+=6;"o24"==M&&(d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f))}else{if("o11"==M)break;if("o1234"==M||"o1235"==M||"o1236"==M||"o1237"==M)"o1234"==M&&(m=f,g=(p=d+a.shift())+a.shift(),A=v=m+a.shift(),y=v,x=f,d=(b=(_=(w=g+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,A),t.U.P.curveTo(o,_,y,b,x,d,f)),"o1235"==M&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),w=g+a.shift(),A=v+a.shift(),_=w+a.shift(),y=A+a.shift(),b=_+a.shift(),x=y+a.shift(),d=b+a.shift(),f=x+a.shift(),a.shift(),t.U.P.curveTo(o,p,m,g,v,w,A),t.U.P.curveTo(o,_,y,b,x,d,f)),"o1236"==M&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),A=v=m+a.shift(),y=v,b=(_=(w=g+a.shift())+a.shift())+a.shift(),x=y+a.shift(),d=b+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,A),t.U.P.curveTo(o,_,y,b,x,d,f)),"o1237"==M&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),w=g+a.shift(),A=v+a.shift(),_=w+a.shift(),y=A+a.shift(),b=_+a.shift(),x=y+a.shift(),Math.abs(b-d)>Math.abs(x-f)?d=b+a.shift():f=x+a.shift(),t.U.P.curveTo(o,p,m,g,v,w,A),t.U.P.curveTo(o,_,y,b,x,d,f));else if("o14"==M){if(a.length>0&&!c&&(l=a.shift()+r.nominalWidthX,c=!0),4==a.length){var C=a.shift(),F=a.shift(),D=a.shift(),U=a.shift(),O=t.CFF.glyphBySE(r,D),I=t.CFF.glyphBySE(r,U);t.U._drawCFF(r.CharStrings[O],n,r,i,o),n.x=C,n.y=F,t.U._drawCFF(r.CharStrings[I],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==M||"o20"==M)a.length%2!=0&&!c&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,c=!0,h+=s+7>>3;else if("o21"==M)a.length>2&&!c&&(l=a.shift()+i.nominalWidthX,c=!0),f+=a.pop(),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o22"==M)a.length>1&&!c&&(l=a.shift()+i.nominalWidthX,c=!0),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o25"==M){for(;a.length>6;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f)}else if("o26"==M)for(a.length%2&&(d+=a.shift());a.length>0;)p=d,m=f+a.shift(),d=g=p+a.shift(),f=(v=m+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f);else if("o27"==M)for(a.length%2&&(f+=a.shift());a.length>0;)m=f,g=(p=d+a.shift())+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v,t.U.P.curveTo(o,p,m,g,v,d,f);else if("o10"==M||"o29"==M){var B="o10"==M?i:r;if(0==a.length)k.debug("error: empty stack");else{var N=a.pop(),Z=B.Subrs[N+B.Bias];n.x=d,n.y=f,n.nStems=s,n.haveWidth=c,n.width=l,n.open=u,t.U._drawCFF(Z,n,r,i,o),d=n.x,f=n.y,s=n.nStems,c=n.haveWidth,l=n.width,u=n.open}}else if("o30"==M||"o31"==M){var j=a.length,z=(P=0,"o31"==M);for(P+=j-(E=-3&j);P<E;)z?(m=f,g=(p=d+a.shift())+a.shift(),f=(v=m+a.shift())+a.shift(),E-P==5?(d=g+a.shift(),P++):d=g,z=!1):(p=d,m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),E-P==5?(f=v+a.shift(),P++):f=v,z=!0),t.U.P.curveTo(o,p,m,g,v,d,f),P+=4}else{if("o"==(M+"").charAt(0))throw k.debug("Unknown operation: "+M,e),M;a.push(M)}}}n.x=d,n.y=f,n.nStems=s,n.haveWidth=c,n.width=l,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},c=s(i,2),l=c[0],u=c[1];l[28]=258,u[258]=28;for(var h=s(o,0)[0],d=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,c=new n(t);for(o=0;o<t;++o)c[o]=c[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var l=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],f=c[e[o]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[d[f]>>>l]=u}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=d[c[e[o]-1]++]>>>15-e[o]);return s},g=new t(288);for(f=0;f<144;++f)g[f]=8;for(f=144;f<256;++f)g[f]=9;for(f=256;f<280;++f)g[f]=7;for(f=280;f<288;++f)g[f]=8;var v=new t(32);for(f=0;f<32;++f)v[f]=5;var _=m(g,9,1),y=m(v,5,1),b=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},x=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},w=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},A=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],T=function(e,t,n){var r=new Error(t||A[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,T),!n)throw r;return r},M=function(e,s,c){var u=e.length;if(!u||c&&!c.l&&u<5)return s||new t(0);var d=!s||c,f=!c||c.i;c||(c={}),s||(s=new t(3*u));var p,g=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},v=c.f||0,A=c.p||0,M=c.b||0,E=c.l,S=c.d,R=c.m,L=c.n,P=8*u;do{if(!E){c.f=v=x(e,A,1);var C=x(e,A+1,3);if(A+=3,!C){var F=e[(G=((p=A)/8|0)+(7&p&&1)+4)-4]|e[G-3]<<8,D=G+F;if(D>u){f&&T(0);break}d&&g(M+F),s.set(e.subarray(G,D),M),c.b=M+=F,c.p=A=8*D;continue}if(1==C)E=_,S=y,R=9,L=5;else if(2==C){var U=x(e,A,31)+257,O=x(e,A+10,15)+4,k=U+x(e,A+5,31)+1;A+=14;for(var I=new t(k),B=new t(19),N=0;N<O;++N)B[a[N]]=x(e,A+3*N,7);A+=3*O;var Z=b(B),j=(1<<Z)-1,z=m(B,Z,1);for(N=0;N<k;){var G,V=z[x(e,A,j)];if(A+=15&V,(G=V>>>4)<16)I[N++]=G;else{var W=0,H=0;for(16==G?(H=3+x(e,A,3),A+=2,W=I[N-1]):17==G?(H=3+x(e,A,7),A+=3):18==G&&(H=11+x(e,A,127),A+=7);H--;)I[N++]=W}}var X=I.subarray(0,U),Q=I.subarray(U);R=b(X),L=b(Q),E=m(X,R,1),S=m(Q,L,1)}else T(1);if(A>P){f&&T(0);break}}d&&g(M+131072);for(var Y=(1<<R)-1,K=(1<<L)-1,q=A;;q=A){var J=(W=E[w(e,A)&Y])>>>4;if((A+=15&W)>P){f&&T(0);break}if(W||T(2),J<256)s[M++]=J;else{if(256==J){q=A,E=null;break}var $=J-254;if(J>264){var ee=i[N=J-257];$=x(e,A,(1<<ee)-1)+l[N],A+=ee}var te=S[w(e,A)&K],ne=te>>>4;if(te||T(3),A+=15&te,Q=h[ne],ne>3&&(ee=o[ne],Q+=w(e,A)&(1<<ee)-1,A+=ee),A>P){f&&T(0);break}d&&g(M+131072);for(var re=M+$;M<re;M+=4)s[M]=s[M-Q],s[M+1]=s[M+1-Q],s[M+2]=s[M+2-Q],s[M+3]=s[M+3-Q];M=re}}c.l=E,c.p=q,c.b=M,E&&(v=1,c.m=R,c.d=S,c.n=L)}while(!v);return M==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,M)},E=new t(0),S="undefined"!=typeof TextDecoder&&new TextDecoder;try{S.decode(E,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){v.setUint16(_,e),_+=2}function a(e){v.setUint32(_,e),_+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},c=0;Math.pow(2,c)<=s.numTables;)c++;c--;for(var l=16*Math.pow(2,c),u=16*s.numTables-l,h=12,d=[],f=0;f<s.numTables;f++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var p,m=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,v=new DataView(g),_=0;return a(s.flavor),o(s.numTables),o(l),o(c),o(u),d.forEach((function(e){a(e.tag),a(e.origChecksum),a(h),a(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),M(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var o=0;(h=t.outOffset+t.origLength)%4!=0&&(o=4-h%4),m.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),p=h+o})),g.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function o(e){if(!i){const e={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[o,a]=r.split("+");o=parseInt(o,36),a=a?parseInt(a,36):0,i.set(n+=o,e[t]);for(let r=a;r--;)i.set(++n,e[t])}))}}return i.get(e)||32}const a=[null,"isol","init","fina","medi"];function s(e){const t=new Uint8Array(e.length);let n=32,r=1,i=-1;for(let a=0;a<e.length;a++){const s=e.codePointAt(a);let c=0|o(s),l=1;8&c||(21&n?22&c?(l=3,1!==r&&3!==r||t[i]++):33&c&&(2!==r&&4!==r||t[i]--):34&n&&(2!==r&&4!==r||t[i]--),r=t[a]=l,n=c,i=a,s>65535&&a++)}return t}function c(t){const r=Object.create(null),i={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(o,c,l,u){let h=0;const d=1/i.unitsPerEm*c,f=function(t,n){const r=[];for(let i=0;i<n.length;i++){const o=n.codePointAt(i);o>65535&&i++,r.push(e.U.codeToGlyph(t,o))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let c;const l=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];o.forEach((i=>{if(l.test(i.tag))for(let o=0;o<i.tab.length;o++){if(u[i.tab[o]])continue;u[i.tab[o]]=!0;const l=t[i.tab[o]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!c&&(c=s(n));for(let n=0;n<r.length;n++)c&&h&&a[c[n]]!==i.tag||e.U._applySubs(r,n,l,t)}}))}return r}(t,o);let p=0,m=-1;return f.forEach(((i,a)=>{if(-1!==i){let o=r[i];if(!o){const{cmds:a,crds:s}=e.U.glyphToPath(t,i);let c,l,u,h,d="",f=0;for(let e=0,t=a.length;e<t;e++){const t=n[a[e]];d+=a[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+s[f++]}if(s.length){c=l=1/0,u=h=-1/0;for(let e=0,t=s.length;e<t;e+=2){let t=s[e],n=s[e+1];t<c&&(c=t),n<l&&(l=n),t>u&&(u=t),n>h&&(h=n)}}else c=u=l=h=0;o=r[i]={index:i,advanceWidth:t.hmtx.aWidth[i],xMin:c,yMin:l,xMax:u,yMax:h,path:d,pathCommandCount:a.length}}-1!==m&&(h+=e.U.getPairAdjustment(t,m,i)*d),u.call(null,o,h,p),o.advanceWidth&&(h+=o.advanceWidth*d),l&&(h+=l*c),m=i}p+=o.codePointAt(p)>65535?2:1})),h}};return i}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return c(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())}),V={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},W=new r.Color;let H=!1;function X(){return(self.performance||Date).now()}const Q=Object.create(null);function Y(e,t){H=!0,e=q({},e);const n=X();if(e.font=function(e){J||(J="undefined"==typeof document?{}:document.createElement("a"));return J.href=e,J.href}(e.font||V.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||V.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=W.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:i,sdfExponent:o}=V,{sdfGlyphSize:a}=e,c=i/a*4;let l=Q[a];if(!l){const e=document.createElement("canvas");e.width=i,e.height=256*a/c,l=Q[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:e,sdfTexture:new r.Texture(e,void 0,void 0,void 0,r.LinearFilter,r.LinearFilter),contextLost:!1,glyphsByFont:new Map},l.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{k.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{k.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(K(t,e,!0))}))})),s.all(n).then((()=>{$(e),e.sdfTexture.needsUpdate=!0}))}))}(l)}const{sdfTexture:u,sdfCanvas:h}=l;let d=l.glyphsByFont.get(e.font);d||l.glyphsByFont.set(e.font,d=new Map),te(e).then((r=>{const{glyphIds:f,glyphPositions:p,fontSize:m,unitsPerEm:g,timings:v}=r,_=[],y=new Float32Array(4*f.length),b=m/g;let x=0,w=0;const A=X();f.forEach(((e,t)=>{let n=d.get(e);if(!n){const{path:t,pathBounds:i}=r.glyphData[e],o=Math.max(i[2]-i[0],i[3]-i[1])/a*(V.sdfMargin*a+.5),s=l.glyphCount++,c=[i[0]-o,i[1]-o,i[2]+o,i[3]+o];d.set(e,n={path:t,atlasIndex:s,sdfViewBox:c}),_.push(n)}const{sdfViewBox:i}=n,o=p[w++],s=p[w++];y[x++]=o+i[0]*b,y[x++]=s+i[1]*b,y[x++]=o+i[2]*b,y[x++]=s+i[3]*b,f[t]=n.atlasIndex})),v.quads=(v.quads||0)+(X()-A);const T=X();v.sdf={};const M=h.height,E=Math.ceil(l.glyphCount/c),S=Math.pow(2,Math.ceil(Math.log2(E*a)));S>M&&(k.info(`Increasing SDF texture size ${M}->${S}`),z(h,i,S),u.dispose()),s.all(_.map((t=>K(t,l,e.gpuAccelerateSDF).then((({timing:e})=>{v.sdf[t.atlasIndex]=e}))))).then((()=>{_.length&&!l.contextLost&&($(l),u.needsUpdate=!0),v.sdfTotal=X()-T,v.total=X()-n,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:y,glyphAtlasIndices:f,glyphColors:r.glyphColors,caretPositions:r.caretPositions,caretHeight:r.caretHeight,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings,get totalBounds(){return k.log("totalBounds deprecated, use blockBounds instead"),r.blockBounds},get totalBlockSize(){k.log("totalBlockSize deprecated, use blockBounds instead");const[e,t,n,i]=r.blockBounds;return[n-e,i-t]}}))}))})),s.all([]).then((()=>{var e;l.contextLost||(e=h)._warm||(B.webgl.isSupported(e),e._warm=!0)}))}function K({path:e,atlasIndex:t,sdfViewBox:n},{sdfGlyphSize:r,sdfCanvas:i,contextLost:o},a){if(o)return Promise.resolve({timing:-1});const{textureWidth:s,sdfExponent:c}=V,l=Math.max(n[2]-n[0],n[3]-n[1]),u=Math.floor(t/4);return function(e,t,n,r,i,o,a,s,c,l,u=!0){return u?Z(e,t,n,r,i,o,a,s,c,l).then(null,(u=>(N||(k.warn("WebGL SDF generation failed, falling back to JS",u),N=!0),j(e,t,n,r,i,o,a,s,c,l)))):j(e,t,n,r,i,o,a,s,c,l)}(r,r,e,n,l,c,i,u%(s/r)*r,Math.floor(u/(s/r))*r,t%4,a)}function q(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let J;function $(e){if("function"!=typeof createImageBitmap){k.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const ee=g({name:"Typesetter",dependencies:[V,G,function(e,t,n){const{defaultFontURL:r}=n,i=Object.create(null),o=1/0,a=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,s=/[\s\-\u007C\u00AD\u2010\u2012-\u2014\u2027\u2056\u2E17\u2E40]/;function c(t,n){t||(t=r);let o=i[t];o?o.pending?o.pending.push(n):n(o):(i[t]={pending:[n]},function(t,n){!function i(){const o=e=>{k.error(`Failure loading font ${t}${t===r?"":"; trying fallback"}`,e),t!==r&&(t=r,i())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)o(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(e){o(e)}},r.onerror=o,r.send()}catch(e){o(e)}}()}(t,(e=>{let n=i[t].pending;i[t]=e,n.forEach((t=>t(e)))})))}function l({text:e="",font:n=r,sdfGlyphSize:i=64,fontSize:l=1,letterSpacing:p=0,lineHeight:m="normal",maxWidth:g=o,direction:v,textAlign:_="left",textIndent:y=0,whiteSpace:b="normal",overflowWrap:x="normal",anchorX:w=0,anchorY:A=0,includeCaretPositions:T=!1,chunkedBoundsSize:M=8192,colorRanges:E=null},S,R=!1){const L=d(),P={fontLoad:0,typesetting:0};e.indexOf("\r")>-1&&(k.info("Typesetter: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),l=+l,p=+p,g=+g,m=m||"normal",y=+y,c(n,(n=>{const r=isFinite(g);let i=null,c=null,C=null,F=null,D=null,U=null,O=null,k=0,I=0,B="nowrap"!==b;const{ascender:N,descender:Z,unitsPerEm:j}=n;P.fontLoad=d()-L;const z=d(),G=l/j;"normal"===m&&(m=(N-Z)/j);const V=((m*=l)-(N-Z)*G)/2,W=-(N*G+V),H=Math.min(m,(N-Z)*G),X=(N+Z)/2*G-H/2;let Q=y,Y=new f;const K=[Y];n.forEachGlyph(e,l,p,((t,n,i)=>{const o=e.charAt(i),c=t.advanceWidth*G,u=Y.count;let h;if("isEmpty"in t||(t.isWhitespace=!!o&&/\s/.test(o),t.canBreakAfter=!!o&&s.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||a.test(o)),t.isWhitespace||t.isEmpty||I++,B&&r&&!t.isWhitespace&&n+c+Q>g&&u){if(Y.glyphAt(u-1).glyphObj.canBreakAfter)h=new f,Q=-n;else for(let e=u;e--;){if(0===e&&"break-word"===x){h=new f,Q=-n;break}if(Y.glyphAt(e).glyphObj.canBreakAfter){h=Y.splitAt(e+1);const t=h.glyphAt(0).x;Q-=t;for(let e=h.count;e--;)h.glyphAt(e).x-=t;break}}h&&(Y.isSoftWrapped=!0,Y=h,K.push(Y),k=g)}let d=Y.glyphAt(Y.count);d.glyphObj=t,d.x=n+Q,d.width=c,d.charIndex=i,"\n"===o&&(Y=new f,K.push(Y),Q=-(n+c+p*l)+y)})),K.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>k&&(k=e.width))}}));let q=0,J=0;if(w&&("number"==typeof w?q=-w:"string"==typeof w&&(q=-k*("left"===w?0:"center"===w?.5:"right"===w?1:u(w)))),A)if("number"==typeof A)J=-A;else if("string"==typeof A){let e=K.length*m;J="top"===A?0:"top-baseline"===A?-W:"middle"===A?e/2:"bottom"===A?e:"bottom-baseline"===A?e-V+Z*G:u(A)*e}if(!R){const r=t.getEmbeddingLevels(e,v);i=new Uint16Array(I),c=new Float32Array(2*I),C={},U=[o,o,-1/0,-1/0],O=[];let a=W;T&&(D=new Float32Array(3*e.length)),E&&(F=new Uint8Array(3*I));let s,l,u=0,d=-1,f=-1;if(K.forEach(((p,g)=>{let{count:v,width:y}=p;if(v>0){let m=0;for(let e=v;e--&&p.glyphAt(e).glyphObj.isWhitespace;)m++;let g=0,b=0;if("center"===_)g=(k-y)/2;else if("right"===_)g=k-y;else if("justify"===_&&p.isSoftWrapped){let e=0;for(let t=v-m;t--;)p.glyphAt(t).glyphObj.isWhitespace&&e++;b=(k-y)/e}if(b||g){let e=0;for(let t=0;t<v;t++){let n=p.glyphAt(t);const r=n.glyphObj;n.x+=g+e,0!==b&&r.isWhitespace&&t<v-m&&(e+=b,n.width+=b)}}const x=t.getReorderSegments(e,r,p.glyphAt(0).charIndex,p.glyphAt(p.count-1).charIndex);for(let e=0;e<x.length;e++){const[t,n]=x[e];let r=1/0,i=-1/0;for(let e=0;e<v;e++)if(p.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<v;o++){let e=p.glyphAt(o);if(e.charIndex>n)break;o<v-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=p.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let w;const A=e=>w=e;for(let m=0;m<v;m++){let g=p.glyphAt(m);w=g.glyphObj;const v=w.index,_=1&r.levels[g.charIndex];if(_){const r=t.getMirroredCharacter(e[g.charIndex]);r&&n.forEachGlyph(r,0,0,A)}if(T){const{charIndex:e}=g,t=g.x+q,n=g.x+g.width+q;D[3*e]=_?n:t,D[3*e+1]=_?t:n,D[3*e+2]=a+X+J;const r=e-d;r>1&&h(D,d,r),d=e}if(E){const{charIndex:e}=g;for(;e>f;)f++,E.hasOwnProperty(f)&&(l=E[f])}if(!w.isWhitespace&&!w.isEmpty){const e=u++;C[v]||(C[v]={path:w.path,pathBounds:[w.xMin,w.yMin,w.xMax,w.yMax]});const t=g.x+q,n=a+J;c[2*e]=t,c[2*e+1]=n;const r=t+w.xMin*G,h=n+w.yMin*G,d=t+w.xMax*G,f=n+w.yMax*G;r<U[0]&&(U[0]=r),h<U[1]&&(U[1]=h),d>U[2]&&(U[2]=d),f>U[3]&&(U[3]=f),e%M==0&&(s={start:e,end:e,rect:[o,o,-1/0,-1/0]},O.push(s)),s.end++;const p=s.rect;if(r<p[0]&&(p[0]=r),h<p[1]&&(p[1]=h),d>p[2]&&(p[2]=d),f>p[3]&&(p[3]=f),i[e]=v,E){const t=3*e;F[t]=l>>16&255,F[t+1]=l>>8&255,F[t+2]=255&l}}}}a-=m})),D){const t=e.length-d;t>1&&h(D,d,t)}}P.typesetting=d()-z,S({glyphIds:i,glyphPositions:c,glyphData:C,caretPositions:D,caretHeight:H,glyphColors:F,chunkedBounds:O,fontSize:l,unitsPerEm:j,ascender:N*G,descender:Z*G,lineHeight:m,topBaseline:W,blockBounds:[q,J-K.length*m,q+k,J],visibleBounds:U,timings:P})}))}function u(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function h(e,t,n){const r=e[3*t],i=e[3*t+1],o=e[3*t+2],a=(i-r)/n;for(let i=0;i<n;i++){const n=3*(t+i);e[n]=r+a*i,e[n+1]=r+a*(i+1),e[n+2]=o}}function d(){return(self.performance||Date).now()}function f(){this.data=[]}const p=["glyphObj","x","width","charIndex"];return f.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/p.length)},glyphAt(e){let t=f.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new f;return t.data=this.data.splice(e*p.length),t}},f.flyweight=p.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*p.length+n]},set(e){this.data[this.index*p.length+n]=e}}),e)),{data:null,index:0}),{typeset:l,measure:function(e,t){l(e,(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}),{metricsOnly:!0})},loadFont:c}},w],init(e,t,n,r){const{defaultFontURL:i}=e;return n(t,r(),{defaultFontURL:i})}}),te=g({name:"Typesetter",dependencies:[ee,y],init:(e,t)=>function(n){const r=new t;return e.typeset(n,r.resolve),r},getTransferables(e){const t=[e.glyphPositions.buffer,e.glyphIds.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.glyphColors&&t.push(e.glyphColors.buffer),t}});const ne=(()=>{const e={};const t="aTroikaGlyphIndex";class GlyphsGeometry extends r.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new r.Sphere,this.boundingBox=new r.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===r.BackSide?t/2:0,e===r.DoubleSide?t:t/2)}set detail(t){if(t!==this._detail){this._detail=t,("number"!=typeof t||t<1)&&(t=1);let n=function(t){let n=e[t];if(!n){const i=new r.PlaneBufferGeometry(1,1,t,t),o=i.clone(),a=i.attributes,s=o.attributes,c=new r.BufferGeometry,l=a.uv.count;for(let e=0;e<l;e++)s.position.array[3*e]*=-1,s.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{c.setAttribute(e,new r.Float32BufferAttribute([...a[e].array,...s[e].array],a[e].itemSize))})),c.setIndex([...i.index.array,...o.index.array.map((e=>e+l))]),c.translate(.5,.5,0),n=e[t]=c}return n}(t);["position","normal","uv"].forEach((e=>{this.attributes[e]=n.attributes[e].clone()})),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,r,o,a,s){n(this,"aTroikaGlyphBounds",e,4),n(this,t,r,1),n(this,"aTroikaGlyphColor",s,3),this._blockBounds=o,this._chunkedBounds=a,i(this,r.length),this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:c}=Math,l=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,f=e[2]/h,p=i((d+l)/u)!==i((f+l)/u)?-h:o(s(d)*h,s(f)*h),m=i((d-l)/u)!==i((f-l)/u)?h:a(s(d)*h,s(f)*h),g=i((d+r)/u)!==i((f+r)/u)?2*h:a(h-c(d)*h,h-c(f)*h);n.min.set(p,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(t).count,r=this._chunkedBounds;if(r)for(let t=r.length;t--;){n=r[t].end;let i=r[t].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}i(this,n)}}function n(e,t,n,i){const o=e.getAttribute(t);n?o&&o.array.length===n.length?(o.array.set(n),o.needsUpdate=!0):(e.setAttribute(t,new r.InstancedBufferAttribute(n,i)),delete e._maxInstanceCount,e.dispose()):o&&e.deleteAttribute(t)}function i(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return GlyphsGeometry.prototype.setAttribute||(GlyphsGeometry.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),GlyphsGeometry})();const re=(()=>{const e=new r.MeshBasicMaterial({color:16777215,side:r.DoubleSide,transparent:!0}),t=8421504,n=new r.Matrix4,i=new r.Vector3,o=new r.Vector3,a=[],s=new r.Vector3,c="+x+y";function l(e){return Array.isArray(e)?e[0]:e}let u=()=>{const t=new r.Mesh(new r.PlaneBufferGeometry(1,1),e);return u=()=>t,t},h=()=>{const t=new r.Mesh(new r.PlaneBufferGeometry(1,1,32,1),e);return h=()=>t,t};const d={type:"syncstart"},f={type:"synccomplete"},p=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],m=p.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Text extends r.Mesh{constructor(){super(new ne,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=c,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(d),Y({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(f),e&&e()}))))}onBeforeRender(e,t,n,i,o,a){this.sync(),o.isTroikaTextMaterial&&this._prepareForRender(o),o._hadOwnSide=o.hasOwnProperty("side"),this.geometry.setSide(o._actualSide=o.side),o.side=r.FrontSide}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===n||(t=this._derivedMaterial=function(e){const t=C(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new r.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new r.Vector4(0,0,0,0)},uTroikaClipRect:{value:new r.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new r.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new r.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new r.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(A,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(n),n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),[e,t]}return t}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(e){const a=e.isTextOutlineMaterial,l=e.uniforms,u=this.textRenderInfo;if(u){const{sdfTexture:e,blockBounds:n}=u;l.uTroikaSDFTexture.value=e,l.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),l.uTroikaSDFGlyphSize.value=u.sdfGlyphSize,l.uTroikaSDFExponent.value=u.sdfExponent,l.uTroikaTotalBounds.value.fromArray(n),l.uTroikaUseGlyphColors.value=!a&&!!u.glyphColors;let r,i,o,s=0,c=0,h=0,d=0,f=0;if(a){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:i,outlineOpacity:o}=this;s=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(i)||0),r=o,d=this._parsePercent(t)||0,f=this._parsePercent(n)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(o=this.strokeColor,l.uTroikaStrokeColor.value.set(null==o?t:o),i=this.strokeOpacity,null==i&&(i=1)),r=this.fillOpacity;l.uTroikaDistanceOffset.value=s,l.uTroikaPositionOffset.value.set(d,f),l.uTroikaBlurRadius.value=c,l.uTroikaStrokeWidth.value=h,l.uTroikaStrokeOpacity.value=i,l.uTroikaFillOpacity.value=null==r?1:r,l.uTroikaCurveRadius.value=this.curveRadius||0;let p=this.clipRect;if(p&&Array.isArray(p)&&4===p.length)l.uTroikaClipRect.value.fromArray(p);else{const e=100*(this.fontSize||.1);l.uTroikaClipRect.value.set(n[0]-e,n[1]-e,n[2]+e,n[3]+e)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const h=a?this.outlineColor||0:this.color;if(null==h)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new r.Color;h===t._input&&"object"!=typeof h||t.set(t._input=h)}let d=this.orientation||c;if(d!==e._orientation){let t=l.uTroikaOrient.value;d=d.replace(/[^-+xyz]/g,"");let r=d!==c&&d.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,a,c,l]=r;i.set(0,0,0)[a]="-"===e?1:-1,o.set(0,0,0)[l]="-"===c?-1:1,n.lookAt(s,i.cross(o),o),t.setFromMatrix4(n)}else t.identity();e._orientation=d}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new r.Vector2){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new r.Vector2){return i.copy(e),this.localPositionToTextCoords(this.worldToLocal(i),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?h():u(),s=o.geometry,{position:c,uv:l}=s.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),c.setXYZ(e,t,n,o)}s.boundingSphere=this.geometry.boundingSphere,s.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,a.length=0,o.raycast(e,a);for(let e=0;e<a.length;e++)a[e].object=this,t.push(a[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,m.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}p.forEach((e=>{const t="_private_"+e;Object.defineProperty(Text.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));let g=!1;return Object.defineProperty(Text.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,g||(k.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),g=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}}),Text})();new WeakMap;new WeakMap},1737:function(e,t,n){"use strict";var r=n(7845),i=n(7612),o=n(1489),a=n(7601),s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};let c=!1;class RetroApp extends i.Z{constructor(e){super(Object.assign({},e)),this.dom=void 0,this.stage=void 0,this.stage_prefab=void 0,this.setup_app(),this.define_global_var("app",(e=>this)),this.load_prefab(r.default.load_prefab("retro.scenes.persistent",{"components.renderer.params.pixel_ratio":Math.min(window.devicePixelRatio,2)}))}reload_stage(){this.unload_stage(),this.load_stage(this.stage_prefab)}unload_stage(){if(!(0,a.Z)(this.stage)){let e=this.stage;e.destroy(),this.remove(e),delete this.stage}}load_stage(e,t){this.stage_prefab=e;let n=this.stage=new i.Z(r.default.load_prefab(e,t));return this.define_global_var("stage",(e=>n)),this.add(n),this.start(),n}setup_app(){let e=this.dom=document.createElement("div");this.dom.style.width="100%",this.dom.style.height="100%",this.dom.style.position="relative",this.dom.style.userSelect="none",this.dom.classList.add("root-dom"),this.define_global_var("dom",(t=>e))}on_destroy(){const e=Object.create(null,{on_destroy:{get:()=>super.on_destroy}});return s(this,void 0,void 0,(function*(){yield e.on_destroy.call(this),this.dom.remove(),delete this.dom}))}get_background_color(){return"linear-gradient(#131638, #69003a)"}tick(e=!1){super.tick(e),this.stage&&this.tools.device.is_mobile&&!this.tools.screen.is_document_visible&&(o.iV.log("page goes background: unloading app"),this.unload_stage()),this.tools.device.is_mobile&&this.tools.screen.is_document_visible&&(0,a.Z)(this.stage)&&(c||(c=!0,window.location.reload()))}start(){let e=this.find_component_of_type("ClockComponent");this.start_game(),e?((0,o.cM)("App","starting clock..."),e.begin_tick()):(0,o.cM)("App","cant find clock component. application did not started")}}t.Z=RetroApp},396:function(e,t,n){"use strict";n.d(t,{Z:function(){return BasicObject}});var r=n(5017),i=n(1489),o=n(5840),a=n(7601),s=n(3234),c=n(7771),l=n(6423),u=n(6378),h=n(1358),d=n(7845),f=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};(0,i.dN)();let p=0;const m=["components","children"],g=["meta","globals","tools"];new r.Vector3;class BasicObject extends r.EventDispatcher{constructor(e){super(),this.tick_rate=60,this.tick_enabled=!0,this.debug_log_this=!1,this.meta={persistence_inited:!1,persistence_autosave:!1,has_persistent_state:!1,game_object:void 0,object_type:"",enabled:!0,need_reactive_update:!0,updated_reactive_props:[],lifecycle:{never_enabled:!0},reactive_values:{},reactivated:!1,layers:{rendering:!0,normal:!0,raycast:!1,collision:!1,gizmo:!1,lights:!1,include:[],exclude:[]},params_applied:!1,params:{},ticking:{non_stop:!1,prev_time:+new Date,delta:1,ticks:0,rate:60,enabled:!0}},this.tools=i.rj,this.id=p,p++,this.meta.params=e||this.meta.params,e&&!0===e.debug_log_this&&this.log(this),window.F_PATCH_COMP_PROPS&&window.F_PATCH_COMP_PROPS(this)}get children(){return this._children}set children(e){this._children=e}get game_object(){return this._game_object}set game_object(e){this._game_object=this.game_object}recreate_reference_properties(){let e=Object.getOwnPropertyDescriptors(this);(0,o.Z)(e,((e,t)=>{let n=e.value;(0,a.Z)(n)||n.__proto__!==window.Object.prototype&&n.__proto__!==window.Array.prototype||g.indexOf(t)<0&&(this[t]=d.default.mixin_object(n))}))}create_game_object(e){return this.game_object.create_game_object(e)}call_inside(e,...t){let n=this.game_object;for(let r=0;r<n.components.length;r++){let i=n.components[r];(0,s.Z)(i[e])&&i[e](...t)}(0,s.Z)(n[e])&&n[e](...t),(0,c.Z)(n.children)&&this.children.forEach((n=>n.call_inside(e,...t)))}call_up(e,...t){let n=this.game_object;for(let r=0;r<n.components.length;r++){let i=n.components[r];(0,s.Z)(i[e])&&i[e](...t)}(0,s.Z)(n[e])&&n[e](...t),void 0!==n.parent&&n.parent.call_up(e,...t)}is(e){return this.meta.object_type===e}init(){this.UUID=`${this.constructor.name}_${this.id}`,this.init_reactivity()}get_reactive_props(){return[]}force_update(e){(null!=e?e:this.get_reactive_props()).forEach((e=>{this[e]=this[e]}))}apply_params(){let e=this.meta.params;if(!this.meta.params_applied){this.meta.params_applied=!0;for(let t in e)switch(t){case"on_tick":this._on_tick=e[t];break;case"on_start":this._on_start=e[t];break;case"on_enable":this._on_enable=e[t];break;case"on_disable":this._on_disable=e[t];break;case"on_create":this._on_create=e[t];break;case"on_destroy":this.on_destroy=e[t];break;case"enabled":break;default:m.indexOf(t)<0&&(this[t]=e[t])}}(0,c.Z)(this.meta.layers.include)&&this.meta.layers.include.forEach((e=>{this.meta.layers[e]=!0})),(0,c.Z)(this.meta.layers.exclude)&&this.meta.layers.exclude.forEach((e=>{this.meta.layers[e]=!0}))}update(e){(0,o.Z)(e,((e,t)=>{this[t]=e}))}tick(e=!1){if(this.enabled){if(this.meta.need_reactive_update){let e=[...this.meta.updated_reactive_props];this.meta.need_reactive_update=!1,this.meta.updated_reactive_props.length=0,this.on_update(e)}if(this.meta.ticking.rate=this.tick_rate,this.meta.ticking.enabled=this.tick_enabled,this.meta.ticking.enabled||1==e){let t=this.globals.now;if(1==e||!0===this.meta.ticking.non_stop||t-this.meta.ticking.prev_time>1e3/this.meta.ticking.rate){let e=t-this.meta.ticking.prev_time;this.meta.ticking.delta=e/1e3,this.meta.ticking.ticks++,this.meta.ticking.prev_time=t,this.on_tick(this.meta.ticking),d.default.TICK_ID++}}}}get enabled(){return this.meta.enabled}set enabled(e){e===this.meta.enabled&&!0!==this.meta.lifecycle.never_enabled||(this.meta.lifecycle.never_enabled=!1,this.meta.enabled=e,e?this.on_enable():this.on_disable())}destroy(){return f(this,void 0,void 0,(function*(){this.on_disable(),yield this.on_destroy(),d.default.undefine_all_global_vars(this.UUID)}))}define_global_var(e,t,n){d.default.define_global_var(this.UUID,e,t,n)}undefine_global_var(e){d.default.undefine_global_var(this.UUID,e)}on_init(){}on_update(e){e.forEach((e=>this.on_change(e,this[e])))}on_change(e,t){}on_create(){(0,s.Z)(this._on_create)&&this._on_create()}on_destroy(){return f(this,void 0,void 0,(function*(){(0,s.Z)(this._on_destroy)&&(yield this._on_destroy())}))}on_tick(e){(0,s.Z)(this._on_tick)&&this._on_tick(e)}on_start(){(0,s.Z)(this._on_start)&&this._on_start()}on_enable(){(0,s.Z)(this._on_enable)&&this._on_enable()}on_disable(){(0,s.Z)(this._on_disable)&&this._on_disable()}log(...e){(0,i.cM)(this.UUID,...e)}error(...e){(0,i.vU)(this.UUID,...e)}static log(...e){(0,i.cM)(this.name,...e)}static error(...e){(0,i.vU)(this.name,...e)}on(e,t){return this.addEventListener(e,t)}off(e,t){return this.removeEventListener(e,t)}has_listener(e,t){return this.hasEventListener(e,t)}emit(e,t){return this.dispatchEvent({type:e,payload:t})}on_ready(){this.init_persistence()}init_persistence(){if(!this.meta.persistence_inited){let e=this.get_persistent_props();this.meta.has_persistent_state=(0,c.Z)(e)&&e.length>0,this.meta.has_persistent_state?this.load_persistent_state():this.clear_persistent_state(),this.meta.persistence_inited=!0}}get_persistent_props(){return[]}save_persistent_state(){if(this.meta.has_persistent_state&&"localStorage"in window){let e={},t=this.get_persistent_props(),n=this.UUID;(0,o.Z)(t,((t,n)=>{e[t]=(0,l.Z)(this,t)}));try{window.localStorage.setItem(n,JSON.stringify(e))}catch(e){i.iV.warn(e)}}}load_persistent_state(){if(this.meta.has_persistent_state&&"localStorage"in window){let e=this.UUID,t=this.get_persistent_props(),n=window.localStorage.getItem(e);if((0,u.Z)(n)){let e=JSON.parse(n);(0,o.Z)(e,((e,n)=>{t.indexOf(n)>-1&&(0,h.Z)(this,n,e)}))}}}clear_persistent_state(){if("localStorage"in window){let e=this.UUID;window.localStorage.removeItem(e)}}init_reactivity(){if(this.meta.reactivated)return;let e=this.meta.reactive_values;this.meta.updated_reactive_props=this.meta.updated_reactive_props||[],this.meta.need_reactive_update=!0,(this.get_reactive_props?this.get_reactive_props():[]).forEach((t=>{e[t]=this[t],Object.defineProperty(this,t,{get:()=>e[t],set:n=>{this.meta.need_reactive_update=!0,this.meta.updated_reactive_props.indexOf(t)<0&&this.meta.updated_reactive_props.push(t),e[t]=n}})})),this.meta.reactivated=!0}static add_traversal_method(e="component",t,n=!1){let r=`on_${t}`;BasicObject.prototype[r]=function(){},BasicObject.prototype[t]=function(o=[]){let a=this.game_object;if(a)switch(e){case"component":a.components.forEach(((e,t)=>{if(1==n&&!1===e.enabled)return;let i=e[r]();void 0!==i&&o.push(i)})),a.children.forEach((e=>{1==n&&!1===e.visible||e[t](o)}));break;case"game_object":{let e=a[r]();void 0!==e&&o.push(e),a.children.forEach((e=>{1==n&&!1===e.visible||e[t](o)}));break}}else i.iV.log("fail");return o}}}},445:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return Component}});var retro_utils_Tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1489),retro_BasicObject__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(396),lodash_es__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6378),lodash_es__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7226),lodash_es__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3836),lodash_es__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5290),lodash_es__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5840),lodash_es__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(7771),lodash_es__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(290),lodash_es__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(111),lodash_es__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(6682),retro_ResourceManager__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7845),__awaiter=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const proxied_game_object_methods=["add","remove","load_prefab","set_prefab","save_prefab","destroy","get_components","traverse_components","traverse_child_components","get_component","get_component_with_tag","find_child_component_of_type","find_component_of_type","find_child_component_of_type","find_child_components_of_type","find_components_of_type","find_component_with_tag","setup_components","create_child","remove_child","add_component","remove_component","to_local_pos","to_world_pos"],proxied_game_object_props=["children","components","refs","states","tasks"];class Component extends retro_BasicObject__WEBPACK_IMPORTED_MODULE_1__.Z{constructor(e){super(e),this.is_component=!0,this.subject=null,this.meta.object_type="component"}save_prefab(){return{enabled:this.enabled,name:this.name,ref:this._ref}}get_gizmo_render_data(){return[]}get component_name(){return this.constructor.component_name}static tick(e){let t=retro_ResourceManager__WEBPACK_IMPORTED_MODULE_2__.default.globals.now,n=t-this.prev_tick_time;n>1e3/this.tick_rate&&(this.prev_tick_time=t,this.on_tick(n/(1e3/60),e))}static on_tick(e,t){}add(...e){return this.game_object.add.apply(this.game_object,e)}remove(...e){return this.game_object.remove.apply(this.game_object,e)}load_prefab(...e){return this.game_object.load_prefab.apply(this.game_object,e)}set_prefab(...e){return this.game_object.set_prefab.apply(this.game_object,e)}destroy(...e){return __awaiter(this,void 0,void 0,(function*(){return yield this.game_object.destroy.apply(this.game_object,e)}))}get_components(...e){return this.game_object.get_components.apply(this.game_object,e)}traverse_components(...e){return this.game_object.traverse_components.apply(this.game_object,e)}traverse_child_components(...e){return this.game_object.traverse_child_components.apply(this.game_object,e)}get_component(...e){return this.game_object.get_component.apply(this.game_object,e)}get_component_with_tag(...e){return this.game_object.get_component_with_tag.apply(this.game_object,e)}find_child_component_of_type(...e){return this.game_object.find_child_component_of_type.apply(this.game_object,e)}find_component_of_type(...e){return this.game_object.find_component_of_type.apply(this.game_object,e)}find_child_components_of_type(...e){return this.game_object.find_child_components_of_type.apply(this.game_object,e)}find_components_of_type(...e){return this.game_object.find_components_of_type.apply(this.game_object,e)}find_component_with_tag(...e){return this.game_object.find_component_with_tag.apply(this.game_object,e)}setup_components(...e){return this.game_object.setup_components.apply(this.game_object,e)}create_child(...e){return this.game_object.create_child.apply(this.game_object,e)}remove_child(...e){return this.game_object.remove_child.apply(this.game_object,e)}add_component(...e){return this.game_object.add_component.apply(this.game_object,e)}remove_component(...e){return this.game_object.remove_component.apply(this.game_object,e)}to_local_pos(...e){return this.game_object.to_local_pos.apply(this.game_object,e)}to_world_pos(...e){return this.game_object.to_world_pos.apply(this.game_object,e)}get children(){return this.game_object.children}get components(){return this.game_object.components}get refs(){return this.game_object.refs}get states(){return this.game_object.states}get tasks(){return this.game_object.tasks}}Component.component_name="Component",Component.tick_rate=1,Component.prev_tick_time=+new Date,Component.create=(params,name)=>{name=(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(name)?name:`Component_${(0,retro_utils_Tools__WEBPACK_IMPORTED_MODULE_0__.YO)(16,!1,!0,!1)}`;let Comp=Component,reactive_props_list="",all_props_code="",all_methods_code="";(0,lodash_es__WEBPACK_IMPORTED_MODULE_4__.Z)(params.props)&&(reactive_props_list=(0,lodash_es__WEBPACK_IMPORTED_MODULE_5__.Z)((0,lodash_es__WEBPACK_IMPORTED_MODULE_6__.Z)(params.props),(e=>`"${e}"`)).join(", "),(0,lodash_es__WEBPACK_IMPORTED_MODULE_7__.Z)(params.props,((e,t)=>{let n=`this.${t} = ${JSON.stringify(e)};`;all_props_code=`${all_props_code}\n                ${n}`}))),(0,lodash_es__WEBPACK_IMPORTED_MODULE_4__.Z)(params.methods)&&(0,lodash_es__WEBPACK_IMPORTED_MODULE_7__.Z)(params.methods,((e,t)=>{let n=`\n            ${t}(${(0,lodash_es__WEBPACK_IMPORTED_MODULE_8__.Z)(e.args)?e.args.join(", "):""}){\n                ${(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(e.body)?e.body:""}\n            }\n            `;all_methods_code=`\n            ${all_methods_code}\n            ${n}\n            `}));let code=`\n        class ${name} extends Comp {\n            constructor(params){\n                super(params);\n                this.is_inline = true;\n                ${all_props_code}\n                ${(0,lodash_es__WEBPACK_IMPORTED_MODULE_3__.Z)(params.construct)?params.construct:""}\n            }\n            get_reactive_props(){\n                return [\n                    ${reactive_props_list}\n                ].concat(super.get_reactive_props())\n            }\n            ${all_methods_code}\n        }\n\n        ${name};\n    `,result=eval(code);return(0,lodash_es__WEBPACK_IMPORTED_MODULE_7__.Z)(params.methods,((e,t)=>{(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e.throttle)?result.prototype[t]=(0,lodash_es__WEBPACK_IMPORTED_MODULE_10__.Z)(result.prototype[t],e.throttle):(0,lodash_es__WEBPACK_IMPORTED_MODULE_9__.Z)(e.debounce)&&(result.prototype[t]=(0,lodash_es__WEBPACK_IMPORTED_MODULE_11__.Z)(result.prototype[t],e.debounce))})),(0,retro_utils_Tools__WEBPACK_IMPORTED_MODULE_0__.cM)("Component",`just created new inline component "${name}"`),result},proxied_game_object_methods.forEach((e=>{Component.prototype[e]=function(){let t=this.game_object;if(t)return t[e](...arguments)}})),proxied_game_object_props.forEach((e=>{Object.defineProperty(Component.prototype,e,{get:function(){let t=this.game_object;return t?t[e]:void 0}})}))},7612:function(e,t,n){"use strict";n.d(t,{Z:function(){return GameObject}});var r=n(5017),i=n(7845);class Task{constructor(e){this.ticks=0;for(let t in e)this[t]=e[t]}get progress(){return this.end_date<0?1:(+new Date-this.start_date)/(this.end_date-this.start_date)}start(){this.start_date=+new Date,"number"==typeof this.task_duration&&this.task_duration>0?this.end_date=this.start_date+1e3*this.task_duration:this.end_date=-1,this.finished=!1,this.handle.start&&this.handle.start(this)}update(){this.ticks++,this.handle.update&&this.handle.update(this),this.progress>=1&&this.end()}end(){this.finished=!0,this.handle.end&&this.handle.end(this)}}class TaskScheduler{constructor(e){this.queues=e||[],this._last=[],this._first=[],this.active_tasks={}}on_tick(){let e=!1,t=!1,n=!1;{let t=this._first,n="_first";if(void 0!==this.active_tasks[n]&&(this.active_tasks[n].finished?this.active_tasks[n]=void 0:(e=!0,this.active_tasks[n].update())),void 0===this.active_tasks[n]&&t.length>0){let r=t.shift();this.active_tasks[n]=r,r.start(),r.update(),e=!0}}if(e||(this.queues.forEach(((e,n)=>{if(void 0!==this.active_tasks[n]&&(this.active_tasks[n].finished?this.active_tasks[n]=void 0:(t=!0,this.active_tasks[n].update())),void 0===this.active_tasks[n]&&e.length>0){let r=e.shift();this.active_tasks[n]=r,r.start(),r.update(),t=!0}})),this.queues=this.queues.filter((e=>e.length>0))),!e&&!t){let e=this._last,t="_last";if(void 0!==this.active_tasks[t]&&(this.active_tasks[t].finished?this.active_tasks[t]=void 0:(n=!0,this.active_tasks[t].update())),void 0===this.active_tasks[t]&&e.length>0){let r=e.shift();this.active_tasks[t]=r,n=!0,r.start(),r.update()}}}add(e,t){let n=[];if("_first"===e?n=this._first:"_last"===e?n=this._last:(this.queues[e]=this.queues[e]||[],n=this.queues[e]),(t=new Task(t)).id)for(let e=0;e<n.length;e++)n[e].id===t.id&&n.splice(e,1);n.push(new Task(t))}}class StateMachine{constructor(e,t){var n,r;this.listener=t,this.list=null!==(n=e.list)&&void 0!==n?n:[],this.handle=null!==(r=e.handle)&&void 0!==r?r:{}}set current_state(e){let t=this._current_state;e!==t&&this.list.indexOf(e)>-1&&(this.leave_state(t,e),this._current_state=e,this.enter_state(e,t,this.list[e]))}get current_state(){return void 0===this._current_state&&(this.current_state=this.list[0]),this._current_state}enter_state(e,t,n){this.handle&&"function"==typeof this.handle.enter_state&&this.handle.enter_state(e,t,n),this.listener.enter_state(e,t,n)}leave_state(e,t){this.handle&&"function"==typeof this.handle.leave_state&&this.handle.leave_state(e,t),this.listener.leave_state(e,t)}update_state(e){void 0===e&&(e=this.current_state),this.handle&&"function"==typeof this.handle.update_state&&this.handle.update_state(e),this.listener.update_state(e)}}var o=n(290),a=n(7226),s=n(5840),c=n(7771),l=n(3505),u=n(6378),h=n(3234),d=n(9360),f=n(5140),p=n(4073),m=n(3317),g=n(728),v=n(1018);var _=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},y=n(1162),b=n(2714);var x=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=(0,b.Z)(e),a=void 0!==t,s=null===t,c=t==t,l=(0,b.Z)(t);if(!s&&!l&&!o&&e>t||o&&a&&c&&!s&&!l||r&&a&&c||!n&&c||!i)return 1;if(!r&&!o&&!l&&e<t||l&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!c)return-1}return 0};var w=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var c=x(i[r],o[r]);if(c)return r>=s?c:c*("desc"==n[r]?-1:1)}return e.index-t.index},A=n(9203);var T,M=function(e,t,n){t=t.length?(0,p.Z)(t,(function(e){return(0,c.Z)(e)?function(t){return(0,m.Z)(t,1===e.length?e[0]:e)}:e})):[A.Z];var r=-1;t=(0,p.Z)(t,(0,y.Z)(g.Z));var i=(0,v.Z)(e,(function(e,n,i){return{criteria:(0,p.Z)(t,(function(t){return t(e)})),index:++r,value:e}}));return _(i,(function(e,t){return w(e,t,n)}))},E=n(1051),S=n(439),R=(0,E.Z)((function(e,t){if(null==e)return[];var n=t.length;return n>1&&(0,S.Z)(e,t[0],t[1])?t=[]:n>2&&(0,S.Z)(t[0],t[1],t[2])&&(t=[t[0]]),M(e,(0,f.Z)(t,1),[])})),L=n(1489),P=n(6461),C=n(445),F=n(396);!function(e){class Transfrom extends r.Object3D{}e.Transfrom=Transfrom}(T||(T={}));var D=T.Transfrom,U=n(5108),O=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const k=new r.Vector3;class GameObject extends F.Z{constructor(e){super(e),this.is_game_object=!0,this.visible=!0,this.render_order=0,this.frustum_culled=!0,this.tick_id=0;let t=e;this.meta.ticking.non_stop=!0,this.meta.ticking.enabled=!0,this.position=[0,0,0],this.rotation=[0,0,0],this.scale=[1,1,1],this._game_object=this,this.transform=new D,this.extra_data={},this.components=[],this.children=[],this.states=new StateMachine(t&&t.states?t.states:{},this),this.tasks=new TaskScheduler(t&&t.tasks?t.tasks:[]),"function"==typeof window.F_THREE_PATCH_PROPS&&window.F_THREE_PATCH_PROPS(this),this.init(),this.apply_params(),this.load_prefab(t)}get refs(){return void 0===i.default.gameobject_refs[this.UUID]&&(i.default.gameobject_refs[this.UUID]={}),i.default.gameobject_refs[this.UUID]}create_game_object(e){return new GameObject(e)}tick(e=!1){super.tick(),(this.enabled||e)&&(this.tasks.on_tick(),this.children.forEach((e=>{e.tick()})),this.components.forEach((e=>{e.enabled&&e.tick()}))),this.tick_id++}get_reactive_props(){return["position","rotation","scale","visible","render_order","frustum_culled"].concat(super.get_reactive_props())}on_update(e){super.on_update(e),e.forEach((e=>{switch(e){case"position":this.position[0]=this.position[0]||0,this.position[1]=this.position[1]||0,this.position[2]=this.position[2]||0,this.transform.position.set(this.position[0],this.position[1],this.position[2]);break;case"rotation":this.rotation[0]=this.rotation[0]||0,this.rotation[1]=this.rotation[1]||0,this.rotation[2]=this.rotation[2]||0,this.transform.rotation.set(this.rotation[0],this.rotation[1],this.rotation[2]);break;case"scale":this.scale[0]=(0,o.Z)(this.scale[0])?this.scale[0]:1,this.scale[1]=(0,o.Z)(this.scale[1])?this.scale[1]:1,this.scale[2]=(0,o.Z)(this.scale[2])?this.scale[2]:1,this.transform.scale.set(this.scale[0],this.scale[1],this.scale[2]);break;case"visible":this.transform.visible=this.visible;break;case"frustum_culled":this.transform.frustumCulled=this.frustum_culled;break;case"render_order":this.transform.renderOrder=this.render_order}}))}update_transform(){this.transform.updateMatrixWorld()}add(e){e.parent=this,this.children.push(e),this.transform.add(e.transform)}remove(e){let t=-1;for(let n=0;n<this.children.length;n++)this.children[n].UUID===e.UUID&&(t=n);t>=0&&(e.parent=void 0,this.children.splice(t,1),this.transform.remove(e.transform))}load_prefab(e){var t,n,r,o,h,d,f,p,m;if((0,a.Z)(e)&&P.ZP.validate(e,":PREFAB","[GAMEOBJECT.LOADPREFAB]"))e.children&&(Array.isArray(e.children)?e.children.forEach((e=>{let t=new GameObject(e);this.add(t)})):(0,a.Z)(e.children)&&(0,s.Z)(e.children,((t,n)=>{let r=e.children[n],i=new GameObject(r);this.add(i)}))),e.components&&this.setup_components(e.components),(0,c.Z)(e.position)&&(this.position=[null!==(t=e.position[0])&&void 0!==t?t:0,null!==(n=e.position[1])&&void 0!==n?n:0,null!==(r=e.position[2])&&void 0!==r?r:0]),(0,c.Z)(e.scale)&&(this.scale=[null!==(o=e.scale[0])&&void 0!==o?o:1,null!==(h=e.scale[1])&&void 0!==h?h:1,null!==(d=e.scale[2])&&void 0!==d?d:1]),(0,c.Z)(e.rotation)&&(this.rotation=[null!==(f=e.rotation[0])&&void 0!==f?f:0,null!==(p=e.rotation[1])&&void 0!==p?p:0,null!==(m=e.rotation[2])&&void 0!==m?m:0]),(0,l.Z)(e.visible)&&(this.visible=e.visible),(0,l.Z)(e.enabled)&&(this.enabled=e.enabled),(0,l.Z)(e.frustum_culled)&&(this.frustum_culled=e.frustum_culled),(0,l.Z)(e.render_order)&&(this.render_order=e.render_order);else if((0,u.Z)(e))return this.load_prefab(i.default.load_prefab(e))}set_prefab(e){U.log(e)}save_prefab(e=!1){let t={components:{},children:[]};return this.components.forEach((e=>{t.components[e.UUID]=e.save_prefab()})),this.children.forEach((e=>{t.children.push(e.save_prefab())})),e?JSON.stringify(t,null,"\t"):t}destroy(){const e=Object.create(null,{destroy:{get:()=>super.destroy}});return O(this,void 0,void 0,(function*(){for(delete i.default.gameobject_refs[this.UUID],this.geometry&&this.geometry.dispose(),this.material&&this.material.dispose(),this.children&&(yield this.children.forEach((e=>O(this,void 0,void 0,(function*(){return yield e.destroy()})))));this.components.length>0;)this.remove_component(this.components[0]);yield e.destroy.call(this)}))}get_components(e){let t=[];return this.components.forEach((n=>{n.name===e&&t.push(n)})),t}traverse_components(e,t=!0,n=!1){if(!1===n)for(let n=0;n<this.components.length;n++){let r=this.components[n];if((!t||r.enabled)&&!1===e(r,this))break}this.traverse_child_components(e,t)}traverse_child_components(e,t=!1){this.children&&this.children.forEach((n=>{(!0!==t||n.enabled)&&(n instanceof GameObject?n.traverse_components(e,t):U.error("Non-GameObject child added to",this))}))}get_component(e,t,n){let r;for(let t=0;t<this.components.length;t++)if(this.components[t].name===e){r=this.components[t];break}return(0,h.Z)(t)?(void 0!==r?t(r):(0,h.Z)(n)&&n(r),void 0!==r):r}get_component_with_tag(e,t,n){let r;for(let t=0;t<this.components.length;t++)if(this.components[t].tag===e){r=this.components[t];break}return(0,h.Z)(t)?(void 0!==r?t(r):(0,h.Z)(n)&&n(r),void 0!==r):r}find_component_of_type(e,t,n){let r;if(i.default.components_instances[e])for(let t in i.default.components_instances[e]){r=i.default.components_instances[e][t];break}return(0,h.Z)(t)?(void 0!==r?t(r):(0,h.Z)(n)&&n(r),void 0!==r):r}find_child_component_of_type(e,t,n){let r;return this.traverse_components((t=>t.name!==e||(r=t,!1)),!1,!0),(0,h.Z)(t)?(void 0!==r?t(r):(0,h.Z)(n)&&n(r),void 0!==r):r}find_child_components_of_type(e,t,n){let r=[];return this.traverse_components((t=>(t.name===e&&r.push(t),!0)),!1,!0),(0,h.Z)(t)?(r.length>0?r.forEach((e=>t(e))):(0,h.Z)(n)&&n(r),void 0!==r):r}find_components_of_type(e,t=1/0){let n=0,r=[];if(i.default.components_instances[e])for(let o in i.default.components_instances[e])if((void 0===t||n<t)&&(r.push(i.default.components_instances[e][o]),n++,n>=t))break;return r}find_component_with_tag(e,t,n){let r=i.default.components_tags[e];return(0,h.Z)(t)?(void 0!==r?t(r):(0,h.Z)(n)&&n(r),void 0!==r):r}setup_components(e){let t=[];if(!(0,d.Z)(e))if((0,c.Z)(e))t=e,t.forEach((e=>{}));else for(let n in e){let r=e[n];r.ref=r.ref||n,t.push(r)}t=R(t,(e=>e.order||0)),t.forEach((e=>this.add_component(e)))}create_child(e){let t=new GameObject(e);return this.add(t),t}remove_child(e){e.destroy(),this.remove(e)}add_component(e){let t,n,r=e.name,o=e.params;return t=i.default.classes_of_components[r],(0,h.Z)(t)?(n=new t(o),n.recreate_reference_properties()):(0,a.Z)(t)?n=Object.assign({},t):(0,d.Z)(t)&&(0,a.Z)(e.inline)&&P.ZP.validate(e.inline,":INLINE_COMPONENT")&&(t=C.Z.create(e.inline,r),n=new t(o),n.recreate_reference_properties()),void 0!==n?this.attach_component(n,e):(0,L.vU)("GameObject",`failed to create component: ${r}`,t),n}attach_component(e,t={name:C.Z.constructor.name}){if(void 0!==e){let n=t.name,r=(0,u.Z)(t.ref)?t.ref:void 0,o=!(0,l.Z)(t.enabled)||t.enabled;if(e.context=i.default.load_context(t.context),e._game_object=this,e.init(),e.name=n,P.ZP.validate(t.meta,":COMPONENT_PARAMS_META")){e.meta=i.default.mixin_object(e.meta,[t.meta])}e.apply_params(),void 0!==r?(e._ref=r,this.refs[r]=e):(r=n,e._ref=r,void 0===this.refs[r]&&(this.refs[r]=e)),this.components.push(e),e.on_create(),e.on_ready(),e.enabled=o,i.default.components_instances[n]=i.default.components_instances[n]||{},i.default.components_instances[n][e.UUID]=e,t.tag&&(e.tag=t.tag,i.default.components_tags[t.tag]=e)}}remove_component(e){if((0,u.Z)(e)){let t=this.refs[e];if((0,a.Z)(t)){t.enabled=!1,t.on_destroy(),delete this.refs[e];for(let e=0;e<this.components.length;e++){if(this.components[e].UUID===t.UUID){this.components.splice(e,1);break}}let n=t.name;delete i.default.components_instances[n][t.UUID],delete i.default.components_tags[t.tag]}}else if((0,a.Z)(e)){let t=e;t.enabled=!1,t.on_destroy();let n=t._ref;delete this.refs[n];for(let e=0;e<this.components.length;e++){if(this.components[e].UUID===t.UUID){this.components.splice(e,1);break}}let r=t.name;delete i.default.components_instances[r][t.UUID],delete i.default.components_tags[t.tag]}}start_game(){this.visible&&(this.on_start(),this.components.forEach((e=>{e.on_start()})),this.children.forEach((e=>{e.start_game()})))}to_local_pos(e){let t=this.game_object;k.set(e[0],e[1],e[2]);let n=t.transform.worldToLocal(k);return[n.x,n.y,n.z]}to_world_pos(e){let t=this.game_object;k.set(e[0],e[1],e[2]);let n=t.transform.localToWorld(k);return[n.x,n.y,n.z]}}},7465:function(e,t,n){"use strict";var r=n(445),i=n(5017),o=n(7771),a=n(3234),s=n(7226),c=n(290);const l=new i.SphereBufferGeometry(.0125,8,8),u=new i.MeshNormalMaterial({opacity:.5,transparent:!0,depthWrite:!1,depthTest:!1});class SceneComponent extends r.Z{constructor(e){super(e),this.subject=null,this.position=[0,0,0],this.scale=[1,1,1],this.rotation=[0,0,0],this.visible=!0,this.frustum_culled=!1,this.render_order=0,this.is_scene_component=!0,(0,o.Z)(this.position)&&(this.position=[...this.position]),(0,o.Z)(this.scale)&&(this.scale=[...this.scale]),(0,o.Z)(this.rotation)&&(this.rotation=[...this.rotation]),(this.anchor_gizmo=new i.Mesh(l,u)).renderOrder=1}save_prefab(){return Object.assign(Object.assign({},super.save_prefab()),{position:this.position,scale:this.scale,rotation:this.rotation,visible:this.visible,render_layer:this.render_layer,render_index:this.render_index,render_order:this.render_order,frustum_culled:this.frustum_culled})}get_reactive_props(){return["position","scale","rotation","visible","frustum_culled","render_order"].concat(super.get_reactive_props())}get_gizmo_render_data(){return this.subject?[{object:this.anchor_gizmo,parent:this.subject,layers:{gizmo:!0}}]:[]}init_visibility_rule(){(0,a.Z)(this.visibility_rule)&&Object.defineProperty(this.subject,"visible",{get:()=>this.visibility_rule()})}on_update(e,t=this.subject){(0,s.Z)(t)&&e.forEach((e=>{switch(e){case"position":(0,o.Z)(this.position)?t.position.set(this.position[0],this.position[1],this.position[2]):(0,s.Z)(this.position)&&t.position.set(this.position.x,this.position.y,this.position.z);break;case"scale":(0,o.Z)(this.scale)?t.scale.set(this.scale[0],this.scale[1],this.scale[2]):(0,s.Z)(this.scale)?t.scale.set(this.scale.x,this.scale.y,this.scale.z):(0,c.Z)(this.scale)&&t.scale.setScalar(this.scale);break;case"rotation":(0,o.Z)(this.rotation)?t.rotation.set(this.rotation[0],this.rotation[1],this.rotation[2]):(0,s.Z)(this.rotation)&&t.rotation.set(this.rotation.x,this.rotation.y,this.rotation.z);break;case"visible":t.visible=this.visible;break;case"frusum_culled":t.frustumCulled=this.frusum_culled;break;case"render_order":t.renderOrder=this.render_order}})),super.on_update(e)}on_tick(){}get_render_data(){return this.subject&&this.game_object?[{object:this.subject,parent:this.game_object}]:[]}set_position(e,t,n){this.position=[null!=e?e:this.position[0],null!=t?t:this.position[1],null!=n?n:this.position[2]]}set_scale(e,t,n){this.scale=[null!=e?e:this.scale[0],null!=t?t:this.scale[1],null!=n?n:this.scale[2]]}set_rotation(e,t,n){this.rotation=[null!=e?e:this.rotation[0],null!=t?t:this.rotation[1],null!=n?n:this.rotation[2]]}}SceneComponent.DEFAULT={position:[0,0,0],scale:[1,1,1],rotation:[0,0,0]},SceneComponent.component_name="SceneComponent",t.Z=SceneComponent},6432:function(e,t,n){"use strict";n.r(t),n.d(t,{MeshRenderer:function(){return MeshRenderer}});var r=n(7465),i=n(5017),o=n(5108);class GLTFLoader extends i.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new GLTFMaterialsClearcoatExtension(e)})),this.register((function(e){return new GLTFTextureBasisUExtension(e)})),this.register((function(e){return new GLTFTextureWebPExtension(e)})),this.register((function(e){return new GLTFMaterialsSheenExtension(e)})),this.register((function(e){return new GLTFMaterialsTransmissionExtension(e)})),this.register((function(e){return new GLTFMaterialsVolumeExtension(e)})),this.register((function(e){return new GLTFMaterialsIorExtension(e)})),this.register((function(e){return new GLTFMaterialsSpecularExtension(e)})),this.register((function(e){return new GLTFLightsExtension(e)})),this.register((function(e){return new GLTFMeshoptCompression(e)}))}load(e,t,n,r){const a=this;let s;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:i.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);const c=function(t){r?r(t):o.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new i.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,(function(n){try{a.parse(n,s,(function(n){t(n),a.manager.itemEnd(e)}),c)}catch(e){c(e)}}),n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let a;const l={},u={};if("string"==typeof e)a=e;else{if(i.LoaderUtils.decodeText(new Uint8Array(e,0,4))===c){try{l[s.KHR_BINARY_GLTF]=new GLTFBinaryExtension(e)}catch(e){return void(r&&r(e))}a=l[s.KHR_BINARY_GLTF].content}else a=i.LoaderUtils.decodeText(new Uint8Array(e))}const h=JSON.parse(a);if(void 0===h.asset||h.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const d=new GLTFParser(h,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](d);u[t.name]=t,l[t.name]=!0}if(h.extensionsUsed)for(let e=0;e<h.extensionsUsed.length;++e){const t=h.extensionsUsed[e],n=h.extensionsRequired||[];switch(t){case s.KHR_MATERIALS_UNLIT:l[t]=new GLTFMaterialsUnlitExtension;break;case s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:l[t]=new GLTFMaterialsPbrSpecularGlossinessExtension;break;case s.KHR_DRACO_MESH_COMPRESSION:l[t]=new GLTFDracoMeshCompressionExtension(h,this.dracoLoader);break;case s.KHR_TEXTURE_TRANSFORM:l[t]=new GLTFTextureTransformExtension;break;case s.KHR_MESH_QUANTIZATION:l[t]=new GLTFMeshQuantizationExtension;break;default:n.indexOf(t)>=0&&void 0===u[t]&&o.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}d.setExtensions(l),d.setPlugins(u),d.parse(n,r)}}function a(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const s={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class GLTFLightsExtension{constructor(e){this.parser=e,this.name=s.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const o=t.json,a=((o.extensions&&o.extensions[this.name]||{}).lights||[])[e];let s;const c=new i.Color(16777215);void 0!==a.color&&c.fromArray(a.color);const l=void 0!==a.range?a.range:0;switch(a.type){case"directional":s=new i.DirectionalLight(c),s.target.position.set(0,0,-1),s.add(s.target);break;case"point":s=new i.PointLight(c),s.distance=l;break;case"spot":s=new i.SpotLight(c),s.distance=l,a.spot=a.spot||{},a.spot.innerConeAngle=void 0!==a.spot.innerConeAngle?a.spot.innerConeAngle:0,a.spot.outerConeAngle=void 0!==a.spot.outerConeAngle?a.spot.outerConeAngle:Math.PI/4,s.angle=a.spot.outerConeAngle,s.penumbra=1-a.spot.innerConeAngle/a.spot.outerConeAngle,s.target.position.set(0,0,-1),s.add(s.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+a.type)}return s.position.set(0,0,0),s.decay=2,void 0!==a.intensity&&(s.intensity=a.intensity),s.name=t.createUniqueName(a.name||"light_"+e),r=Promise.resolve(s),t.cache.add(n,r),r}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class GLTFMaterialsUnlitExtension{constructor(){this.name=s.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(e,t,n){const r=[];e.color=new i.Color(1,1,1),e.opacity=1;const o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){const t=o.baseColorFactor;e.color.fromArray(t),e.opacity=t[3]}void 0!==o.baseColorTexture&&r.push(n.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(r)}}class GLTFMaterialsClearcoatExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const e=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new i.Vector2(e,e)}return Promise.all(o)}}class GLTFMaterialsSheenExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();t.sheenTint=new i.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const r=n.extensions[this.name];return void 0!==r.sheenColorFactor&&t.sheenTint.fromArray(r.sheenColorFactor),void 0!==r.sheenRoughnessFactor&&(t.sheenRoughness=r.sheenRoughnessFactor),Promise.all([])}}class GLTFMaterialsTransmissionExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class GLTFMaterialsVolumeExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&o.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||0;const s=a.attenuationColor||[1,1,1];return t.attenuationTint=new i.Color(s[0],s[1],s[2]),Promise.all(o)}}class GLTFMaterialsIorExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(e){this.parser=e,this.name=s.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?i.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const o=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&o.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const s=a.specularColorFactor||[1,1,1];return t.specularTint=new i.Color(s[0],s[1],s[2]),void 0!==a.specularColorTexture&&o.push(n.assignTexture(t,"specularTintMap",a.specularColorTexture).then((function(e){e.encoding=i.sRGBEncoding}))),Promise.all(o)}}class GLTFTextureBasisUExtension{constructor(e){this.parser=e,this.name=s.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=n.images[i.source],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)}}class GLTFTextureWebPExtension{constructor(e){this.parser=e,this.name=s.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,a,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class GLTFMeshoptCompression{constructor(e){this.name=s.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([r,i.ready]).then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new ArrayBuffer(o*a),c=new Uint8Array(t[0],n,r);return i.decodeGltfBuffer(new Uint8Array(s),o,a,c,e.mode,e.filter),s}))}return null}}const c="glTF",l=1313821514,u=5130562;class GLTFBinaryExtension{constructor(e){this.name=s.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==c)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let o=0;for(;o<n;){const t=r.getUint32(o,!0);o+=4;const n=r.getUint32(o,!0);if(o+=4,n===l){const n=new Uint8Array(e,12+o,t);this.content=i.LoaderUtils.decodeText(n)}else if(n===u){const n=12+o;this.body=e.slice(n,n+t)}o+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=s.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(const e in o){const t=A[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const r=A[t]||t.toLowerCase();if(void 0!==o[t]){const i=n.accessors[e.attributes[t]],o=y[i.componentType];c[r]=o,s[r]=!0===i.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,c)}))}))}}class GLTFTextureTransformExtension{constructor(){this.name=s.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&o.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class GLTFMeshStandardSGMaterial extends i.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new i.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(const t in s)e.uniforms[t]=s[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",n).replace("#include <roughnessmap_fragment>",r).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class GLTFMaterialsPbrSpecularGlossinessExtension{constructor(){this.name=s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"]}getMaterialType(){return GLTFMeshStandardSGMaterial}extendParams(e,t,n){const r=t.extensions[this.name];e.color=new i.Color(1,1,1),e.opacity=1;const o=[];if(Array.isArray(r.diffuseFactor)){const t=r.diffuseFactor;e.color.fromArray(t),e.opacity=t[3]}if(void 0!==r.diffuseTexture&&o.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new i.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new i.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){const t=r.specularGlossinessTexture;o.push(n.assignTexture(e,"glossinessMap",t)),o.push(n.assignTexture(e,"specularMap",t))}return Promise.all(o)}createMaterial(e){const t=new GLTFMeshStandardSGMaterial(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=i.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}class GLTFMeshQuantizationExtension{constructor(){this.name=s.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends i.Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}}GLTFCubicSplineInterpolant.prototype.beforeStart_=GLTFCubicSplineInterpolant.prototype.copySampleValue_,GLTFCubicSplineInterpolant.prototype.afterEnd_=GLTFCubicSplineInterpolant.prototype.copySampleValue_,GLTFCubicSplineInterpolant.prototype.interpolate_=function(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=r-t,u=(n-t)/l,h=u*u,d=h*u,f=e*c,p=f-c,m=-2*d+3*h,g=d-h,v=1-m,_=g-h+u;for(let e=0;e!==a;e++){const t=o[p+e+a],n=o[p+e+s]*l,r=o[f+e+a],c=o[f+e]*l;i[e]=v*t+_*n+m*r+g*c}return i};const h=new i.Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return h.fromArray(i).normalize().toArray(i),i}}const d=0,f=1,p=2,m=3,g=4,v=5,_=6,y={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},b={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},x={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},w={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},A={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},T={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},E="OPAQUE",S="MASK",R="BLEND";function L(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function P(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function C(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):o.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function F(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else o.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function D(e){const t=e.extensions&&e.extensions[s.KHR_DRACO_MESH_COMPRESSION];let n;return n=t?"draco:"+t.bufferView+":"+t.indices+":"+U(t.attributes):e.indices+":"+U(e.attributes)+":"+e.mode,n}function U(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function O(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}class GLTFParser{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new a,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.textureCache={},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new i.ImageBitmapLoader(this.options.manager):this.textureLoader=new i.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};P(i,o,r),C(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this.loadNode(t);break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this.loadAnimation(t);break;case"camera":r=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[s.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(L(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);const o=[];return void 0!==r.bufferView?o.push(this.getDependency("bufferView",r.bufferView)):o.push(null),void 0!==r.sparse&&(o.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(o).then((function(e){const o=e[0],a=w[r.type],s=y[r.componentType],c=s.BYTES_PER_ELEMENT,l=c*a,u=r.byteOffset||0,h=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,d=!0===r.normalized;let f,p;if(h&&h!==l){const e=Math.floor(u/h),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(f=new s(o,e*h,r.count*h/c),l=new i.InterleavedBuffer(f,h/c),t.cache.add(n,l)),p=new i.InterleavedBufferAttribute(l,a,u%h/c,d)}else f=null===o?new s(r.count*a):new s(o,u,r.count*a),p=new i.BufferAttribute(f,a,d);if(void 0!==r.sparse){const t=w.SCALAR,n=y[r.sparse.indices.componentType],c=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,u=new n(e[1],c,r.sparse.count*t),h=new s(e[2],l,r.sparse.count*a);null!==o&&(p=new i.BufferAttribute(p.array.slice(),p.itemSize,p.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(p.setX(t,h[e*a]),a>=2&&p.setY(t,h[e*a+1]),a>=3&&p.setZ(t,h[e*a+2]),a>=4&&p.setW(t,h[e*a+3]),a>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return p}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e],i=t.images[r.source];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,i,o)}loadTextureImage(e,t,n){const r=this,a=this.json,s=this.options,c=a.textures[e],l=(t.uri||t.bufferView)+":"+c.sampler;if(this.textureCache[l])return this.textureCache[l];const u=self.URL||self.webkitURL;let h=t.uri||"",d=!1;if(void 0!==t.bufferView)h=r.getDependency("bufferView",t.bufferView).then((function(e){d=!0;const n=new Blob([e],{type:t.mimeType});return h=u.createObjectURL(n),h}));else if(void 0===t.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const f=Promise.resolve(h).then((function(e){return new Promise((function(t,r){let o=t;!0===n.isImageBitmapLoader&&(o=function(e){const n=new i.Texture(e);n.needsUpdate=!0,t(n)}),n.load(L(e,s.path),o,void 0,r)}))})).then((function(t){!0===d&&u.revokeObjectURL(h),t.flipY=!1,c.name&&(t.name=c.name);const n=(a.samplers||{})[c.sampler]||{};return t.magFilter=b[n.magFilter]||i.LinearFilter,t.minFilter=b[n.minFilter]||i.LinearMipmapLinearFilter,t.wrapS=x[n.wrapS]||i.RepeatWrapping,t.wrapT=x[n.wrapT]||i.RepeatWrapping,r.associations.set(t,{textures:e}),t})).catch((function(){return o.error("THREE.GLTFLoader: Couldn't load texture",h),null}));return this.textureCache[l]=f,f}assignTexture(e,t,n){const r=this;return this.getDependency("texture",n.index).then((function(i){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||o.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),r.extensions[s.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[s.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=r.associations.get(i);i=r.extensions[s.KHR_TEXTURE_TRANSFORM].extendTexture(i,e),r.associations.set(i,t)}}return e[t]=i,i}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i.PointsMaterial,i.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new i.LineBasicMaterial,i.Material.prototype.copy.call(t,n),t.color.copy(n.color),this.cache.add(e,t)),n=t}if(r||o||a){let e="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(e+="specular-glossiness:"),r&&(e+="derivative-tangents:"),o&&(e+="vertex-colors:"),a&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),o&&(t.vertexColors=!0),a&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),e.material=n}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,r=this.extensions,o=n.materials[e];let a;const c={},l=o.extensions||{},u=[];if(l[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const e=r[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];a=e.getMaterialType(),u.push(e.extendParams(c,o,t))}else if(l[s.KHR_MATERIALS_UNLIT]){const e=r[s.KHR_MATERIALS_UNLIT];a=e.getMaterialType(),u.push(e.extendParams(c,o,t))}else{const n=o.pbrMetallicRoughness||{};if(c.color=new i.Color(1,1,1),c.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;c.color.fromArray(e),c.opacity=e[3]}void 0!==n.baseColorTexture&&u.push(t.assignTexture(c,"map",n.baseColorTexture)),c.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,c.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(u.push(t.assignTexture(c,"metalnessMap",n.metallicRoughnessTexture)),u.push(t.assignTexture(c,"roughnessMap",n.metallicRoughnessTexture))),a=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),u.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)}))))}!0===o.doubleSided&&(c.side=i.DoubleSide);const h=o.alphaMode||E;if(h===R?(c.transparent=!0,c.depthWrite=!1):(c.format=i.RGBFormat,c.transparent=!1,h===S&&(c.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&a!==i.MeshBasicMaterial&&(u.push(t.assignTexture(c,"normalMap",o.normalTexture)),c.normalScale=new i.Vector2(1,1),void 0!==o.normalTexture.scale)){const e=o.normalTexture.scale;c.normalScale.set(e,e)}return void 0!==o.occlusionTexture&&a!==i.MeshBasicMaterial&&(u.push(t.assignTexture(c,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(c.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&a!==i.MeshBasicMaterial&&(c.emissive=(new i.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&a!==i.MeshBasicMaterial&&u.push(t.assignTexture(c,"emissiveMap",o.emissiveTexture)),Promise.all(u).then((function(){let n;return n=a===GLTFMeshStandardSGMaterial?r[s.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(c):new a(c),o.name&&(n.name=o.name),n.map&&(n.map.encoding=i.sRGBEncoding),n.emissiveMap&&(n.emissiveMap.encoding=i.sRGBEncoding),C(n,o),t.associations.set(n,{materials:e}),o.extensions&&P(r,n,o),n}))}createUniqueName(e){const t=i.PropertyBinding.sanitizeNodeName(e||"");let n=t;for(let e=1;this.nodeNamesUsed[n];++e)n=t+"_"+e;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function o(e){return n[s.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return I(n,e,t)}))}const a=[];for(let n=0,c=e.length;n<c;n++){const c=e[n],l=D(c),u=r[l];if(u)a.push(u.promise);else{let e;e=c.extensions&&c.extensions[s.KHR_DRACO_MESH_COMPRESSION]?o(c):I(new i.BufferGeometry,c,t),r[l]={primitive:c,promise:e},a.push(e)}}return Promise.all(a)}loadMesh(e){const t=this,n=this.json,r=this.extensions,o=n.meshes[e],a=o.primitives,s=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(c=this.cache).DefaultMaterial&&(c.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),c.DefaultMaterial):this.getDependency("material",a[e].material);s.push(t)}var c;return s.push(t.loadGeometries(a)),Promise.all(s).then((function(n){const s=n.slice(0,n.length-1),c=n[n.length-1],l=[];for(let n=0,u=c.length;n<u;n++){const u=c[n],h=a[n];let y;const b=s[n];if(h.mode===g||h.mode===v||h.mode===_||void 0===h.mode)y=!0===o.isSkinnedMesh?new i.SkinnedMesh(u,b):new i.Mesh(u,b),!0!==y.isSkinnedMesh||y.geometry.attributes.skinWeight.normalized||y.normalizeSkinWeights(),h.mode===v?y.geometry=B(y.geometry,i.TriangleStripDrawMode):h.mode===_&&(y.geometry=B(y.geometry,i.TriangleFanDrawMode));else if(h.mode===f)y=new i.LineSegments(u,b);else if(h.mode===m)y=new i.Line(u,b);else if(h.mode===p)y=new i.LineLoop(u,b);else{if(h.mode!==d)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+h.mode);y=new i.Points(u,b)}Object.keys(y.geometry.morphAttributes).length>0&&F(y,o),y.name=t.createUniqueName(o.name||"mesh_"+e),C(y,o),h.extensions&&P(r,y,h),t.assignFinalMaterial(y),l.push(y)}for(let n=0,r=l.length;n<r;n++)t.associations.set(l[n],{meshes:e,primitives:n});if(1===l.length)return l[0];const u=new i.Group;t.associations.set(u,{meshes:e});for(let e=0,t=l.length;e<t;e++)u.add(l[e]);return u}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new i.PerspectiveCamera(i.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new i.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),C(t,n),Promise.resolve(t);o.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))}loadAnimation(e){const t=this.json.animations[e],n=[],r=[],o=[],a=[],s=[];for(let e=0,i=t.channels.length;e<i;e++){const i=t.channels[e],c=t.samplers[i.sampler],l=i.target,u=void 0!==l.node?l.node:l.id,h=void 0!==t.parameters?t.parameters[c.input]:c.input,d=void 0!==t.parameters?t.parameters[c.output]:c.output;n.push(this.getDependency("node",u)),r.push(this.getDependency("accessor",h)),o.push(this.getDependency("accessor",d)),a.push(c),s.push(l)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(o),Promise.all(a),Promise.all(s)]).then((function(n){const r=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=[];for(let e=0,t=r.length;e<t;e++){const t=r[e],n=o[e],u=a[e],h=s[e],d=c[e];if(void 0===t)continue;let f;switch(t.updateMatrix(),t.matrixAutoUpdate=!0,T[d.path]){case T.weights:f=i.NumberKeyframeTrack;break;case T.rotation:f=i.QuaternionKeyframeTrack;break;default:f=i.VectorKeyframeTrack}const p=t.name?t.name:t.uuid,m=void 0!==h.interpolation?M[h.interpolation]:i.InterpolateLinear,g=[];T[d.path]===T.weights?t.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&g.push(e.name?e.name:e.uuid)})):g.push(p);let v=u.array;if(u.normalized){const e=O(v.constructor),t=new Float32Array(v.length);for(let n=0,r=v.length;n<r;n++)t[n]=v[n]*e;v=t}for(let e=0,t=g.length;e<t;e++){const t=new f(g[e]+"."+T[d.path],n.array,v,m);"CUBICSPLINE"===h.interpolation&&(t.createInterpolant=function(e){return new(this instanceof i.QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant)(this.times,this.values,this.getValueSize()/3,e)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(t)}}const u=t.name?t.name:"animation_"+e;return new i.AnimationClip(u,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this.json,n=this.extensions,r=this,o=t.nodes[e],a=o.name?r.createUniqueName(o.name):"";return function(){const t=[],n=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return n&&t.push(n),void 0!==o.camera&&t.push(r.getDependency("camera",o.camera).then((function(e){return r._getNodeRef(r.cameraCache,o.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){t.push(e)})),Promise.all(t)}().then((function(t){let s;if(s=!0===o.isBone?new i.Bone:t.length>1?new i.Group:1===t.length?t[0]:new i.Object3D,s!==t[0])for(let e=0,n=t.length;e<n;e++)s.add(t[e]);if(o.name&&(s.userData.name=o.name,s.name=a),C(s,o),o.extensions&&P(n,s,o),void 0!==o.matrix){const e=new i.Matrix4;e.fromArray(o.matrix),s.applyMatrix4(e)}else void 0!==o.translation&&s.position.fromArray(o.translation),void 0!==o.rotation&&s.quaternion.fromArray(o.rotation),void 0!==o.scale&&s.scale.fromArray(o.scale);return r.associations.has(s)||r.associations.set(s,{}),r.associations.get(s).nodes=e,s}))}loadScene(e){const t=this.json,n=this.extensions,r=this.json.scenes[e],o=this,a=new i.Group;r.name&&(a.name=o.createUniqueName(r.name)),C(a,r),r.extensions&&P(n,a,r);const s=r.nodes||[],c=[];for(let e=0,n=s.length;e<n;e++)c.push(k(s[e],a,t,o));return Promise.all(c).then((function(){return o.associations=(e=>{const t=new Map;for(const[e,n]of o.associations)(e instanceof i.Material||e instanceof i.Texture)&&t.set(e,n);return e.traverse((e=>{const n=o.associations.get(e);null!=n&&t.set(e,n)})),t})(a),a}))}}function k(e,t,n,r){const a=n.nodes[e];return r.getDependency("node",e).then((function(e){if(void 0===a.skin)return e;let t;return r.getDependency("skin",a.skin).then((function(e){t=e;const n=[];for(let e=0,i=t.joints.length;e<i;e++)n.push(r.getDependency("node",t.joints[e]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(!e.isMesh)return;const r=[],a=[];for(let e=0,s=n.length;e<s;e++){const s=n[e];if(s){r.push(s);const n=new i.Matrix4;void 0!==t.inverseBindMatrices&&n.fromArray(t.inverseBindMatrices.array,16*e),a.push(n)}else o.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}e.bind(new i.Skeleton(r,a),e.matrixWorld)})),e}))})).then((function(e){t.add(e);const i=[];if(a.children){const t=a.children;for(let o=0,a=t.length;o<a;o++){const a=t[o];i.push(k(a,e,n,r))}}return Promise.all(i)}))}function I(e,t,n){const r=t.attributes,a=[];function s(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in r){const n=A[t]||t.toLowerCase();n in e.attributes||a.push(s(r[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(r)}return C(e,t),function(e,t,n){const r=t.attributes,a=new i.Box3;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,s=e.max;if(void 0===t||void 0===s)return void o.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(a.set(new i.Vector3(t[0],t[1],t[2]),new i.Vector3(s[0],s[1],s[2])),e.normalized){const t=O(y[e.componentType]);a.min.multiplyScalar(t),a.max.multiplyScalar(t)}}const s=t.targets;if(void 0!==s){const e=new i.Vector3,t=new i.Vector3;for(let r=0,i=s.length;r<i;r++){const i=s[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],a=r.min,s=r.max;if(void 0!==a&&void 0!==s){if(t.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),t.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),t.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),r.normalized){const e=O(y[r.componentType]);t.multiplyScalar(e)}e.max(t)}else o.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}a.expandByVector(e)}e.boundingBox=a;const c=new i.Sphere;a.getCenter(c.center),c.radius=a.min.distanceTo(a.max)/2,e.boundingSphere=c}(e,t,n),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),r&&i)break}if(!r&&!i)return Promise.resolve(e);const o=[],a=[];for(let s=0,c=t.length;s<c;s++){const c=t[s];if(r){const t=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;a.push(t)}}return Promise.all([Promise.all(o),Promise.all(a)]).then((function(t){const n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function B(e,t){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return o.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,a=[];if(t===i.TriangleFanDrawMode)for(let e=1;e<=r;e++)a.push(n.getX(0)),a.push(n.getX(e)),a.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2==0?(a.push(n.getX(e)),a.push(n.getX(e+1)),a.push(n.getX(e+2))):(a.push(n.getX(e+2)),a.push(n.getX(e+1)),a.push(n.getX(e)));a.length/3!==r&&o.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=e.clone();return s.setIndex(a),s}const N=function(){const e=new i.RawShaderMaterial({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new i.Vector2(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:i.NoBlending,depthTest:!1,depthWrite:!1});return e.type="RoughnessMipmapper",e}(),Z=new i.Mesh(new i.PlaneGeometry(2,2),N),j=new i.OrthographicCamera(0,1,0,1,0,1);let z=null,G=null;class RoughnessMipmapper{constructor(e){G=e,G.compile(Z,j)}generateMipmaps(e){if("roughnessMap"in e==!1)return;const{roughnessMap:t,normalMap:n}=e;if(null===t||null===n||!t.generateMipmaps||e.userData.roughnessUpdated)return;e.userData.roughnessUpdated=!0;let r=Math.max(t.image.width,n.image.width),o=Math.max(t.image.height,n.image.height);if(!i.MathUtils.isPowerOfTwo(r)||!i.MathUtils.isPowerOfTwo(o))return;const a=G.getRenderTarget(),s=G.autoClear;if(G.autoClear=!1,null!==z&&z.width===r&&z.height===o||(null!==z&&z.dispose(),z=new i.WebGLRenderTarget(r,o,{depthBuffer:!1}),z.scissorTest=!0),r!==t.image.width||o!==t.image.height){const n={wrapS:t.wrapS,wrapT:t.wrapT,magFilter:t.magFilter,minFilter:t.minFilter,depthBuffer:!1},a=new i.WebGLRenderTarget(r,o,n);a.texture.generateMipmaps=!0,G.setRenderTarget(a),e.roughnessMap=a.texture,e.metalnessMap==t&&(e.metalnessMap=e.roughnessMap),e.aoMap==t&&(e.aoMap=e.roughnessMap),e.roughnessMap.offset.copy(t.offset),e.roughnessMap.repeat.copy(t.repeat),e.roughnessMap.center.copy(t.center),e.roughnessMap.rotation=t.rotation,e.roughnessMap.matrixAutoUpdate=t.matrixAutoUpdate,e.roughnessMap.matrix.copy(t.matrix)}N.uniforms.roughnessMap.value=t,N.uniforms.normalMap.value=n;const c=new i.Vector2(0,0),l=N.uniforms.texelSize.value;for(let t=0;r>=1&&o>=1;++t,r/=2,o/=2)l.set(1/r,1/o),0==t&&l.set(0,0),z.viewport.set(c.x,c.y,r,o),z.scissor.set(c.x,c.y,r,o),G.setRenderTarget(z),G.render(Z,j),G.copyFramebufferToTexture(c,e.roughnessMap,t),N.uniforms.roughnessMap.value=e.roughnessMap;t!==e.roughnessMap&&t.dispose(),G.setRenderTarget(a),G.autoClear=s}dispose(){N.dispose(),Z.geometry.dispose(),null!=z&&z.dispose()}}var V=n(6470),W=n.n(V),H=n(6486),X=n(5108),Q=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))};const Y=new GLTFLoader;class MeshRenderer extends r.Z{constructor(){super(...arguments),this.src="",this.recieve_shadow=!0,this.cast_shadow=!0,this.normal_scale=1,this.bump_scale=1,this.emission_scale=1,this.base_path="",this.main_file_name="",this.object_format=".gltf"}on_create(){X.log(this)}get_reactive_props(){return["src",...super.get_reactive_props()]}get_render_data(){return[{object:this.scene,parent:this.game_object}]}on_update(e,t){super.on_update(e,this.scene)}on_change(e,t){if("src"===e)this.base_path=`${W().dirname(this.src)}/`,this.main_file_name=W().basename(this.src),this.object_format=W().extname(this.src).replace(/\./,""),this.load_object()}load_object(){return Q(this,void 0,void 0,(function*(){if("gltf"===this.object_format)yield this.load_object_gltf();this.force_update(["scale","position","rotation"])}))}load_object_gltf(){Y.setPath(this.base_path);let e,t=new i.Group,n=this.globals.renderer;return(0,H.isNil)(n)||(e=new RoughnessMipmapper(n)),new Promise(((n,r)=>{Y.load(this.main_file_name,(r=>{r.scene.traverse((t=>{if(!(0,H.isNil)(e)&&t.isMesh&&e.generateMipmaps(t.material),t.isMesh){let e=t;e.receiveShadow=this.recieve_shadow,e.castShadow=this.cast_shadow;let n=e.material;n.normalScale.x*=this.normal_scale,n.normalScale.y*=this.normal_scale,n.bumpScale,this.bump_scale,n.emissiveIntensity*=this.emission_scale}(0,H.isString)(this.hide_object)&&this.hide_object===t.name&&(t.visible=!1),(0,H.isArray)(this.hide_object)&&this.hide_object.indexOf(t.name)>-1&&(t.visible=!1)})),t.add(r.scene),e.dispose(),this.scene=t,n()}))}))}}},3882:function(e,t,n){"use strict";n.d(t,{Z:function(){return DeviceData}});var r=n(2238),i=n.n(r),o=n(5840),a=n(7771),s=n(6378),c=n(1358);const l=new(i());let u=new URLSearchParams(window.location.search),h=!!u.get("retro.device.force_mobile"),d=!!u.get("retro.device.force_desktop");const f={mobile:"smartphone",tablet:"tablet",undefined:"desktop"};class DeviceData{static update(e){DeviceData.os_name=e.os_name,DeviceData.os_version=e.os_version,DeviceData.os_platform=e.cpu_architecture,DeviceData.device_model=e.device_model,DeviceData.device_type=f[e.device_type],DeviceData.client_engine=e.engine_name,DeviceData.client_name=e.browser_name,DeviceData.client_type="browser",DeviceData.client_version=e.browser_major,DeviceData.is_mobile="mobile"===e.device_type||"tablet"===e.device_data,DeviceData.is_mobile&&d&&(DeviceData.is_mobile=!1),!DeviceData.is_mobile&&h&&(DeviceData.is_mobile=!0)}}let p=function(e){let t={};return(0,o.Z)(e,((e,n)=>{(0,a.Z)(e)||(0,s.Z)(e)?t[n]=e:(0,o.Z)(e,((e,r)=>{(0,s.Z)(e)&&(e=e.toLowerCase()),(0,c.Z)(t,`${n}_${r}`,e)}))})),t}(l.getResult());DeviceData.update(p)},6461:function(e,t,n){"use strict";n.d(t,{ZP:function(){return P}});var r=function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e},i=(0,n(8419).Z)(!0),o=n(5290);var a=function(e,t){return e&&i(e,t,o.Z)},s=(0,n(4033).Z)(a,!0),c=n(8882),l=n(7771);var u=function(e,t){return((0,l.Z)(e)?r:s)(e,(0,c.Z)(t))},h=n(6378),d=n(7226),f=n(5840),p=n(9360),m=n(8774),g=n(5986);var v=function(e,t){var n=[];return(0,g.Z)(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},_=n(728);var y=function(e,t){return((0,l.Z)(e)?m.Z:v)(e,(0,_.Z)(t,3))},b=n(8146),x=n(290),w=n(8800),A=n(3505),T=n(3234),M=n(1489);const E={};function S(e,t){let n=L(e);return t.indexOf("any")>-1||t.indexOf(n)>-1}function R(e,t,n,r,i,o){let a=L(t);switch(a){case"string":if(t.startsWith(":")){let a=t.replace(":","");return void 0===E[a]?(r.unshift({passed:!1,path:n,schema_invalid:!0,schema_id:a,type:{passed:!0},props:{passed:!0},any_prop:{passed:!0},strict_props:{passed:!0}}),!1):R(e,E[a],n,r,i,o)}return R(e,{type:t},n,r,i,o);case"array":{let a,s,c=[],l=[],h=[];return t.forEach((t=>{let r=[];R(e,t,n,r,i,o)?(s=t,c=r):(l=r.concat(l),h.push(t))})),s?(a=c[0],u(c,(e=>{r.unshift(e)}))):(a=l[0],u(l,(e=>{r.unshift(e)}))),a.passed}case"object":{let a={path:n,passed:!0,root:{value:i,schema:o},type:{passed:!0,has:"any",need:["any"]},props:{passed:!0,invalid:[]},strict_props:{passed:!0,invalid:[]},any_prop:{passed:!0,invalid:[]}},s=L(e),c=["any"];(0,h.Z)(t.type)&&(c=t.type.replace(/\s/g,"").split("|")),(0,l.Z)(t.type)&&(c=[...t.type]);let u=S(e,c);if(a.type.passed=u,a.type.has=s,a.type.need=c,(0,d.Z)(t.props))switch(s){case"object":{let s=[],c=[];(0,f.Z)(t.props,((t,a)=>{R(e[a],t,`${n}.${a}`,r,i,o)||s.push(a)})),a.props.invalid=s,a.props.passed=0===s.length,!0===t.strict_props&&(0,f.Z)(e,((e,n)=>{void 0===t.props[n]&&c.push(n)})),a.strict_props.passed=0===c.length,a.strict_props.invalid=c;break}}if(!(0,p.Z)(t.any_prop)){let c=[];switch(s){case"object":(0,f.Z)(e,((e,a)=>{R(e,t.any_prop,`${n}.${a}`,r,i,o)||c.push(a)}));break;case"array":{let a=[];(0,f.Z)(e,((e,s)=>{R(e,t.any_prop,`${n}.${s}`,r,i,o)||a.push(s)}));break}}a.any_prop.passed=0===c.length,a.any_prop.invalid=c}return a.passed=a.props.passed&&a.any_prop.passed&&a.strict_props.passed&&a.type.passed,r.unshift(a),a.passed}default:return(0,M.cM)("Schema",`unknowm schema format: ${a}`,e,t),!1}}function L(e){let t="none";return!(0,d.Z)(e)||(0,b.Z)(e)||(0,l.Z)(e)||(t="object"),(0,l.Z)(e)&&(t="array"),(0,x.Z)(e)&&!(0,w.Z)(e)&&(t="number"),(0,h.Z)(e)&&(t="string"),(0,A.Z)(e)&&(t="bool"),(0,T.Z)(e)&&(t="function"),t}var P={lib:E,validate:function(e,t,n="ROOT",r=!1){let i=[];R(e,t,n,i,e,t);let o=y(i,(e=>!e.passed));if(o.length>0&&!0!==r){let n="";(0,f.Z)(o,((e,t)=>{let r=`\n^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^ ^\nPROBLEM #${t+1}\nVALIDATION of ${e.path} FAILED`;e.schema_invalid&&(r+=`\n# INVALID SCHEMA:\nschema: ${e.schema_id}\n                `),e.type.passed||(r+=`\n# INCORRECT TYPE:\nhas: ${e.type.has.toUpperCase()}\nneed: ${e.type.need.join(", ").toUpperCase()}\n                `),e.props.passed||(r+=`\n# INCORRECT PROPS:\ninvalid: ${e.props.invalid.join(", ")}\n                `),e.strict_props.passed||(r+=`\n# PROPS MUST BE STRICT:\ninvalid: ${e.strict_props.invalid.join(", ")}\n                `),n+=r})),(0,M.vU)("Schema Validation",n),(0,M.vU)("Schema Validation","[DATA]",e),(0,M.vU)("Schema Validation","[SCHEMA]",t),(0,M.vU)("Schema Validation","[TRACE]",i),(0,M.vU)("Schema Validation",". . . . . . . . . . . . . . . . . . . ")}return 0===o.length},get_type_name:L,matches_types:S,register:function(e,t){E[e]=t}}},2238:function(e,t,n){var r;!function(i,o){"use strict";var a="function",s="undefined",c="object",l="string",u="model",h="name",d="type",f="vendor",p="version",m="architecture",g="console",v="mobile",_="tablet",y="smarttv",b="wearable",x="embedded",w="Amazon",A="Apple",T="ASUS",M="BlackBerry",E="Firefox",S="Google",R="Huawei",L="LG",P="Microsoft",C="Motorola",F="Opera",D="Samsung",U="Sony",O="Xiaomi",k="Zebra",I="Facebook",B=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},N=function(e,t){return typeof e===l&&-1!==Z(t).indexOf(Z(e))},Z=function(e){return e.toLowerCase()},j=function(e,t){if(typeof e===l)return e=e.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof t===s?e:e.substring(0,255)},z=function(e,t){for(var n,r,i,s,l,u,h=0;h<t.length&&!l;){var d=t[h],f=t[h+1];for(n=r=0;n<d.length&&!l;)if(l=d[n++].exec(e))for(i=0;i<f.length;i++)u=l[++r],typeof(s=f[i])===c&&s.length>0?2===s.length?typeof s[1]==a?this[s[0]]=s[1].call(this,u):this[s[0]]=s[1]:3===s.length?typeof s[1]!==a||s[1].exec&&s[1].test?this[s[0]]=u?u.replace(s[1],s[2]):o:this[s[0]]=u?s[1].call(this,u,s[2]):o:4===s.length&&(this[s[0]]=u?s[3].call(this,u.replace(s[1],s[2])):o):this[s]=u||o;h+=2}},G=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(N(t[n][r],e))return"?"===n?o:n}else if(N(t[n],e))return"?"===n?o:n;return e},V={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},W={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[p,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[p,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,p],[/opios[\/ ]+([\w\.]+)/i],[p,[h,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[p,[h,F]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[h,p],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[p,[h,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[p,[h,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[p,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[p,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[p,[h,"IE"]],[/yabrowser\/([\w\.]+)/i],[p,[h,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure Browser"],p],[/\bfocus\/([\w\.]+)/i],[p,[h,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[p,[h,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[p,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[p,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[p,[h,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[p,[h,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[p,[h,E]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 Browser"],p],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],p],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[h,p],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,I],p],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[h,p],[/\bgsa\/([\w\.]+) .*safari\//i],[p,[h,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[p,[h,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,"Chrome WebView"],p],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[p,[h,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,p],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[p,[h,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[p,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[p,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,p],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],p],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[p,[h,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[h,p]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[m,"amd64"]],[/(ia32(?=;))/i],[[m,Z]],[/((?:i[346]|x)86)[;\)]/i],[[m,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[m,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[m,"armhf"]],[/windows (ce|mobile); ppc;/i],[[m,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[m,/ower/,"",Z]],[/(sun4\w)[;\)]/i],[[m,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[m,Z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[u,[f,D],[d,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[u,[f,D],[d,v]],[/\((ip(?:hone|od)[\w ]*);/i],[u,[f,A],[d,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[u,[f,A],[d,_]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[u,[f,R],[d,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[u,[f,R],[d,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[u,/_/g," "],[f,O],[d,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[u,/_/g," "],[f,O],[d,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[u,[f,"OPPO"],[d,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[u,[f,"Vivo"],[d,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[u,[f,"Realme"],[d,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[u,[f,C],[d,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[u,[f,C],[d,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[u,[f,L],[d,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[u,[f,L],[d,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[u,[f,"Lenovo"],[d,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[u,/_/g," "],[f,"Nokia"],[d,v]],[/(pixel c)\b/i],[u,[f,S],[d,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[u,[f,S],[d,v]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[u,[f,U],[d,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[u,"Xperia Tablet"],[f,U],[d,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[u,[f,"OnePlus"],[d,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[u,[f,w],[d,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[u,/(.+)/g,"Fire Phone $1"],[f,w],[d,v]],[/(playbook);[-\w\),; ]+(rim)/i],[u,f,[d,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[u,[f,M],[d,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[u,[f,T],[d,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[u,[f,T],[d,v]],[/(nexus 9)/i],[u,[f,"HTC"],[d,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[f,[u,/_/g," "],[d,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[u,[f,"Acer"],[d,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[u,[f,"Meizu"],[d,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[u,[f,"Sharp"],[d,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,u,[d,v]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,u,[d,_]],[/(surface duo)/i],[u,[f,P],[d,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[u,[f,"Fairphone"],[d,v]],[/(u304aa)/i],[u,[f,"AT&T"],[d,v]],[/\bsie-(\w*)/i],[u,[f,"Siemens"],[d,v]],[/\b(rct\w+) b/i],[u,[f,"RCA"],[d,_]],[/\b(venue[\d ]{2,7}) b/i],[u,[f,"Dell"],[d,_]],[/\b(q(?:mv|ta)\w+) b/i],[u,[f,"Verizon"],[d,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[u,[f,"Barnes & Noble"],[d,_]],[/\b(tm\d{3}\w+) b/i],[u,[f,"NuVision"],[d,_]],[/\b(k88) b/i],[u,[f,"ZTE"],[d,_]],[/\b(nx\d{3}j) b/i],[u,[f,"ZTE"],[d,v]],[/\b(gen\d{3}) b.+49h/i],[u,[f,"Swiss"],[d,v]],[/\b(zur\d{3}) b/i],[u,[f,"Swiss"],[d,_]],[/\b((zeki)?tb.*\b) b/i],[u,[f,"Zeki"],[d,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],u,[d,_]],[/\b(ns-?\w{0,9}) b/i],[u,[f,"Insignia"],[d,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[u,[f,"NextBook"],[d,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],u,[d,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],u,[d,v]],[/\b(ph-1) /i],[u,[f,"Essential"],[d,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[u,[f,"Envizen"],[d,_]],[/\b(trio[-\w\. ]+) b/i],[u,[f,"MachSpeed"],[d,_]],[/\btu_(1491) b/i],[u,[f,"Rotor"],[d,_]],[/(shield[\w ]+) b/i],[u,[f,"Nvidia"],[d,_]],[/(sprint) (\w+)/i],[f,u,[d,v]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[f,P],[d,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[u,[f,k],[d,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[u,[f,k],[d,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,u,[d,g]],[/droid.+; (shield) bui/i],[u,[f,"Nvidia"],[d,g]],[/(playstation [345portablevi]+)/i],[u,[f,U],[d,g]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[u,[f,P],[d,g]],[/smart-tv.+(samsung)/i],[f,[d,y]],[/hbbtv.+maple;(\d+)/i],[[u,/^/,"SmartTV"],[f,D],[d,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,L],[d,y]],[/(apple) ?tv/i],[f,[u,"Apple TV"],[d,y]],[/crkey/i],[[u,"Chromecast"],[f,S],[d,y]],[/droid.+aft(\w)( bui|\))/i],[u,[f,w],[d,y]],[/\(dtv[\);].+(aquos)/i],[u,[f,"Sharp"],[d,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[f,j],[u,j],[d,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[d,y]],[/((pebble))app/i],[f,u,[d,b]],[/droid.+; (glass) \d/i],[u,[f,S],[d,b]],[/droid.+; (wt63?0{2,3})\)/i],[u,[f,k],[d,b]],[/(quest( 2)?)/i],[u,[f,I],[d,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[d,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[u,[d,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[u,[d,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[d,_]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[d,v]],[/(android[-\w\. ]{0,9});.+buil/i],[u,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[p,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[p,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[h,p],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[p,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,p],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[h,[p,G,V]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[h,"Windows"],[p,G,V]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[p,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,"Mac OS"],[p,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[p,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,p],[/\(bb(10);/i],[p,[h,M]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[p,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[p,[h,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[p,[h,"webOS"]],[/crkey\/([\d\.]+)/i],[p,[h,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[h,"Chromium OS"],p],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,p],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],p],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[h,p]]},H=function(e,t){if(typeof e===c&&(t=e,e=o),!(this instanceof H))return new H(e,t).getResult();var n=e||(typeof i!==s&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),r=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(W,t):W;return this.getBrowser=function(){var e,t={};return t.name=o,t.version=o,z.call(t,n,r.browser),t.major=typeof(e=t.version)===l?e.replace(/[^\d\.]/g,"").split(".")[0]:o,t},this.getCPU=function(){var e={};return e.architecture=o,z.call(e,n,r.cpu),e},this.getDevice=function(){var e={};return e.vendor=o,e.model=o,e.type=o,z.call(e,n,r.device),e},this.getEngine=function(){var e={};return e.name=o,e.version=o,z.call(e,n,r.engine),e},this.getOS=function(){var e={};return e.name=o,e.version=o,z.call(e,n,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===l&&e.length>255?j(e,255):e,this},this.setUA(n),this};H.VERSION="1.0.2",H.BROWSER=B([h,p,"major"]),H.CPU=B([m]),H.DEVICE=B([u,f,d,g,v,y,_,b,x]),H.ENGINE=H.OS=B([h,p]),typeof t!==s?(e.exports&&(t=e.exports=H),t.UAParser=H):n.amdO?(r=function(){return H}.call(t,n,t,e))===o||(e.exports=r):typeof i!==s&&(i.UAParser=H);var X=typeof i!==s&&(i.jQuery||i.Zepto);if(X&&!X.ua){var Q=new H;X.ua=Q.getResult(),X.ua.get=function(){return Q.getUA()},X.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var n in t)X.ua[n]=t[n]}}}("object"==typeof window?window:this)},384:function(e){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},5955:function(e,t,n){"use strict";var r=n(2584),i=n(8662),o=n(6430),a=n(5692);function s(e){return e.call.bind(e)}var c="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,u=s(Object.prototype.toString),h=s(Number.prototype.valueOf),d=s(String.prototype.valueOf),f=s(Boolean.prototype.valueOf);if(c)var p=s(BigInt.prototype.valueOf);if(l)var m=s(Symbol.prototype.valueOf);function g(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function v(e){return"[object Map]"===u(e)}function _(e){return"[object Set]"===u(e)}function y(e){return"[object WeakMap]"===u(e)}function b(e){return"[object WeakSet]"===u(e)}function x(e){return"[object ArrayBuffer]"===u(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(x.working?x(e):e instanceof ArrayBuffer)}function A(e){return"[object DataView]"===u(e)}function T(e){return"undefined"!=typeof DataView&&(A.working?A(e):e instanceof DataView)}t.isArgumentsObject=r,t.isGeneratorFunction=i,t.isTypedArray=a,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):a(e)||T(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},v.working="undefined"!=typeof Map&&v(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(v.working?v(e):e instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(_.working?_(e):e instanceof Set)},y.working="undefined"!=typeof WeakMap&&y(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(y.working?y(e):e instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),t.isWeakSet=function(e){return b(e)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),t.isArrayBuffer=w,A.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&A(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=T;var M="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(e){return"[object SharedArrayBuffer]"===u(e)}function S(e){return void 0!==M&&(void 0===E.working&&(E.working=E(new M)),E.working?E(e):e instanceof M)}function R(e){return g(e,h)}function L(e){return g(e,d)}function P(e){return g(e,f)}function C(e){return c&&g(e,p)}function F(e){return l&&g(e,m)}t.isSharedArrayBuffer=S,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===u(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===u(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===u(e)},t.isGeneratorObject=function(e){return"[object Generator]"===u(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===u(e)},t.isNumberObject=R,t.isStringObject=L,t.isBooleanObject=P,t.isBigIntObject=C,t.isSymbolObject=F,t.isBoxedPrimitive=function(e){return R(e)||L(e)||P(e)||C(e)||F(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||S(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},9539:function(e,t,n){var r=n(4155),i=n(5108),o=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!b(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(u(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,i=r.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return e}})),s=r[n];n<i;s=r[++n])_(s)||!A(s)?o+=" "+s:o+=" "+u(s);return o},t.deprecate=function(e,n){if(void 0!==r&&!0===r.noDeprecation)return e;if(void 0===r)return function(){return t.deprecate(e,n).apply(this,arguments)};var o=!1;return function(){if(!o){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?i.trace(n):i.error(n),o=!0}return e.apply(this,arguments)}};var s={},c=/^$/;if(r.env.NODE_DEBUG){var l=r.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),c=new RegExp("^"+l+"$","i")}function u(e,n){var r={seen:[],stylize:d};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&t._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=h),f(r,e,r.depth)}function h(e,t){var n=u.styles[t];return n?"["+u.colors[n][0]+"m"+e+"["+u.colors[n][1]+"m":e}function d(e,t){return e}function f(e,n,r){if(e.customInspect&&n&&E(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,e);return b(i)||(i=f(e,i,r)),i}var o=function(e,t){if(x(t))return e.stylize("undefined","undefined");if(b(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(y(t))return e.stylize(""+t,"number");if(v(t))return e.stylize(""+t,"boolean");if(_(t))return e.stylize("null","null")}(e,n);if(o)return o;var a=Object.keys(n),s=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),M(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return p(n);if(0===a.length){if(E(n)){var c=n.name?": "+n.name:"";return e.stylize("[Function"+c+"]","special")}if(w(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(T(n))return e.stylize(Date.prototype.toString.call(n),"date");if(M(n))return p(n)}var l,u="",h=!1,d=["{","}"];(g(n)&&(h=!0,d=["[","]"]),E(n))&&(u=" [Function"+(n.name?": "+n.name:"")+"]");return w(n)&&(u=" "+RegExp.prototype.toString.call(n)),T(n)&&(u=" "+Date.prototype.toUTCString.call(n)),M(n)&&(u=" "+p(n)),0!==a.length||h&&0!=n.length?r<0?w(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),l=h?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)C(t,String(a))?o.push(m(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(m(e,t,n,r,i,!0))})),o}(e,n,r,s,a):a.map((function(t){return m(e,n,r,s,t,h)})),e.seen.pop(),function(e,t,n){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(l,u,d)):d[0]+u+d[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function m(e,t,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=_(n)?f(e,c.value,null):f(e,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function g(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function _(e){return null===e}function y(e){return"number"==typeof e}function b(e){return"string"==typeof e}function x(e){return void 0===e}function w(e){return A(e)&&"[object RegExp]"===S(e)}function A(e){return"object"==typeof e&&null!==e}function T(e){return A(e)&&"[object Date]"===S(e)}function M(e){return A(e)&&("[object Error]"===S(e)||e instanceof Error)}function E(e){return"function"==typeof e}function S(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!s[e])if(c.test(e)){var n=r.pid;s[e]=function(){var r=t.format.apply(t,arguments);i.error("%s %d: %s",e,n,r)}}else s[e]=function(){};return s[e]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=n(5955),t.isArray=g,t.isBoolean=v,t.isNull=_,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=x,t.isRegExp=w,t.types.isRegExp=w,t.isObject=A,t.isDate=T,t.types.isDate=T,t.isError=M,t.types.isNativeError=M,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=n(384);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){i.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=n(5717),t._extend=function(e,t){if(!t||!A(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e};var F="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(F&&e[F]){var t;if("function"!=typeof(t=e[F]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,F,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,i)}catch(e){n(e)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),F&&Object.defineProperty(t,F,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,o(e))},t.promisify.custom=F,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],n=0;n<arguments.length;n++)t.push(arguments[n]);var i=t.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,t).then((function(e){r.nextTick(a.bind(null,null,e))}),(function(e){r.nextTick(D.bind(null,e,a))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,o(e)),t}},2514:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dev-gui",class:{mobile:"desktop"!==e.device.device_type,hidden:!e.is_dev_env}},[t("div",{staticClass:"status"},[e._m(0),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("device type: ".concat(e.device.device_type))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("loaded components: ".concat(e.asset_stats.components_count))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("loaded materials: ".concat(e.asset_stats.materials_count))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("loaded geometries: ".concat(e.asset_stats.geometries_count))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("loaded prefabs: ".concat(e.asset_stats.prefabs_count))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("camera pos: [x: ".concat(e.camera_pos[0],"; y: ").concat(e.camera_pos[1],"; z: ").concat(e.camera_pos[2],";]"))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("pointer screen pos: [x: ".concat(e.pointer_pos[0],"; y: ").concat(e.pointer_pos[1],";]"))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("render items: ".concat(e.render_items_count))}})]),e._v(" "),t("div",{staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("sun time: ".concat(e.sun_time))}})]),e._v(" "),e._l(e.user_lines,(function(n,r){return t("div",{key:r,staticClass:"status-line"},[t("p",{domProps:{innerHTML:e._s("".concat(n.title,": ").concat(n.text))}})])}))],2)])};r._withStripped=!0;var i=n(7845),o=n(3882),a={mixins:[],name:"DevGUI",data:function(){return{asset_stats:{components_count:0},camera_pos:[0,0,0],pointer_pos:[0,0],render_items_count:0,device:o.Z,sun_time:"00:00",user_lines:{}}},props:{},computed:{is_dev_env:function(){return!1}},watch:{},mounted:function(){window.dev_gui=this,this.asset_stats=i.default.get_asset_stats()},methods:{on_tick:function(){var e=this.find_component_of_type("CameraComponent");if(e&&e.subject){var t=e.subject.position;this.camera_pos=[t.x.toFixed(2),t.y.toFixed(2),t.z.toFixed(2)]}var n=this.find_component_of_type("InputComponent");n&&(this.pointer_pos=[n.pointer_position.x,n.pointer_position.y]);var r=this.find_component_of_type("Renderer");r&&(this.render_items_count=r.render_items_count);var i=this.find_component_of_type("Sun");i&&(this.sun_time=this.calc_sun_time(i.time))},calc_sun_time:function(e){var t=Math.floor(1440*e),n=Math.floor(t/60).toString(),r=(t%60).toString();return 1===n.length&&(n="0"+n),1===r.length&&(r="0"+r),"".concat(n,":").concat(r)},update_line:function(e,t){var n=t.title,r=t.text,i=this.user_lines[e];i||(i={}),i.text=r,i.title=n,this.user_lines[e]=i}},store:{state:{},mutations:{},actions:{},getters:{}}},s=(n(4305),(0,n(1900).Z)(a,r,[function(){var e=this._self._c;return e("div",{staticClass:"status-line"},[e("p",[this._v("dev mode")])])}],!1,null,null,null).exports)},1900:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),a?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},l._ssrRegister=c):i&&(c=s?function(){i.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}n.d(t,{Z:function(){return r}})},4305:function(e,t,n){var r=n(7374);r.__esModule&&(r=r.default),"string"==typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);(0,n(5346).Z)("3cf24fac",r,!1,{})},5346:function(e,t,n){"use strict";function r(e,t){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=o[0],s={id:e+":"+i,css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}n.d(t,{Z:function(){return p}});var i="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!i)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var o={},a=i&&(document.head||document.getElementsByTagName("head")[0]),s=null,c=0,l=!1,u=function(){},h=null,d="data-vue-ssr-id",f="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(e,t,n,i){l=n,h=i||{};var a=r(e,t);return m(a),function(t){for(var n=[],i=0;i<a.length;i++){var s=a[i];(c=o[s.id]).refs--,n.push(c)}t?m(a=r(e,t)):a=[];for(i=0;i<n.length;i++){var c;if(0===(c=n[i]).refs){for(var l=0;l<c.parts.length;l++)c.parts[l]();delete o[c.id]}}}}function m(e){for(var t=0;t<e.length;t++){var n=e[t],r=o[n.id];if(r){r.refs++;for(var i=0;i<r.parts.length;i++)r.parts[i](n.parts[i]);for(;i<n.parts.length;i++)r.parts.push(v(n.parts[i]));r.parts.length>n.parts.length&&(r.parts.length=n.parts.length)}else{var a=[];for(i=0;i<n.parts.length;i++)a.push(v(n.parts[i]));o[n.id]={id:n.id,refs:1,parts:a}}}}function g(){var e=document.createElement("style");return e.type="text/css",a.appendChild(e),e}function v(e){var t,n,r=document.querySelector("style["+d+'~="'+e.id+'"]');if(r){if(l)return u;r.parentNode.removeChild(r)}if(f){var i=c++;r=s||(s=g()),t=b.bind(null,r,i,!1),n=b.bind(null,r,i,!0)}else r=g(),t=x.bind(null,r),n=function(){r.parentNode.removeChild(r)};return t(e),function(r){if(r){if(r.css===e.css&&r.media===e.media&&r.sourceMap===e.sourceMap)return;t(e=r)}else n()}}var _,y=(_=[],function(e,t){return _[e]=t,_.filter(Boolean).join("\n")});function b(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=y(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function x(e,t){var n=t.css,r=t.media,i=t.sourceMap;if(r&&e.setAttribute("media",r),h.ssrId&&e.setAttribute(d,t.id),i&&(n+="\n/*# sourceURL="+i.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},1094:function(e,t,n){var r=n(5108);e.exports=function(){"use strict";var e=Object.freeze({}),t=Array.isArray;function i(e){return null==e}function o(e){return null!=e}function a(e){return!0===e}function s(e){return!1===e}function c(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function l(e){return"function"==typeof e}function u(e){return null!==e&&"object"==typeof e}var h=Object.prototype.toString;function d(e){return h.call(e).slice(8,-1)}function f(e){return"[object Object]"===h.call(e)}function p(e){return"[object RegExp]"===h.call(e)}function m(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function g(e){return o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function v(e){return null==e?"":Array.isArray(e)||f(e)&&e.toString===h?JSON.stringify(e,null,2):String(e)}function _(e){var t=parseFloat(e);return isNaN(t)?e:t}function y(e,t){for(var n=Object.create(null),r=e.split(","),i=0;i<r.length;i++)n[r[i]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}var b=y("slot,component",!0),x=y("key,ref,slot,slot-scope,is");function w(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var A=Object.prototype.hasOwnProperty;function T(e,t){return A.call(e,t)}function M(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}}var E=/-(\w)/g,S=M((function(e){return e.replace(E,(function(e,t){return t?t.toUpperCase():""}))})),R=M((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),L=/\B([A-Z])/g,P=M((function(e){return e.replace(L,"-$1").toLowerCase()}));function C(e,t){function n(n){var r=arguments.length;return r?r>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function F(e,t){return e.bind(t)}var D=Function.prototype.bind?F:C;function U(e,t){t=t||0;for(var n=e.length-t,r=new Array(n);n--;)r[n]=e[n+t];return r}function O(e,t){for(var n in t)e[n]=t[n];return e}function k(e){for(var t={},n=0;n<e.length;n++)e[n]&&O(t,e[n]);return t}function I(e,t,n){}var B=function(e,t,n){return!1},N=function(e){return e};function Z(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}function j(e,t){if(e===t)return!0;var n=u(e),r=u(t);if(!n||!r)return!n&&!r&&String(e)===String(t);try{var i=Array.isArray(e),o=Array.isArray(t);if(i&&o)return e.length===t.length&&e.every((function(e,n){return j(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(i||o)return!1;var a=Object.keys(e),s=Object.keys(t);return a.length===s.length&&a.every((function(n){return j(e[n],t[n])}))}catch(e){return!1}}function z(e,t){for(var n=0;n<e.length;n++)if(j(e[n],t))return n;return-1}function G(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function V(e,t){return e===t?0===e&&1/e!=1/t:e==e||t==t}var W="data-server-rendered",H=["component","directive","filter"],X=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],Q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!0,devtools:!0,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:B,isReservedAttr:B,isUnknownElement:B,getTagNamespace:I,parsePlatformTagName:N,mustUseProp:B,async:!0,_lifecycleHooks:X},Y=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function K(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function q(e,t,n,r){Object.defineProperty(e,t,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var J=new RegExp("[^".concat(Y.source,".$_\\d]"));function $(e){if(!J.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var ee="__proto__"in{},te="undefined"!=typeof window,ne=te&&window.navigator.userAgent.toLowerCase(),re=ne&&/msie|trident/.test(ne),ie=ne&&ne.indexOf("msie 9.0")>0,oe=ne&&ne.indexOf("edge/")>0;ne&&ne.indexOf("android");var ae=ne&&/iphone|ipad|ipod|ios/.test(ne);ne&&/chrome\/\d+/.test(ne),ne&&/phantomjs/.test(ne);var se,ce=ne&&ne.match(/firefox\/(\d+)/),le={}.watch,ue=!1;if(te)try{var he={};Object.defineProperty(he,"passive",{get:function(){ue=!0}}),window.addEventListener("test-passive",null,he)}catch(e){}var de=function(){return void 0===se&&(se=!te&&void 0!==n.g&&n.g.process&&"server"===n.g.process.env.VUE_ENV),se},fe=te&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function pe(e){return"function"==typeof e&&/native code/.test(e.toString())}var me,ge="undefined"!=typeof Symbol&&pe(Symbol)&&"undefined"!=typeof Reflect&&pe(Reflect.ownKeys);me="undefined"!=typeof Set&&pe(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var ve=null;function _e(){return ve&&{proxy:ve}}function ye(e){void 0===e&&(e=null),e||ve&&ve._scope.off(),ve=e,e&&e._scope.on()}var be,xe=function(){function e(e,t,n,r,i,o,a,s){this.tag=e,this.data=t,this.children=n,this.text=r,this.elm=i,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),we=function(e){void 0===e&&(e="");var t=new xe;return t.text=e,t.isComment=!0,t};function Ae(e){return new xe(void 0,void 0,void 0,String(e))}function Te(e){var t=new xe(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var Me=y("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,require"),Ee=function(e,t){no('Property or method "'.concat(t,'" is not defined on the instance but ')+"referenced during render. Make sure that this property is reactive, either in the data option, or for class-based components, by initializing the property. See: https://vuejs.org/v2/guide/reactivity.html#Declaring-Reactive-Properties.",e)},Se=function(e,t){no('Property "'.concat(t,'" must be accessed with "$data.').concat(t,'" because ')+'properties starting with "$" or "_" are not proxied in the Vue instance to prevent conflicts with Vue internals. See: https://vuejs.org/v2/api/#data',e)},Re="undefined"!=typeof Proxy&&pe(Proxy);if(Re){var Le=y("stop,prevent,self,ctrl,shift,alt,meta,exact");Q.keyCodes=new Proxy(Q.keyCodes,{set:function(e,t,n){return Le(t)?(no("Avoid overwriting built-in modifier in config.keyCodes: .".concat(t)),!1):(e[t]=n,!0)}})}var Pe={has:function(e,t){var n=t in e,r=Me(t)||"string"==typeof t&&"_"===t.charAt(0)&&!(t in e.$data);return n||r||(t in e.$data?Se(e,t):Ee(e,t)),n||!r}},Ce={get:function(e,t){return"string"!=typeof t||t in e||(t in e.$data?Se(e,t):Ee(e,t)),e[t]}};be=function(e){if(Re){var t=e.$options,n=t.render&&t.render._withStripped?Ce:Pe;e._renderProxy=new Proxy(e,n)}else e._renderProxy=e};var Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fe.apply(this,arguments)},De=0,Ue=function(){function e(){this.id=De++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){w(this.subs,e)},e.prototype.depend=function(t){e.target&&(e.target.addDep(this),t&&e.target.onTrack&&e.target.onTrack(Fe({effect:e.target},t)))},e.prototype.notify=function(e){var t=this.subs.slice();Q.async||t.sort((function(e,t){return e.id-t.id}));for(var n=0,r=t.length;n<r;n++){if(e){var i=t[n];i.onTrigger&&i.onTrigger(Fe({effect:t[n]},e))}t[n].update()}},e}();Ue.target=null;var Oe=[];function ke(e){Oe.push(e),Ue.target=e}function Ie(){Oe.pop(),Ue.target=Oe[Oe.length-1]}var Be=Array.prototype,Ne=Object.create(Be);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=Be[e];q(Ne,e,(function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i,o=t.apply(this,n),a=this.__ob__;switch(e){case"push":case"unshift":i=n;break;case"splice":i=n.slice(2)}return i&&a.observeArray(i),a.dep.notify({type:"array mutation",target:this,key:e}),o}))}));var Ze=Object.getOwnPropertyNames(Ne),je={},ze=!0;function Ge(e){ze=e}var Ve={notify:I,depend:I,addSub:I,removeSub:I},We=function(){function e(e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),this.value=e,this.shallow=n,this.mock=r,this.dep=r?Ve:new Ue,this.vmCount=0,q(e,"__ob__",this),t(e)){if(!r)if(ee)e.__proto__=Ne;else for(var i=0,o=Ze.length;i<o;i++)q(e,s=Ze[i],Ne[s]);n||this.observeArray(e)}else{var a=Object.keys(e);for(i=0;i<a.length;i++){var s;Xe(e,s=a[i],je,void 0,n,r)}}}return e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)He(e[t],!1,this.mock)},e}();function He(e,n,r){var i;if(!(!u(e)||ct(e)||e instanceof xe))return T(e,"__ob__")&&e.__ob__ instanceof We?i=e.__ob__:!ze||!r&&de()||!t(e)&&!f(e)||!Object.isExtensible(e)||e.__v_skip||(i=new We(e,n,r)),i}function Xe(e,n,r,i,o,a){var s=new Ue,c=Object.getOwnPropertyDescriptor(e,n);if(!c||!1!==c.configurable){var l=c&&c.get,u=c&&c.set;l&&!u||r!==je&&2!==arguments.length||(r=e[n]);var h=!o&&He(r,!1,a);return Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var i=l?l.call(e):r;return Ue.target&&(s.depend({target:e,type:"get",key:n}),h&&(h.dep.depend(),t(i)&&Ke(i))),ct(i)&&!o?i.value:i},set:function(t){var c=l?l.call(e):r;if(V(c,t)){if(i&&i(),u)u.call(e,t);else{if(l)return;if(!o&&ct(c)&&!ct(t))return void(c.value=t);r=t}h=!o&&He(t,!1,a),s.notify({type:"set",target:e,key:n,newValue:t,oldValue:c})}}}),s}}function Qe(e,n,r){if((i(e)||c(e))&&no("Cannot set reactive property on undefined, null, or primitive value: ".concat(e)),!nt(e)){var o=e.__ob__;return t(e)&&m(n)?(e.length=Math.max(e.length,n),e.splice(n,1,r),o&&!o.shallow&&o.mock&&He(r,!1,!0),r):n in e&&!(n in Object.prototype)?(e[n]=r,r):e._isVue||o&&o.vmCount?(no("Avoid adding reactive properties to a Vue instance or its root $data at runtime - declare it upfront in the data option."),r):o?(Xe(o.value,n,r,void 0,o.shallow,o.mock),o.dep.notify({type:"add",target:e,key:n,newValue:r,oldValue:void 0}),r):(e[n]=r,r)}no('Set operation on key "'.concat(n,'" failed: target is readonly.'))}function Ye(e,n){if((i(e)||c(e))&&no("Cannot delete reactive property on undefined, null, or primitive value: ".concat(e)),t(e)&&m(n))e.splice(n,1);else{var r=e.__ob__;e._isVue||r&&r.vmCount?no("Avoid deleting properties on a Vue instance or its root $data - just set it to null."):nt(e)?no('Delete operation on key "'.concat(n,'" failed: target is readonly.')):T(e,n)&&(delete e[n],r&&r.dep.notify({type:"delete",target:e,key:n}))}}function Ke(e){for(var n=void 0,r=0,i=e.length;r<i;r++)(n=e[r])&&n.__ob__&&n.__ob__.dep.depend(),t(n)&&Ke(n)}function qe(e){return $e(e,!1),e}function Je(e){return $e(e,!0),q(e,"__v_isShallow",!0),e}function $e(e,n){if(!nt(e)){t(e)&&no("Avoid using Array as root value for ".concat(n?"shallowReactive()":"reactive()"," as it cannot be tracked in watch() or watchEffect(). Use ").concat(n?"shallowRef()":"ref()"," instead. This is a Vue-2-only limitation."));var r=e&&e.__ob__;r&&r.shallow!==n&&no("Target is already a ".concat(r.shallow?"":"non-","shallow reactive object, and cannot be converted to ").concat(n?"":"non-","shallow.")),He(e,n,de())||((null==e||c(e))&&no("value cannot be made reactive: ".concat(String(e))),at(e)&&no("Vue 2 does not support reactive collection types such as Map or Set."))}}function et(e){return nt(e)?et(e.__v_raw):!(!e||!e.__ob__)}function tt(e){return!(!e||!e.__v_isShallow)}function nt(e){return!(!e||!e.__v_isReadonly)}function rt(e){return et(e)||nt(e)}function it(e){var t=e&&e.__v_raw;return t?it(t):e}function ot(e){return q(e,"__v_skip",!0),e}function at(e){var t=d(e);return"Map"===t||"WeakMap"===t||"Set"===t||"WeakSet"===t}var st="__v_isRef";function ct(e){return!(!e||!0!==e.__v_isRef)}function lt(e){return ht(e,!1)}function ut(e){return ht(e,!0)}function ht(e,t){if(ct(e))return e;var n={};return q(n,st,!0),q(n,"__v_isShallow",t),q(n,"dep",Xe(n,"value",e,null,t,de())),n}function dt(e){e.dep||no("received object is not a triggerable ref."),e.dep&&e.dep.notify({type:"set",target:e,key:"value"})}function ft(e){return ct(e)?e.value:e}function pt(e){if(et(e))return e;for(var t={},n=Object.keys(e),r=0;r<n.length;r++)mt(t,e,n[r]);return t}function mt(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];if(ct(e))return e.value;var r=e&&e.__ob__;return r&&r.dep.depend(),e},set:function(e){var r=t[n];ct(r)&&!ct(e)?r.value=e:t[n]=e}})}function gt(e){var t=new Ue,n=e((function(){t.depend({target:o,type:"get",key:"value"})}),(function(){t.notify({target:o,type:"set",key:"value"})})),r=n.get,i=n.set,o={get value(){return r()},set value(e){i(e)}};return q(o,st,!0),o}function vt(e){et(e)||no("toRefs() expects a reactive object but received a plain one.");var n=t(e)?new Array(e.length):{};for(var r in e)n[r]=_t(e,r);return n}function _t(e,t,n){var r=e[t];if(ct(r))return r;var i={get value(){var r=e[t];return void 0===r?n:r},set value(n){e[t]=n}};return q(i,st,!0),i}var yt,bt,xt="__v_rawToReadonly",wt="__v_rawToShallowReadonly";function At(e){return Tt(e,!1)}function Tt(e,n){if(!f(e))return t(e)?no("Vue 2 does not support readonly arrays."):at(e)?no("Vue 2 does not support readonly collection types such as Map or Set."):no("value cannot be made readonly: ".concat(typeof e)),e;if(nt(e))return e;var r=n?wt:xt,i=e[r];if(i)return i;var o=Object.create(Object.getPrototypeOf(e));q(e,r,o),q(o,"__v_isReadonly",!0),q(o,"__v_raw",e),ct(e)&&q(o,st,!0),(n||tt(e))&&q(o,"__v_isShallow",!0);for(var a=Object.keys(e),s=0;s<a.length;s++)Mt(o,e,a[s],n);return o}function Mt(e,t,n,r){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];return r||!f(e)?e:At(e)},set:function(){no('Set operation on key "'.concat(n,'" failed: target is readonly.'))}})}function Et(e){return Tt(e,!0)}function St(e,t){var n,r,i=l(e);i?(n=e,r=function(){no("Write operation failed: computed value is readonly")}):(n=e.get,r=e.set);var o=de()?null:new _i(ve,n,I,{lazy:!0});o&&t&&(o.onTrack=t.onTrack,o.onTrigger=t.onTrigger);var a={effect:o,get value(){return o?(o.dirty&&o.evaluate(),Ue.target&&(Ue.target.onTrack&&Ue.target.onTrack({effect:Ue.target,target:a,type:"get",key:"value"}),o.depend()),o.value):n()},set value(e){r(e)}};return q(a,st,!0),q(a,"__v_isReadonly",i),a}var Rt=te&&window.performance;Rt&&Rt.mark&&Rt.measure&&Rt.clearMarks&&Rt.clearMeasures&&(yt=function(e){return Rt.mark(e)},bt=function(e,t,n){Rt.measure(e,t,n),Rt.clearMarks(t),Rt.clearMarks(n)});var Lt=M((function(e){var t="&"===e.charAt(0),n="~"===(e=t?e.slice(1):e).charAt(0),r="!"===(e=n?e.slice(1):e).charAt(0);return{name:e=r?e.slice(1):e,once:n,capture:r,passive:t}}));function Pt(e,n){function r(){var e=r.fns;if(!t(e))return Ur(e,null,arguments,n,"v-on handler");for(var i=e.slice(),o=0;o<i.length;o++)Ur(i[o],null,arguments,n,"v-on handler")}return r.fns=e,r}function Ct(e,t,n,r,o,s){var c,l,u,h;for(c in e)l=e[c],u=t[c],h=Lt(c),i(l)?no('Invalid handler for event "'.concat(h.name,'": got ')+String(l),s):i(u)?(i(l.fns)&&(l=e[c]=Pt(l,s)),a(h.once)&&(l=e[c]=o(h.name,l,h.capture)),n(h.name,l,h.capture,h.passive,h.params)):l!==u&&(u.fns=l,e[c]=u);for(c in t)i(e[c])&&r((h=Lt(c)).name,t[c],h.capture)}function Ft(e,t,n){var r;e instanceof xe&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),w(r.fns,c)}i(s)?r=Pt([c]):o(s.fns)&&a(s.merged)?(r=s).fns.push(c):r=Pt([s,c]),r.merged=!0,e[t]=r}function Dt(e,t,n){var r=t.options.props;if(!i(r)){var a={},s=e.attrs,c=e.props;if(o(s)||o(c))for(var l in r){var u=P(l),h=l.toLowerCase();l!==h&&s&&T(s,h)&&ro('Prop "'.concat(h,'" is passed to component ')+"".concat(to(n||t),", but the declared prop name is")+' "'.concat(l,'". ')+"Note that HTML attributes are case-insensitive and camelCased props need to use their kebab-case equivalents when using in-DOM "+'templates. You should probably use "'.concat(u,'" instead of "').concat(l,'".')),Ut(a,c,l,u,!0)||Ut(a,s,l,u,!1)}return a}}function Ut(e,t,n,r,i){if(o(t)){if(T(t,n))return e[n]=t[n],i||delete t[n],!0;if(T(t,r))return e[n]=t[r],i||delete t[r],!0}return!1}function Ot(e){for(var n=0;n<e.length;n++)if(t(e[n]))return Array.prototype.concat.apply([],e);return e}function kt(e){return c(e)?[Ae(e)]:t(e)?Bt(e):void 0}function It(e){return o(e)&&o(e.text)&&s(e.isComment)}function Bt(e,n){var r,s,l,u,h=[];for(r=0;r<e.length;r++)i(s=e[r])||"boolean"==typeof s||(u=h[l=h.length-1],t(s)?s.length>0&&(It((s=Bt(s,"".concat(n||"","_").concat(r)))[0])&&It(u)&&(h[l]=Ae(u.text+s[0].text),s.shift()),h.push.apply(h,s)):c(s)?It(u)?h[l]=Ae(u.text+s):""!==s&&h.push(Ae(s)):It(s)&&It(u)?h[l]=Ae(u.text+s.text):(a(e._isVList)&&o(s.tag)&&i(s.key)&&o(n)&&(s.key="__vlist".concat(n,"_").concat(r,"__")),h.push(s)));return h}var Nt=1,Zt=2;function jt(e,n,r,i,o,s){return(t(r)||c(r))&&(o=i,i=r,r=void 0),a(s)&&(o=Zt),zt(e,n,r,i,o)}function zt(e,n,r,i,a){if(o(r)&&o(r.__ob__))return no("Avoid using observed data object as vnode data: ".concat(JSON.stringify(r),"\n")+"Always create fresh vnode data objects in each render!",e),we();if(o(r)&&o(r.is)&&(n=r.is),!n)return we();var s,u;if(o(r)&&o(r.key)&&!c(r.key)&&no("Avoid using non-primitive value as key, use string/number value instead.",e),t(i)&&l(i[0])&&((r=r||{}).scopedSlots={default:i[0]},i.length=0),a===Zt?i=kt(i):a===Nt&&(i=Ot(i)),"string"==typeof n){var h=void 0;u=e.$vnode&&e.$vnode.ns||Q.getTagNamespace(n),Q.isReservedTag(n)?(o(r)&&o(r.nativeOn)&&"component"!==r.tag&&no("The .native modifier for v-on is only valid on components but it was used on <".concat(n,">."),e),s=new xe(Q.parsePlatformTagName(n),r,i,void 0,void 0,e)):s=r&&r.pre||!o(h=Ao(e.$options,"components",n))?new xe(n,r,i,void 0,void 0,e):Yi(h,r,e,i,n)}else s=Yi(n,r,e,i);return t(s)?s:o(s)?(o(u)&&Gt(s,u),o(r)&&Vt(r),s):we()}function Gt(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),o(e.children))for(var r=0,s=e.children.length;r<s;r++){var c=e.children[r];o(c.tag)&&(i(c.ns)||a(n)&&"svg"!==c.tag)&&Gt(c,t,n)}}function Vt(e){u(e.style)&&mi(e.style),u(e.class)&&mi(e.class)}function Wt(e,n){var r,i,a,s,c=null;if(t(e)||"string"==typeof e)for(c=new Array(e.length),r=0,i=e.length;r<i;r++)c[r]=n(e[r],r);else if("number"==typeof e)for(c=new Array(e),r=0;r<e;r++)c[r]=n(r+1,r);else if(u(e))if(ge&&e[Symbol.iterator]){c=[];for(var l=e[Symbol.iterator](),h=l.next();!h.done;)c.push(n(h.value,c.length)),h=l.next()}else for(a=Object.keys(e),c=new Array(a.length),r=0,i=a.length;r<i;r++)s=a[r],c[r]=n(e[s],s,r);return o(c)||(c=[]),c._isVList=!0,c}function Ht(e,t,n,r){var i,o=this.$scopedSlots[e];o?(n=n||{},r&&(u(r)||no("slot v-bind without argument expects an Object",this),n=O(O({},r),n)),i=o(n)||(l(t)?t():t)):i=this.$slots[e]||(l(t)?t():t);var a=n&&n.slot;return a?this.$createElement("template",{slot:a},i):i}function Xt(e){return Ao(this.$options,"filters",e,!0)||N}function Qt(e,n){return t(e)?-1===e.indexOf(n):e!==n}function Yt(e,t,n,r,i){var o=Q.keyCodes[t]||n;return i&&r&&!Q.keyCodes[t]?Qt(i,r):o?Qt(o,e):r?P(r)!==t:void 0===e}function Kt(e,n,r,i,o){if(r)if(u(r)){t(r)&&(r=k(r));var a=void 0,s=function(t){if("class"===t||"style"===t||x(t))a=e;else{var s=e.attrs&&e.attrs.type;a=i||Q.mustUseProp(n,s,t)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=S(t),l=P(t);c in a||l in a||(a[t]=r[t],o&&((e.on||(e.on={}))["update:".concat(t)]=function(e){r[t]=e}))};for(var c in r)s(c)}else no("v-bind without argument expects an Object or Array value",this);return e}function qt(e,t){var n=this._staticTrees||(this._staticTrees=[]),r=n[e];return r&&!t||$t(r=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),"__static__".concat(e),!1),r}function Jt(e,t,n){return $t(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function $t(e,n,r){if(t(e))for(var i=0;i<e.length;i++)e[i]&&"string"!=typeof e[i]&&en(e[i],"".concat(n,"_").concat(i),r);else en(e,n,r)}function en(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function tn(e,t){if(t)if(f(t)){var n=e.on=e.on?O({},e.on):{};for(var r in t){var i=n[r],o=t[r];n[r]=i?[].concat(i,o):o}}else no("v-on without argument expects an Object value",this);return e}function nn(e,n,r,i){n=n||{$stable:!r};for(var o=0;o<e.length;o++){var a=e[o];t(a)?nn(a,n,r):a&&(a.proxy&&(a.fn.proxy=!0),n[a.key]=a.fn)}return i&&(n.$key=i),n}function rn(e,t){for(var n=0;n<t.length;n+=2){var r=t[n];"string"==typeof r&&r?e[t[n]]=t[n+1]:""!==r&&null!==r&&no("Invalid value for dynamic directive argument (expected string or null): ".concat(r),this)}return e}function on(e,t){return"string"==typeof e?t+e:e}function an(e){e._o=Jt,e._n=_,e._s=v,e._l=Wt,e._t=Ht,e._q=j,e._i=z,e._m=qt,e._f=Xt,e._k=Yt,e._b=Kt,e._v=Ae,e._e=we,e._u=nn,e._g=tn,e._d=rn,e._p=on}function sn(e,t){if(!e||!e.length)return{};for(var n={},r=0,i=e.length;r<i;r++){var o=e[r],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==t&&o.fnContext!==t||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===o.tag?c.push.apply(c,o.children||[]):c.push(o)}}for(var l in n)n[l].every(cn)&&delete n[l];return n}function cn(e){return e.isComment&&!e.asyncFactory||" "===e.text}function ln(e){return e.isComment&&e.asyncFactory}function un(t,n,r,i){var o,a=Object.keys(r).length>0,s=n?!!n.$stable:!a,c=n&&n.$key;if(n){if(n._normalized)return n._normalized;if(s&&i&&i!==e&&c===i.$key&&!a&&!i.$hasNormal)return i;for(var l in o={},n)n[l]&&"$"!==l[0]&&(o[l]=hn(t,r,l,n[l]))}else o={};for(var u in r)u in o||(o[u]=dn(r,u));return n&&Object.isExtensible(n)&&(n._normalized=o),q(o,"$stable",s),q(o,"$key",c),q(o,"$hasNormal",a),o}function hn(e,n,r,i){var o=function(){var n=ve;ye(e);var r=arguments.length?i.apply(null,arguments):i({}),o=(r=r&&"object"==typeof r&&!t(r)?[r]:kt(r))&&r[0];return ye(n),r&&(!o||1===r.length&&o.isComment&&!ln(o))?void 0:r};return i.proxy&&Object.defineProperty(n,r,{get:o,enumerable:!0,configurable:!0}),o}function dn(e,t){return function(){return e[t]}}function fn(e){var t=e.$options,n=t.setup;if(n){var r=e._setupContext=pn(e);ye(e),ke();var i=Ur(n,null,[e._props||Je({}),r],e,"setup");if(Ie(),ye(),l(i))t.render=i;else if(u(i))if(i instanceof xe&&no("setup() should not return VNodes directly - return a render function instead."),e._setupState=i,i.__sfc){var o=e._setupProxy={};for(var a in i)"__sfc"!==a&&mt(o,i,a)}else for(var a in i)K(a)?no("Avoid using variables that start with _ or $ in setup()."):mt(e,i,a);else void 0!==i&&no("setup() should return an object. Received: ".concat(null===i?"null":typeof i))}}function pn(t){var n=!1;return{get attrs(){if(!t._attrsProxy){var n=t._attrsProxy={};q(n,"_v_attr_proxy",!0),mn(n,t.$attrs,e,t,"$attrs")}return t._attrsProxy},get listeners(){return t._listenersProxy||mn(t._listenersProxy={},t.$listeners,e,t,"$listeners"),t._listenersProxy},get slots(){return vn(t)},emit:D(t.$emit,t),expose:function(e){n&&no("expose() should be called only once per setup().",t),n=!0,e&&Object.keys(e).forEach((function(n){return mt(t,e,n)}))}}}function mn(e,t,n,r,i){var o=!1;for(var a in t)a in e?t[a]!==n[a]&&(o=!0):(o=!0,gn(e,a,r,i));for(var a in e)a in t||(o=!0,delete e[a]);return o}function gn(e,t,n,r){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[r][t]}})}function vn(e){return e._slotsProxy||_n(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function _n(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function yn(){return wn().slots}function bn(){return wn().attrs}function xn(){return wn().listeners}function wn(){ve||no("useContext() called without active instance.");var e=ve;return e._setupContext||(e._setupContext=pn(e))}function An(e,n){var r=t(e)?e.reduce((function(e,t){return e[t]={},e}),{}):e;for(var i in n){var o=r[i];o?t(o)||l(o)?r[i]={type:o,default:n[i]}:o.default=n[i]:null===o?r[i]={default:n[i]}:no('props default key "'.concat(i,'" has no corresponding declaration.'))}return r}function Tn(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,i=r&&r.context;t.$slots=sn(n._renderChildren,i),t.$scopedSlots=r?un(t.$parent,r.data.scopedSlots,t.$slots):e,t._c=function(e,n,r,i){return jt(t,e,n,r,i,!1)},t.$createElement=function(e,n,r,i){return jt(t,e,n,r,i,!0)};var o=r&&r.data;Xe(t,"$attrs",o&&o.attrs||e,(function(){!Nn&&no("$attrs is readonly.",t)}),!0),Xe(t,"$listeners",n._parentListeners||e,(function(){!Nn&&no("$listeners is readonly.",t)}),!0)}var Mn,En=null;function Sn(e){an(e.prototype),e.prototype.$nextTick=function(e){return Hr(e,this)},e.prototype._render=function(){var e,n=this,r=n.$options,i=r.render,o=r._parentVnode;o&&n._isMounted&&(n.$scopedSlots=un(n.$parent,o.data.scopedSlots,n.$slots,n.$scopedSlots),n._slotsProxy&&_n(n._slotsProxy,n.$scopedSlots)),n.$vnode=o;try{ye(n),En=n,e=i.call(n._renderProxy,n.$createElement)}catch(t){if(Dr(t,n,"render"),n.$options.renderError)try{e=n.$options.renderError.call(n._renderProxy,n.$createElement,t)}catch(t){Dr(t,n,"renderError"),e=n._vnode}else e=n._vnode}finally{En=null,ye()}return t(e)&&1===e.length&&(e=e[0]),e instanceof xe||(t(e)&&no("Multiple root nodes returned from render function. Render function should return a single root node.",n),e=we()),e.parent=o,e}}function Rn(e,t){return(e.__esModule||ge&&"Module"===e[Symbol.toStringTag])&&(e=e.default),u(e)?t.extend(e):e}function Ln(e,t,n,r,i){var o=we();return o.asyncFactory=e,o.asyncMeta={data:t,context:n,children:r,tag:i},o}function Pn(e,t){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=En;if(n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var r=e.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return w(r,n)}));var h=function(e){for(var t=0,n=r.length;t<n;t++)r[t].$forceUpdate();e&&(r.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=G((function(n){e.resolved=Rn(n,t),s?r.length=0:h(!0)})),f=G((function(t){no("Failed to resolve async component: ".concat(String(e))+(t?"\nReason: ".concat(t):"")),o(e.errorComp)&&(e.error=!0,h(!0))})),p=e(d,f);return u(p)&&(g(p)?i(e.resolved)&&p.then(d,f):g(p.component)&&(p.component.then(d,f),o(p.error)&&(e.errorComp=Rn(p.error,t)),o(p.loading)&&(e.loadingComp=Rn(p.loading,t),0===p.delay?e.loading=!0:c=setTimeout((function(){c=null,i(e.resolved)&&i(e.error)&&(e.loading=!0,h(!1))}),p.delay||200)),o(p.timeout)&&(l=setTimeout((function(){l=null,i(e.resolved)&&f("timeout (".concat(p.timeout,"ms)"))}),p.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function Cn(e){if(t(e))for(var n=0;n<e.length;n++){var r=e[n];if(o(r)&&(o(r.componentOptions)||ln(r)))return r}}function Fn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&kn(e,t)}function Dn(e,t){Mn.$on(e,t)}function Un(e,t){Mn.$off(e,t)}function On(e,t){var n=Mn;return function r(){null!==t.apply(null,arguments)&&n.$off(e,r)}}function kn(e,t,n){Mn=e,Ct(t,n||{},Dn,Un,On,e),Mn=void 0}function In(e){var n=/^hook:/;e.prototype.$on=function(e,r){var i=this;if(t(e))for(var o=0,a=e.length;o<a;o++)i.$on(e[o],r);else(i._events[e]||(i._events[e]=[])).push(r),n.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function r(){n.$off(e,r),t.apply(n,arguments)}return r.fn=t,n.$on(e,r),n},e.prototype.$off=function(e,n){var r=this;if(!arguments.length)return r._events=Object.create(null),r;if(t(e)){for(var i=0,o=e.length;i<o;i++)r.$off(e[i],n);return r}var a,s=r._events[e];if(!s)return r;if(!n)return r._events[e]=null,r;for(var c=s.length;c--;)if((a=s[c])===n||a.fn===n){s.splice(c,1);break}return r},e.prototype.$emit=function(e){var t=this,n=e.toLowerCase();n!==e&&t._events[n]&&ro('Event "'.concat(n,'" is emitted in component ')+"".concat(to(t),' but the handler is registered for "').concat(e,'". ')+"Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. "+'You should probably use "'.concat(P(e),'" instead of "').concat(e,'".'));var r=t._events[e];if(r){r=r.length>1?U(r):r;for(var i=U(arguments,1),o='event handler for "'.concat(e,'"'),a=0,s=r.length;a<s;a++)Ur(r[a],t,i,t,o)}return t}}var Bn=null,Nn=!1;function Zn(e){var t=Bn;return Bn=e,function(){Bn=t}}function jn(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function zn(e){e.prototype._update=function(e,t){var n=this,r=n.$el,i=n._vnode,o=Zn(n);n._vnode=e,n.$el=i?n.__patch__(i,e):n.__patch__(n.$el,e,t,!1),o(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Qn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||w(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Qn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function Gn(e,t,n){var r;e.$el=t,e.$options.render||(e.$options.render=we,e.$options.template&&"#"!==e.$options.template.charAt(0)||e.$options.el||t?no("You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.",e):no("Failed to mount component: template or render function not defined.",e)),Qn(e,"beforeMount"),r=Q.performance&&yt?function(){var t=e._name,r=e._uid,i="vue-perf-start:".concat(r),o="vue-perf-end:".concat(r);yt(i);var a=e._render();yt(o),bt("vue ".concat(t," render"),i,o),yt(i),e._update(a,n),yt(o),bt("vue ".concat(t," patch"),i,o)}:function(){e._update(e._render(),n)};var i={before:function(){e._isMounted&&!e._isDestroyed&&Qn(e,"beforeUpdate")},onTrack:function(t){return Qn(e,"renderTracked",[t])},onTrigger:function(t){return Qn(e,"renderTriggered",[t])}};new _i(e,r,I,i,!0),n=!1;var o=e._preWatchers;if(o)for(var a=0;a<o.length;a++)o[a].run();return null==e.$vnode&&(e._isMounted=!0,Qn(e,"mounted")),e}function Vn(t,n,r,i,o){Nn=!0;var a=i.data.scopedSlots,s=t.$scopedSlots,c=!!(a&&!a.$stable||s!==e&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key||!a&&t.$scopedSlots.$key),l=!!(o||t.$options._renderChildren||c),u=t.$vnode;t.$options._parentVnode=i,t.$vnode=i,t._vnode&&(t._vnode.parent=i),t.$options._renderChildren=o;var h=i.data.attrs||e;t._attrsProxy&&mn(t._attrsProxy,h,u.data&&u.data.attrs||e,t,"$attrs")&&(l=!0),t.$attrs=h,r=r||e;var d=t.$options._parentListeners;if(t._listenersProxy&&mn(t._listenersProxy,r,d||e,t,"$listeners"),t.$listeners=t.$options._parentListeners=r,kn(t,r,d),n&&t.$options.props){Ge(!1);for(var f=t._props,p=t.$options._propKeys||[],m=0;m<p.length;m++){var g=p[m],v=t.$options.props;f[g]=To(g,v,n,t)}Ge(!0),t.$options.propsData=n}l&&(t.$slots=sn(o,i.context),t.$forceUpdate()),Nn=!1}function Wn(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Hn(e,t){if(t){if(e._directInactive=!1,Wn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)Hn(e.$children[n]);Qn(e,"activated")}}function Xn(e,t){if(!(t&&(e._directInactive=!0,Wn(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Xn(e.$children[n]);Qn(e,"deactivated")}}function Qn(e,t,n,r){void 0===r&&(r=!0),ke();var i=ve;r&&ye(e);var o=e.$options[t],a="".concat(t," hook");if(o)for(var s=0,c=o.length;s<c;s++)Ur(o[s],e,n||null,e,a);e._hasHookEvent&&e.$emit("hook:"+t),r&&ye(i),Ie()}var Yn=100,Kn=[],qn=[],Jn={},$n={},er=!1,tr=!1,nr=0;function rr(){nr=Kn.length=qn.length=0,Jn={},$n={},er=tr=!1}var ir=0,or=Date.now;if(te&&!re){var ar=window.performance;ar&&"function"==typeof ar.now&&or()>document.createEvent("Event").timeStamp&&(or=function(){return ar.now()})}var sr=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function cr(){var e,t;for(ir=or(),tr=!0,Kn.sort(sr),nr=0;nr<Kn.length;nr++)if((e=Kn[nr]).before&&e.before(),t=e.id,Jn[t]=null,e.run(),null!=Jn[t]&&($n[t]=($n[t]||0)+1,$n[t]>Yn)){no("You may have an infinite update loop "+(e.user?'in watcher with expression "'.concat(e.expression,'"'):"in a component render function."),e.vm);break}var n=qn.slice(),r=Kn.slice();rr(),hr(n),lr(r),fe&&Q.devtools&&fe.emit("flush")}function lr(e){for(var t=e.length;t--;){var n=e[t],r=n.vm;r&&r._watcher===n&&r._isMounted&&!r._isDestroyed&&Qn(r,"updated")}}function ur(e){e._inactive=!1,qn.push(e)}function hr(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Hn(e[t],!0)}function dr(e){var t=e.id;if(null==Jn[t]&&(e!==Ue.target||!e.noRecurse)){if(Jn[t]=!0,tr){for(var n=Kn.length-1;n>nr&&Kn[n].id>e.id;)n--;Kn.splice(n+1,0,e)}else Kn.push(e);if(!er){if(er=!0,!Q.async)return void cr();Hr(cr)}}}var fr="watcher",pr="".concat(fr," callback"),mr="".concat(fr," getter"),gr="".concat(fr," cleanup");function vr(e,t){return Ar(e,null,t)}function _r(e,t){return Ar(e,null,Fe(Fe({},t),{flush:"post"}))}function yr(e,t){return Ar(e,null,Fe(Fe({},t),{flush:"sync"}))}var br,xr={};function wr(e,t,n){return"function"!=typeof t&&no("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Ar(e,t,n)}function Ar(n,r,i){var o=void 0===i?e:i,a=o.immediate,s=o.deep,c=o.flush,u=void 0===c?"pre":c,h=o.onTrack,d=o.onTrigger;r||(void 0!==a&&no('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),void 0!==s&&no('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));var f,p,m=function(e){no("Invalid watch source: ".concat(e,". A watch source can only be a getter/effect ")+"function, a ref, a reactive object, or an array of these types.")},g=ve,v=function(e,t,n){return void 0===n&&(n=null),Ur(e,null,n,g,t)},_=!1,y=!1;if(ct(n)?(f=function(){return n.value},_=tt(n)):et(n)?(f=function(){return n.__ob__.dep.depend(),n},s=!0):t(n)?(y=!0,_=n.some((function(e){return et(e)||tt(e)})),f=function(){return n.map((function(e){return ct(e)?e.value:et(e)?mi(e):l(e)?v(e,mr):void m(e)}))}):l(n)?f=r?function(){return v(n,mr)}:function(){if(!g||!g._isDestroyed)return p&&p(),v(n,fr,[x])}:(f=I,m(n)),r&&s){var b=f;f=function(){return mi(b())}}var x=function(e){p=w.onStop=function(){v(e,gr)}};if(de())return x=I,r?a&&v(r,pr,[f(),y?[]:void 0,x]):f(),I;var w=new _i(ve,f,I,{lazy:!0});w.noRecurse=!r;var A=y?[]:xr;return w.run=function(){if(w.active||"pre"===u&&g&&g._isBeingDestroyed)if(r){var e=w.get();(s||_||(y?e.some((function(e,t){return V(e,A[t])})):V(e,A)))&&(p&&p(),v(r,pr,[e,A===xr?void 0:A,x]),A=e)}else w.get()},"sync"===u?w.update=w.run:"post"===u?(w.post=!0,w.update=function(){return dr(w)}):w.update=function(){if(g&&g===ve&&!g._isMounted){var e=g._preWatchers||(g._preWatchers=[]);e.indexOf(w)<0&&e.push(w)}else dr(w)},w.onTrack=h,w.onTrigger=d,r?a?w.run():A=w.get():"post"===u&&g?g.$once("hook:mounted",(function(){return w.get()})):w.get(),function(){w.teardown()}}var Tr=function(){function e(e){void 0===e&&(e=!1),this.active=!0,this.effects=[],this.cleanups=[],!e&&br&&(this.parent=br,this.index=(br.scopes||(br.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=br;try{return br=this,e()}finally{br=t}}else no("cannot run an inactive effect scope.")},e.prototype.on=function(){br=this},e.prototype.off=function(){br=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,n=void 0;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].teardown();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(this.parent&&!e){var r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.active=!1}},e}();function Mr(e){return new Tr(e)}function Er(e,t){void 0===t&&(t=br),t&&t.active&&t.effects.push(e)}function Sr(){return br}function Rr(e){br?br.cleanups.push(e):no("onScopeDispose() is called when there is no active effect scope to be associated with.")}function Lr(e,t){ve?Pr(ve)[e]=t:no("provide() can only be used inside setup().")}function Pr(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}function Cr(e,t,n){void 0===n&&(n=!1);var r=ve;if(r){var i=r.$parent&&r.$parent._provided;if(i&&e in i)return i[e];if(arguments.length>1)return n&&l(t)?t.call(r):t;no('injection "'.concat(String(e),'" not found.'))}else no("inject() can only be used inside setup() or functional components.")}function Fr(e,t,n){return ve||no("globally imported h() can only be invoked when there is an active component instance, e.g. synchronously in a component's render or setup function."),jt(ve,e,t,n,2,!0)}function Dr(e,t,n){ke();try{if(t)for(var r=t;r=r.$parent;){var i=r.$options.errorCaptured;if(i)for(var o=0;o<i.length;o++)try{if(!1===i[o].call(r,e,t,n))return}catch(e){Or(e,r,"errorCaptured hook")}}Or(e,t,n)}finally{Ie()}}function Ur(e,t,n,r,i){var o;try{(o=n?e.apply(t,n):e.call(t))&&!o._isVue&&g(o)&&!o._handled&&(o.catch((function(e){return Dr(e,r,i+" (Promise/async)")})),o._handled=!0)}catch(e){Dr(e,r,i)}return o}function Or(e,t,n){if(Q.errorHandler)try{return Q.errorHandler.call(null,e,t,n)}catch(t){t!==e&&kr(t,null,"config.errorHandler")}kr(e,t,n)}function kr(e,t,n){if(no("Error in ".concat(n,': "').concat(e.toString(),'"'),t),!te||void 0===r)throw e;r.error(e)}var Ir,Br=!1,Nr=[],Zr=!1;function jr(){Zr=!1;var e=Nr.slice(0);Nr.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&pe(Promise)){var zr=Promise.resolve();Ir=function(){zr.then(jr),ae&&setTimeout(I)},Br=!0}else if(re||"undefined"==typeof MutationObserver||!pe(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Ir="undefined"!=typeof setImmediate&&pe(setImmediate)?function(){setImmediate(jr)}:function(){setTimeout(jr,0)};else{var Gr=1,Vr=new MutationObserver(jr),Wr=document.createTextNode(String(Gr));Vr.observe(Wr,{characterData:!0}),Ir=function(){Gr=(Gr+1)%2,Wr.data=String(Gr)},Br=!0}function Hr(e,t){var n;if(Nr.push((function(){if(e)try{e.call(t)}catch(e){Dr(e,t,"nextTick")}else n&&n(t)})),Zr||(Zr=!0,Ir()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){n=e}))}function Xr(t){return no("useCssModule() is not supported in the global build."),e}function Qr(e){if(te){var t=ve;t?_r((function(){var n=t.$el,r=e(t,t._setupProxy);if(n&&1===n.nodeType){var i=n.style;for(var o in r)i.setProperty("--".concat(o),r[o])}})):no("useCssVars is called without current active component instance.")}}function Yr(e){l(e)&&(e={loader:e});var t=e.loader,n=e.loadingComponent,r=e.errorComponent,i=e.delay,o=void 0===i?200:i,a=e.timeout,s=e.suspensible,c=void 0!==s&&s,h=e.onError;c&&no("The suspensiblbe option for async components is not supported in Vue2. It is ignored.");var d=null,f=0,p=function(){return f++,d=null,m()},m=function(){var e;return d||(e=d=t().catch((function(e){if(e=e instanceof Error?e:new Error(String(e)),h)return new Promise((function(t,n){h(e,(function(){return t(p())}),(function(){return n(e)}),f+1)}));throw e})).then((function(t){if(e!==d&&d)return d;if(t||no("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),t&&!u(t)&&!l(t))throw new Error("Invalid async component load result: ".concat(t));return t})))};return function(){return{component:m(),delay:o,timeout:a,error:r,loading:n}}}function Kr(e){return function(t,n){if(void 0===n&&(n=ve),n)return Jr(n,e,t);no("".concat(qr(e)," is called when there is no active component instance to be ")+"associated with. Lifecycle injection APIs can only be used during execution of setup().")}}function qr(e){return"beforeDestroy"===e?e="beforeUnmount":"destroyed"===e&&(e="unmounted"),"on".concat(e[0].toUpperCase()+e.slice(1))}function Jr(e,t,n){var r=e.$options;r[t]=ho(r[t],n)}var $r=Kr("beforeMount"),ei=Kr("mounted"),ti=Kr("beforeUpdate"),ni=Kr("updated"),ri=Kr("beforeDestroy"),ii=Kr("destroyed"),oi=Kr("errorCaptured"),ai=Kr("activated"),si=Kr("deactivated"),ci=Kr("serverPrefetch"),li=Kr("renderTracked"),ui=Kr("renderTriggered"),hi="2.7.8";function di(e){return e}var fi=Object.freeze({__proto__:null,version:hi,defineComponent:di,ref:lt,shallowRef:ut,isRef:ct,toRef:_t,toRefs:vt,unref:ft,proxyRefs:pt,customRef:gt,triggerRef:dt,reactive:qe,isReactive:et,isReadonly:nt,isShallow:tt,isProxy:rt,shallowReactive:Je,markRaw:ot,toRaw:it,readonly:At,shallowReadonly:Et,computed:St,watch:wr,watchEffect:vr,watchPostEffect:_r,watchSyncEffect:yr,EffectScope:Tr,effectScope:Mr,onScopeDispose:Rr,getCurrentScope:Sr,provide:Lr,inject:Cr,h:Fr,getCurrentInstance:_e,useSlots:yn,useAttrs:bn,useListeners:xn,mergeDefaults:An,nextTick:Hr,set:Qe,del:Ye,useCssModule:Xr,useCssVars:Qr,defineAsyncComponent:Yr,onBeforeMount:$r,onMounted:ei,onBeforeUpdate:ti,onUpdated:ni,onBeforeUnmount:ri,onUnmounted:ii,onErrorCaptured:oi,onActivated:ai,onDeactivated:si,onServerPrefetch:ci,onRenderTracked:li,onRenderTriggered:ui}),pi=new me;function mi(e){return gi(e,pi),pi.clear(),e}function gi(e,n){var r,i,o=t(e);if(!(!o&&!u(e)||Object.isFrozen(e)||e instanceof xe)){if(e.__ob__){var a=e.__ob__.dep.id;if(n.has(a))return;n.add(a)}if(o)for(r=e.length;r--;)gi(e[r],n);else if(ct(e))gi(e.value,n);else for(r=(i=Object.keys(e)).length;r--;)gi(e[i[r]],n)}}var vi=0,_i=function(){function e(e,t,n,r,i){Er(this,br||(e?e._scope:void 0)),(this.vm=e)&&i&&(e._watcher=this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before,this.onTrack=r.onTrack,this.onTrigger=r.onTrigger):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++vi,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new me,this.newDepIds=new me,this.expression=t.toString(),l(t)?this.getter=t:(this.getter=$(t),this.getter||(this.getter=I,no('Failed watching path: "'.concat(t,'" ')+"Watcher only accepts simple dot-delimited paths. For full control, use a function instead.",e))),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;ke(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;Dr(e,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&mi(e),Ie(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():dr(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||u(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Ur(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&w(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}(),yi={enumerable:!0,configurable:!0,get:I,set:I};function bi(e,t,n){yi.get=function(){return this[t][n]},yi.set=function(e){this[t][n]=e},Object.defineProperty(e,n,yi)}function xi(e){var t=e.$options;if(t.props&&wi(e,t.props),fn(e),t.methods&&Pi(e,t.methods),t.data)Ai(e);else{var n=He(e._data={});n&&n.vmCount++}t.computed&&Ei(e,t.computed),t.watch&&t.watch!==le&&Ci(e,t.watch)}function wi(e,t){var n=e.$options.propsData||{},r=e._props=Je({}),i=e.$options._propKeys=[],o=!e.$parent;o||Ge(!1);var a=function(a){i.push(a);var s=To(a,t,n,e),c=P(a);(x(c)||Q.isReservedAttr(c))&&no('"'.concat(c,'" is a reserved attribute and cannot be used as component prop.'),e),Xe(r,a,s,(function(){o||Nn||no("Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's "+'value. Prop being mutated: "'.concat(a,'"'),e)})),a in e||bi(e,"_props",a)};for(var s in t)a(s);Ge(!0)}function Ai(e){var t=e.$options.data;f(t=e._data=l(t)?Ti(t,e):t||{})||(t={},no("data functions should return an object:\nhttps://vuejs.org/v2/guide/components.html#data-Must-Be-a-Function",e));for(var n=Object.keys(t),r=e.$options.props,i=e.$options.methods,o=n.length;o--;){var a=n[o];i&&T(i,a)&&no('Method "'.concat(a,'" has already been defined as a data property.'),e),r&&T(r,a)?no('The data property "'.concat(a,'" is already declared as a prop. ')+"Use prop default value instead.",e):K(a)||bi(e,"_data",a)}var s=He(t);s&&s.vmCount++}function Ti(e,t){ke();try{return e.call(t,t)}catch(e){return Dr(e,t,"data()"),{}}finally{Ie()}}var Mi={lazy:!0};function Ei(e,t){var n=e._computedWatchers=Object.create(null),r=de();for(var i in t){var o=t[i],a=l(o)?o:o.get;null==a&&no('Getter is missing for computed property "'.concat(i,'".'),e),r||(n[i]=new _i(e,a||I,I,Mi)),i in e?i in e.$data?no('The computed property "'.concat(i,'" is already defined in data.'),e):e.$options.props&&i in e.$options.props?no('The computed property "'.concat(i,'" is already defined as a prop.'),e):e.$options.methods&&i in e.$options.methods&&no('The computed property "'.concat(i,'" is already defined as a method.'),e):Si(e,i,o)}}function Si(e,t,n){var r=!de();l(n)?(yi.get=r?Ri(t):Li(n),yi.set=I):(yi.get=n.get?r&&!1!==n.cache?Ri(t):Li(n.get):I,yi.set=n.set||I),yi.set===I&&(yi.set=function(){no('Computed property "'.concat(t,'" was assigned to but it has no setter.'),this)}),Object.defineProperty(e,t,yi)}function Ri(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Ue.target&&(Ue.target.onTrack&&Ue.target.onTrack({effect:Ue.target,target:this,type:"get",key:e}),t.depend()),t.value}}function Li(e){return function(){return e.call(this,this)}}function Pi(e,t){var n=e.$options.props;for(var r in t)"function"!=typeof t[r]&&no('Method "'.concat(r,'" has type "').concat(typeof t[r],'" in the component definition. ')+"Did you reference the function correctly?",e),n&&T(n,r)&&no('Method "'.concat(r,'" has already been defined as a prop.'),e),r in e&&K(r)&&no('Method "'.concat(r,'" conflicts with an existing Vue instance method. ')+"Avoid defining component methods that start with _ or $."),e[r]="function"!=typeof t[r]?I:D(t[r],e)}function Ci(e,n){for(var r in n){var i=n[r];if(t(i))for(var o=0;o<i.length;o++)Fi(e,r,i[o]);else Fi(e,r,i)}}function Fi(e,t,n,r){return f(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=e[n]),e.$watch(t,n,r)}function Di(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};t.set=function(){no("Avoid replacing instance root $data. Use nested data properties instead.",this)},n.set=function(){no("$props is readonly.",this)},Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Qe,e.prototype.$delete=Ye,e.prototype.$watch=function(e,t,n){var r=this;if(f(t))return Fi(r,e,t,n);(n=n||{}).user=!0;var i=new _i(r,e,t,n);if(n.immediate){var o='callback for immediate watcher "'.concat(i.expression,'"');ke(),Ur(t,r,[i.value],r,o),Ie()}return function(){i.teardown()}}}function Ui(e){var t=e.$options.provide;if(t){var n=l(t)?t.call(e):t;if(!u(n))return;for(var r=Pr(e),i=ge?Reflect.ownKeys(n):Object.keys(n),o=0;o<i.length;o++){var a=i[o];Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))}}}function Oi(e){var t=ki(e.$options.inject,e);t&&(Ge(!1),Object.keys(t).forEach((function(n){Xe(e,n,t[n],(function(){no("Avoid mutating an injected value directly since the changes will be overwritten whenever the provided component re-renders. "+'injection being mutated: "'.concat(n,'"'),e)}))})),Ge(!0))}function ki(e,t){if(e){for(var n=Object.create(null),r=ge?Reflect.ownKeys(e):Object.keys(e),i=0;i<r.length;i++){var o=r[i];if("__ob__"!==o){var a=e[o].from;if(a in t._provided)n[o]=t._provided[a];else if("default"in e[o]){var s=e[o].default;n[o]=l(s)?s.call(t):s}else no('Injection "'.concat(o,'" not found'),t)}}return n}}var Ii=0;function Bi(e){e.prototype._init=function(e){var t,n,r=this;r._uid=Ii++,Q.performance&&yt&&(t="vue-perf-start:".concat(r._uid),n="vue-perf-end:".concat(r._uid),yt(t)),r._isVue=!0,r.__v_skip=!0,r._scope=new Tr(!0),e&&e._isComponent?Ni(r,e):r.$options=wo(Zi(r.constructor),e||{},r),be(r),r._self=r,jn(r),Fn(r),Tn(r),Qn(r,"beforeCreate",void 0,!1),Oi(r),xi(r),Ui(r),Qn(r,"created"),Q.performance&&yt&&(r._name=to(r,!1),yt(n),bt("vue ".concat(r._name," init"),t,n)),r.$options.el&&r.$mount(r.$options.el)}}function Ni(e,t){var n=e.$options=Object.create(e.constructor.options),r=t._parentVnode;n.parent=t.parent,n._parentVnode=r;var i=r.componentOptions;n.propsData=i.propsData,n._parentListeners=i.listeners,n._renderChildren=i.children,n._componentTag=i.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Zi(e){var t=e.options;if(e.super){var n=Zi(e.super);if(n!==e.superOptions){e.superOptions=n;var r=ji(e);r&&O(e.extendOptions,r),(t=e.options=wo(n,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function ji(e){var t,n=e.options,r=e.sealedOptions;for(var i in n)n[i]!==r[i]&&(t||(t={}),t[i]=n[i]);return t}function zi(n,r,i,o,s){var c,l=this,u=s.options;T(o,"_uid")?(c=Object.create(o))._original=o:(c=o,o=o._original);var h=a(u._compiled),d=!h;this.data=n,this.props=r,this.children=i,this.parent=o,this.listeners=n.on||e,this.injections=ki(u.inject,o),this.slots=function(){return l.$slots||un(o,n.scopedSlots,l.$slots=sn(i,o)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return un(o,n.scopedSlots,this.slots())}}),h&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=un(o,n.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,n,r,i){var a=jt(c,e,n,r,i,d);return a&&!t(a)&&(a.fnScopeId=u._scopeId,a.fnContext=o),a}:this._c=function(e,t,n,r){return jt(c,e,t,n,r,d)}}function Gi(n,r,i,a,s){var c=n.options,l={},u=c.props;if(o(u))for(var h in u)l[h]=To(h,u,r||e);else o(i.attrs)&&Wi(l,i.attrs),o(i.props)&&Wi(l,i.props);var d=new zi(i,l,s,a,n),f=c.render.call(null,d._c,d);if(f instanceof xe)return Vi(f,i,d.parent,c,d);if(t(f)){for(var p=kt(f)||[],m=new Array(p.length),g=0;g<p.length;g++)m[g]=Vi(p[g],i,d.parent,c,d);return m}}function Vi(e,t,n,r,i){var o=Te(e);return o.fnContext=n,o.fnOptions=r,(o.devtoolsMeta=o.devtoolsMeta||{}).renderContext=i,t.slot&&((o.data||(o.data={})).slot=t.slot),o}function Wi(e,t){for(var n in t)e[S(n)]=t[n]}function Hi(e){return e.name||e.__name||e._componentTag}an(zi.prototype);var Xi={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;Xi.prepatch(n,n)}else(e.componentInstance=Ki(e,Bn)).$mount(t?e.elm:void 0,t)},prepatch:function(e,t){var n=t.componentOptions;Vn(t.componentInstance=e.componentInstance,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Qn(n,"mounted")),e.data.keepAlive&&(t._isMounted?ur(n):Hn(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Xn(t,!0):t.$destroy())}},Qi=Object.keys(Xi);function Yi(e,t,n,r,s){if(!i(e)){var c=n.$options._base;if(u(e)&&(e=c.extend(e)),"function"==typeof e){var l;if(i(e.cid)&&void 0===(e=Pn(l=e,c)))return Ln(l,t,n,r,s);t=t||{},Zi(e),o(t.model)&&$i(e.options,t);var h=Dt(t,e,s);if(a(e.options.functional))return Gi(e,h,t,n,r);var d=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var f=t.slot;t={},f&&(t.slot=f)}qi(t);var p=Hi(e.options)||s;return new xe("vue-component-".concat(e.cid).concat(p?"-".concat(p):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:h,listeners:d,tag:s,children:r},l)}no("Invalid Component definition: ".concat(String(e)),n)}}function Ki(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},r=e.data.inlineTemplate;return o(r)&&(n.render=r.render,n.staticRenderFns=r.staticRenderFns),new e.componentOptions.Ctor(n)}function qi(e){for(var t=e.hook||(e.hook={}),n=0;n<Qi.length;n++){var r=Qi[n],i=t[r],o=Xi[r];i===o||i&&i._merged||(t[r]=i?Ji(o,i):o)}}function Ji(e,t){var n=function(n,r){e(n,r),t(n,r)};return n._merged=!0,n}function $i(e,n){var r=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(n.attrs||(n.attrs={}))[r]=n.model.value;var a=n.on||(n.on={}),s=a[i],c=n.model.callback;o(s)?(t(s)?-1===s.indexOf(c):s!==c)&&(a[i]=[c].concat(s)):a[i]=c}var eo,to,no=I,ro=I,io=void 0!==r,oo=/(?:^|[-_])(\w)/g,ao=function(e){return e.replace(oo,(function(e){return e.toUpperCase()})).replace(/[-_]/g,"")};no=function(e,t){void 0===t&&(t=ve);var n=t?eo(t):"";Q.warnHandler?Q.warnHandler.call(null,e,t,n):io&&!Q.silent&&r.error("[Vue warn]: ".concat(e).concat(n))},ro=function(e,t){io&&!Q.silent&&r.warn("[Vue tip]: ".concat(e)+(t?eo(t):""))},to=function(e,t){if(e.$root===e)return"<Root>";var n=l(e)&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e,r=Hi(n),i=n.__file;if(!r&&i){var o=i.match(/([^/\\]+)\.vue$/);r=o&&o[1]}return(r?"<".concat(ao(r),">"):"<Anonymous>")+(i&&!1!==t?" at ".concat(i):"")};var so=function(e,t){for(var n="";t;)t%2==1&&(n+=e),t>1&&(e+=e),t>>=1;return n};eo=function(e){if(e._isVue&&e.$parent){for(var n=[],r=0;e;){if(n.length>0){var i=n[n.length-1];if(i.constructor===e.constructor){r++,e=e.$parent;continue}r>0&&(n[n.length-1]=[i,r],r=0)}n.push(e),e=e.$parent}return"\n\nfound in\n\n"+n.map((function(e,n){return"".concat(0===n?"---\x3e ":so(" ",5+2*n)).concat(t(e)?"".concat(to(e[0]),"... (").concat(e[1]," recursive calls)"):to(e))})).join("\n")}return"\n\n(found in ".concat(to(e),")")};var co=Q.optionMergeStrategies;function lo(e,t){if(!t)return e;for(var n,r,i,o=ge?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=e[n],i=t[n],T(e,n)?r!==i&&f(r)&&f(i)&&lo(r,i):Qe(e,n,i));return e}function uo(e,t,n){return n?function(){var r=l(t)?t.call(n,n):t,i=l(e)?e.call(n,n):e;return r?lo(r,i):i}:t?e?function(){return lo(l(t)?t.call(this,this):t,l(e)?e.call(this,this):e)}:t:e}function ho(e,n){var r=n?e?e.concat(n):t(n)?n:[n]:e;return r?fo(r):r}function fo(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function po(e,t,n,r){var i=Object.create(e||null);return t?(xo(r,t,n),O(i,t)):i}co.el=co.propsData=function(e,t,n,r){return n||no('option "'.concat(r,'" can only be used during instance ')+"creation with the `new` keyword."),mo(e,t)},co.data=function(e,t,n){return n?uo(e,t,n):t&&"function"!=typeof t?(no('The "data" option should be a function that returns a per-instance value in component definitions.',n),e):uo(e,t)},X.forEach((function(e){co[e]=ho})),H.forEach((function(e){co[e+"s"]=po})),co.watch=function(e,n,r,i){if(e===le&&(e=void 0),n===le&&(n=void 0),!n)return Object.create(e||null);if(xo(i,n,r),!e)return n;var o={};for(var a in O(o,e),n){var s=o[a],c=n[a];s&&!t(s)&&(s=[s]),o[a]=s?s.concat(c):t(c)?c:[c]}return o},co.props=co.methods=co.inject=co.computed=function(e,t,n,r){if(t&&xo(r,t,n),!e)return t;var i=Object.create(null);return O(i,e),t&&O(i,t),i},co.provide=uo;var mo=function(e,t){return void 0===t?e:t};function go(e){for(var t in e.components)vo(t)}function vo(e){new RegExp("^[a-zA-Z][\\-\\.0-9_".concat(Y.source,"]*$")).test(e)||no('Invalid component name: "'+e+'". Component names should conform to valid custom element name in html5 specification.'),(b(e)||Q.isReservedTag(e))&&no("Do not use built-in or reserved HTML elements as component id: "+e)}function _o(e,n){var r=e.props;if(r){var i,o,a={};if(t(r))for(i=r.length;i--;)"string"==typeof(o=r[i])?a[S(o)]={type:null}:no("props must be strings when using array syntax.");else if(f(r))for(var s in r)o=r[s],a[S(s)]=f(o)?o:{type:o};else no('Invalid value for option "props": expected an Array or an Object, '+"but got ".concat(d(r),"."),n);e.props=a}}function yo(e,n){var r=e.inject;if(r){var i=e.inject={};if(t(r))for(var o=0;o<r.length;o++)i[r[o]]={from:r[o]};else if(f(r))for(var a in r){var s=r[a];i[a]=f(s)?O({from:a},s):{from:s}}else no('Invalid value for option "inject": expected an Array or an Object, '+"but got ".concat(d(r),"."),n)}}function bo(e){var t=e.directives;if(t)for(var n in t){var r=t[n];l(r)&&(t[n]={bind:r,update:r})}}function xo(e,t,n){f(t)||no('Invalid value for option "'.concat(e,'": expected an Object, ')+"but got ".concat(d(t),"."),n)}function wo(e,t,n){if(go(t),l(t)&&(t=t.options),_o(t,n),yo(t,n),bo(t),!t._base&&(t.extends&&(e=wo(e,t.extends,n)),t.mixins))for(var r=0,i=t.mixins.length;r<i;r++)e=wo(e,t.mixins[r],n);var o,a={};for(o in e)s(o);for(o in t)T(e,o)||s(o);function s(r){var i=co[r]||mo;a[r]=i(e[r],t[r],n,r)}return a}function Ao(e,t,n,r){if("string"==typeof n){var i=e[t];if(T(i,n))return i[n];var o=S(n);if(T(i,o))return i[o];var a=R(o);if(T(i,a))return i[a];var s=i[n]||i[o]||i[a];return r&&!s&&no("Failed to resolve "+t.slice(0,-1)+": "+n),s}}function To(e,t,n,r){var i=t[e],o=!T(n,e),a=n[e],s=Fo(Boolean,i.type);if(s>-1)if(o&&!T(i,"default"))a=!1;else if(""===a||a===P(e)){var c=Fo(String,i.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=Mo(r,i,e);var l=ze;Ge(!0),He(a),Ge(l)}return Eo(i,e,a,r,o),a}function Mo(e,t,n){if(T(t,"default")){var r=t.default;return u(r)&&no('Invalid default value for prop "'+n+'": Props with type Object/Array must use a factory function to return the default value.',e),e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:l(r)&&"Function"!==Po(t.type)?r.call(e):r}}function Eo(e,n,r,i,o){if(e.required&&o)no('Missing required prop: "'+n+'"',i);else if(null!=r||e.required){var a=e.type,s=!a||!0===a,c=[];if(a){t(a)||(a=[a]);for(var l=0;l<a.length&&!s;l++){var u=Ro(r,a[l],i);c.push(u.expectedType||""),s=u.valid}}var h=c.some((function(e){return e}));if(s||!h){var d=e.validator;d&&(d(r)||no('Invalid prop: custom validator check failed for prop "'+n+'".',i))}else no(Do(n,r,c),i)}}var So=/^(String|Number|Boolean|Function|Symbol|BigInt)$/;function Ro(e,n,r){var i,o=Po(n);if(So.test(o)){var a=typeof e;(i=a===o.toLowerCase())||"object"!==a||(i=e instanceof n)}else if("Object"===o)i=f(e);else if("Array"===o)i=t(e);else try{i=e instanceof n}catch(e){no('Invalid prop type: "'+String(n)+'" is not a constructor',r),i=!1}return{valid:i,expectedType:o}}var Lo=/^\s*function (\w+)/;function Po(e){var t=e&&e.toString().match(Lo);return t?t[1]:""}function Co(e,t){return Po(e)===Po(t)}function Fo(e,n){if(!t(n))return Co(n,e)?0:-1;for(var r=0,i=n.length;r<i;r++)if(Co(n[r],e))return r;return-1}function Do(e,t,n){var r='Invalid prop: type check failed for prop "'.concat(e,'".')+" Expected ".concat(n.map(R).join(", ")),i=n[0],o=d(t);return 1===n.length&&ko(i)&&ko(typeof t)&&!Io(i,o)&&(r+=" with value ".concat(Uo(t,i))),r+=", got ".concat(o," "),ko(o)&&(r+="with value ".concat(Uo(t,o),".")),r}function Uo(e,t){return"String"===t?'"'.concat(e,'"'):"".concat("Number"===t?Number(e):e)}var Oo=["string","number","boolean"];function ko(e){return Oo.some((function(t){return e.toLowerCase()===t}))}function Io(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some((function(e){return"boolean"===e.toLowerCase()}))}function Bo(e){this instanceof Bo||no("Vue is a constructor and should be called with the `new` keyword"),this._init(e)}function No(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=U(arguments,1);return n.unshift(this),l(e.install)?e.install.apply(e,n):l(e)&&e.apply(null,n),t.push(e),this}}function Zo(e){e.mixin=function(e){return this.options=wo(this.options,e),this}}function jo(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,r=n.cid,i=e._Ctor||(e._Ctor={});if(i[r])return i[r];var o=Hi(e)||Hi(n.options);o&&vo(o);var a=function(e){this._init(e)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=t++,a.options=wo(n.options,e),a.super=n,a.options.props&&zo(a),a.options.computed&&Go(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,H.forEach((function(e){a[e]=n[e]})),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=e,a.sealedOptions=O({},a.options),i[r]=a,a}}function zo(e){var t=e.options.props;for(var n in t)bi(e.prototype,"_props",n)}function Go(e){var t=e.options.computed;for(var n in t)Si(e.prototype,n,t[n])}function Vo(e){H.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&vo(e),"component"===t&&f(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&l(n)&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function Wo(e){return e&&(Hi(e.Ctor.options)||e.tag)}function Ho(e,n){return t(e)?e.indexOf(n)>-1:"string"==typeof e?e.split(",").indexOf(n)>-1:!!p(e)&&e.test(n)}function Xo(e,t){var n=e.cache,r=e.keys,i=e._vnode;for(var o in n){var a=n[o];if(a){var s=a.name;s&&!t(s)&&Qo(n,o,r,i)}}}function Qo(e,t,n,r){var i=e[t];!i||r&&i.tag===r.tag||i.componentInstance.$destroy(),e[t]=null,w(n,t)}Bi(Bo),Di(Bo),In(Bo),zn(Bo),Sn(Bo);var Yo=[String,RegExp,Array],Ko={name:"keep-alive",abstract:!0,props:{include:Yo,exclude:Yo,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,r=e.vnodeToCache,i=e.keyToCache;if(r){var o=r.tag,a=r.componentInstance,s=r.componentOptions;t[i]={name:Wo(s),tag:o,componentInstance:a},n.push(i),this.max&&n.length>parseInt(this.max)&&Qo(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Qo(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Xo(e,(function(e){return Ho(t,e)}))})),this.$watch("exclude",(function(t){Xo(e,(function(e){return!Ho(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Cn(e),n=t&&t.componentOptions;if(n){var r=Wo(n),i=this,o=i.include,a=i.exclude;if(o&&(!r||!Ho(o,r))||a&&r&&Ho(a,r))return t;var s=this,c=s.cache,l=s.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,w(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},qo={KeepAlive:Ko};function Jo(e){var t={get:function(){return Q},set:function(){no("Do not replace the Vue.config object, set individual fields instead.")}};Object.defineProperty(e,"config",t),e.util={warn:no,extend:O,mergeOptions:wo,defineReactive:Xe},e.set=Qe,e.delete=Ye,e.nextTick=Hr,e.observable=function(e){return He(e),e},e.options=Object.create(null),H.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,O(e.options.components,qo),No(e),Zo(e),jo(e),Vo(e)}Jo(Bo),Object.defineProperty(Bo.prototype,"$isServer",{get:de}),Object.defineProperty(Bo.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Bo,"FunctionalRenderContext",{value:zi}),Bo.version=hi;var $o=y("style,class"),ea=y("input,textarea,option,select,progress"),ta=function(e,t,n){return"value"===n&&ea(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},na=y("contenteditable,draggable,spellcheck"),ra=y("events,caret,typing,plaintext-only"),ia=function(e,t){return la(t)||"false"===t?"false":"contenteditable"===e&&ra(t)?t:"true"},oa=y("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),aa="http://www.w3.org/1999/xlink",sa=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},ca=function(e){return sa(e)?e.slice(6,e.length):""},la=function(e){return null==e||!1===e};function ua(e){for(var t=e.data,n=e,r=e;o(r.componentInstance);)(r=r.componentInstance._vnode)&&r.data&&(t=ha(r.data,t));for(;o(n=n.parent);)n&&n.data&&(t=ha(t,n.data));return da(t.staticClass,t.class)}function ha(e,t){return{staticClass:fa(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function da(e,t){return o(e)||o(t)?fa(e,pa(t)):""}function fa(e,t){return e?t?e+" "+t:e:t||""}function pa(e){return Array.isArray(e)?ma(e):u(e)?ga(e):"string"==typeof e?e:""}function ma(e){for(var t,n="",r=0,i=e.length;r<i;r++)o(t=pa(e[r]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function ga(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var va={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},_a=y("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ya=y("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),ba=function(e){return"pre"===e},xa=function(e){return _a(e)||ya(e)};function wa(e){return ya(e)?"svg":"math"===e?"math":void 0}var Aa=Object.create(null);function Ta(e){if(!te)return!0;if(xa(e))return!1;if(e=e.toLowerCase(),null!=Aa[e])return Aa[e];var t=document.createElement(e);return e.indexOf("-")>-1?Aa[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Aa[e]=/HTMLUnknownElement/.test(t.toString())}var Ma=y("text,number,password,search,email,tel,url");function Ea(e){if("string"==typeof e){var t=document.querySelector(e);return t||(no("Cannot find element: "+e),document.createElement("div"))}return e}function Sa(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function Ra(e,t){return document.createElementNS(va[e],t)}function La(e){return document.createTextNode(e)}function Pa(e){return document.createComment(e)}function Ca(e,t,n){e.insertBefore(t,n)}function Fa(e,t){e.removeChild(t)}function Da(e,t){e.appendChild(t)}function Ua(e){return e.parentNode}function Oa(e){return e.nextSibling}function ka(e){return e.tagName}function Ia(e,t){e.textContent=t}function Ba(e,t){e.setAttribute(t,"")}var Na=Object.freeze({__proto__:null,createElement:Sa,createElementNS:Ra,createTextNode:La,createComment:Pa,insertBefore:Ca,removeChild:Fa,appendChild:Da,parentNode:Ua,nextSibling:Oa,tagName:ka,setTextContent:Ia,setStyleScope:Ba}),Za={create:function(e,t){ja(t)},update:function(e,t){e.data.ref!==t.data.ref&&(ja(e,!0),ja(t))},destroy:function(e){ja(e,!0)}};function ja(e,n){var r=e.data.ref;if(o(r)){var i=e.context,a=e.componentInstance||e.elm,s=n?null:a,c=n?void 0:a;if(l(r))Ur(r,i,[s],i,"template ref function");else{var u=e.data.refInFor,h="string"==typeof r||"number"==typeof r,d=ct(r),f=i.$refs;if(h||d)if(u){var p=h?f[r]:r.value;n?t(p)&&w(p,a):t(p)?p.includes(a)||p.push(a):h?(f[r]=[a],za(i,r,f[r])):r.value=[a]}else if(h){if(n&&f[r]!==a)return;f[r]=c,za(i,r,s)}else if(d){if(n&&r.value!==a)return;r.value=s}else no("Invalid template ref type: ".concat(typeof r))}}}function za(e,t,n){var r=e._setupState;r&&T(r,t)&&(ct(r[t])?r[t].value=n:r[t]=n)}var Ga=new xe("",{},[]),Va=["create","activate","update","remove","destroy"];function Wa(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&Ha(e,t)||a(e.isAsyncPlaceholder)&&i(t.asyncFactory.error))}function Ha(e,t){if("input"!==e.tag)return!0;var n,r=o(n=e.data)&&o(n=n.attrs)&&n.type,i=o(n=t.data)&&o(n=n.attrs)&&n.type;return r===i||Ma(r)&&Ma(i)}function Xa(e,t,n){var r,i,a={};for(r=t;r<=n;++r)o(i=e[r].key)&&(a[i]=r);return a}function Qa(e){var n,s,l={},u=e.modules,h=e.nodeOps;for(n=0;n<Va.length;++n)for(l[Va[n]]=[],s=0;s<u.length;++s)o(u[s][Va[n]])&&l[Va[n]].push(u[s][Va[n]]);function d(e){return new xe(h.tagName(e).toLowerCase(),{},[],void 0,e)}function f(e,t){function n(){0==--n.listeners&&m(e)}return n.listeners=t,n}function m(e){var t=h.parentNode(e);o(t)&&h.removeChild(t,e)}function g(e,t){return!t&&!e.ns&&!(Q.ignoredElements.length&&Q.ignoredElements.some((function(t){return p(t)?t.test(e.tag):t===e.tag})))&&Q.isUnknownElement(e.tag)}var v=0;function _(e,t,n,r,i,s,c){if(o(e.elm)&&o(s)&&(e=s[c]=Te(e)),e.isRootInsert=!i,!b(e,t,n,r)){var l=e.data,u=e.children,d=e.tag;o(d)?(l&&l.pre&&v++,g(e,v)&&no("Unknown custom element: <"+d+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.',e.context),e.elm=e.ns?h.createElementNS(e.ns,d):h.createElement(d,e),S(e),T(e,u,t),o(l)&&E(e,t),A(n,e.elm,r),l&&l.pre&&v--):a(e.isComment)?(e.elm=h.createComment(e.text),A(n,e.elm,r)):(e.elm=h.createTextNode(e.text),A(n,e.elm,r))}}function b(e,t,n,r){var i=e.data;if(o(i)){var s=o(e.componentInstance)&&i.keepAlive;if(o(i=i.hook)&&o(i=i.init)&&i(e,!1),o(e.componentInstance))return x(e,t),A(n,e.elm,r),a(s)&&w(e,t,n,r),!0}}function x(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,M(e)?(E(e,t),S(e)):(ja(e),t.push(e))}function w(e,t,n,r){for(var i,a=e;a.componentInstance;)if(o(i=(a=a.componentInstance._vnode).data)&&o(i=i.transition)){for(i=0;i<l.activate.length;++i)l.activate[i](Ga,a);t.push(a);break}A(n,e.elm,r)}function A(e,t,n){o(e)&&(o(n)?h.parentNode(n)===e&&h.insertBefore(e,t,n):h.appendChild(e,t))}function T(e,n,r){if(t(n)){D(n);for(var i=0;i<n.length;++i)_(n[i],r,e.elm,null,!0,n,i)}else c(e.text)&&h.appendChild(e.elm,h.createTextNode(String(e.text)))}function M(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return o(e.tag)}function E(e,t){for(var r=0;r<l.create.length;++r)l.create[r](Ga,e);o(n=e.data.hook)&&(o(n.create)&&n.create(Ga,e),o(n.insert)&&t.push(e))}function S(e){var t;if(o(t=e.fnScopeId))h.setStyleScope(e.elm,t);else for(var n=e;n;)o(t=n.context)&&o(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t),n=n.parent;o(t=Bn)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t)}function R(e,t,n,r,i,o){for(;r<=i;++r)_(n[r],o,e,t,!1,n,r)}function L(e){var t,n,r=e.data;if(o(r))for(o(t=r.hook)&&o(t=t.destroy)&&t(e),t=0;t<l.destroy.length;++t)l.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)L(e.children[n])}function P(e,t,n){for(;t<=n;++t){var r=e[t];o(r)&&(o(r.tag)?(C(r),L(r)):m(r.elm))}}function C(e,t){if(o(t)||o(e.data)){var n,r=l.remove.length+1;for(o(t)?t.listeners+=r:t=f(e.elm,r),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&C(n,t),n=0;n<l.remove.length;++n)l.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else m(e.elm)}function F(e,t,n,r,a){var s,c,l,u=0,d=0,f=t.length-1,p=t[0],m=t[f],g=n.length-1,v=n[0],y=n[g],b=!a;for(D(n);u<=f&&d<=g;)i(p)?p=t[++u]:i(m)?m=t[--f]:Wa(p,v)?(O(p,v,r,n,d),p=t[++u],v=n[++d]):Wa(m,y)?(O(m,y,r,n,g),m=t[--f],y=n[--g]):Wa(p,y)?(O(p,y,r,n,g),b&&h.insertBefore(e,p.elm,h.nextSibling(m.elm)),p=t[++u],y=n[--g]):Wa(m,v)?(O(m,v,r,n,d),b&&h.insertBefore(e,m.elm,p.elm),m=t[--f],v=n[++d]):(i(s)&&(s=Xa(t,u,f)),i(c=o(v.key)?s[v.key]:U(v,t,u,f))?_(v,r,e,p.elm,!1,n,d):Wa(l=t[c],v)?(O(l,v,r,n,d),t[c]=void 0,b&&h.insertBefore(e,l.elm,p.elm)):_(v,r,e,p.elm,!1,n,d),v=n[++d]);u>f?R(e,i(n[g+1])?null:n[g+1].elm,n,d,g,r):d>g&&P(t,u,f)}function D(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=r.key;o(i)&&(t[i]?no("Duplicate keys detected: '".concat(i,"'. This may cause an update error."),r.context):t[i]=!0)}}function U(e,t,n,r){for(var i=n;i<r;i++){var a=t[i];if(o(a)&&Wa(e,a))return i}}function O(e,t,n,r,s,c){if(e!==t){o(t.elm)&&o(r)&&(t=r[s]=Te(t));var u=t.elm=e.elm;if(a(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?N(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var d,f=t.data;o(f)&&o(d=f.hook)&&o(d=d.prepatch)&&d(e,t);var p=e.children,m=t.children;if(o(f)&&M(t)){for(d=0;d<l.update.length;++d)l.update[d](e,t);o(d=f.hook)&&o(d=d.update)&&d(e,t)}i(t.text)?o(p)&&o(m)?p!==m&&F(u,p,m,n,c):o(m)?(D(m),o(e.text)&&h.setTextContent(u,""),R(u,null,m,0,m.length-1,n)):o(p)?P(p,0,p.length-1):o(e.text)&&h.setTextContent(u,""):e.text!==t.text&&h.setTextContent(u,t.text),o(f)&&o(d=f.hook)&&o(d=d.postpatch)&&d(e,t)}}}function k(e,t,n){if(a(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var r=0;r<t.length;++r)t[r].data.hook.insert(t[r])}var I=!1,B=y("attrs,class,staticClass,staticStyle,key");function N(e,t,n,i){var s,c=t.tag,l=t.data,u=t.children;if(i=i||l&&l.pre,t.elm=e,a(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(!Z(e,t,i))return!1;if(o(l)&&(o(s=l.hook)&&o(s=s.init)&&s(t,!0),o(s=t.componentInstance)))return x(t,n),!0;if(o(c)){if(o(u))if(e.hasChildNodes())if(o(s=l)&&o(s=s.domProps)&&o(s=s.innerHTML)){if(s!==e.innerHTML)return void 0===r||I||(I=!0,r.warn("Parent: ",e),r.warn("server innerHTML: ",s),r.warn("client innerHTML: ",e.innerHTML)),!1}else{for(var h=!0,d=e.firstChild,f=0;f<u.length;f++){if(!d||!N(d,u[f],n,i)){h=!1;break}d=d.nextSibling}if(!h||d)return void 0===r||I||(I=!0,r.warn("Parent: ",e),r.warn("Mismatching childNodes vs. VNodes: ",e.childNodes,u)),!1}else T(t,u,n);if(o(l)){var p=!1;for(var m in l)if(!B(m)){p=!0,E(t,n);break}!p&&l.class&&mi(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}function Z(e,t,n){return o(t.tag)?0===t.tag.indexOf("vue-component")||!g(t,n)&&t.tag.toLowerCase()===(e.tagName&&e.tagName.toLowerCase()):e.nodeType===(t.isComment?8:3)}return function(e,t,n,r){if(!i(t)){var s=!1,c=[];if(i(e))s=!0,_(t,c);else{var u=o(e.nodeType);if(!u&&Wa(e,t))O(e,t,c,null,null,r);else{if(u){if(1===e.nodeType&&e.hasAttribute(W)&&(e.removeAttribute(W),n=!0),a(n)){if(N(e,t,c))return k(t,c,!0),e;no("The client-side rendered virtual DOM tree is not matching server-rendered content. This is likely caused by incorrect HTML markup, for example nesting block-level elements inside <p>, or missing <tbody>. Bailing hydration and performing full client-side render.")}e=d(e)}var f=e.elm,p=h.parentNode(f);if(_(t,c,f._leaveCb?null:p,h.nextSibling(f)),o(t.parent))for(var m=t.parent,g=M(t);m;){for(var v=0;v<l.destroy.length;++v)l.destroy[v](m);if(m.elm=t.elm,g){for(var y=0;y<l.create.length;++y)l.create[y](Ga,m);var b=m.data.hook.insert;if(b.merged)for(var x=1;x<b.fns.length;x++)b.fns[x]()}else ja(m);m=m.parent}o(p)?P([e],0,0):o(e.tag)&&L(e)}}return k(t,c,s),t.elm}o(e)&&L(e)}}var Ya={create:Ka,update:Ka,destroy:function(e){Ka(e,Ga)}};function Ka(e,t){(e.data.directives||t.data.directives)&&qa(e,t)}function qa(e,t){var n,r,i,o=e===Ga,a=t===Ga,s=$a(e.data.directives,e.context),c=$a(t.data.directives,t.context),l=[],u=[];for(n in c)r=s[n],i=c[n],r?(i.oldValue=r.value,i.oldArg=r.arg,ts(i,"update",t,e),i.def&&i.def.componentUpdated&&u.push(i)):(ts(i,"bind",t,e),i.def&&i.def.inserted&&l.push(i));if(l.length){var h=function(){for(var n=0;n<l.length;n++)ts(l[n],"inserted",t,e)};o?Ft(t,"insert",h):h()}if(u.length&&Ft(t,"postpatch",(function(){for(var n=0;n<u.length;n++)ts(u[n],"componentUpdated",t,e)})),!o)for(n in s)c[n]||ts(s[n],"unbind",e,e,a)}var Ja=Object.create(null);function $a(e,t){var n,r,i=Object.create(null);if(!e)return i;for(n=0;n<e.length;n++)(r=e[n]).modifiers||(r.modifiers=Ja),i[es(r)]=r,t._setupState&&t._setupState.__sfc&&(r.def=r.def||Ao(t,"_setupState","v-"+r.name)),r.def=r.def||Ao(t.$options,"directives",r.name,!0);return i}function es(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function ts(e,t,n,r,i){var o=e.def&&e.def[t];if(o)try{o(n.elm,e,n,r,i)}catch(r){Dr(r,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var ns=[Za,Ya];function rs(e,t){var n=t.componentOptions;if(!(o(n)&&!1===n.Ctor.options.inheritAttrs||i(e.data.attrs)&&i(t.data.attrs))){var r,s,c=t.elm,l=e.data.attrs||{},u=t.data.attrs||{};for(r in(o(u.__ob__)||a(u._v_attr_proxy))&&(u=t.data.attrs=O({},u)),u)s=u[r],l[r]!==s&&is(c,r,s,t.data.pre);for(r in(re||oe)&&u.value!==l.value&&is(c,"value",u.value),l)i(u[r])&&(sa(r)?c.removeAttributeNS(aa,ca(r)):na(r)||c.removeAttribute(r))}}function is(e,t,n,r){r||e.tagName.indexOf("-")>-1?os(e,t,n):oa(t)?la(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):na(t)?e.setAttribute(t,ia(t,n)):sa(t)?la(n)?e.removeAttributeNS(aa,ca(t)):e.setAttributeNS(aa,t,n):os(e,t,n)}function os(e,t,n){if(la(n))e.removeAttribute(t);else{if(re&&!ie&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var r=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",r)};e.addEventListener("input",r),e.__ieph=!0}e.setAttribute(t,n)}}var as={create:rs,update:rs};function ss(e,t){var n=t.elm,r=t.data,a=e.data;if(!(i(r.staticClass)&&i(r.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=ua(t),c=n._transitionClasses;o(c)&&(s=fa(s,pa(c))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var cs,ls,us,hs,ds,fs,ps,ms={create:ss,update:ss},gs=/[\w).+\-_$\]]/;function vs(e){var t,n,r,i,o,a=!1,s=!1,c=!1,l=!1,u=0,h=0,d=0,f=0;for(r=0;r<e.length;r++)if(n=t,t=e.charCodeAt(r),a)39===t&&92!==n&&(a=!1);else if(s)34===t&&92!==n&&(s=!1);else if(c)96===t&&92!==n&&(c=!1);else if(l)47===t&&92!==n&&(l=!1);else if(124!==t||124===e.charCodeAt(r+1)||124===e.charCodeAt(r-1)||u||h||d){switch(t){case 34:s=!0;break;case 39:a=!0;break;case 96:c=!0;break;case 40:d++;break;case 41:d--;break;case 91:h++;break;case 93:h--;break;case 123:u++;break;case 125:u--}if(47===t){for(var p=r-1,m=void 0;p>=0&&" "===(m=e.charAt(p));p--);m&&gs.test(m)||(l=!0)}}else void 0===i?(f=r+1,i=e.slice(0,r).trim()):g();function g(){(o||(o=[])).push(e.slice(f,r).trim()),f=r+1}if(void 0===i?i=e.slice(0,r).trim():0!==f&&g(),o)for(r=0;r<o.length;r++)i=_s(i,o[r]);return i}function _s(e,t){var n=t.indexOf("(");if(n<0)return'_f("'.concat(t,'")(').concat(e,")");var r=t.slice(0,n),i=t.slice(n+1);return'_f("'.concat(r,'")(').concat(e).concat(")"!==i?","+i:i)}function ys(e,t){r.error("[Vue compiler]: ".concat(e))}function bs(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function xs(e,t,n,r,i){(e.props||(e.props=[])).push(Cs({name:t,value:n,dynamic:i},r)),e.plain=!1}function ws(e,t,n,r,i){(i?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Cs({name:t,value:n,dynamic:i},r)),e.plain=!1}function As(e,t,n,r){e.attrsMap[t]=n,e.attrsList.push(Cs({name:t,value:n},r))}function Ts(e,t,n,r,i,o,a,s){(e.directives||(e.directives=[])).push(Cs({name:t,rawName:n,value:r,arg:i,isDynamicArg:o,modifiers:a},s)),e.plain=!1}function Ms(e,t,n){return n?"_p(".concat(t,',"').concat(e,'")'):e+t}function Es(t,n,r,i,o,a,s,c){var l;i=i||e,a&&i.prevent&&i.passive&&a("passive and prevent can't be used together. Passive handler can't prevent default event.",s),i.right?c?n="(".concat(n,")==='click'?'contextmenu':(").concat(n,")"):"click"===n&&(n="contextmenu",delete i.right):i.middle&&(c?n="(".concat(n,")==='click'?'mouseup':(").concat(n,")"):"click"===n&&(n="mouseup")),i.capture&&(delete i.capture,n=Ms("!",n,c)),i.once&&(delete i.once,n=Ms("~",n,c)),i.passive&&(delete i.passive,n=Ms("&",n,c)),i.native?(delete i.native,l=t.nativeEvents||(t.nativeEvents={})):l=t.events||(t.events={});var u=Cs({value:r.trim(),dynamic:c},s);i!==e&&(u.modifiers=i);var h=l[n];Array.isArray(h)?o?h.unshift(u):h.push(u):l[n]=h?o?[u,h]:[h,u]:u,t.plain=!1}function Ss(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}function Rs(e,t,n){var r=Ls(e,":"+t)||Ls(e,"v-bind:"+t);if(null!=r)return vs(r);if(!1!==n){var i=Ls(e,t);if(null!=i)return JSON.stringify(i)}}function Ls(e,t,n){var r;if(null!=(r=e.attrsMap[t]))for(var i=e.attrsList,o=0,a=i.length;o<a;o++)if(i[o].name===t){i.splice(o,1);break}return n&&delete e.attrsMap[t],r}function Ps(e,t){for(var n=e.attrsList,r=0,i=n.length;r<i;r++){var o=n[r];if(t.test(o.name))return n.splice(r,1),o}}function Cs(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Fs(e,t,n){var r=n||{},i=r.number,o="$$v",a=o;r.trim&&(a="(typeof ".concat(o," === 'string'")+"? ".concat(o,".trim()")+": ".concat(o,")")),i&&(a="_n(".concat(a,")"));var s=Ds(t,a);e.model={value:"(".concat(t,")"),expression:JSON.stringify(t),callback:"function (".concat(o,") {").concat(s,"}")}}function Ds(e,t){var n=Us(e);return null===n.key?"".concat(e,"=").concat(t):"$set(".concat(n.exp,", ").concat(n.key,", ").concat(t,")")}function Us(e){if(e=e.trim(),cs=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<cs-1)return(hs=e.lastIndexOf("."))>-1?{exp:e.slice(0,hs),key:'"'+e.slice(hs+1)+'"'}:{exp:e,key:null};for(ls=e,hs=ds=fs=0;!ks();)Is(us=Os())?Ns(us):91===us&&Bs(us);return{exp:e.slice(0,ds),key:e.slice(ds+1,fs)}}function Os(){return ls.charCodeAt(++hs)}function ks(){return hs>=cs}function Is(e){return 34===e||39===e}function Bs(e){var t=1;for(ds=hs;!ks();)if(Is(e=Os()))Ns(e);else if(91===e&&t++,93===e&&t--,0===t){fs=hs;break}}function Ns(e){for(var t=e;!ks()&&(e=Os())!==t;);}var Zs,js="__r",zs="__c";function Gs(e,t,n){ps=n;var r=t.value,i=t.modifiers,o=e.tag,a=e.attrsMap.type;if("input"===o&&"file"===a&&ps("<".concat(e.tag,' v-model="').concat(r,'" type="file">:\n')+"File inputs are read only. Use a v-on:change listener instead.",e.rawAttrsMap["v-model"]),e.component)return Fs(e,r,i),!1;if("select"===o)Hs(e,r,i);else if("input"===o&&"checkbox"===a)Vs(e,r,i);else if("input"===o&&"radio"===a)Ws(e,r,i);else if("input"===o||"textarea"===o)Xs(e,r,i);else{if(!Q.isReservedTag(o))return Fs(e,r,i),!1;ps("<".concat(e.tag,' v-model="').concat(r,'">: ')+"v-model is not supported on this element type. If you are working with contenteditable, it's recommended to wrap a library dedicated for that purpose inside a custom component.",e.rawAttrsMap["v-model"])}return!0}function Vs(e,t,n){var r=n&&n.number,i=Rs(e,"value")||"null",o=Rs(e,"true-value")||"true",a=Rs(e,"false-value")||"false";xs(e,"checked","Array.isArray(".concat(t,")")+"?_i(".concat(t,",").concat(i,")>-1")+("true"===o?":(".concat(t,")"):":_q(".concat(t,",").concat(o,")"))),Es(e,"change","var $$a=".concat(t,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(o,"):(").concat(a,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(r?"_n("+i+")":i,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Ds(t,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Ds(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Ds(t,"$$c"),"}"),null,!0)}function Ws(e,t,n){var r=n&&n.number,i=Rs(e,"value")||"null";i=r?"_n(".concat(i,")"):i,xs(e,"checked","_q(".concat(t,",").concat(i,")")),Es(e,"change",Ds(t,i),null,!0)}function Hs(e,t,n){var r=n&&n.number,i='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(r?"_n(val)":"val","})"),o="$event.target.multiple ? $$selectedVal : $$selectedVal[0]",a="var $$selectedVal = ".concat(i,";");Es(e,"change",a="".concat(a," ").concat(Ds(t,o)),null,!0)}function Xs(e,t,n){var r=e.attrsMap.type,i=e.attrsMap["v-bind:value"]||e.attrsMap[":value"],o=e.attrsMap["v-bind:type"]||e.attrsMap[":type"];if(i&&!o){var a=e.attrsMap["v-bind:value"]?"v-bind:value":":value";ps("".concat(a,'="').concat(i,'" conflicts with v-model on the same element ')+"because the latter already expands to a value binding internally",e.rawAttrsMap[a])}var s=n||{},c=s.lazy,l=s.number,u=s.trim,h=!c&&"range"!==r,d=c?"change":"range"===r?js:"input",f="$event.target.value";u&&(f="$event.target.value.trim()"),l&&(f="_n(".concat(f,")"));var p=Ds(t,f);h&&(p="if($event.target.composing)return;".concat(p)),xs(e,"value","(".concat(t,")")),Es(e,d,p,null,!0),(u||l)&&Es(e,"blur","$forceUpdate()")}function Qs(e){if(o(e[js])){var t=re?"change":"input";e[t]=[].concat(e[js],e[t]||[]),delete e[js]}o(e[zs])&&(e.change=[].concat(e[zs],e.change||[]),delete e[zs])}function Ys(e,t,n){var r=Zs;return function i(){null!==t.apply(null,arguments)&&Js(e,i,n,r)}}var Ks=Br&&!(ce&&Number(ce[1])<=53);function qs(e,t,n,r){if(Ks){var i=ir,o=t;t=o._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=i||e.timeStamp<=0||e.target.ownerDocument!==document)return o.apply(this,arguments)}}Zs.addEventListener(e,t,ue?{capture:n,passive:r}:n)}function Js(e,t,n,r){(r||Zs).removeEventListener(e,t._wrapper||t,n)}function $s(e,t){if(!i(e.data.on)||!i(t.data.on)){var n=t.data.on||{},r=e.data.on||{};Zs=t.elm||e.elm,Qs(n),Ct(n,r,qs,Js,Ys,t.context),Zs=void 0}}var ec,tc={create:$s,update:$s,destroy:function(e){return $s(e,Ga)}};function nc(e,t){if(!i(e.data.domProps)||!i(t.data.domProps)){var n,r,s=t.elm,c=e.data.domProps||{},l=t.data.domProps||{};for(n in(o(l.__ob__)||a(l._v_attr_proxy))&&(l=t.data.domProps=O({},l)),c)n in l||(s[n]="");for(n in l){if(r=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),r===c[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=r;var u=i(r)?"":String(r);rc(s,u)&&(s.value=u)}else if("innerHTML"===n&&ya(s.tagName)&&i(s.innerHTML)){(ec=ec||document.createElement("div")).innerHTML="<svg>".concat(r,"</svg>");for(var h=ec.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;h.firstChild;)s.appendChild(h.firstChild)}else if(r!==c[n])try{s[n]=r}catch(e){}}}}function rc(e,t){return!e.composing&&("OPTION"===e.tagName||ic(e,t)||oc(e,t))}function ic(e,t){var n=!0;try{n=document.activeElement!==e}catch(e){}return n&&e.value!==t}function oc(e,t){var n=e.value,r=e._vModifiers;if(o(r)){if(r.number)return _(n)!==_(t);if(r.trim)return n.trim()!==t.trim()}return n!==t}var ac={create:nc,update:nc},sc=M((function(e){var t={},n=/;(?![^(]*\))/g,r=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(r);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function cc(e){var t=lc(e.style);return e.staticStyle?O(e.staticStyle,t):t}function lc(e){return Array.isArray(e)?k(e):"string"==typeof e?sc(e):e}function uc(e,t){var n,r={};if(t)for(var i=e;i.componentInstance;)(i=i.componentInstance._vnode)&&i.data&&(n=cc(i.data))&&O(r,n);(n=cc(e.data))&&O(r,n);for(var o=e;o=o.parent;)o.data&&(n=cc(o.data))&&O(r,n);return r}var hc,dc=/^--/,fc=/\s*!important$/,pc=function(e,t,n){if(dc.test(t))e.style.setProperty(t,n);else if(fc.test(n))e.style.setProperty(P(t),n.replace(fc,""),"important");else{var r=gc(t);if(Array.isArray(n))for(var i=0,o=n.length;i<o;i++)e.style[r]=n[i];else e.style[r]=n}},mc=["Webkit","Moz","ms"],gc=M((function(e){if(hc=hc||document.createElement("div").style,"filter"!==(e=S(e))&&e in hc)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<mc.length;n++){var r=mc[n]+t;if(r in hc)return r}}));function vc(e,t){var n=t.data,r=e.data;if(!(i(n.staticStyle)&&i(n.style)&&i(r.staticStyle)&&i(r.style))){var a,s,c=t.elm,l=r.staticStyle,u=r.normalizedStyle||r.style||{},h=l||u,d=lc(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?O({},d):d;var f=uc(t,!0);for(s in h)i(f[s])&&pc(c,s,"");for(s in f)(a=f[s])!==h[s]&&pc(c,s,null==a?"":a)}}var _c={create:vc,update:vc},yc=/\s+/;function bc(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(yc).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function xc(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(yc).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" ".concat(e.getAttribute("class")||""," "),r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}function wc(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&O(t,Ac(e.name||"v")),O(t,e),t}return"string"==typeof e?Ac(e):void 0}}var Ac=M((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),Tc=te&&!ie,Mc="transition",Ec="animation",Sc="transition",Rc="transitionend",Lc="animation",Pc="animationend";Tc&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Sc="WebkitTransition",Rc="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Lc="WebkitAnimation",Pc="webkitAnimationEnd"));var Cc=te?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function Fc(e){Cc((function(){Cc(e)}))}function Dc(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),bc(e,t))}function Uc(e,t){e._transitionClasses&&w(e._transitionClasses,t),xc(e,t)}function Oc(e,t,n){var r=Ic(e,t),i=r.type,o=r.timeout,a=r.propCount;if(!i)return n();var s=i===Mc?Rc:Pc,c=0,l=function(){e.removeEventListener(s,u),n()},u=function(t){t.target===e&&++c>=a&&l()};setTimeout((function(){c<a&&l()}),o+1),e.addEventListener(s,u)}var kc=/\b(transform|all)(,|$)/;function Ic(e,t){var n,r=window.getComputedStyle(e),i=(r[Sc+"Delay"]||"").split(", "),o=(r[Sc+"Duration"]||"").split(", "),a=Bc(i,o),s=(r[Lc+"Delay"]||"").split(", "),c=(r[Lc+"Duration"]||"").split(", "),l=Bc(s,c),u=0,h=0;return t===Mc?a>0&&(n=Mc,u=a,h=o.length):t===Ec?l>0&&(n=Ec,u=l,h=c.length):h=(n=(u=Math.max(a,l))>0?a>l?Mc:Ec:null)?n===Mc?o.length:c.length:0,{type:n,timeout:u,propCount:h,hasTransform:n===Mc&&kc.test(r[Sc+"Property"])}}function Bc(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return Nc(t)+Nc(e[n])})))}function Nc(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Zc(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var r=wc(e.data.transition);if(!i(r)&&!o(n._enterCb)&&1===n.nodeType){for(var a=r.css,s=r.type,c=r.enterClass,h=r.enterToClass,d=r.enterActiveClass,f=r.appearClass,p=r.appearToClass,m=r.appearActiveClass,g=r.beforeEnter,v=r.enter,y=r.afterEnter,b=r.enterCancelled,x=r.beforeAppear,w=r.appear,A=r.afterAppear,T=r.appearCancelled,M=r.duration,E=Bn,S=Bn.$vnode;S&&S.parent;)E=S.context,S=S.parent;var R=!E._isMounted||!e.isRootInsert;if(!R||w||""===w){var L=R&&f?f:c,P=R&&m?m:d,C=R&&p?p:h,F=R&&x||g,D=R&&l(w)?w:v,U=R&&A||y,O=R&&T||b,k=_(u(M)?M.enter:M);null!=k&&zc(k,"enter",e);var I=!1!==a&&!ie,B=Vc(D),N=n._enterCb=G((function(){I&&(Uc(n,C),Uc(n,P)),N.cancelled?(I&&Uc(n,L),O&&O(n)):U&&U(n),n._enterCb=null}));e.data.show||Ft(e,"insert",(function(){var t=n.parentNode,r=t&&t._pending&&t._pending[e.key];r&&r.tag===e.tag&&r.elm._leaveCb&&r.elm._leaveCb(),D&&D(n,N)})),F&&F(n),I&&(Dc(n,L),Dc(n,P),Fc((function(){Uc(n,L),N.cancelled||(Dc(n,C),B||(Gc(k)?setTimeout(N,k):Oc(n,s,N)))}))),e.data.show&&(t&&t(),D&&D(n,N)),I||B||N()}}}function jc(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var r=wc(e.data.transition);if(i(r)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var a=r.css,s=r.type,c=r.leaveClass,l=r.leaveToClass,h=r.leaveActiveClass,d=r.beforeLeave,f=r.leave,p=r.afterLeave,m=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==a&&!ie,b=Vc(f),x=_(u(v)?v.leave:v);o(x)&&zc(x,"leave",e);var w=n._leaveCb=G((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),y&&(Uc(n,l),Uc(n,h)),w.cancelled?(y&&Uc(n,c),m&&m(n)):(t(),p&&p(n)),n._leaveCb=null}));g?g(A):A()}function A(){w.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),y&&(Dc(n,c),Dc(n,h),Fc((function(){Uc(n,c),w.cancelled||(Dc(n,l),b||(Gc(x)?setTimeout(w,x):Oc(n,s,w)))}))),f&&f(n,w),y||b||w())}}function zc(e,t,n){"number"!=typeof e?no("<transition> explicit ".concat(t," duration is not a valid number - ")+"got ".concat(JSON.stringify(e),"."),n.context):isNaN(e)&&no("<transition> explicit ".concat(t," duration is NaN - ")+"the duration expression might be incorrect.",n.context)}function Gc(e){return"number"==typeof e&&!isNaN(e)}function Vc(e){if(i(e))return!1;var t=e.fns;return o(t)?Vc(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Wc(e,t){!0!==t.data.show&&Zc(t)}var Hc=[as,ms,tc,ac,_c,te?{create:Wc,activate:Wc,remove:function(e,t){!0!==e.data.show?jc(e,t):t()}}:{}].concat(ns),Xc=Qa({nodeOps:Na,modules:Hc});ie&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&tl(e,"input")}));var Qc={inserted:function(e,t,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Ft(n,"postpatch",(function(){Qc.componentUpdated(e,t,n)})):Yc(e,t,n.context),e._vOptions=[].map.call(e.options,Jc)):("textarea"===n.tag||Ma(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",$c),e.addEventListener("compositionend",el),e.addEventListener("change",el),ie&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Yc(e,t,n.context);var r=e._vOptions,i=e._vOptions=[].map.call(e.options,Jc);i.some((function(e,t){return!j(e,r[t])}))&&(e.multiple?t.value.some((function(e){return qc(e,i)})):t.value!==t.oldValue&&qc(t.value,i))&&tl(e,"change")}}};function Yc(e,t,n){Kc(e,t,n),(re||oe)&&setTimeout((function(){Kc(e,t,n)}),0)}function Kc(e,t,n){var r=t.value,i=e.multiple;if(!i||Array.isArray(r)){for(var o,a,s=0,c=e.options.length;s<c;s++)if(a=e.options[s],i)o=z(r,Jc(a))>-1,a.selected!==o&&(a.selected=o);else if(j(Jc(a),r))return void(e.selectedIndex!==s&&(e.selectedIndex=s));i||(e.selectedIndex=-1)}else no('<select multiple v-model="'.concat(t.expression,'"> ')+"expects an Array value for its binding, but got ".concat(Object.prototype.toString.call(r).slice(8,-1)),n)}function qc(e,t){return t.every((function(t){return!j(t,e)}))}function Jc(e){return"_value"in e?e._value:e.value}function $c(e){e.target.composing=!0}function el(e){e.target.composing&&(e.target.composing=!1,tl(e.target,"input"))}function tl(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function nl(e){return!e.componentInstance||e.data&&e.data.transition?e:nl(e.componentInstance._vnode)}var rl={bind:function(e,t,n){var r=t.value,i=(n=nl(n)).data&&n.data.transition,o=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;r&&i?(n.data.show=!0,Zc(n,(function(){e.style.display=o}))):e.style.display=r?o:"none"},update:function(e,t,n){var r=t.value;!r!=!t.oldValue&&((n=nl(n)).data&&n.data.transition?(n.data.show=!0,r?Zc(n,(function(){e.style.display=e.__vOriginalDisplay})):jc(n,(function(){e.style.display="none"}))):e.style.display=r?e.__vOriginalDisplay:"none")},unbind:function(e,t,n,r,i){i||(e.style.display=e.__vOriginalDisplay)}},il={model:Qc,show:rl},ol={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function al(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?al(Cn(t.children)):e}function sl(e){var t={},n=e.$options;for(var r in n.propsData)t[r]=e[r];var i=n._parentListeners;for(var r in i)t[S(r)]=i[r];return t}function cl(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function ll(e){for(;e=e.parent;)if(e.data.transition)return!0}function ul(e,t){return t.key===e.key&&t.tag===e.tag}var hl=function(e){return e.tag||ln(e)},dl=function(e){return"show"===e.name},fl={name:"transition",props:ol,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(hl)).length){n.length>1&&no("<transition> can only be used on a single element. Use <transition-group> for lists.",this.$parent);var r=this.mode;r&&"in-out"!==r&&"out-in"!==r&&no("invalid <transition> mode: "+r,this.$parent);var i=n[0];if(ll(this.$vnode))return i;var o=al(i);if(!o)return i;if(this._leaving)return cl(e,i);var a="__transition-".concat(this._uid,"-");o.key=null==o.key?o.isComment?a+"comment":a+o.tag:c(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var s=(o.data||(o.data={})).transition=sl(this),l=this._vnode,u=al(l);if(o.data.directives&&o.data.directives.some(dl)&&(o.data.show=!0),u&&u.data&&!ul(o,u)&&!ln(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=O({},s);if("out-in"===r)return this._leaving=!0,Ft(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),cl(e,i);if("in-out"===r){if(ln(o))return l;var d,f=function(){d()};Ft(s,"afterEnter",f),Ft(s,"enterCancelled",f),Ft(h,"delayLeave",(function(e){d=e}))}}return i}}},pl=O({tag:String,moveClass:String},ol);delete pl.mode;var ml={props:pl,beforeMount:function(){var e=this,t=this._update;this._update=function(n,r){var i=Zn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,i(),t.call(e,n,r)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,i=this.$slots.default||[],o=this.children=[],a=sl(this),s=0;s<i.length;s++)if((d=i[s]).tag)if(null!=d.key&&0!==String(d.key).indexOf("__vlist"))o.push(d),n[d.key]=d,(d.data||(d.data={})).transition=a;else{var c=d.componentOptions,l=c?Hi(c.Ctor.options)||c.tag||"":d.tag;no("<transition-group> children must be keyed: <".concat(l,">"))}if(r){var u=[],h=[];for(s=0;s<r.length;s++){var d;(d=r[s]).data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?u.push(d):h.push(d)}this.kept=e(t,null,u),this.removed=h}return e(t,null,o)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(gl),e.forEach(vl),e.forEach(_l),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,r=n.style;Dc(n,t),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(Rc,n._moveCb=function e(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(Rc,e),n._moveCb=null,Uc(n,t))})}})))},methods:{hasMove:function(e,t){if(!Tc)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){xc(n,e)})),bc(n,t),n.style.display="none",this.$el.appendChild(n);var r=Ic(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function gl(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function vl(e){e.data.newPos=e.elm.getBoundingClientRect()}function _l(e){var t=e.data.pos,n=e.data.newPos,r=t.left-n.left,i=t.top-n.top;if(r||i){e.data.moved=!0;var o=e.elm.style;o.transform=o.WebkitTransform="translate(".concat(r,"px,").concat(i,"px)"),o.transitionDuration="0s"}}var yl={Transition:fl,TransitionGroup:ml};Bo.config.mustUseProp=ta,Bo.config.isReservedTag=xa,Bo.config.isReservedAttr=$o,Bo.config.getTagNamespace=wa,Bo.config.isUnknownElement=Ta,O(Bo.options.directives,il),O(Bo.options.components,yl),Bo.prototype.__patch__=te?Xc:I,Bo.prototype.$mount=function(e,t){return Gn(this,e=e&&te?Ea(e):void 0,t)},te&&setTimeout((function(){Q.devtools&&(fe?fe.emit("init",Bo):r[r.info?"info":"log"]("Download the Vue Devtools extension for a better development experience:\nhttps://github.com/vuejs/vue-devtools")),!1!==Q.productionTip&&void 0!==r&&r[r.info?"info":"log"]("You are running Vue in development mode.\nMake sure to turn on production mode when deploying for production.\nSee more tips at https://vuejs.org/guide/deployment.html")}),0);var bl=/\{\{((?:.|\r?\n)+?)\}\}/g,xl=/[-.*+?^${}()|[\]\/\\]/g,wl=M((function(e){var t=e[0].replace(xl,"\\$&"),n=e[1].replace(xl,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+n,"g")}));function Al(e,t){var n=t?wl(t):bl;if(n.test(e)){for(var r,i,o,a=[],s=[],c=n.lastIndex=0;r=n.exec(e);){(i=r.index)>c&&(s.push(o=e.slice(c,i)),a.push(JSON.stringify(o)));var l=vs(r[1].trim());a.push("_s(".concat(l,")")),s.push({"@binding":l}),c=i+r[0].length}return c<e.length&&(s.push(o=e.slice(c)),a.push(JSON.stringify(o))),{expression:a.join("+"),tokens:s}}}function Tl(e,t){var n=t.warn||ys,r=Ls(e,"class");r&&Al(r,t.delimiters)&&n('class="'.concat(r,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div class="{{ val }}">, use <div :class="val">.',e.rawAttrsMap.class),r&&(e.staticClass=JSON.stringify(r.replace(/\s+/g," ").trim()));var i=Rs(e,"class",!1);i&&(e.classBinding=i)}function Ml(e){var t="";return e.staticClass&&(t+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(t+="class:".concat(e.classBinding,",")),t}var El={staticKeys:["staticClass"],transformNode:Tl,genData:Ml};function Sl(e,t){var n=t.warn||ys,r=Ls(e,"style");r&&(Al(r,t.delimiters)&&n('style="'.concat(r,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div style="{{ val }}">, use <div :style="val">.',e.rawAttrsMap.style),e.staticStyle=JSON.stringify(sc(r)));var i=Rs(e,"style",!1);i&&(e.styleBinding=i)}function Rl(e){var t="";return e.staticStyle&&(t+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(t+="style:(".concat(e.styleBinding,"),")),t}var Ll,Pl={staticKeys:["staticStyle"],transformNode:Sl,genData:Rl},Cl={decode:function(e){return(Ll=Ll||document.createElement("div")).innerHTML=e,Ll.textContent}},Fl=y("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Dl=y("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ul=y("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Ol=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,kl=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Il="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(Y.source,"]*"),Bl="((?:".concat(Il,"\\:)?").concat(Il,")"),Nl=new RegExp("^<".concat(Bl)),Zl=/^\s*(\/?)>/,jl=new RegExp("^<\\/".concat(Bl,"[^>]*>")),zl=/^<!DOCTYPE [^>]+>/i,Gl=/^<!\--/,Vl=/^<!\[/,Wl=y("script,style,textarea",!0),Hl={},Xl={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Ql=/&(?:lt|gt|quot|amp|#39);/g,Yl=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Kl=y("pre,textarea",!0),ql=function(e,t){return e&&Kl(e)&&"\n"===t[0]};function Jl(e,t){var n=t?Yl:Ql;return e.replace(n,(function(e){return Xl[e]}))}function $l(e,t){for(var n,r,i=[],o=t.expectHTML,a=t.isUnaryTag||B,s=t.canBeLeftOpenTag||B,c=0,l=function(){if(n=e,r&&Wl(r)){var o=0,a=r.toLowerCase(),s=Hl[a]||(Hl[a]=new RegExp("([\\s\\S]*?)(</"+a+"[^>]*>)","i"));x=e.replace(s,(function(e,n,r){return o=r.length,Wl(a)||"noscript"===a||(n=n.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),ql(a,n)&&(n=n.slice(1)),t.chars&&t.chars(n),""})),c+=e.length-x.length,e=x,f(a,c-o,c)}else{var l=e.indexOf("<");if(0===l){if(Gl.test(e)){var p=e.indexOf("--\x3e");if(p>=0)return t.shouldKeepComment&&t.comment&&t.comment(e.substring(4,p),c,c+p+3),u(p+3),"continue"}if(Vl.test(e)){var m=e.indexOf("]>");if(m>=0)return u(m+2),"continue"}var g=e.match(zl);if(g)return u(g[0].length),"continue";var v=e.match(jl);if(v){var _=c;return u(v[0].length),f(v[1],_,c),"continue"}var y=h();if(y)return d(y),ql(y.tagName,e)&&u(1),"continue"}var b=void 0,x=void 0,w=void 0;if(l>=0){for(x=e.slice(l);!(jl.test(x)||Nl.test(x)||Gl.test(x)||Vl.test(x)||(w=x.indexOf("<",1))<0);)l+=w,x=e.slice(l);b=e.substring(0,l)}l<0&&(b=e),b&&u(b.length),t.chars&&b&&t.chars(b,c-b.length,c)}if(e===n)return t.chars&&t.chars(e),!i.length&&t.warn&&t.warn('Mal-formatted tag at end of template: "'.concat(e,'"'),{start:c+e.length}),"break"};e&&"break"!==l(););function u(t){c+=t,e=e.substring(t)}function h(){var t=e.match(Nl);if(t){var n={tagName:t[1],attrs:[],start:c};u(t[0].length);for(var r=void 0,i=void 0;!(r=e.match(Zl))&&(i=e.match(kl)||e.match(Ol));)i.start=c,u(i[0].length),i.end=c,n.attrs.push(i);if(r)return n.unarySlash=r[1],u(r[0].length),n.end=c,n}}function d(e){var n=e.tagName,c=e.unarySlash;o&&("p"===r&&Ul(n)&&f(r),s(n)&&r===n&&f(n));for(var l=a(n)||!!c,u=e.attrs.length,h=new Array(u),d=0;d<u;d++){var p=e.attrs[d],m=p[3]||p[4]||p[5]||"",g="a"===n&&"href"===p[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;h[d]={name:p[1],value:Jl(m,g)},t.outputSourceRange&&(h[d].start=p.start+p[0].match(/^\s*/).length,h[d].end=p.end)}l||(i.push({tag:n,lowerCasedTag:n.toLowerCase(),attrs:h,start:e.start,end:e.end}),r=n),t.start&&t.start(n,h,l,e.start,e.end)}function f(e,n,o){var a,s;if(null==n&&(n=c),null==o&&(o=c),e)for(s=e.toLowerCase(),a=i.length-1;a>=0&&i[a].lowerCasedTag!==s;a--);else a=0;if(a>=0){for(var l=i.length-1;l>=a;l--)(l>a||!e)&&t.warn&&t.warn("tag <".concat(i[l].tag,"> has no matching end tag."),{start:i[l].start,end:i[l].end}),t.end&&t.end(i[l].tag,n,o);i.length=a,r=a&&i[a-1].tag}else"br"===s?t.start&&t.start(e,[],!0,n,o):"p"===s&&(t.start&&t.start(e,[],!1,n,o),t.end&&t.end(e,n,o))}f()}var eu,tu,nu,ru,iu,ou,au,su,cu,lu=/^@|^v-on:/,uu=/^v-|^@|^:|^#/,hu=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,du=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,fu=/^\(|\)$/g,pu=/^\[.*\]$/,mu=/:(.*)$/,gu=/^:|^\.|^v-bind:/,vu=/\.[^.\]]+(?=[^\]]*$)/g,_u=/^v-slot(:|$)|^#/,yu=/[\r\n]/,bu=/[ \f\t\r\n]+/g,xu=/[\s"'<>\/=]/,wu=M(Cl.decode),Au="_empty_";function Tu(e,t,n){return{type:1,tag:e,attrsList:t,attrsMap:Wu(t),rawAttrsMap:{},parent:n,children:[]}}function Mu(e,t){eu=t.warn||ys,ou=t.isPreTag||B,au=t.mustUseProp||B,su=t.getTagNamespace||B;var n=t.isReservedTag||B;cu=function(e){return!(!(e.component||e.attrsMap[":is"]||e.attrsMap["v-bind:is"])&&(e.attrsMap.is?n(e.attrsMap.is):n(e.tag)))},nu=bs(t.modules,"transformNode"),ru=bs(t.modules,"preTransformNode"),iu=bs(t.modules,"postTransformNode"),tu=t.delimiters;var r,i,o=[],a=!1!==t.preserveWhitespace,s=t.whitespace,c=!1,l=!1,u=!1;function h(e,t){u||(u=!0,eu(e,t))}function d(e){if(f(e),c||e.processed||(e=Ru(e,t)),o.length||e===r||(r.if&&(e.elseif||e.else)?(p(e),ku(r,{exp:e.elseif,block:e})):h("Component template should contain exactly one root element. If you are using v-if on multiple elements, use v-else-if to chain them instead.",{start:e.start})),i&&!e.forbidden)if(e.elseif||e.else)Uu(e,i);else{if(e.slotScope){var n=e.slotTarget||'"default"';(i.scopedSlots||(i.scopedSlots={}))[n]=e}i.children.push(e),e.parent=i}e.children=e.children.filter((function(e){return!e.slotScope})),f(e),e.pre&&(c=!1),ou(e.tag)&&(l=!1);for(var a=0;a<iu.length;a++)iu[a](e,t)}function f(e){if(!l)for(var t=void 0;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}function p(e){"slot"!==e.tag&&"template"!==e.tag||h("Cannot use <".concat(e.tag,"> as component root element because it may ")+"contain multiple nodes.",{start:e.start}),e.attrsMap.hasOwnProperty("v-for")&&h("Cannot use v-for on stateful component root element because it renders multiple elements.",e.rawAttrsMap["v-for"])}return $l(e,{warn:eu,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,n,a,s,u){var h=i&&i.ns||su(e);re&&"svg"===h&&(n=Ku(n));var f=Tu(e,n,i);h&&(f.ns=h),t.outputSourceRange&&(f.start=s,f.end=u,f.rawAttrsMap=f.attrsList.reduce((function(e,t){return e[t.name]=t,e}),{})),n.forEach((function(e){xu.test(e.name)&&eu("Invalid dynamic argument expression: attribute names cannot contain spaces, quotes, <, >, / or =.",t.outputSourceRange?{start:e.start+e.name.indexOf("["),end:e.start+e.name.length}:void 0)})),Xu(f)&&!de()&&(f.forbidden=!0,eu("Templates should only be responsible for mapping the state to the UI. Avoid placing tags with side-effects in your templates, such as "+"<".concat(e,">")+", as they will not be parsed.",{start:f.start}));for(var m=0;m<ru.length;m++)f=ru[m](f,t)||f;c||(Eu(f),f.pre&&(c=!0)),ou(f.tag)&&(l=!0),c?Su(f):f.processed||(Cu(f),Du(f),Iu(f)),r||p(r=f),a?d(f):(i=f,o.push(f))},end:function(e,n,r){var a=o[o.length-1];o.length-=1,i=o[o.length-1],t.outputSourceRange&&(a.end=r),d(a)},chars:function(n,r,o){if(i){if(!re||"textarea"!==i.tag||i.attrsMap.placeholder!==n){var u=i.children;if(n=l||n.trim()?Hu(i)?n:wu(n):u.length?s?"condense"===s&&yu.test(n)?"":" ":a?" ":"":""){l||"condense"!==s||(n=n.replace(bu," "));var d=void 0,f=void 0;!c&&" "!==n&&(d=Al(n,tu))?f={type:2,expression:d.expression,tokens:d.tokens,text:n}:" "===n&&u.length&&" "===u[u.length-1].text||(f={type:3,text:n}),f&&(t.outputSourceRange&&(f.start=r,f.end=o),u.push(f))}}}else n===e?h("Component template requires a root element, rather than just text.",{start:r}):(n=n.trim())&&h('text "'.concat(n,'" outside root element will be ignored.'),{start:r})},comment:function(e,n,r){if(i){var o={type:3,text:e,isComment:!0};t.outputSourceRange&&(o.start=n,o.end=r),i.children.push(o)}}}),r}function Eu(e){null!=Ls(e,"v-pre")&&(e.pre=!0)}function Su(e){var t=e.attrsList,n=t.length;if(n)for(var r=e.attrs=new Array(n),i=0;i<n;i++)r[i]={name:t[i].name,value:JSON.stringify(t[i].value)},null!=t[i].start&&(r[i].start=t[i].start,r[i].end=t[i].end);else e.pre||(e.plain=!0)}function Ru(e,t){Lu(e),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,Pu(e),Bu(e),Zu(e),ju(e);for(var n=0;n<nu.length;n++)e=nu[n](e,t)||e;return zu(e),e}function Lu(e){var t=Rs(e,"key");if(t){if("template"===e.tag&&eu("<template> cannot be keyed. Place the key on real elements instead.",Ss(e,"key")),e.for){var n=e.iterator2||e.iterator1,r=e.parent;n&&n===t&&r&&"transition-group"===r.tag&&eu("Do not use v-for index as key on <transition-group> children, this is the same as not using keys.",Ss(e,"key"),!0)}e.key=t}}function Pu(e){var t=Rs(e,"ref");t&&(e.ref=t,e.refInFor=Gu(e))}function Cu(e){var t;if(t=Ls(e,"v-for")){var n=Fu(t);n?O(e,n):eu("Invalid v-for expression: ".concat(t),e.rawAttrsMap["v-for"])}}function Fu(e){var t=e.match(hu);if(t){var n={};n.for=t[2].trim();var r=t[1].trim().replace(fu,""),i=r.match(du);return i?(n.alias=r.replace(du,"").trim(),n.iterator1=i[1].trim(),i[2]&&(n.iterator2=i[2].trim())):n.alias=r,n}}function Du(e){var t=Ls(e,"v-if");if(t)e.if=t,ku(e,{exp:t,block:e});else{null!=Ls(e,"v-else")&&(e.else=!0);var n=Ls(e,"v-else-if");n&&(e.elseif=n)}}function Uu(e,t){var n=Ou(t.children);n&&n.if?ku(n,{exp:e.elseif,block:e}):eu("v-".concat(e.elseif?'else-if="'+e.elseif+'"':"else"," ")+"used on element <".concat(e.tag,"> without corresponding v-if."),e.rawAttrsMap[e.elseif?"v-else-if":"v-else"])}function Ou(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];" "!==e[t].text&&eu('text "'.concat(e[t].text.trim(),'" between v-if and v-else(-if) ')+"will be ignored.",e[t]),e.pop()}}function ku(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Iu(e){null!=Ls(e,"v-once")&&(e.once=!0)}function Bu(e){var t;"template"===e.tag?((t=Ls(e,"scope"))&&eu('the "scope" attribute for scoped slots have been deprecated and replaced by "slot-scope" since 2.5. The new "slot-scope" attribute can also be used on plain elements in addition to <template> to denote scoped slots.',e.rawAttrsMap.scope,!0),e.slotScope=t||Ls(e,"slot-scope")):(t=Ls(e,"slot-scope"))&&(e.attrsMap["v-for"]&&eu("Ambiguous combined usage of slot-scope and v-for on <".concat(e.tag,"> ")+"(v-for takes higher priority). Use a wrapper <template> for the scoped slot to make it clearer.",e.rawAttrsMap["slot-scope"],!0),e.slotScope=t);var n,r=Rs(e,"slot");if(r&&(e.slotTarget='""'===r?'"default"':r,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||ws(e,"slot",r,Ss(e,"slot"))),"template"===e.tag){if(n=Ps(e,_u)){(e.slotTarget||e.slotScope)&&eu("Unexpected mixed usage of different slot syntaxes.",e),e.parent&&!cu(e.parent)&&eu("<template v-slot> can only appear at the root level inside the receiving component",e);var i=Nu(n),o=i.name,a=i.dynamic;e.slotTarget=o,e.slotTargetDynamic=a,e.slotScope=n.value||Au}}else if(n=Ps(e,_u)){cu(e)||eu("v-slot can only be used on components or <template>.",n),(e.slotScope||e.slotTarget)&&eu("Unexpected mixed usage of different slot syntaxes.",e),e.scopedSlots&&eu("To avoid scope ambiguity, the default slot should also use <template> syntax when there are other named slots.",n);var s=e.scopedSlots||(e.scopedSlots={}),c=Nu(n),l=c.name,u=(a=c.dynamic,s[l]=Tu("template",[],e));u.slotTarget=l,u.slotTargetDynamic=a,u.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=u,!0})),u.slotScope=n.value||Au,e.children=[],e.plain=!1}}function Nu(e){var t=e.name.replace(_u,"");return t||("#"!==e.name[0]?t="default":eu("v-slot shorthand syntax requires a slot name.",e)),pu.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'.concat(t,'"'),dynamic:!1}}function Zu(e){"slot"===e.tag&&(e.slotName=Rs(e,"name"),e.key&&eu("`key` does not work on <slot> because slots are abstract outlets and can possibly expand into multiple elements. Use the key on a wrapping element instead.",Ss(e,"key")))}function ju(e){var t;(t=Rs(e,"is"))&&(e.component=t),null!=Ls(e,"inline-template")&&(e.inlineTemplate=!0)}function zu(e){var t,n,r,i,o,a,s,c,l=e.attrsList;for(t=0,n=l.length;t<n;t++)if(r=i=l[t].name,o=l[t].value,uu.test(r))if(e.hasBindings=!0,(a=Vu(r.replace(uu,"")))&&(r=r.replace(vu,"")),gu.test(r))r=r.replace(gu,""),o=vs(o),(c=pu.test(r))&&(r=r.slice(1,-1)),0===o.trim().length&&eu('The value for a v-bind expression cannot be empty. Found in "v-bind:'.concat(r,'"')),a&&(a.prop&&!c&&"innerHtml"===(r=S(r))&&(r="innerHTML"),a.camel&&!c&&(r=S(r)),a.sync&&(s=Ds(o,"$event"),c?Es(e,'"update:"+('.concat(r,")"),s,null,!1,eu,l[t],!0):(Es(e,"update:".concat(S(r)),s,null,!1,eu,l[t]),P(r)!==S(r)&&Es(e,"update:".concat(P(r)),s,null,!1,eu,l[t])))),a&&a.prop||!e.component&&au(e.tag,e.attrsMap.type,r)?xs(e,r,o,l[t],c):ws(e,r,o,l[t],c);else if(lu.test(r))r=r.replace(lu,""),(c=pu.test(r))&&(r=r.slice(1,-1)),Es(e,r,o,a,!1,eu,l[t],c);else{var u=(r=r.replace(uu,"")).match(mu),h=u&&u[1];c=!1,h&&(r=r.slice(0,-(h.length+1)),pu.test(h)&&(h=h.slice(1,-1),c=!0)),Ts(e,r,i,o,h,c,a,l[t]),"model"===r&&qu(e,o)}else Al(o,tu)&&eu("".concat(r,'="').concat(o,'": ')+'Interpolation inside attributes has been removed. Use v-bind or the colon shorthand instead. For example, instead of <div id="{{ val }}">, use <div :id="val">.',l[t]),ws(e,r,JSON.stringify(o),l[t]),!e.component&&"muted"===r&&au(e.tag,e.attrsMap.type,r)&&xs(e,r,"true",l[t])}function Gu(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}function Vu(e){var t=e.match(vu);if(t){var n={};return t.forEach((function(e){n[e.slice(1)]=!0})),n}}function Wu(e){for(var t={},n=0,r=e.length;n<r;n++)!t[e[n].name]||re||oe||eu("duplicate attribute: "+e[n].name,e[n]),t[e[n].name]=e[n].value;return t}function Hu(e){return"script"===e.tag||"style"===e.tag}function Xu(e){return"style"===e.tag||"script"===e.tag&&(!e.attrsMap.type||"text/javascript"===e.attrsMap.type)}var Qu=/^xmlns:NS\d+/,Yu=/^NS\d+:/;function Ku(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];Qu.test(r.name)||(r.name=r.name.replace(Yu,""),t.push(r))}return t}function qu(e,t){for(var n=e;n;)n.for&&n.alias===t&&eu("<".concat(e.tag,' v-model="').concat(t,'">: ')+"You are binding v-model directly to a v-for iteration alias. This will not be able to modify the v-for source array because writing to the alias is like modifying a function local variable. Consider using an array of objects and use v-model on an object property instead.",e.rawAttrsMap["v-model"]),n=n.parent}function Ju(e,t){if("input"===e.tag){var n=e.attrsMap;if(!n["v-model"])return;var r=void 0;if((n[":type"]||n["v-bind:type"])&&(r=Rs(e,"type")),n.type||r||!n["v-bind"]||(r="(".concat(n["v-bind"],").type")),r){var i=Ls(e,"v-if",!0),o=i?"&&(".concat(i,")"):"",a=null!=Ls(e,"v-else",!0),s=Ls(e,"v-else-if",!0),c=$u(e);Cu(c),As(c,"type","checkbox"),Ru(c,t),c.processed=!0,c.if="(".concat(r,")==='checkbox'")+o,ku(c,{exp:c.if,block:c});var l=$u(e);Ls(l,"v-for",!0),As(l,"type","radio"),Ru(l,t),ku(c,{exp:"(".concat(r,")==='radio'")+o,block:l});var u=$u(e);return Ls(u,"v-for",!0),As(u,":type",r),Ru(u,t),ku(c,{exp:i,block:u}),a?c.else=!0:s&&(c.elseif=s),c}}}function $u(e){return Tu(e.tag,e.attrsList.slice(),e.parent)}var eh=[El,Pl,{preTransformNode:Ju}];function th(e,t){t.value&&xs(e,"textContent","_s(".concat(t.value,")"),t)}function nh(e,t){t.value&&xs(e,"innerHTML","_s(".concat(t.value,")"),t)}var rh,ih,oh={expectHTML:!0,modules:eh,directives:{model:Gs,text:th,html:nh},isPreTag:ba,isUnaryTag:Fl,mustUseProp:ta,canBeLeftOpenTag:Dl,isReservedTag:xa,getTagNamespace:wa,staticKeys:Z(eh)},ah=M(ch);function sh(e,t){e&&(rh=ah(t.staticKeys||""),ih=t.isReservedTag||B,lh(e),uh(e,!1))}function ch(e){return y("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}function lh(e){if(e.static=hh(e),1===e.type){if(!ih(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,n=e.children.length;t<n;t++){var r=e.children[t];lh(r),r.static||(e.static=!1)}if(e.ifConditions)for(t=1,n=e.ifConditions.length;t<n;t++){var i=e.ifConditions[t].block;lh(i),i.static||(e.static=!1)}}}function uh(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,r=e.children.length;n<r;n++)uh(e.children[n],t||!!e.for);if(e.ifConditions)for(n=1,r=e.ifConditions.length;n<r;n++)uh(e.ifConditions[n].block,t)}}function hh(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||b(e.tag)||!ih(e.tag)||dh(e)||!Object.keys(e).every(rh))))}function dh(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}var fh=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,ph=/\([^)]*?\);*$/,mh=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,gh={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},vh={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},_h=function(e){return"if(".concat(e,")return null;")},yh={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:_h("$event.target !== $event.currentTarget"),ctrl:_h("!$event.ctrlKey"),shift:_h("!$event.shiftKey"),alt:_h("!$event.altKey"),meta:_h("!$event.metaKey"),left:_h("'button' in $event && $event.button !== 0"),middle:_h("'button' in $event && $event.button !== 1"),right:_h("'button' in $event && $event.button !== 2")};function bh(e,t){var n=t?"nativeOn:":"on:",r="",i="";for(var o in e){var a=xh(e[o]);e[o]&&e[o].dynamic?i+="".concat(o,",").concat(a,","):r+='"'.concat(o,'":').concat(a,",")}return r="{".concat(r.slice(0,-1),"}"),i?n+"_d(".concat(r,",[").concat(i.slice(0,-1),"])"):n+r}function xh(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map((function(e){return xh(e)})).join(","),"]");var t=mh.test(e.value),n=fh.test(e.value),r=mh.test(e.value.replace(ph,""));if(e.modifiers){var i="",o="",a=[],s=function(t){if(yh[t])o+=yh[t],gh[t]&&a.push(t);else if("exact"===t){var n=e.modifiers;o+=_h(["ctrl","shift","alt","meta"].filter((function(e){return!n[e]})).map((function(e){return"$event.".concat(e,"Key")})).join("||"))}else a.push(t)};for(var c in e.modifiers)s(c);a.length&&(i+=wh(a)),o&&(i+=o);var l=t?"return ".concat(e.value,".apply(null, arguments)"):n?"return (".concat(e.value,").apply(null, arguments)"):r?"return ".concat(e.value):e.value;return"function($event){".concat(i).concat(l,"}")}return t||n?e.value:"function($event){".concat(r?"return ".concat(e.value):e.value,"}")}function wh(e){return"if(!$event.type.indexOf('key')&&"+"".concat(e.map(Ah).join("&&"),")return null;")}function Ah(e){var t=parseInt(e,10);if(t)return"$event.keyCode!==".concat(t);var n=gh[e],r=vh[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(n),",")+"$event.key,"+"".concat(JSON.stringify(r))+")"}function Th(e,t){t.modifiers&&no("v-on without argument does not support modifiers."),e.wrapListeners=function(e){return"_g(".concat(e,",").concat(t.value,")")}}function Mh(e,t){e.wrapData=function(n){return"_b(".concat(n,",'").concat(e.tag,"',").concat(t.value,",").concat(t.modifiers&&t.modifiers.prop?"true":"false").concat(t.modifiers&&t.modifiers.sync?",true":"",")")}}var Eh={on:Th,bind:Mh,cloak:I},Sh=function(){function e(e){this.options=e,this.warn=e.warn||ys,this.transforms=bs(e.modules,"transformCode"),this.dataGenFns=bs(e.modules,"genData"),this.directives=O(O({},Eh),e.directives);var t=e.isReservedTag||B;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1}return e}();function Rh(e,t){var n=new Sh(t),r=e?"script"===e.tag?"null":Lh(e,n):'_c("div")';return{render:"with(this){return ".concat(r,"}"),staticRenderFns:n.staticRenderFns}}function Lh(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return Ch(e,t);if(e.once&&!e.onceProcessed)return Fh(e,t);if(e.for&&!e.forProcessed)return Oh(e,t);if(e.if&&!e.ifProcessed)return Dh(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return Yh(e,t);var n=void 0;if(e.component)n=Kh(e.component,e,t);else{var r=void 0,i=t.maybeComponent(e);(!e.plain||e.pre&&i)&&(r=kh(e,t));var o=void 0,a=t.options.bindings;i&&a&&!1!==a.__isScriptSetup&&(o=Ph(a,e.tag)),o||(o="'".concat(e.tag,"'"));var s=e.inlineTemplate?null:Gh(e,t,!0);n="_c(".concat(o).concat(r?",".concat(r):"").concat(s?",".concat(s):"",")")}for(var c=0;c<t.transforms.length;c++)n=t.transforms[c](e,n);return n}return Gh(e,t)||"void 0"}function Ph(e,t){var n=S(t),r=R(n),i=function(i){return e[t]===i?t:e[n]===i?n:e[r]===i?r:void 0},o=i("setup-const")||i("setup-reactive-const");if(o)return o;var a=i("setup-let")||i("setup-ref")||i("setup-maybe-ref");return a||void 0}function Ch(e,t){e.staticProcessed=!0;var n=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return ".concat(Lh(e,t),"}")),t.pre=n,"_m(".concat(t.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function Fh(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return Dh(e,t);if(e.staticInFor){for(var n="",r=e.parent;r;){if(r.for){n=r.key;break}r=r.parent}return n?"_o(".concat(Lh(e,t),",").concat(t.onceId++,",").concat(n,")"):(t.warn("v-once can only be used inside v-for that is keyed. ",e.rawAttrsMap["v-once"]),Lh(e,t))}return Ch(e,t)}function Dh(e,t,n,r){return e.ifProcessed=!0,Uh(e.ifConditions.slice(),t,n,r)}function Uh(e,t,n,r){if(!e.length)return r||"_e()";var i=e.shift();return i.exp?"(".concat(i.exp,")?").concat(o(i.block),":").concat(Uh(e,t,n,r)):"".concat(o(i.block));function o(e){return n?n(e,t):e.once?Fh(e,t):Lh(e,t)}}function Oh(e,t,n,r){var i=e.for,o=e.alias,a=e.iterator1?",".concat(e.iterator1):"",s=e.iterator2?",".concat(e.iterator2):"";return t.maybeComponent(e)&&"slot"!==e.tag&&"template"!==e.tag&&!e.key&&t.warn("<".concat(e.tag,' v-for="').concat(o," in ").concat(i,'">: component lists rendered with ')+"v-for should have explicit keys. See https://vuejs.org/guide/list.html#key for more info.",e.rawAttrsMap["v-for"],!0),e.forProcessed=!0,"".concat(r||"_l","((").concat(i,"),")+"function(".concat(o).concat(a).concat(s,"){")+"return ".concat((n||Lh)(e,t))+"})"}function kh(e,t){var n="{",r=Ih(e,t);r&&(n+=r+","),e.key&&(n+="key:".concat(e.key,",")),e.ref&&(n+="ref:".concat(e.ref,",")),e.refInFor&&(n+="refInFor:true,"),e.pre&&(n+="pre:true,"),e.component&&(n+='tag:"'.concat(e.tag,'",'));for(var i=0;i<t.dataGenFns.length;i++)n+=t.dataGenFns[i](e);if(e.attrs&&(n+="attrs:".concat(qh(e.attrs),",")),e.props&&(n+="domProps:".concat(qh(e.props),",")),e.events&&(n+="".concat(bh(e.events,!1),",")),e.nativeEvents&&(n+="".concat(bh(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(n+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(n+="".concat(Nh(e,e.scopedSlots,t),",")),e.model&&(n+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var o=Bh(e,t);o&&(n+="".concat(o,","))}return n=n.replace(/,$/,"")+"}",e.dynamicAttrs&&(n="_b(".concat(n,',"').concat(e.tag,'",').concat(qh(e.dynamicAttrs),")")),e.wrapData&&(n=e.wrapData(n)),e.wrapListeners&&(n=e.wrapListeners(n)),n}function Ih(e,t){var n=e.directives;if(n){var r,i,o,a,s="directives:[",c=!1;for(r=0,i=n.length;r<i;r++){o=n[r],a=!0;var l=t.directives[o.name];l&&(a=!!l(e,o,t.warn)),a&&(c=!0,s+='{name:"'.concat(o.name,'",rawName:"').concat(o.rawName,'"').concat(o.value?",value:(".concat(o.value,"),expression:").concat(JSON.stringify(o.value)):"").concat(o.arg?",arg:".concat(o.isDynamicArg?o.arg:'"'.concat(o.arg,'"')):"").concat(o.modifiers?",modifiers:".concat(JSON.stringify(o.modifiers)):"","},"))}return c?s.slice(0,-1)+"]":void 0}}function Bh(e,t){var n=e.children[0];if(1===e.children.length&&1===n.type||t.warn("Inline-template components must have exactly one child element.",{start:e.start}),n&&1===n.type){var r=Rh(n,t.options);return"inlineTemplate:{render:function(){".concat(r.render,"},staticRenderFns:[").concat(r.staticRenderFns.map((function(e){return"function(){".concat(e,"}")})).join(","),"]}")}}function Nh(e,t,n){var r=e.for||Object.keys(t).some((function(e){var n=t[e];return n.slotTargetDynamic||n.if||n.for||jh(n)})),i=!!e.if;if(!r)for(var o=e.parent;o;){if(o.slotScope&&o.slotScope!==Au||o.for){r=!0;break}o.if&&(i=!0),o=o.parent}var a=Object.keys(t).map((function(e){return zh(t[e],n)})).join(",");return"scopedSlots:_u([".concat(a,"]").concat(r?",null,true":"").concat(!r&&i?",null,false,".concat(Zh(a)):"",")")}function Zh(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return t>>>0}function jh(e){return 1===e.type&&("slot"===e.tag||e.children.some(jh))}function zh(e,t){var n=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!n)return Dh(e,t,zh,"null");if(e.for&&!e.forProcessed)return Oh(e,t,zh);var r=e.slotScope===Au?"":String(e.slotScope),i="function(".concat(r,"){")+"return ".concat("template"===e.tag?e.if&&n?"(".concat(e.if,")?").concat(Gh(e,t)||"undefined",":undefined"):Gh(e,t)||"undefined":Lh(e,t),"}"),o=r?"":",proxy:true";return"{key:".concat(e.slotTarget||'"default"',",fn:").concat(i).concat(o,"}")}function Gh(e,t,n,r,i){var o=e.children;if(o.length){var a=o[0];if(1===o.length&&a.for&&"template"!==a.tag&&"slot"!==a.tag){var s=n?t.maybeComponent(a)?",1":",0":"";return"".concat((r||Lh)(a,t)).concat(s)}var c=n?Vh(o,t.maybeComponent):0,l=i||Hh;return"[".concat(o.map((function(e){return l(e,t)})).join(","),"]").concat(c?",".concat(c):"")}}function Vh(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(1===i.type){if(Wh(i)||i.ifConditions&&i.ifConditions.some((function(e){return Wh(e.block)}))){n=2;break}(t(i)||i.ifConditions&&i.ifConditions.some((function(e){return t(e.block)})))&&(n=1)}}return n}function Wh(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function Hh(e,t){return 1===e.type?Lh(e,t):3===e.type&&e.isComment?Qh(e):Xh(e)}function Xh(e){return"_v(".concat(2===e.type?e.expression:Jh(JSON.stringify(e.text)),")")}function Qh(e){return"_e(".concat(JSON.stringify(e.text),")")}function Yh(e,t){var n=e.slotName||'"default"',r=Gh(e,t),i="_t(".concat(n).concat(r?",function(){return ".concat(r,"}"):""),o=e.attrs||e.dynamicAttrs?qh((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:S(e.name),value:e.value,dynamic:e.dynamic}}))):null,a=e.attrsMap["v-bind"];return!o&&!a||r||(i+=",null"),o&&(i+=",".concat(o)),a&&(i+="".concat(o?"":",null",",").concat(a)),i+")"}function Kh(e,t,n){var r=t.inlineTemplate?null:Gh(t,n,!0);return"_c(".concat(e,",").concat(kh(t,n)).concat(r?",".concat(r):"",")")}function qh(e){for(var t="",n="",r=0;r<e.length;r++){var i=e[r],o=Jh(i.value);i.dynamic?n+="".concat(i.name,",").concat(o,","):t+='"'.concat(i.name,'":').concat(o,",")}return t="{".concat(t.slice(0,-1),"}"),n?"_d(".concat(t,",[").concat(n.slice(0,-1),"])"):t}function Jh(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var $h=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),ed=new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)"),td=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function nd(e,t){e&&rd(e,t)}function rd(e,t){if(1===e.type){for(var n in e.attrsMap)if(uu.test(n)){var r=e.attrsMap[n];if(r){var i=e.rawAttrsMap[n];"v-for"===n?od(e,'v-for="'.concat(r,'"'),t,i):"v-slot"===n||"#"===n[0]?cd(r,"".concat(n,'="').concat(r,'"'),t,i):lu.test(n)?id(r,"".concat(n,'="').concat(r,'"'),t,i):sd(r,"".concat(n,'="').concat(r,'"'),t,i)}}if(e.children)for(var o=0;o<e.children.length;o++)rd(e.children[o],t)}else 2===e.type&&sd(e.expression,e.text,t,e)}function id(e,t,n,r){var i=e.replace(td,""),o=i.match(ed);o&&"$"!==i.charAt(o.index-1)&&n("avoid using JavaScript unary operator as property name: "+'"'.concat(o[0],'" in expression ').concat(t.trim()),r),sd(e,t,n,r)}function od(e,t,n,r){sd(e.for||"",t,n,r),ad(e.alias,"v-for alias",t,n,r),ad(e.iterator1,"v-for iterator",t,n,r),ad(e.iterator2,"v-for iterator",t,n,r)}function ad(e,t,n,r,i){if("string"==typeof e)try{new Function("var ".concat(e,"=_"))}catch(o){r("invalid ".concat(t,' "').concat(e,'" in expression: ').concat(n.trim()),i)}}function sd(e,t,n,r){try{new Function("return ".concat(e))}catch(o){var i=e.replace(td,"").match($h);n(i?"avoid using JavaScript keyword as property name: "+'"'.concat(i[0],'"\n  Raw expression: ').concat(t.trim()):"invalid expression: ".concat(o.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(t.trim(),"\n"),r)}}function cd(e,t,n,r){try{new Function(e,"")}catch(i){n("invalid function parameter expression: ".concat(i.message," in\n\n")+"    ".concat(e,"\n\n")+"  Raw expression: ".concat(t.trim(),"\n"),r)}}var ld=2;function ud(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);for(var r=e.split(/\r?\n/),i=0,o=[],a=0;a<r.length;a++)if((i+=r[a].length+1)>=t){for(var s=a-ld;s<=a+ld||n>i;s++)if(!(s<0||s>=r.length)){o.push("".concat(s+1).concat(hd(" ",3-String(s+1).length),"|  ").concat(r[s]));var c=r[s].length;if(s===a){var l=t-(i-c)+1,u=n>i?c-l:n-t;o.push("   |  "+hd(" ",l)+hd("^",u))}else if(s>a){if(n>i){var h=Math.min(n-i,c);o.push("   |  "+hd("^",h))}i+=c+1}}break}return o.join("\n")}function hd(e,t){var n="";if(t>0)for(;1&t&&(n+=e),!((t>>>=1)<=0);)e+=e;return n}function dd(e,t){try{return new Function(e)}catch(n){return t.push({err:n,code:e}),I}}function fd(e){var t=Object.create(null);return function(n,r,i){var o=(r=O({},r)).warn||no;delete r.warn;try{new Function("return 1")}catch(e){e.toString().match(/unsafe-eval|CSP/)&&o("It seems you are using the standalone build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. The template compiler cannot work in this environment. Consider relaxing the policy to allow unsafe-eval or pre-compiling your templates into render functions.")}var a=r.delimiters?String(r.delimiters)+n:n;if(t[a])return t[a];var s=e(n,r);s.errors&&s.errors.length&&(r.outputSourceRange?s.errors.forEach((function(e){o("Error compiling template:\n\n".concat(e.msg,"\n\n")+ud(n,e.start,e.end),i)})):o("Error compiling template:\n\n".concat(n,"\n\n")+s.errors.map((function(e){return"- ".concat(e)})).join("\n")+"\n",i)),s.tips&&s.tips.length&&(r.outputSourceRange?s.tips.forEach((function(e){return ro(e.msg,i)})):s.tips.forEach((function(e){return ro(e,i)})));var c={},l=[];return c.render=dd(s.render,l),c.staticRenderFns=s.staticRenderFns.map((function(e){return dd(e,l)})),s.errors&&s.errors.length||!l.length||o("Failed to generate render function:\n\n"+l.map((function(e){var t=e.err,n=e.code;return"".concat(t.toString()," in\n\n").concat(n,"\n")})).join("\n"),i),t[a]=c}}function pd(e){return function(t){function n(n,r){var i=Object.create(t),o=[],a=[],s=function(e,t,n){(n?a:o).push(e)};if(r){if(r.outputSourceRange){var c=n.match(/^\s*/)[0].length;s=function(e,t,n){var r="string"==typeof e?{msg:e}:e;t&&(null!=t.start&&(r.start=t.start+c),null!=t.end&&(r.end=t.end+c)),(n?a:o).push(r)}}for(var l in r.modules&&(i.modules=(t.modules||[]).concat(r.modules)),r.directives&&(i.directives=O(Object.create(t.directives||null),r.directives)),r)"modules"!==l&&"directives"!==l&&(i[l]=r[l])}i.warn=s;var u=e(n.trim(),i);return nd(u.ast,s),u.errors=o,u.tips=a,u}return{compile:n,compileToFunctions:fd(n)}}}var md,gd=pd((function(e,t){var n=Mu(e.trim(),t);!1!==t.optimize&&sh(n,t);var r=Rh(n,t);return{ast:n,render:r.render,staticRenderFns:r.staticRenderFns}}))(oh).compileToFunctions;function vd(e){return(md=md||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',md.innerHTML.indexOf("&#10;")>0}var _d=!!te&&vd(!1),yd=!!te&&vd(!0),bd=M((function(e){var t=Ea(e);return t&&t.innerHTML})),xd=Bo.prototype.$mount;function wd(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function Ad(e,t){var n=new _i(ve,e,I,{sync:!0});t&&(n.update=function(){t((function(){return n.run()}))})}return Bo.prototype.$mount=function(e,t){if((e=e&&Ea(e))===document.body||e===document.documentElement)return no("Do not mount Vue to <html> or <body> - mount to normal elements instead."),this;var n=this.$options;if(!n.render){var r=n.template;if(r)if("string"==typeof r)"#"===r.charAt(0)&&((r=bd(r))||no("Template element not found or is empty: ".concat(n.template),this));else{if(!r.nodeType)return no("invalid template option:"+r,this),this;r=r.innerHTML}else e&&(r=wd(e));if(r){Q.performance&&yt&&yt("compile");var i=gd(r,{outputSourceRange:!0,shouldDecodeNewlines:_d,shouldDecodeNewlinesForHref:yd,delimiters:n.delimiters,comments:n.comments},this),o=i.render,a=i.staticRenderFns;n.render=o,n.staticRenderFns=a,Q.performance&&yt&&(yt("compile end"),bt("vue ".concat(this._name," compile"),"compile","compile end"))}}return xd.call(this,e,t)},Bo.compile=gd,O(Bo,fi),Bo.effect=Ad,Bo}()},6430:function(e,t,n){"use strict";var r=n(4029),i=n(3083),o=n(1924),a=o("Object.prototype.toString"),s=n(6410)(),c="undefined"==typeof globalThis?n.g:globalThis,l=i(),u=o("String.prototype.slice"),h={},d=n(882),f=Object.getPrototypeOf;s&&d&&f&&r(l,(function(e){if("function"==typeof c[e]){var t=new c[e];if(Symbol.toStringTag in t){var n=f(t),r=d(n,Symbol.toStringTag);if(!r){var i=f(n);r=d(i,Symbol.toStringTag)}h[e]=r.get}}}));var p=n(5692);e.exports=function(e){return!!p(e)&&(s&&Symbol.toStringTag in e?function(e){var t=!1;return r(h,(function(n,r){if(!t)try{var i=n.call(e);i===r&&(t=i)}catch(e){}})),t}(e):u(a(e),8,-1))}},2064:function(e,t,n){"use strict";n.r(t),t.default={FOO:{type:"object|array",any_prop:":BAR"},BAR:{type:"number"}}},7302:function(e,t,n){"use strict";n.r(t),t.default={prefabs:["default.Postprocessing","retro.sound.default_ambient_audio_source","default.OrbitControlsComponent"],components:{sun:{name:"Sun",tag:"sun",params:{use_postfx:!1,debug_transform:!0,global_intensity:1,cycling:512,time:.2}},fog:{name:"Fog",params:{density:.02}},skybox:{name:"SkyBox",params:{cubemap:"res/retro/plugins/extra-assets/cubemaps/nalovardo_1",cubemap_format:"jpg"}}},children:[{components:{obj_table:{name:"MeshRenderer",params:{scale:.2,rotation:[0,3.14,0],position:[0,.35,0],src:"res/demo/models/wizard_table/scene.gltf"}},light:{name:"LightComponent",order:1,params:{type:"RectAreaLight",position:[0,2.2,0],rotation:[-1.5707,0,0],rect_width:.5,rect_height:.5,intensity:75}},light_controller:{order:2,inline:{props:{max_intensity:75},methods:{on_create:{body:'this.light = this.get_component("LightComponent");\n'},on_tick:{body:'this.sun = this.sun || this.find_component_of_type("Sun"); this.light.intensity = this.sun.time < 0.3 || this.sun.time > 0.7 ? this.max_intensity : 0;\n'}}}},title:{name:"TroikaTextComponent",params:{text:'"Wizard Table" by Asylum Nox\n',position:[.5,2,-.5],font_size:.05,rotation:[0,0,0]}},floating_title:{order:2,inline:{props:{max_intensity:75},methods:{on_create:{body:'this.title = this.get_component("TroikaTextComponent");\n'},on_tick:{body:"this.title.position = [0.5, 1.98 + (Math.sin(+new Date() / 1000 * 1) * 0.04),-0.5];\n"}}}}}}]}},6735:function(e,t,n){"use strict";n.r(t),t.default={type:"HexCellBodyBufferGeometry",params:{args:[.578,6]}}},3676:function(e,t,n){"use strict";n.r(t),t.default={type:"CircleBufferGeometry",params:{args:[.05,6]}}},1376:function(e,t,n){"use strict";n.r(t),t.default={type:"CircleBufferGeometry",params:{args:[.4,3]}}},2840:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n\n    vec4 rpos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = vec4(position.x * 2., position.y * 2., 1., 1.);\n\n}\n",fragmentShader:"#define NUM_OCTAVES 16\nuniform sampler2D map;\n#import retro.corelib\nvoid main(void) {\n    gl_FragColor = texture2D(map, vUv);\n    apply_bc(gl_FragColor);\n}\n",uniforms:{map:{type:"t"}}}}},7753:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n\n    vec4 rpos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = vec4(position.x * 2., position.y * 2., 1., 1.);\n}\n",fragmentShader:"#define NUM_OCTAVES 16\nuniform float time; uniform vec2 resolution; uniform vec2 mouse;\nmat3 rotX(float a) {\n    float c = cos(a);\n    float s = sin(a);\n    return mat3(\n        1, 0, 0,\n        0, c, -s,\n        0, s, c\n    );\n} mat3 rotY(float a) {\n    float c = cos(a);\n    float s = sin(a);\n    return mat3(\n        c, 0, -s,\n        0, 1, 0,\n        s, 0, c\n    );\n}\nfloat random(vec2 pos) {\n    return fract(sin(dot(pos.xy, vec2(1399.9898, 78.233))) * 43758.5453123);\n}\nfloat noise(vec2 pos) {\n    vec2 i = floor(pos);\n    vec2 f = fract(pos);\n    float a = random(i + vec2(0.0, 0.0));\n    float b = random(i + vec2(1.0, 0.0));\n    float c = random(i + vec2(0.0, 1.0));\n    float d = random(i + vec2(1.0, 1.0));\n    vec2 u = f * f * (3.0 - 2.0 * f);\n    return mix(a, b, u.x) + (c - a) * u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n}\nfloat fbm(vec2 pos) {\n    float v = 0.0;\n    float a = 0.5;\n    vec2 shift = vec2(100.0);\n    mat2 rot = mat2(cos(0.5), sin(0.5), -sin(0.5), cos(0.5));\n    for (int i=0; i<NUM_OCTAVES; i++) {\n        v += a * noise(pos);\n        pos = rot * pos * 2.0 + shift;\n        a *= 0.5;\n    }\n    return v;\n}\nvoid main(void) {\n    vec2 p = (gl_FragCoord.xy * 2.0 - resolution.xy) / min(resolution.x, resolution.y);\n\n    float t = 0.0, d;\n\n    float time2 = 3.0 * time / 2.0;\n\n    vec2 q = vec2(0.0);\n    q.x = fbm(p + 0.00 * time2);\n    q.y = fbm(p + vec2(1.0));\n    vec2 r = vec2(0.0);\n    r.x = fbm(p + 1.0 * q + vec2(1.7, 9.2) + 0.15 * time2 + mouse.x);\n    r.y = fbm(p + 1.0 * q + vec2(8.3, 2.8) + 0.126 * time2);\n    float f = fbm(p + r);\n    vec3 color = mix(\n        vec3(0.101961, 0.866667, 0.319608),\n        vec3(.666667, 0.598039, 0.366667),\n        clamp((f * f) * 4.0, 0.0, 1.0)\n    );\n\n    color = mix(\n        color,\n        vec3(0.34509803921, 0.06666666666, 0.83137254902),\n        clamp(length(q), 0.0, 1.0)\n    );\n\n\n    color = mix(\n        color,\n        vec3(0.1, -0.5, 0.1),\n        clamp(length(r.x), 0.0, 1.0)\n    );\n\n    color = (f *f * f + 0.6 * f * f + 0.5 * f) * color;\n\n    gl_FragColor = vec4(color, 1.0);\n}\n",uniforms:null}}},3467:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nvoid main () {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n}\n",fragmentShader:"varying vec2 vUv; uniform sampler2D map; void main(){\n  vec4 out_color = vec4(0., 0., 0., 0.);\n  vec4 map_color = texture2D(map, vUv);\n  out_color = mix(out_color, map_color, pow(map_color.a, 0.5));\n  gl_FragColor = map_color;\n}\n",transparent:!0,uniforms:{map:{type:"t"}}}}},8716:function(e,t,n){"use strict";n.r(t),t.default={type:"MeshBasicMaterial",params:{color:14144476,transparent:!0}}},7054:function(e,t,n){"use strict";n.r(t),t.default={code:'/*\nCopyright (c) 2012, Romain Dura romain@shazbits.com\nPermission to use, copy, modify, and/or distribute this software for any \npurpose with or without fee is hereby granted, provided that the above \ncopyright notice and this permission notice appear in all copies.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES \nWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF \nMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY \nSPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES \nWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN \nACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR \nIN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n*/\nvec3 CAST3(float x){\n  return vec3(x, x, x);\n}\nvec4 Desaturate(vec3 color, float Desaturation)\n{\n  vec3 grayXfer = vec3(0.3, 0.59, 0.11);\n  vec3 gray = CAST3(dot(grayXfer, color));\n  return vec4(mix(color, gray, Desaturation), 1.0);\n}\nvec3 RGBToHSL(vec3 color)\n{\n  vec3 hsl;\n  float fmin = min(min(color.r, color.g), color.b);\n  float fmax = max(max(color.r, color.g), color.b);\n  float delta = fmax - fmin;\n\n  hsl.z = (fmax + fmin) / 2.0;\n\n  if (delta == 0.0)\n  {\n    hsl.x = 0.0;\n    hsl.y = 0.0;\n  }\n  else\n  {\n    if (hsl.z < 0.5)\n      hsl.y = delta / (fmax + fmin);\n    else\n      hsl.y = delta / (2.0 - fmax - fmin);\n    \n    float deltaR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n    float deltaG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n    float deltaB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n    if (color.r == fmax )\n      hsl.x = deltaB - deltaG;\n    else if (color.g == fmax)\n      hsl.x = (1.0 / 3.0) + deltaR - deltaB;\n    else if (color.b == fmax)\n      hsl.x = (2.0 / 3.0) + deltaG - deltaR;\n    if (hsl.x < 0.0)\n      hsl.x += 1.0;\n    else if (hsl.x > 1.0)\n      hsl.x -= 1.0;\n  }\n  return hsl;\n}\nfloat HueToRGB(float f1, float f2, float hue)\n{\n  if (hue < 0.0)\n    hue += 1.0;\n  else if (hue > 1.0)\n    hue -= 1.0;\n  float res;\n  if ((6.0 * hue) < 1.0)\n    res = f1 + (f2 - f1) * 6.0 * hue;\n  else if ((2.0 * hue) < 1.0)\n    res = f2;\n  else if ((3.0 * hue) < 2.0)\n    res = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n  else\n    res = f1;\n  return res;\n}\nvec3 HSLToRGB(vec3 hsl)\n{\n  vec3 rgb;\n  \n  if (hsl.y == 0.0)\n    rgb = CAST3(hsl.z);\n  else\n  {\n    float f2;\n    \n    if (hsl.z < 0.5)\n      f2 = hsl.z * (1.0 + hsl.y);\n    else\n      f2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n      \n    float f1 = 2.0 * hsl.z - f2;\n    \n    rgb.r = HueToRGB(f1, f2, hsl.x + (1.0/3.0));\n    rgb.g = HueToRGB(f1, f2, hsl.x);\n    rgb.b= HueToRGB(f1, f2, hsl.x - (1.0/3.0));\n  }\n  \n  return rgb;\n}\n\nvec3 ContrastSaturationBrightness(vec3 color, float brt, float sat, float con)\n{\n  const float AvgLumR = 0.5;\n  const float AvgLumG = 0.5;\n  const float AvgLumB = 0.5;\n  \n  const vec3 LumCoeff = vec3(0.2125, 0.7154, 0.0721);\n  \n  vec3 AvgLumin = vec3(AvgLumR, AvgLumG, AvgLumB);\n  vec3 brtColor = color * brt;\n  vec3 intensity = CAST3(dot(brtColor, LumCoeff));\n  vec3 satColor = mix(intensity, brtColor, sat);\n  vec3 conColor = mix(AvgLumin, satColor, con);\n  return conColor;\n}\n\n#define BlendLinearDodgef(albedo_color, blend) (albedo_color + blend)\n#define BlendLinearBurnf(albedo_color, blend) max(albedo_color + blend - 1.0, 0.0)\n#define BlendLightenf(albedo_color, blend) max(blend, albedo_color)\n#define BlendDarkenf(albedo_color, blend) min(blend, albedo_color)\n#define BlendLinearLightf(albedo_color, blend) (blend < 0.5 ? BlendLinearBurnf(albedo_color, (2.0 * blend)) : BlendLinearDodgef(albedo_color, (2.0 * (blend - 0.5))))\n#define BlendScreenf(albedo_color, blend) (1.0 - ((1.0 - albedo_color) * (1.0 - blend)))\n#define BlendOverlayf(albedo_color, blend) (albedo_color < 0.5 ? (2.0 * albedo_color * blend) : (1.0 - 2.0 * (1.0 - albedo_color) * (1.0 - blend)))\n#define BlendSoftLightf(albedo_color, blend) ((blend < 0.5) ? (2.0 * albedo_color * blend + albedo_color * albedo_color * (1.0 - 2.0 * blend)) : (sqrt(albedo_color) * (2.0 * blend - 1.0) + 2.0 * albedo_color * (1.0 - blend)))\n#define BlendColorDodgef(albedo_color, blend) ((blend == 1.0) ? blend : min(albedo_color / (1.0 - blend), 1.0))\n#define BlendColorBurnf(albedo_color, blend) ((blend == 0.0) ? blend : max((1.0 - ((1.0 - albedo_color) / blend)), 0.0))\n#define BlendVividLightf(albedo_color, blend) ((blend < 0.5) ? BlendColorBurnf(albedo_color, (2.0 * blend)) : BlendColorDodgef(albedo_color, (2.0 * (blend - 0.5))))\n#define BlendPinLightf(albedo_color, blend) ((blend < 0.5) ? BlendDarkenf(albedo_color, (2.0 * blend)) : BlendLightenf(albedo_color, (2.0 *(blend - 0.5))))\n#define BlendHardMixf(albedo_color, blend) ((BlendVividLightf(albedo_color, blend) < 0.5) ? 0.0 : 1.0)\n#define BlendReflectf(albedo_color, blend) ((blend == 1.0) ? blend : min(albedo_color * albedo_color / (1.0 - blend), 1.0))\n#define BlendNormal(albedo_color, blend) (blend)\n#define BlendLighten BlendLightenf\n#define BlendDarken\t BlendDarkenf\n#define BlendMultiply(albedo_color, blend) (albedo_color * blend)\n#define BlendAverage(albedo_color, blend) ((albedo_color + blend) / 2.0)\n#define BlendAdd(albedo_color, blend) min(albedo_color + blend, CAST3(1.0))\n#define BlendSubstract(albedo_color, blend) max(albedo_color + blend - CAST3(1.0), CAST3(0.0))\n#define BlendDifference(albedo_color, blend) abs(albedo_color - blend)\n#define BlendNegation(albedo_color, blend) (CAST3(1.0) - abs(CAST3(1.0) - albedo_color - blend))\n#define BlendExclusion(albedo_color, blend) (albedo_color + blend - 2.0 * albedo_color * blend)\n#define BlendScreen(albedo_color, blend) vec3(BlendScreenf(albedo_color.r, blend.r), BlendScreenf(albedo_color.g, blend.g), BlendScreenf(albedo_color.b, blend.b))\n#define BlendOverlay(albedo_color, blend) vec3(BlendOverlayf(albedo_color.r, blend.r), BlendOverlayf(albedo_color.g, blend.g), BlendOverlayf(albedo_color.b, blend.b))\n#define BlendSoftLight(albedo_color, blend) vec3(BlendSoftLightf(albedo_color.r, blend.r), BlendSoftLightf(albedo_color.g, blend.g), BlendSoftLightf(albedo_color.b, blend.b))\n#define BlendHardLight(albedo_color, blend) BlendOverlay(blend, albedo_color)\n#define BlendColorDodge(albedo_color, blend) vec3(BlendColorDodgef(albedo_color.r, blend.r), BlendColorDodgef(albedo_color.g, blend.g), BlendColorDodgef(albedo_color.b, blend.b))\n#define BlendColorBurn(albedo_color, blend) vec3(BlendColorBurnf(albedo_color.r, blend.r), BlendColorBurnf(albedo_color.g, blend.g), BlendColorBurnf(albedo_color.b, blend.b))\n#define BlendLinearDodge BlendAdd\n#define BlendLinearBurn\tBlendSubstract\n#define BlendLinearLight(albedo_color, blend) vec3(BlendLinearLightf(albedo_color.r, blend.r), BlendLinearLightf(albedo_color.g, blend.g), BlendLinearLightf(albedo_color.b, blend.b))\n#define BlendVividLight(albedo_color, blend) vec3(BlendVividLightf(albedo_color.r, blend.r), BlendVividLightf(albedo_color.g, blend.g), BlendVividLightf(albedo_color.b, blend.b))\n#define BlendPinLight(albedo_color, blend) vec3(BlendPinLightf(albedo_color.r, blend.r), BlendPinLightf(albedo_color.g, blend.g), BlendPinLightf(albedo_color.b, blend.b))\n#define BlendHardMix(albedo_color, blend) vec3(BlendHardMixf(albedo_color.r, blend.r), BlendHardMixf(albedo_color.g, blend.g), BlendHardMixf(albedo_color.b, blend.b))\n#define BlendReflect(albedo_color, blend) vec3(BlendReflectf(albedo_color.r, blend.r), BlendReflectf(albedo_color.g, blend.g), BlendReflectf(albedo_color.b, blend.b))\n#define BlendGlow(albedo_color, blend) BlendReflect(blend, albedo_color)\n#define BlendPhoenix(albedo_color, blend) (min(albedo_color, blend) - max(albedo_color, blend) + CAST3(1.0))\n#define BlendOpacity(albedo_color, blend, F, O) mix(albedo_color, F(albedo_color, blend), O)\n#define BlendTint(albedo_color, blend)\t\t(CAST3(max(albedo_color.x, max(albedo_color.y, albedo_color.z))) * blend)\n/* Hue Blend mode creates the result color by combining the luminance and saturation of the albedo_color color with the hue of the blend color.*/\nvec3 BlendHue(vec3 albedo_color, vec3 blend)\n{\n  vec3 albedo_colorHSL = RGBToHSL(albedo_color);\n  return HSLToRGB(vec3(RGBToHSL(blend).r, albedo_colorHSL.g, albedo_colorHSL.b));\n}\n\n/* Saturation Blend mode creates the result color by combining the luminance and hue of the albedo_color color with the saturation of the blend color.*/\nvec3 BlendSaturation(vec3 albedo_color, vec3 blend)\n{\n  vec3 albedo_colorHSL = RGBToHSL(albedo_color);\n  return HSLToRGB(vec3(albedo_colorHSL.r, RGBToHSL(blend).g, albedo_colorHSL.b));\n}\n\n/* Color Mode keeps the brightness of the albedo_color color and applies both the hue and saturation of the blend color.*/\nvec3 BlendColor(vec3 albedo_color, vec3 blend)\n{\n  vec3 blendHSL = RGBToHSL(blend);\n  return HSLToRGB(vec3(blendHSL.r, blendHSL.g, RGBToHSL(albedo_color).b));\n}\n\n/* Luminosity Blend mode creates the result color by combining the hue and saturation of the albedo_color color with the luminance of the blend color.*/\nvec3 BlendLuminosity(vec3 albedo_color, vec3 blend)\n{\n  vec3 albedo_colorHSL = RGBToHSL(albedo_color);\n  return HSLToRGB(vec3(albedo_colorHSL.r, albedo_colorHSL.g, RGBToHSL(blend).b));\n}\n',uniforms:{test:{type:"float",value:1}}}},9966:function(e,t,n){"use strict";n.r(t),t.default={code:"// All components are in the range [0…1], including hue.\nvec3 rgb2hsv(vec3 c)\n{\n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n    vec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n    vec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n    float d = q.x - min(q.w, q.y);\n    float e = 1.0e-10;\n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}\n\n// All components are in the range [0…1], including hue.\nvec3 hsv2rgb(vec3 c)\n{\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}\n",uniforms:{test:{type:"f"}}}},2500:function(e,t,n){"use strict";n.r(t),t.default={code:"uniform float time; uniform vec2 resolution; uniform vec2 mouse; varying vec2 vUv; uniform float opacity; uniform float texture_crop; uniform float pixel_ratio; uniform vec3 camera_pos;\n\n#define PI 3.141592653589793\nfloat measure(vec4 color){\n    return ((color.x + color.y + color.z) / 3.) * color.a; \n}\nfloat measure_color(vec4 color){\n    return ((color.x + color.y + color.z) / 3.); \n}\nvec2 transform_uv(vec2 vuv, vec2 offset, vec2 scale){\n    float x = vuv.x;\n    float y = vuv.y;\n    x -= 0.5; \n    y -= 0.5;\n    x /= scale.x;\n    y /= scale.y;\n    x += 0.5;\n    y += 0.5;\n    x += offset.x;\n    y += offset.y;\n    return vec2(x, y);\n}\nfloat round_to(float n, float a){\n    float r = floor(n / a) * a;\n    return r;\n}\nfloat round_to2(float n, float a){\n    float r = ceil(n / a) * a;\n    return r;\n}\nvec2 rotate_uv(vec2 uv, vec2 pivot, float rotation) {\n    float cosa = cos(rotation);\n    float sina = sin(rotation);\n    uv -= pivot;\n    return vec2(\n        cosa * uv.x - sina * uv.y,\n        cosa * uv.y + sina * uv.x \n    ) + pivot;\n}\nfloat get_uv_radius(){\n    return sqrt(pow(vUv.x-0.5, 2.) + pow(vUv.y-0.5, 2.)) * 2.;\n} float get_viewport_radius(vec4 viewport_coords){\n    return 2. * sqrt(\n        pow((viewport_coords.x / (resolution.x * pixel_ratio)) - 0.5, 2.) + \n        pow((viewport_coords.y / (resolution.y * pixel_ratio)) - 0.5, 2.)\n    );\n}\nvoid draw_texture_tinted(inout vec4 out_color, sampler2D map, vec2 vuv, float opacity, vec3 tint_color, int tint_mode, vec2 offset, vec2 scale){\n    vec2 uv = transform_uv(vuv, offset, scale);\n    vec4 texture_color = texture2D(map, uv);\n    \n\n    if (tint_mode == 0){\n        if (uv.x > texture_crop && uv.y > texture_crop && uv.x < 1.-texture_crop && uv.y < 1.-texture_crop){\n            out_color = mix(out_color, texture_color, texture_color.a * opacity);\n        } \n    }\n    \n    if (tint_mode == 1){\n        out_color = vec4(mix(out_color.xyz, tint_color, texture_color.a * (1.-measure_color(texture_color)) * opacity), out_color.a);\n    }\n\n    if (tint_mode == 2){\n        out_color = vec4(mix(out_color.xyz, tint_color, texture_color.a * measure_color(texture_color) * opacity), out_color.a);\n    }\n\n    if (tint_mode == 3){\n        out_color = vec4(mix(out_color.xyz, tint_color, 1.-(measure_color(texture_color)) * opacity), out_color.a);\n    }\n\n    if (tint_mode == 4){\n        out_color = vec4(mix(out_color.xyz, tint_color, (measure_color(texture_color)) * opacity), out_color.a);\n    }\n}\nvoid apply_opacity(inout vec4 out_color){\n    out_color.a *= opacity;\n}\n/** BC*/ uniform vec2 bc; void apply_bc(inout vec4 out_color){\n    out_color.rgb /= out_color.a;\n    out_color.rgb = ((out_color.rgb - 0.5) * max(bc.y, 0.)) + 0.5;\n    out_color.rgb += bc.x;\n    out_color.rgb *= out_color.a;\n}\nvec3 get_normal(vec3 pos){\n  return normalize(vec3(pos.y, -pos.x, pos.z));\n}\nvec3 get_normal_inverted(vec3 pos){\n  return normalize(vec3(-pos.y, pos.x, pos.z));\n}\nvec3 rotate(vec3 v3, vec2 pivot, float rotation) {\n    float cosa = cos(rotation);\n    float sina = sin(rotation);\n    v3 -= vec3(pivot, 0.);\n    return vec3(\n        cosa * v3.x - sina * v3.y,\n        cosa * v3.y + sina * v3.x,\n        v3.z\n    ) + vec3(pivot, 0.);\n}\nvec2 rotateUV(vec2 uv, float rotation) {\n    float mid = 0.5;\n    return vec2(\n        cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n        cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\nvec2 rotateUV(vec2 uv, float rotation, vec2 mid) {\n    return vec2(\n      cos(rotation) * (uv.x - mid.x) + sin(rotation) * (uv.y - mid.y) + mid.x,\n      cos(rotation) * (uv.y - mid.y) - sin(rotation) * (uv.x - mid.x) + mid.y\n    );\n}\nvec2 rotateUV(vec2 uv, float rotation, float mid) {\n\n    if (rotation < 0.) {\n      rotation = (2. * 3.14) + rotation;\n    }\n\n    return vec2(\n      cos(rotation) * (uv.x - mid) + sin(rotation) * (uv.y - mid) + mid,\n      cos(rotation) * (uv.y - mid) - sin(rotation) * (uv.x - mid) + mid\n    );\n}\n",uniforms:{bc:{type:"v2",value:[0,1]},time:{type:"f",valie:0},pixel_ratio:{type:"f",value:1},resolution:{type:"v2",value:[1,1]},mouse:{type:"v2",value:[0,0]},opacity:{type:"f",value:1},texture_crop:{type:"f",value:-.1}}}},3275:function(e,t,n){"use strict";n.r(t),t.default={code:"\nconst vec2 svec = vec2(1.7320508, 1);\nfloat get_hex(vec2 p, float scale){\n  p -=0.5;\n  p *= scale;\n  float v = 1.-max(dot(abs(p.xy), svec/2.), abs(p.y*svec.y)) * 2.;\n  return v;\n}\nfloat get_hex2(vec2 p, float scale, float treshold){\n  float hex_uv = get_hex(p, scale);\n  return hex_uv > treshold ? 1. : 0.;\n}\nfloat get_hex_ring(vec2 p, float scale, float width){\n  float hex_uv_a = get_hex2(p, scale, 0.2);\n  float hex_uv_b = get_hex2(p, scale - (scale * width), 0.2);\n  if (hex_uv_a > 0.1){\n    if (hex_uv_b > 0.1){\n      return 0.;\n    } else {\n      return 1.;\n    }\n  } else {\n    if (hex_uv_b > 0.1){\n      return 1.;\n    } else {\n      return 0.;\n    }\n  }\n}\nvoid draw_test_hex(inout vec4 out_color){\n  float hex_uv = get_hex_ring(vUv, 1., 0.1);\n  out_color = mix(out_color, vec4(hex_uv), hex_uv);\n}\nfloat HexDist(vec2 p, vec2 id, float factor){\n    float t = time;\n    mat2 rot = mat2(cos(t-id.x/factor), -sin(t), sin(t), cos(t-id.x/factor));\n    p*=rot*1.3;\n    p = abs(p); // Copy over first quad into all\n    float c = dot(p, normalize(vec2(1,1.73)));// Dot to get correct angle\n    return max(c, p.x); // Find where the vert line and angled intersect\n}\nvec4 HexCoords(vec2 uv, float factor){\n    uv = vec2(uv.y, uv.x);\n    vec2 rep = vec2(1, 1.73);\n    vec2 h = rep*0.5;\n    vec2 a = mod(uv, rep)-h;\n    vec2 b = mod(uv-h, rep)-h;\n\n    \n    vec2 gv;\n  if(length(a) < length(b))\n      gv = a;\n    else \n        gv = b;\n    \n    vec2 id = (uv-gv)+factor;\n    float y = 0.5-HexDist(gv, id, factor);\n    return vec4(gv.x, y, id.x, id.y);\n}\n\n  \n"}},5069:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv; uniform float opacity; uniform float cell_scale;\nvoid main() {\n    vUv = uv;\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = pos;\n}\n",fragmentShader:"varying vec2 vUv; uniform float time; uniform vec2 resolution; uniform vec2 mouse; uniform float opacity; uniform sampler2D sheet; uniform vec2 grid; uniform vec2 current_frame; uniform int playing;\nvoid main(void) {\n  vec2 frame_frac = vec2(1./grid.x, 1./grid.y);\n\n  vec2 auv = vec2(\n    (vUv.x / grid.x) + (frame_frac.x * current_frame.x),\n    (vUv.y / grid.y) + (frame_frac.y * current_frame.y)\n  );\n  vec4 t_color = texture2D(sheet, auv);\n  gl_FragColor = t_color;\n  gl_FragColor.a = length(t_color.xyz);\n}\n",transparent:!0,blending:1,uniforms:{opacity:{type:"f",value:1},grid:{type:"v2",value:[1,1]},current_frame:{type:"f",value:[0,0]},sheet:{type:"t"}}}}},790:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{extend:"sprite",vertexShader:"uniform float rotation; uniform vec2 center;\n#include <common> #include <uv_pars_vertex> #include <fog_pars_vertex> #include <logdepthbuf_pars_vertex> #include <clipping_planes_pars_vertex>\n#import retro.corelib\nvoid main() {\n\n  #include <uv_vertex>\n  vUv = uv;\n\n  vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n  vec2 scale;\n  scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n  scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n  #ifndef USE_SIZEATTENUATION\n\n    bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n    if ( isPerspective ) scale *= - mvPosition.z;\n\n  #endif\n\n  vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n  vec2 rotatedPosition;\n  rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n  rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n  mvPosition.xy += rotatedPosition;\n\n  gl_Position = projectionMatrix * mvPosition;\n\n  #include <logdepthbuf_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",fragmentShader:"uniform sampler2D map; uniform float particle_size; uniform float particle_index; uniform float particle_degree; uniform float particle_speed; #import retro.corelib\nvoid main(void) {\n  vec2 uv = rotate_uv(vUv, vec2(0.5), -particle_degree);\n  gl_FragColor = texture2D(map, uv);\n  gl_FragColor.a = gl_FragColor.a * opacity;\n}\n",transparent:!0,blending:1,uniforms:{opacity:{type:"f",value:1},map:{type:"t"},particle_size:{type:"f",value:1},particle_index:{type:"f",value:0},particle_degree:{type:"f",value:1},particle_speed:{type:"f",value:1},color_a:{type:"#ffffff",value:1},color_n:{type:"v3",value:"#000000"}}}}},8363:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nuniform float opacity;\nuniform float cell_scale;\n\nvoid main() {\n    vUv = uv;\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = pos;\n}\n",fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\n    uniform highp sampler2D map;\n#else\n    uniform lowp sampler2D map;\n#endif\nuniform float sharpness_scale;\nuniform float contrast_kernel_radius;\nuniform float sharpness_kernel_radius;\nuniform float effect_power;\nuniform int contrast_kernel_azimuth_steps;\nuniform int contrast_kernel_polar_steps;\n\n#define TEXEL_SIZE 0.0025\n\n#import retro.blending\n\nvec4 get_texel(sampler2D map, vec2 uv, float step, float x, float y){\n    return texture2D(map, vec2(uv.x + step * x, uv.y + step * y));\n}\nvec4 get_sharpen_color2(vec2 uv, float scale){\n    int steps_i = contrast_kernel_azimuth_steps;\n    int steps_k = contrast_kernel_polar_steps;\n    float radius = 0.1 * sharpness_kernel_radius * scale * sharpness_scale;\n    vec4 sib_color = vec4(0., 0., 0., 0.);\n\n    for (int k = 0; k < steps_k; k++){\n        for (int i = 0; i < steps_i * (k + 1); i++){\n            float cp = float(i)/float(steps_i * (k + 1)) * 2. * 3.14;\n            float x = sin(cp) * (float(k)/float(steps_k)) * radius;\n            float y = cos(cp) * (float(k)/float(steps_k)) * radius;\n            vec4 col = get_texel(map, uv, TEXEL_SIZE, x, y);\n            float p = (col.x + col.y + col.z) / 3.;\n            sib_color += col * -2.;\n        }\n    }\n    float total_steps = float(steps_i * steps_k * steps_k);\n    vec4 albedo_color = get_texel(map, uv, TEXEL_SIZE, 0., 0.);\n    sib_color += albedo_color * total_steps * 1.275;\n\n    albedo_color.xyz = sib_color.xyz;\n    vec3 hsl = RGBToHSL(albedo_color.xyz);\n    hsl.y = 0.25;\n    albedo_color.xyz = HSLToRGB(hsl);\n    return albedo_color;\n}\nvec4 get_local_contrast2(vec2 uv){\n    int steps_i = contrast_kernel_azimuth_steps;\n    int steps_k = contrast_kernel_polar_steps;\n    float radius = 32. * contrast_kernel_radius;\n    float min_color = 1.;\n    float max_color = 0.;\n    float total_color = 0.;\n    for (int k = 0; k < steps_k; k++){\n        for (int i = 0; i < steps_i * (k + 1); i++){\n            float cp = float(i)/float(steps_i * (k + 1)) * 2. * 3.14;\n            float x = sin(cp) * (float(k)/float(steps_k)) * radius;\n            float y = cos(cp) * (float(k)/float(steps_k)) * radius;\n            vec4 col = get_texel(map, uv, TEXEL_SIZE, x, y);\n            float p = (col.x + col.y + col.z) / 3.;\n            min_color = min(min_color, p);\n            max_color = max(max_color, p);\n            total_color += p;\n        }\n    }\n    float average_color = total_color / float(steps_i * steps_k * steps_k);\n    float local_contrast = abs(min_color - average_color) +  abs(average_color - max_color);\n    local_contrast = clamp(local_contrast, 0., 1.);\n    return vec4(\n        min_color,\n        average_color,\n        max_color,\n        local_contrast\n    );\n}\nvec4 get_local_contrast(vec2 uv){\n    int steps_i = 2;\n    int steps_k = 2;\n    float radius = 32. * contrast_kernel_radius;\n    float total = 0.;\n    for (int k = 0; k < steps_k; k++){\n        for (int i = 0; i < steps_i * (k + 1); i++){\n            float cp = float(i)/float(steps_i * (k + 1)) * 2. * 3.14;\n            float x = sin(cp) * (float(k)/float(steps_k)) * radius;\n            float y = cos(cp) * (float(k)/float(steps_k)) * radius;\n            vec4 ctrst = get_local_contrast2(vec2(uv.x + TEXEL_SIZE * x, uv.y + TEXEL_SIZE * y));\n            total += ctrst.a;\n        }\n    }\n    float average_contrast = total / float(steps_i * steps_k * steps_k);\n    return vec4(\n        pow(clamp(average_contrast * 1., 0., 1.), 0.5),\n        pow(clamp(average_contrast * 1., 0., 1.), 0.5),\n        pow(clamp(average_contrast * 1., 0., 1.), 0.5),\n        pow(clamp(average_contrast * 1., 0., 1.), 0.5)\n    );\n}\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n    float power = 1. * effect_power;\n    vec4 local_contrast = get_local_contrast(uv);\n    vec4 albedo_color = texture2D(map, uv);\n    vec4 sharpen_color = get_sharpen_color2(uv, 1. - local_contrast.a);\n    float alpha = (1. - local_contrast.a) * power;\n    outputColor = albedo_color;\n    outputColor.xyz = mix(outputColor.xyz, BlendLuminosity(outputColor.xyz, sharpen_color.xyz), clamp(alpha * 0.6666, 0., 1.));\n\n    //if (uv.x>0.33){\n    //  outputColor.xyz = albedo_color.xyz;\n    //}\n    //if (uv.x>0.66){\n    //  outputColor.xyz = BlendLuminosity(outputColor.xyz, sharpen_color.xyz);\n    //}\n}\n",uniforms:{sharpness_kernel_radius:{type:"f",value:1},sharpness_scale:{type:"f",value:.5},contrast_kernel_polar_steps:{type:"f",value:4},contrast_kernel_azimuth_steps:{type:"f",value:3},contrast_kernel_radius:{type:"f",value:1},effect_power:{type:"f",value:.6}}}}},3888:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nuniform float opacity;\nuniform float cell_scale;\n\nvoid main() {\n    vUv = uv;\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = pos;\n}\n",fragmentShader:'// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n//----------------------------------------------------------------------------------\n// File:\t\t\t\tes3-kepler\\FXAA\\assets\\shaders/FXAA_DefaultES.frag\n// SDK Version: v3.00\n// Email:\t\t\t gameworks@nvidia.com\n// Site:\t\t\t\thttp://developer.nvidia.com/\n//\n// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//\t* Redistributions of source code must retain the above copyright\n//\t\tnotice, this list of conditions and the following disclaimer.\n//\t* Redistributions in binary form must reproduce the above copyright\n//\t\tnotice, this list of conditions and the following disclaimer in the\n//\t\tdocumentation and/or other materials provided with the distribution.\n//\t* Neither the name of NVIDIA CORPORATION nor the names of its\n//\t\tcontributors may be used to endorse or promote products derived\n//\t\tfrom this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS\\\'\\\' AND ANY\n// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n// PURPOSE ARE DISCLAIMED.\tIN NO EVENT SHALL THE COPYRIGHT OWNER OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n//----------------------------------------------------------------------------------\n\n/* glsl */\nuniform sampler2D map;\n\n#define FXAA_PC 1\n#define FXAA_GLSL_100 1\n#define FXAA_QUALITY_PRESET 12\n\n#define FXAA_GREEN_AS_LUMA 1\n\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_PC_CONSOLE\n    //\n    // The console algorithm for PC is included\n    // for developers targeting really low spec machines.\n    // Likely better to just run FXAA_PC, and use a really low preset.\n    //\n    #define FXAA_PC_CONSOLE 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_120\n    #define FXAA_GLSL_120 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_130\n    #define FXAA_GLSL_130 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_HLSL_3\n    #define FXAA_HLSL_3 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_HLSL_4\n    #define FXAA_HLSL_4 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_HLSL_5\n    #define FXAA_HLSL_5 0\n#endif\n/*==========================================================================*/\n#ifndef FXAA_GREEN_AS_LUMA\n    //\n    // For those using non-linear color,\n    // and either not able to get luma in alpha, or not wanting to,\n    // this enables FXAA to run using green as a proxy for luma.\n    // So with this enabled, no need to pack luma in alpha.\n    //\n    // This will turn off AA on anything which lacks some amount of green.\n    // Pure red and blue or combination of only R and B, will get no AA.\n    //\n    // Might want to lower the settings for both,\n    //\t\tfxaaConsoleEdgeThresholdMin\n    //\t\tfxaaQualityEdgeThresholdMin\n    // In order to insure AA does not get turned off on colors\n    // which contain a minor amount of green.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_GREEN_AS_LUMA 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_EARLY_EXIT\n    //\n    // Controls algorithm\\\'s early exit path.\n    // On PS3 turning this ON adds 2 cycles to the shader.\n    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n    // Turning this off on console will result in a more blurry image.\n    // So this defaults to on.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_EARLY_EXIT 1\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_DISCARD\n    //\n    // Only valid for PC OpenGL currently.\n    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n    //\n    // 1 = Use discard on pixels which don\\\'t need AA.\n    //\t\t For APIs which enable concurrent TEX+ROP from same surface.\n    // 0 = Return unchanged color on pixels which don\\\'t need AA.\n    //\n    #define FXAA_DISCARD 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_FAST_PIXEL_OFFSET\n    //\n    // Used for GLSL 120 only.\n    //\n    // 1 = GL API supports fast pixel offsets\n    // 0 = do not use fast pixel offsets\n    //\n    #ifdef GL_EXT_gpu_shader4\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifndef FXAA_FAST_PIXEL_OFFSET\n        #define FXAA_FAST_PIXEL_OFFSET 0\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GATHER4_ALPHA\n    //\n    // 1 = API supports gather4 on alpha channel.\n    // 0 = API does not support gather4 on alpha channel.\n    //\n    #if (FXAA_HLSL_5 == 1)\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifndef FXAA_GATHER4_ALPHA\n        #define FXAA_GATHER4_ALPHA 0\n    #endif\n#endif\n\n\n/*============================================================================\n                        FXAA QUALITY - TUNING KNOBS\n------------------------------------------------------------------------------\nNOTE the other tuning knobs are now in the shader function inputs!\n============================================================================*/\n#ifndef FXAA_QUALITY_PRESET\n    //\n    // Choose the quality preset.\n    // This needs to be compiled into the shader as it effects code.\n    // Best option to include multiple presets is to\n    // in each shader define the preset, then include this file.\n    //\n    // OPTIONS\n    // -----------------------------------------------------------------------\n    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n    // 39\t\t\t - no dither, very expensive\n    //\n    // NOTES\n    // -----------------------------------------------------------------------\n    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n    // 13 = about same speed as FXAA 3.9 and better than 12\n    // 23 = closest to FXAA 3.9 visually and performance wise\n    //\t_ = the lowest digit is directly related to performance\n    // _\t= the highest digit is directly related to style\n    //\n    #define FXAA_QUALITY_PRESET 12\n#endif\n\n\n/*============================================================================\n\n                          FXAA QUALITY - PRESETS\n\n============================================================================*/\n\n/*============================================================================\n                    FXAA QUALITY - MEDIUM DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n\n/*============================================================================\n                    FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n/*============================================================================\n                    FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n\n\n/*============================================================================\n\n                                API PORTING\n\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n    #define FxaaBool bool\n    #define FxaaDiscard discard\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 ivec2\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTex sampler2D\n#else\n    #define FxaaBool bool\n    #define FxaaDiscard clip(-1)\n    #define FxaaFloat float\n    #define FxaaFloat2 float2\n    #define FxaaFloat3 float3\n    #define FxaaFloat4 float4\n    #define FxaaHalf half\n    #define FxaaHalf2 half2\n    #define FxaaHalf3 half3\n    #define FxaaHalf4 half4\n    #define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n    // Requires,\n    //\t#version 120\n    // And at least,\n    //\t#extension GL_EXT_gpu_shader4 : enable\n    //\t(or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n    #if (FXAA_FAST_PIXEL_OFFSET == 1)\n        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n    #else\n        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n    #endif\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n    // Requires "#version 130" or better\n    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_3 == 1)\n    #define FxaaInt2 float2\n    #define FxaaTex sampler2D\n    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_4 == 1)\n    #define FxaaInt2 int2\n    struct FxaaTex { SamplerState smpl; Texture2D tex; };\n    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_HLSL_5 == 1)\n    #define FxaaInt2 int2\n    struct FxaaTex { SamplerState smpl; Texture2D tex; };\n    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n#endif\n\n\n/*============================================================================\n                  GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n\n\n\n/*============================================================================\n\n                            FXAA3 QUALITY - PC\n\n============================================================================*/\n#if (FXAA_PC == 1)\n/*--------------------------------------------------------------------------*/\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy_} = upper left of pixel\n    // {_zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //\t\t {__a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //\t Where N ranges between,\n    //\t\t N = 0.50 (default)\n    //\t\t N = 0.33 (sharper)\n    // {x__} = -N/screenWidthInPixels\n    // {_y_} = -N/screenHeightInPixels\n    // {_z_} =\tN/screenWidthInPixels\n    // {__w} =\tN/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x__} = -2.0/screenWidthInPixels\n    // {_y_} = -2.0/screenHeightInPixels\n    // {_z_} =\t2.0/screenWidthInPixels\n    // {__w} =\t2.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x__} =\t8.0/screenWidthInPixels\n    // {_y_} =\t8.0/screenHeightInPixels\n    // {_z_} = -4.0/screenWidthInPixels\n    // {__w} = -4.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //\t 1.00 - upper limit (softer)\n    //\t 0.75 - default amount of filtering\n    //\t 0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //\t 0.25 - almost off\n    //\t 0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //\t 0.333 - too little (faster)\n    //\t 0.250 - low quality\n    //\t 0.166 - default\n    //\t 0.125 - high quality\n    //\t 0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //\t 0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //\t 0.0625 - high quality (faster)\n    //\t 0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //\t Likely want to set this to zero.\n    //\t As colors that are mostly not-green\n    //\t will appear very dark in the green channel!\n    //\t Tune by looking at mostly non-green content,\n    //\t then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //\t Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n    //\t Due to the PS3 being ALU bound,\n    //\t there are only three safe values here: 2 and 4 and 8.\n    //\t These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //\t 8.0 is sharper (default!!!)\n    //\t 4.0 is softer\n    //\t 2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //\t Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n    //\t Due to the PS3 being ALU bound,\n    //\t there are only two safe values here: 1/4 and 1/8.\n    //\t These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //\t 0.125 leaves less aliasing, but is softer (default!!!)\n    //\t 0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3,\n    // PS3 was simplified to avoid more shader instructions.\n    //\t 0.06 - faster but more aliasing in darks\n    //\t 0.05 - default\n    //\t 0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //\t Likely want to set this to zero.\n    //\t As colors that are mostly not-green\n    //\t will appear very dark in the green channel!\n    //\t Tune by looking at mostly non-green content,\n    //\t then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //\n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immediates.\n    // Immediates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    #if (FXAA_GATHER4_ALPHA == 1)\n        #if (FXAA_DISCARD == 0)\n            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n            #if (FXAA_GREEN_AS_LUMA == 0)\n                #define lumaM rgbyM.w\n            #else\n                #define lumaM rgbyM.y\n            #endif\n        #endif\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n        #else\n            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n        #endif\n        #if (FXAA_DISCARD == 1)\n            #define lumaM luma4A.w\n        #endif\n        #define lumaE luma4A.z\n        #define lumaS luma4A.x\n        #define lumaSE luma4A.y\n        #define lumaNW luma4B.w\n        #define lumaN luma4B.z\n        #define lumaW luma4B.x\n    #else\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            #define lumaM rgbyM.w\n        #else\n            #define lumaM rgbyM.y\n        #endif\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n        #endif\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        #if (FXAA_DISCARD == 1)\n            FxaaDiscard;\n        #else\n            return rgbyM;\n        #endif\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_GATHER4_ALPHA == 0)\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n        #endif\n    #else\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    #if (FXAA_DISCARD == 1)\n        return FxaaTexTop(tex, posM);\n    #else\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n    #endif\n}\n/*==========================================================================*/\n#endif\n\nuniform vec2 resolution2;\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n  outputColor = FxaaPixelShader(\n    vUv,\n    vec4(0.0),\n    map,\n    map,\n    map,\n    resolution2,\n    vec4(0.0),\n    vec4(0.0),\n    vec4(0.0),\n    0.75,\n    0.166,\n    0.0833,\n    0.0,\n    0.0,\n    0.0,\n    vec4(0.0)\n  );\n\n  // TODO avoid querying texture twice for same texel\n  outputColor.a = texture2D(map, vUv).a;\n}\n',uniforms:{resolution2:{type:"v2",value:[1,1]}}}}},6250:function(e,t,n){"use strict";n.r(t),t.default={type:"ShaderMaterial",params:{vertexShader:"varying vec2 vUv;\nuniform float opacity;\nuniform float cell_scale;\n\nvoid main() {\n    vUv = uv;\n    vec4 pos = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    gl_Position = pos;\n}\n",fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\n    uniform highp sampler2D map;\n#else\n    uniform lowp sampler2D map;\n#endif\n\nuniform sampler2D noise_texture;  \nuniform sampler2D normal_buffer;\nuniform sampler2D depth_buffer;\nuniform float aspect;\n\n#import retro.blending\n#import retro.convert\n\nvec3 decode_normal(vec3 n){\n  return vec3(\n    (n.x * 2.) - 1.,\n    (n.y * 2.) - 1.,\n    (n.z * 2.) - 1.\n  );\n}\n\nvec3 czm_saturation(vec3 rgb, float adjustment)\n{\n    // Algorithm from Chapter 16 of OpenGL Shading Language\n    const vec3 W = vec3(0.2125, 0.7154, 0.0721);\n    vec3 intensity = vec3(dot(rgb, W));\n    return mix(intensity, rgb, adjustment);\n}\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n    outputColor = inputColor;\n\n    vec3 rn_local = texture2D(normal_buffer, uv).xyz;\n    vec3 n_local = decode_normal(rn_local);\n\n    float noise_scale = 32.;\n    float noise_speed = 4.;\n    float noise = 0.5 + (mod(texture2D(noise_texture, vec2(uv.x * noise_scale, uv.y * noise_scale * aspect)).r + (time * noise_speed), 1.)) * 0.5;\n\n    float uv_step = 1. / 6.;\n    float steps_a = 6.;\n    float steps_b = 3.;\n    float acml_luma_corr = 1. / (steps_a * steps_b / 2.);\n    vec3  acml_color = vec3(1., 1., 1.) * acml_luma_corr;\n\n    /*factors*/\n    float acml_color_f = 4.;\n\n    for (int i = 0; i < int(steps_a); i++){\n        for (int j = 0; j < int(steps_b); j++){\n          float rp = float(j) / steps_b;\n          float rad_progress = 2. * 3.14 * (float(i) / steps_a); \n          float rad_dist = rp * uv_step * noise;\n          float uv_dx = sin(rad_progress) * rad_dist;\n          float uv_dy = cos(rad_progress) * rad_dist * aspect;\n          vec2 probe_uv = uv + vec2(uv_dx, uv_dy);\n          vec3 n_alien = decode_normal(texture2D(normal_buffer, probe_uv).xyz);\n          vec3 c_alien = texture2D(map, probe_uv).xyz;\n          float dir_factor = pow(1. - (length(n_local + n_alien)/2.), 2.);\n          acml_color += c_alien * acml_luma_corr * dir_factor * acml_color_f;\n        }\n      }\n\n      acml_color = normalize(acml_color), 5.;\n      outputColor.xyz = BlendSoftLight(inputColor.xyz, acml_color);\n\n}\n",transparent:!0,blending:1,uniforms:{opacity:{type:"f",value:1},aspect:{type:"f",value:1},normal_buffer:{type:"t"},depth_buffer:{type:"t"},noise_texture:{type:"t"}}}}},1016:function(e,t,n){"use strict";n.r(t),t.default={components:[{name:"MeshComponent",params:{debug_transform:!1,position:[-2.15,0,1],rotation:[0,1.57,0],geometry:["url:res/retro/plugins/extra-assets/models/little_tokyo/little_tokyo.obj",.125],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/little_tokyo/little_tokyo.mtl",transparent:!1,doubleside:!0}]}}]}},1494:function(e,t,n){"use strict";n.r(t),t.default={components:[{enabled:!0,name:"MeshComponent",tag:"cool_box",params:{position:[0,.5,0],geometry:["BoxBufferGeometry",[1,1,1]],material:["PBRMaterial",{color:"#ffffff",pbr:"res/retro/plugins/extra-assets/pbr/storage-container2-bl/storage-container2"}]}},{name:"Collider",params:{collider_type:"box",sphere_radius:3,box_size:[1.1,1.1,1.1]}},{name:"BushController",inline:{props:{tick_rate:30,shake_speed:1,shake_ampl:1,rotation_speed:1,offset:[0,.6,0]},construct:"console.log(this)\n",methods:{on_tick:{args:["time_delta"],body:'let date = +new Date(); let mesh_comp = this.get_component("MeshComponent"); if (mesh_comp){\n  mesh_comp.position = [\n    mesh_comp.position[0] + this.offset[0],\n    (Math.sin(date * 0.001 * this.shake_speed) * 0.1 * this.shake_ampl) + this.offset[1],\n    mesh_comp.position[2] + this.offset[2]\n  ]\n\n  mesh_comp.rotation = [\n    mesh_comp.rotation[0],\n    Math.sin(date * 0.001 * this.rotation_speed),\n    mesh_comp.rotation[2],\n  ]\n}\n'},on_start:{body:'console.log("Hello from inline component! The application has been just started. Good luck!")\n'}}},params:{shake_speed:.2,shake_ampl:1,rotation_speed:.1}}]}},2673:function(e,t,n){"use strict";n.r(t),t.default={components:[{name:"MeshComponent",tag:"",params:{position:[-2,0,0],scale:[1,1,1],rotation:[0,0,0],geometry:["BoxBufferGeometry",[1,1,1,1]],material:["PBRMaterial",{color:"#ffffff",pbr:"res/retro/plugins/extra-assets/pbr/storage-container2-bl/storage-container2"}]}}]}},2971:function(e,t,n){"use strict";n.r(t),t.default={children:{lighting:{components:{ceil_light:{name:"LightComponent",tag:"ceil_light",params:{position:[0,1.8,.5],rotation:[-1.5707,0,0],type:"PointLight",distance:6,decay:1.5,intensity:1.1,rect_width:.6,rect_height:.3}}}},box:{components:{floor:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[0,0,0],rotation:[-1.5707,0,0],geometry:["BoxBufferGeometry",[2,2,.01]],material:["MeshLambertMaterial",{color:"#ffffff",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},ceil:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[0,2,0],rotation:[1.5707,0,0],geometry:["BoxBufferGeometry",[2,2,.01]],material:["MeshLambertMaterial",{color:"#ffffff",emissive:"#c5c3c9",emissiveIntensity:.5,metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},back_wall:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[0,1,-1],rotation:[0,0,0],geometry:["BoxBufferGeometry",[2,2,.01]],material:["MeshLambertMaterial",{color:"#ffffff",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},red_wall:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[-1,1,0],rotation:[0,1.5707,0],geometry:["BoxBufferGeometry",[2,2,.01]],material:["MeshLambertMaterial",{color:"#f44336",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},green_wall:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[1,1,0],rotation:[0,-1.5707,0],geometry:["BoxBufferGeometry",[2,2,.01]],material:["MeshLambertMaterial",{color:"#4caf50",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}}}},props:{components:{box_a:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[.4,.28,.3],rotation:[0,-.6,0],geometry:["BoxBufferGeometry",[.56,.56,.56]],material:["MeshLambertMaterial",{color:"#ffffff",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},box_c:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[.4,.65,.3],rotation:[0,-.1,0],geometry:["BoxBufferGeometry",[.2,.2,.2]],material:["MeshLambertMaterial",{color:"#eeeeee",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}},box_b:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[-.3,.7,-.3],rotation:[0,.7,0],geometry:["BoxBufferGeometry",[.5,1.4,.5]],material:["MeshLambertMaterial",{color:"#ffffff",metalness:.2,roughness:.8,reflectivity:0,shininess:0,side:2}]}},sphere_a:{name:"MeshComponent",params:{cast_shadow:!0,recieve_shadow:!0,position:[-.36,.26,.28],rotation:[0,0,0],geometry:["SphereBufferGeometry",[.26,32,16]],material:["MeshLambertMaterial",{color:"#ffffff",metalness:0,roughness:.8,reflectivity:0,shininess:0,side:2}]}}}}}}},2812:function(e,t,n){"use strict";n.r(t),t.default={components:{body:{name:"MeshComponent",params:{debug_transform:!1,rotation:[0,1.5707,0],recieve_shadow:!1,cast_shadow:!1,geometry:["url:res/retro/plugins/extra-assets/models/fluorescent_lamp_a1/lamp.obj",.125],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/fluorescent_lamp_a1/lamp.mtl",allow_transparency:!1,doubleside:!1,emissive_intensity:10}]}},light:{name:"LightComponent",enabled:!0,params:{position:[0,-.1,0],rotation:[-1.5707,0,0],type:"RectAreaLight",intensity:150,distance:5,rect_width:1,rect_height:.1,color:"#eee0e5"}},light2:{name:"LightComponent",enabled:!0,params:{position:[0,-.1,0],rotation:[-1.5707,0,0],type:"PointLight",intensity:.8,distance:4,color:"#eee0e5"}},sfx_ambient:{name:"AudioComponent",params:{src:"res/retro/plugins/extra-assets/ambient_sound/fluorescent_lamp_ambience_a1",autoplay:!0,max_distance:4,loop:!0,volume:.7}}}}},560:function(e,t,n){"use strict";n.r(t),t.default={components:{foggy:{enabled:!0,name:"PartykalsComponent",tag:"",params:{position:[0,0,0],rotation:[0,0,0],scale:[0,0,0],particles_global_size:300,particles_blending:1,particles_ttl:5,particles_gravity:-1,particles_start_color:"#ffffff",particles_end_color:"#eeeeee",particles_start_alpha:0,particles_end_alpha:.666,particles_rotation_speed:"rand:MinMaxRandomizer?-1;1",particles_velocity:"rand:BoxRandomizer?[-39, 0, -37];[-39, 0, 39]",particles_velocity_bonus:[0,0,0],particles_offset:"rand:BoxRandomizer?[-300, 0, -300];[300, 0, -300]",particles_acceleration:"rand:BoxRandomizer?[-1,0, 5];[1, 0, 15]",particle_start_size:"rand:MixMaxRandomizer?2;4",particle_end_size:"rand:MixMaxRandomizer?4;2",particles_texture:"res/retro/smoke_a.png",system_particles_count:5,emitters:[{on_interval:"rand:MinMaxRandomizer?0;2",interval:.5}]}}}}},1098:function(e,t,n){"use strict";n.r(t),t.default={children:{box1:{prefab:"retro.actors.test_box_1"},scene:{components:{ground:{enabled:!0,name:"MeshComponent",tag:"ground_mesh",params:{recieve_shadow:!0,cast_shadow:!1,position:[0,0,0],geometry:["CircleGeometry",[3,6]],rotation:[-1.5707,0,0],material:["PBRMaterial",{color:"#daefe5",pbr:"res/retro/plugins/extra-assets/pbr/dusty_groun_gravel_a1/t",file_format:"jpg",tiling:6}]}},caption_a:{enabled:!0,name:"TroikaTextComponent",params:{text:"Hello World!",font_size:.36,color:"#ffffff",anchor_x:0,position:[-.75,2.5,0]}},time_component:{inline:{methods:{on_tick:{body:'let caption = this.get_component("TroikaTextComponent"); caption.text = "test"\n'}}},params:{tick_rate:1}}}},snow_fx:{prefab:"retro.snow_fx",components:{snow:{params:{particles_global_size:.3,particles_end_color:"#ffffff"}}}}}}},328:function(e,t,n){"use strict";n.r(t),t.default={children:{sound:{components:{room_ambience:{name:"AudioComponent",params:{position:[2,1.5,2],src:"res/retro/plugins/extra-assets/ambient_sound/house_ambience_a1",autoplay:!0,max_distance:6,loop:!0,volume:.5}},suburb_ambience:{name:"AudioComponent",params:{src:"res/retro/plugins/extra-assets/ambient_sound/suburban_night_a1",autoplay:!0,spatial:!1,loop:!0,volume:.5}}}},room:{components:{floor:{name:"MeshComponent",params:{recieve_shadow:!0,cast_shadow:!0,rotation:[-1.5707,0,0],geometry:["PlaneBufferGeometry",[5,5,1]],material:["PBRMaterial",{pbr:"res/retro/plugins/extra-assets/pbr/angled_tile_floor_a1/a",file_format:"jpg",tiling:[4,4],color:"#ffffff"}]}},ceil:{name:"MeshComponent",params:{recieve_shadow:!0,cast_shadow:!0,rotation:[1.5707,0,0],position:[0,3,0],geometry:["PlaneBufferGeometry",[5,5,1]],material:["PBRMaterial",{pbr:"res/retro/plugins/extra-assets/pbr/sprayed_wall_a1/sprayed_wall",file_format:"jpg",tiling:[12,12],color:"#ffffff"}]}},wall_a:{name:"MeshComponent",params:{recieve_shadow:!0,cast_shadow:!0,rotation:[0,0,0],position:[0,1.5,-2.5],geometry:["PlaneBufferGeometry",[5,3,1]],material:["PBRMaterial",{pbr:"res/retro/plugins/extra-assets/pbr/sprayed_wall_a1/sprayed_wall",file_format:"jpg",tiling:[12,7.2],reflectivity:.1,color:"#ffffff"}]}},wall_b:{name:"MeshComponent",params:{recieve_shadow:!0,cast_shadow:!0,rotation:[0,1.5707,0],position:[-2.5,1.5,0],geometry:["PlaneBufferGeometry",[5,3,1]],material:["PBRMaterial",{pbr:"res/retro/plugins/extra-assets/pbr/sprayed_wall_a1/sprayed_wall",file_format:"jpg",tiling:[12,7.2],reflectivity:.1,color:"#ffffff"}]}}}},deco:{components:{metal_cabinet_1:{name:"MeshComponent",params:{debug_transform:!1,position:[-2.15,0,1],rotation:[0,1.57,0],geometry:["url:res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.obj",.125],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.mtl",transparent:!1,doubleside:!0}]}},metal_cabinet_2:{name:"MeshComponent",params:{debug_transform:!1,position:[0,0,-2.15],rotation:[0,0,0],geometry:["url:res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.obj",.125],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.mtl",transparent:!1,doubleside:!0,color:"#8fafba"}]}},metal_cabinet_3:{name:"MeshComponent",params:{debug_transform:!1,position:[1.2,0,-2.15],rotation:[0,.02,0],scale:[-1,1,1],geometry:["url:res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.obj",.125],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/metal_cabinet_a1/metal_cabinet_a1.mtl",transparent:!1,doubleside:!0,color:"#ddd5ea"}]}},table:{name:"MeshComponent",params:{debug_transform:!1,position:[-.2,0,.2],rotation:[0,.2,0],scale:[1,1,1],geometry:["url:res/retro/plugins/extra-assets/models/dining_table_concrete_a1/dining_table_concrete_a1.obj",.113],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/dining_table_concrete_a1/dining_table_concrete_a1.mtl",transparent:!1,doubleside:!0}]}},glasses_1:{name:"MeshComponent",params:{debug_transform:!1,position:[0,.664,-.3],rotation:[0,1,0],geometry:["url:res/retro/plugins/extra-assets/models/free_sunglasses_set_a1/vogue_1.obj",1],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/free_sunglasses_set_a1/vogue_1.mtl",transparent:!0,doubleside:!0}]}}}},bio_chamber:{position:[-.2,.672,.4],rotation:[0,.1,0],components:{body:{name:"MeshComponent",params:{debug_transform:!1,geometry:["url:res/retro/plugins/extra-assets/models/bio_chamber_unit_a1/bio_chamber_unit_a1.obj",.1],material:["AssetMaterial",{src:"res/retro/plugins/extra-assets/models/bio_chamber_unit_a1/bio_chamber_unit_a1.mtl",transparent:!1,doubleside:!0}]}},sound:{name:"AudioComponent",params:{src:"res/retro/plugins/extra-assets/ambient_sound/transformer_hum_a1",volume:.15,loop:!0,autoplay:!0,spatial:!0,max_distance:1,ref_distance:1}}}},lights:{children:{lamp_a:{prefab:"retro.examples.fluorescent_lamp",position:[0,2.8,-1]},lamp_b:{prefab:"retro.examples.fluorescent_lamp",position:[0,2.8,1]}},components:{lambs_controller:{order:1,params:{tick_rate:6,max_intensity:70,min_intensity:60},inline:{methods:{on_create:{body:'let lights = this.find_child_components_of_type("LightComponent");\nthis.lights = lights\n'},on_tick:{body:'this.lights.forEach((light)=>{\n  light.intensity = Math.random() * (this.max_intensity - this.min_intensity) + this.min_intensity;\n  if (light.type === "PointLight"){\n    light.intensity *= 0.005;\n  }\n  if (Math.random() > 0.97){\n    light.intensity = 0\n  }\n});\n'}}}}}}}}},7341:function(e,t,n){"use strict";n.r(t),t.default={children:{tokyo:{prefab:"retro.actors.little_tokyo"},scene:{components:{ground:{enabled:!0,name:"MeshComponent",tag:"ground_mesh",params:{recieve_shadow:!0,cast_shadow:!1,position:[0,0,0],geometry:["CircleGeometry",[3,6]],rotation:[-1.5707,0,0],material:["PBRMaterial",{color:"#daefe5",pbr:"res/retro/plugins/extra-assets/pbr/dusty_groun_gravel_a1/t",file_format:"jpg",tiling:6}]}},caption_a:{enabled:!0,name:"TroikaTextComponent",params:{text:"Hello World!",font_size:.36,color:"#ffffff",anchor_x:0,position:[-.75,2.5,0]}},time_component:{inline:{methods:{on_tick:{body:'let caption = this.get_component("TroikaTextComponent"); caption.text = datetime()\n'}}},params:{tick_rate:1}}}},snow_fx:{prefab:"retro.snow_fx",components:{snow:{params:{particles_global_size:.3,particles_end_color:"#ffffff"}}}}}}},7481:function(e,t,n){"use strict";n.r(t),t.default={prefabs:["default.Gizmos","default.InputComponent","default.ClockComponent","default.Renderer","default.Animator","default.AudioListener"],components:{camera:{name:"CameraComponent",params:{position:[0,0,5]}}}}},1329:function(e,t,n){"use strict";n.r(t),t.default={components:{snow:{enabled:!0,name:"PartykalsComponent",params:{position:[0,10,0],particles_global_size:.15,particles_blending:1,particles_ttl:3,particles_gravity:-2,particles_start_color:"#ffffff",particles_end_color:"#eeeeee",particles_velocity:"rand:BoxRandomizer?[-1, -1, -1];[1, -2, 1]",particles_velocity_bonus:[0,-.5,0],particles_offset:"rand:BoxRandomizer?[-10, 2, -10];[10, 2, 10]",particles_acceleration:"rand:BoxRandomizer?[-1, -1, -1];[1, -1, 1]",particle_start_size:"rand:MixMaxRandomizer?0.3;0.6",particle_end_size:"rand:MixMaxRandomizer?0.4;0.8",particles_texture:"res/retro/flake_a.png",system_particles_count:2e3,emitters:[{on_interval:"rand:MinMaxRandomizer?0;0.2",interval:.001}]}},radial_movement:{enabled:!0,name:"SimpleRadialMovement",params:{speed:-1,radius:1}}}}},6879:function(e,t,n){"use strict";n.r(t),t.default={components:{ambient_audio_source:{name:"AudioComponent",params:{src:"res/retro/plugins/extra-assets/ambient_sound/polar_wind_a1",autoplay:!0,loop:!0,volume:.01}}}}},4311:function(e,t,n){"use strict";n.r(t),t.default={components:[{name:"MeshContainer",ref:"testmodel",params:{components:{simple_rotator:{enabled:!0,name:"SimpleRotator",params:{speed:.01,axis:{x:0,y:1,z:0}}}},geometry:["AssetBufferGeometry",["res/retro/plugins/extra-assets/models/teapot.fbx",2]],material:["MeshPhongMaterial",{color:"#ffffff",map:"res/retro/uv_checker_a.jpg"}],scale:[.4,.4,.4],position:[0,0,0]}}]}},9228:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=9228,e.exports=t},8226:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=8226,e.exports=t},8572:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=8572,e.exports=t},8878:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=8878,e.exports=t},7938:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=7938,e.exports=t},1096:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=1096,e.exports=t},4988:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=4988,e.exports=t},1837:function(e,t,n){var r={"./scenes/main.yaml":7302};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1837},94:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=94,e.exports=t},6830:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=6830,e.exports=t},5584:function(e,t,n){var r={"./Animator.js":4553,"./AudioComponent.js":883,"./AudioListener.js":1298,"./ClockComponent.js":5376,"./DomLabel.js":5622,"./Fog.js":4531,"./FollowPointer.js":9755,"./FollowTarget.js":5933,"./Gizmos.js":6557,"./InputComponent.js":8576,"./PartykalsComponent.js":7801,"./Renderer.js":7724,"./SimpleRadialMovement.js":9518,"./SimpleRotatior.js":1804,"./SkyBox.js":9788,"./WidgetComponent.js":6285,"./collision/Collider.js":8430,"./collision/FluidCollider.js":40,"./controls/MapControlsComponent.js":4138,"./controls/OrbitControlsComponent.js":7848,"./controls/PointerLockControlsComponent.js":1552,"./scene/Anchor.js":7040,"./scene/CameraComponent.js":6252,"./scene/LightComponent.js":1257,"./scene/MeshComponent.js":9455,"./scene/MovieClipComponent.js":1286,"./scene/RenderTarget.js":9791,"./scene/SeqAnimationPlayer.js":3981,"./scene/SkySphere.js":1182,"./scene/SpriteComponent.js":5111,"./scene/Sun.js":2578,"./scene/TextComponent.js":6812,"./scene/TroikaTextComponent.js":6049,"./scene/Water.js":593};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=5584},5844:function(e,t,n){var r={"./AssetBufferGeometry.js":9829};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=5844},7877:function(e,t,n){var r={"./body.yaml":6735,"./dot_circle.yaml":3676,"./follow_pointer.yaml":1376};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=7877},1181:function(e,t,n){e.exports=window.THREE||n(5017)},7513:function(e,t,n){var r=n(5520).randomizerOrValue;e.exports=class Emitter{constructor(e){this.options=e,e.interval=e.interval||1,this.age=0,this.timeToSpawn=Math.random()*r(e.interval)}update(e,t){var n=0;if(0===this.age&&this.options.onSpawnBurst&&(n+=r(this.options.onSpawnBurst)),this.age+=e,!this.options.onInterval)return n;(this.timeToSpawn-=e,this.timeToSpawn<=0&&(this.timeToSpawn=r(this.options.interval),n+=r(this.options.onInterval)),this.options.detoretingMinTtl&&t.ttl<this.options.detoretingMinTtl)&&(n*=t.ttl/this.options.detoretingMinTtl);return n}}},9328:function(e,t,n){e.exports={ParticlesSystem:n(5686),Particle:n(502),Emitter:n(7513),Utils:n(5520),Randomizers:n(246)}},781:function(e,t,n){const r=n(1181),i=n(9915),o=n(7130);e.exports=class ParticlesMaterial{constructor(e){this.options=e;var t={globalColor:{value:new r.Color(e.color||16777215)},rendererScale:{value:1}},n="";e.perspective&&(n+="#define PERSPECTIVE\n"),e.map&&(n+="#define TEXTURE\n",t._texture={value:e.map}),e.perParticleColor&&(n+="#define COLORING\n"),e.perParticleRotation&&(n+="#define ROTATION\n"),e.constSize&&(n+="#define CONST_SIZE\n",t.constSize={value:e.constSize}),e.alphaTest&&(n+="#define ALPHA_TEST\n"),n+="\n";var a=new r.ShaderMaterial({uniforms:t,vertexShader:n+i,fragmentShader:n+o,transparent:Boolean(e.transparent),blending:e.blending,vertexColors:r.VertexColors,depthWrite:Boolean(e.depthWrite),depthTest:Boolean(e.depthTest)});this.material=a}dispose(){this.material.dispose()}setBaseScale(e){this.options.perspective&&(this.material.uniforms.rendererScale.value=e)}}},7130:function(e){e.exports="\n// material uniforms\nuniform vec3 globalColor;\n\n// params we get from vertex shader\nvarying float vAlpha;\n\n// per-particle color from vertex shader\n#ifdef COLORING\n    varying vec3 vColor;\n#endif\n\n// per-particle rotation from vertex shader\n#ifdef ROTATION\n    varying float vRotation;\n#endif\n\n// diffuse texture\n#ifdef TEXTURE\n    uniform sampler2D _texture;\n#endif\n\n// fragment shader main\nvoid main() \n{\n    // set default color if don't have per-particle colors\n    #ifndef COLORING\n        vec3 vColor = vec3(1,1,1);\n    #endif\n\n    // texture\n    #ifdef TEXTURE\n\n        // use rotation (rotate texture)\n        #ifdef ROTATION\n            float mid = 0.5;\n            vec2 rotated = vec2(cos(vRotation) * (gl_PointCoord.x - mid) + sin(vRotation) * (gl_PointCoord.y - mid) + mid,\n                          cos(vRotation) * (gl_PointCoord.y - mid) - sin(vRotation) * (gl_PointCoord.x - mid) + mid);\n            vec4 textureCol = texture2D(_texture,  rotated);\n        // no rotation\n        #else\n            vec2 coords = vec2((gl_PointCoord.x - 0.5) + 0.5, (gl_PointCoord.y - 0.5) + 0.5);\n            vec4 textureCol = texture2D(_texture, coords);\n        #endif\n\n        // get color with texture\n        gl_FragColor = vec4( globalColor * vColor, vAlpha ) * textureCol;\n        \n    // no texture (colors only)\n    #else\n        gl_FragColor = vec4( globalColor * vColor, vAlpha );\n    #endif\n\n    // check if need to discard pixel\n    #ifdef ALPHA_TEST\n        if (gl_FragColor.a < 0.00001) { discard; }\n    #endif\n}\n"},9915:function(e){e.exports="\n// attributes we get from geometry\nattribute float alpha;\n\n// per-particle size\n#ifdef CONST_SIZE\n    uniform float constSize;\n#else\n    attribute float size;\n#endif\n\n// per-particle rotation\n#ifdef ROTATION\n    attribute float rotation;\n#endif\n\n// system scale when using perspective mode\n#ifdef PERSPECTIVE\n    uniform float rendererScale;\n#endif\n\n// output params for fragment shader\nvarying float vAlpha;\n\n// set per-particle color\n#ifdef COLORING\n    varying vec3 vColor;\n#endif\n\n// get per-particle rotation\n#ifdef ROTATION\n    varying float vRotation;\n#endif\n\n// vertex shader main\nvoid main() \n{\n    // alpha and color\n    vAlpha = alpha;\n\n    // set color\n    #ifdef COLORING\n        vColor = color;\n    #endif\n\n    // set const size\n    #ifdef CONST_SIZE\n        float size = constSize;\n    #endif\n\n    // set position\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n\n    // apply rotation\n    #ifdef ROTATION\n        vRotation = rotation;\n    #endif\n    \n    // set size - either perspective or constant\n    #ifdef PERSPECTIVE\n        gl_PointSize = size * (rendererScale / length(mvPosition.xyz));\n    #else\n        gl_PointSize = size;\n    #endif\n}\n"},502:function(e,t,n){const r=n(1181),i=n(5520);function o(e,t){return e?e.generate?e.generate():e.clone():t?null:new r.Vector3}function a(e,t){return"string"==typeof e?r.Color.wrap(e):e?e.generate?e.generate():e.clone():t?null:new r.Color(1,1,1)}e.exports=class Particle{constructor(e){this.system=e,this.reset()}reset(){var e=this.system.options.particles;this.age=0,this.finished=!1,this.gravity=e.gravity,this.velocity=o(e.velocity),e.velocityBonus&&this.velocity.add(e.velocityBonus),this.acceleration=o(e.acceleration,!0),this.position=o(e.offset),this.ttl=i.getRandomWithSpread(e.ttl||1,e.ttlExtra)||1,this.alpha=this.startAlpha=this.endAlpha=null,this.startAlphaChangeAt=(e.startAlphaChangeAt||0)/this.ttl,e.fade&&(void 0!==e.alpha?this.alpha=i.randomizerOrValue(e.alpha):(this.startAlpha=i.randomizerOrValue(e.startAlpha),this.endAlpha=i.randomizerOrValue(e.endAlpha))),this.colorize=Boolean(e.colorize),this.color=this.startColor=this.endColor=null,this.startColorChangeAt=(e.startColorChangeAt||0)/this.ttl,this.colorize&&(e.color?this.color=a(e.color):(this.startColor=a(e.startColor),this.endColor=a(e.endColor))),this.size=this.startSize=this.endSize=null,this.startSizeChangeAt=(e.startSizeChangeAt||0)/this.ttl,e.scaling&&(void 0!==e.size?this.size=i.randomizerOrValue(e.size):(this.startSize=i.randomizerOrValue(e.startSize),this.endSize=i.randomizerOrValue(e.endSize))),this.rotation=this.rotationSpeed=null,e.rotating&&(this.rotation=i.randomizerOrValue(e.rotation||0),this.rotationSpeed=i.randomizerOrValue(e.rotationSpeed||0)),this.startWorldPosition=null,this.onUpdate=e.onUpdate,e.onSpawn&&e.onSpawn(this)}update(e,t){if(!this.finished){0===this.age?(this.system.options.particles.worldPosition&&(this.startWorldPosition=this.system.getWorldPosition()),null===this.alpha&&null===this.startAlpha||this.system.setAlpha(e,this.alpha||this.startAlpha),null===this.color&&null===this.startColor||this.system.setColor(e,this.color||this.startColor),null===this.size&&null===this.startSize||this.system.setSize(e,this.size||this.startSize),null!==this.rotation&&this.system.setRotation(e,this.rotation)):(this.startColor&&this.age>=this.startColorChangeAt&&this.system.setColor(e,i.lerpColors(this.startColor,this.endColor,this.startColorChangeAt?(this.age-this.startColorChangeAt)/(1-this.startColorChangeAt):this.age)),null!=this.startAlpha&&this.age>=this.startAlphaChangeAt&&this.system.setAlpha(e,i.lerp(this.startAlpha,this.endAlpha,this.startAlphaChangeAt?(this.age-this.startAlphaChangeAt)/(1-this.startAlphaChangeAt):this.age)),null!=this.startSize&&this.age>=this.startSizeChangeAt&&this.system.setSize(e,i.lerp(this.startSize,this.endSize,this.startSizeChangeAt?(this.age-this.startSizeChangeAt)/(1-this.startSizeChangeAt):this.age))),this.gravity&&this.velocity&&(this.velocity.y+=this.gravity*t),this.rotationSpeed&&(this.rotation+=this.rotationSpeed*t,this.system.setRotation(e,this.rotation)),this.velocity&&(this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t,this.position.z+=this.velocity.z*t);var n=this.position;if(this.startWorldPosition){var r=this.system.getWorldPosition();r.sub(this.startWorldPosition),n=n.clone().sub(r)}this.system.setPosition(e,n),this.acceleration&&this.velocity&&(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.velocity.z+=this.acceleration.z*t),this.age+=t/this.ttl,this.onUpdate&&this.onUpdate(this),this.age>1&&(this.age=1,this.finished=!0)}}get worldPosition(){return this.system.getWorldPosition().add(this.position)}}},5686:function(e,t,n){var r=n(5108);const i=n(1181),o=n(502),a=n(781);class ParticlesSystem{constructor(e){e.particles=e.particles||{worldPosition:!0},e.system=e.system||{},this.options=e;var t=e=>null!=e,n=e.particles;if("number"==typeof e.particles.size&&(r.warn("Note: replaced 'size' with 'globalSize' property since its more efficient and provided size value was constant anyway."),e.particles.globalSize=e.particles.size,delete e.particles.size),e.particles.color instanceof i.Color&&(r.warn("Note: replaced 'color' with 'globalColor' property since its more efficient and you provided color value was constant anyway."),e.particles.globalColor=e.particles.color,delete e.particles.color),e.particles.fade=t(n.startAlpha)||t(n.alpha),e.particles.rotating=t(n.rotationSpeed)||t(n.rotation),e.particles.colorize=t(n.color)||t(n.startColor),e.particles.scaling=t(n.size)||t(n.startSize),t(n.startAlpha)&&!t(n.endAlpha))throw new Error("When providing 'startAlpha' you must also provide 'endAlpha'!");if(t(n.startAlpha)&&t(n.alpha))throw new Error("When providing 'alpha' you can't also provide 'startAlpha'!");if(t(n.startColor)&&!t(n.endColor))throw new Error("When providing 'startColor' you must also provide 'endColor'!");if(t(n.startColor)&&t(n.color))throw new Error("When providing 'color' you can't also provide 'startColor'!");if(t(n.startSize)&&!t(n.endSize))throw new Error("When providing 'startSize' you must also provide 'endSize'!");if(t(n.startSize)&&t(n.size))throw new Error("When providing 'size' you can't also provide 'startSize'!");var s=e.system.particlesCount||10,c=e.particles.blending||"opaque",l={opaque:i.NoBlending,additive:i.AdditiveBlending,multiply:i.MultiplyBlending,blend:i.NormalBlending}[c];if(this._emitters=[],e.system.emitters)if(e.system.emitters instanceof Array)for(var u=0;u<e.system.emitters.length;++u)this.addEmitter(e.system.emitters[u]);else this.addEmitter(e.system.emitters);var h="opaque"!==c;this.particlesGeometry=new i.BufferGeometry;var d=void 0===e.system.perspective||Boolean(e.system.perspective),f=new a({size:e.particles.size||10,color:e.particles.globalColor||16777215,blending:l,perspective:d,transparent:h,map:e.particles.texture,perParticleColor:Boolean(e.particles.colorize),alphaTest:"blend"===c&&t(e.particles.texture),constSize:t(e.particles.globalSize)?e.particles.globalSize:null,depthWrite:!t(e.system.depthWrite)||e.system.depthWrite,depthTest:!t(e.system.depthTest)||e.system.depthTest,perParticleRotation:e.particles.rotating});this.material=f,this.speed=e.system.speed||1,this.reset(),this._aliveParticles=[],this._deadParticles=[];for(var p=new Float32Array(3*s),m=e.particles.colorize?new Float32Array(3*s):null,g=e.particles.fade?new Float32Array(1*s):null,v=e.particles.scaling?new Float32Array(1*s):null,_=e.particles.rotating?new Float32Array(1*s):null,y=0;y<s;y++){var b=3*y;p[b]=p[b+1]=p[b+2]=0,m&&(m[b]=m[b+1]=m[b+2]=1),g&&(g[y]=1),v&&(v[y]=1),_&&(_[y]=0),this._deadParticles.push(new o(this))}this.particlesGeometry.setAttribute("position",new i.BufferAttribute(p,3)),g&&this.particlesGeometry.setAttribute("alpha",new i.BufferAttribute(g,1)),m&&this.particlesGeometry.setAttribute("color",new i.BufferAttribute(m,3)),v&&this.particlesGeometry.setAttribute("size",new i.BufferAttribute(v,1)),_&&this.particlesGeometry.setAttribute("rotation",new i.BufferAttribute(_,1)),this.particlesGeometry.setDrawRange(0,0),this.material.setBaseScale(e.system.scale||400);var x=new i.Points(this.particlesGeometry,this.material.material);x.sortParticles=h,void 0!==ParticlesSystem.defaultRenderOrder&&(x.renderOrder=ParticlesSystem.defaultRenderOrder),this.particleSystem=x,this._positionDirty=!0,this._colorsDirty=Boolean(m),this._alphaDirty=Boolean(g),this._rotateDirty=Boolean(_),e.container&&this.addTo(e.container)}addEmitter(e){this._emitters.push(e)}dispose(){this.particlesGeometry.dispose(),this.material.dispose()}get finished(){return this.ttlExpired&&0===this.particlesCount}get ttlExpired(){return void 0!==this.ttl&&this.ttl<=0}reset(){this.ttl=this.options.system.ttl,this.age=0,this._timeToUpdateBS=0}getWorldPosition(){var e=new i.Vector3;return this.particleSystem.getWorldPosition(e),e}addTo(e){e.add(this.particleSystem)}setColor(e,t){e*=3;var n=this.particlesGeometry.attributes.color.array;n[e]=t.r,n[e+1]=t.g,n[e+2]=t.b,this._colorsDirty=!0}setPosition(e,t){e*=3;var n=this.particlesGeometry.attributes.position.array;n[e]=t.x,n[e+1]=t.y,n[e+2]=t.z,this._positionDirty=!0}setAlpha(e,t){this.particlesGeometry.attributes.alpha.array[e]=t,this._alphaDirty=!0}setRotation(e,t){this.particlesGeometry.attributes.rotation.array[e]=t,this._rotateDirty=!0}setSize(e,t){this.particlesGeometry.attributes.size.array[e]=t,this._sizeDirty=!0}get particlesCount(){return this._aliveParticles.length}get maxParticlesCount(){return this._aliveParticles.length+this._deadParticles.length}removeAndDisposeIfFinished(){return!!this.finished&&(this.removeSelf(),this.dispose(),!0)}update(e){if(void 0===e){var t=(new Date).getTime()/1e3;e=t-this._lastTime||0,this._lastTime=t}if(0!==e){void 0!==this.ttl&&this.ttl>0&&(this.ttl-=e),e*=this.speed,this.dt=e,this.age+=e;var n=this._aliveParticles.length;if(!this.ttlExpired)for(var r=0;r<this._emitters.length;++r){var i=this._emitters[r].update(e,this);i&&this.spawnParticles(i)}for(r=this._aliveParticles.length-1;r>=0;--r){var o=this._aliveParticles[r];o.update(r,e),o.finished&&(this._aliveParticles.splice(r,1),this._deadParticles.push(o))}n!==this._aliveParticles.length&&this.particlesGeometry.setDrawRange(0,this._aliveParticles.length),this.particlesGeometry.attributes.position.needsUpdate=this._positionDirty,this._needBoundingSphereUpdate=this._needBoundingSphereUpdate||this._positionDirty,this._positionDirty=!1,this._colorsDirty&&(this.particlesGeometry.attributes.color.needsUpdate=!0,this._colorsDirty=!1),this._alphaDirty&&(this.particlesGeometry.attributes.alpha.needsUpdate=!0,this._alphaDirty=!1),this._sizeDirty&&(this.particlesGeometry.attributes.size.needsUpdate=!0,this._sizeDirty=!1),this._rotateDirty&&(this.particlesGeometry.attributes.rotation.needsUpdate=!0,this._rotateDirty=!1),this._needBoundingSphereUpdate&&(this._timeToUpdateBS-=e,this._timeToUpdateBS<=0&&(this._timeToUpdateBS=.2,this.particlesGeometry.computeBoundingSphere())),this.finished||this.options.system.onUpdate&&this.options.system.onUpdate(this)}}spawnParticles(e){for(var t=0;t<e;++t){if(0===this._deadParticles.length)return;var n=this._deadParticles.pop();n.reset(),this._aliveParticles.push(n)}}removeSelf(){this.particleSystem.parent&&this.particleSystem.parent.remove(this.particleSystem)}}ParticlesSystem.defaultRenderOrder=void 0,e.exports=ParticlesSystem},9475:function(e,t,n){const r=n(1181),i=n(3318),o=n(5520);e.exports=class BoxRandomizer extends i{constructor(e,t){super(),this.min=e||new r.Vector3(-1,-1,-1),this.max=t||new r.Vector3(1,1,1)}generate(){return o.getRandomVectorBetween(this.min,this.max)}}},2282:function(e,t,n){const r=n(1181),i=n(3318),o=n(5520);e.exports=class ColorsRandomizer extends i{constructor(e,t){super(),this.min=e||new r.Color(0,0,0),this.max=t||new r.Color(1,1,1)}generate(){return o.getRandomColorBetween(this.min,this.max)}}},246:function(e,t,n){e.exports={Randomizer:n(3318),BoxRandomizer:n(9475),SphereRandomizer:n(5142),ColorsRandomizer:n(2282),MinMaxRandomizer:n(9744)}},9744:function(e,t,n){const r=n(3318),i=n(5520);e.exports=class MinMaxRandomizer extends r{constructor(e,t){super(),this.min=e,this.max=t}generate(){return i.getRandomBetween(this.min,this.max)}}},3318:function(e){e.exports=class Randomizer{generate(){throw new Error("Not implemented.")}}},5142:function(e,t,n){const r=n(1181),i=n(3318),o=n(5520);function a(){return 2*Math.random()-1}e.exports=class SphereRandomizer extends i{constructor(e,t,n,r,i){super(),this.maxRadius=e||1,this.minRadius=t||0,this.scaler=n,this.minVector=r,this.maxVector=i}generate(){var e=new r.Vector3(a(),a(),a());return(this.minVector||this.maxVector)&&e.clamp(this.minVector||new r.Vector3(-1,-1,-1),this.maxVector||new r.Vector3(1,1,1)),e.normalize().multiplyScalar(o.getRandomBetween(this.minRadius,this.maxRadius)),this.scaler&&e.multiply(this.scaler),e}}},5520:function(e,t,n){const r=n(1181);e.exports={getRandomBetween:function(e,t){return Math.random()*(t-e)+e},getRandomWithSpread:function(e,t){return t?this.getRandomBetween(e,e+t):e},getRandomColorBetween:function(e,t){return t?new r.Color(this.getRandomBetween(e.r,t.r),this.getRandomBetween(e.g,t.g),this.getRandomBetween(e.b,t.b)):e?e.clone():new r.Color},getRandomVectorBetween:function(e,t){return t?new r.Vector3(this.getRandomBetween(e.x,t.x),this.getRandomBetween(e.y,t.y),this.getRandomBetween(e.z,t.z)):e?e.clone():new r.Vector3},lerpColors:function(e,t,n){return e.clone().lerp(t,n)},lerp:function(e,t,n){return e*(1-n)+t*n},randomizerOrValue:function(e){return(e.generate?e.generate():e)||0}}},3459:function(e,t,n){"use strict";var r=n(5017),i=n(5108);const o={type:"change"},a={type:"start"},s={type:"end"};class OrbitControls extends r.EventDispatcher{constructor(e,t){super(),void 0===t&&i.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&i.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),this._domElementKeyEvents=e},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(o),n.update(),l=c.NONE},this.update=function(){const t=new r.Vector3,i=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),a=i.clone().invert(),s=new r.Vector3,g=new r.Quaternion,v=2*Math.PI;return function(){const e=n.object.position;t.copy(e).sub(n.target),t.applyQuaternion(i),h.setFromVector3(t),n.autoRotate&&l===c.NONE&&R(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(h.theta+=d.theta*n.dampingFactor,h.phi+=d.phi*n.dampingFactor):(h.theta+=d.theta,h.phi+=d.phi);let r=n.minAzimuthAngle,_=n.maxAzimuthAngle;return isFinite(r)&&isFinite(_)&&(r<-Math.PI?r+=v:r>Math.PI&&(r-=v),_<-Math.PI?_+=v:_>Math.PI&&(_-=v),h.theta=r<=_?Math.max(r,Math.min(_,h.theta)):h.theta>(r+_)/2?Math.max(r,h.theta):Math.min(_,h.theta)),h.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,h.phi)),h.makeSafe(),h.radius*=f,h.radius=Math.max(n.minDistance,Math.min(n.maxDistance,h.radius)),!0===n.enableDamping?n.target.addScaledVector(p,n.dampingFactor):n.target.add(p),t.setFromSpherical(h),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,p.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),p.set(0,0,0)),f=1,!!(m||s.distanceToSquared(n.object.position)>u||8*(1-g.dot(n.object.quaternion))>u)&&(n.dispatchEvent(o),s.copy(n.object.position),g.copy(n.object.quaternion),m=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Y),n.domElement.removeEventListener("pointerdown",G),n.domElement.removeEventListener("pointercancel",H),n.domElement.removeEventListener("wheel",X),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",W),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Q)};const n=this,c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=c.NONE;const u=1e-6,h=new r.Spherical,d=new r.Spherical;let f=1;const p=new r.Vector3;let m=!1;const g=new r.Vector2,v=new r.Vector2,_=new r.Vector2,y=new r.Vector2,b=new r.Vector2,x=new r.Vector2,w=new r.Vector2,A=new r.Vector2,T=new r.Vector2,M=[],E={};function S(){return Math.pow(.95,n.zoomSpeed)}function R(e){d.theta-=e}function L(e){d.phi-=e}const P=function(){const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),C=function(){const e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),F=function(){const e=new r.Vector3;return function(t,r){const o=n.domElement;if(n.object.isPerspectiveCamera){const i=n.object.position;e.copy(i).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),P(2*t*a/o.clientHeight,n.object.matrix),C(2*r*a/o.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(P(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),C(r*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(i.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function D(e){n.object.isPerspectiveCamera?f/=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),m=!0):(i.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function U(e){n.object.isPerspectiveCamera?f*=e:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),m=!0):(i.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){g.set(e.clientX,e.clientY)}function k(e){y.set(e.clientX,e.clientY)}function I(){if(1===M.length)g.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);g.set(e,t)}}function B(){if(1===M.length)y.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);y.set(e,t)}}function N(){const e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,n=Math.sqrt(e*e+t*t);w.set(0,n)}function Z(e){if(1==M.length)v.set(e.pageX,e.pageY);else{const t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}_.subVectors(v,g).multiplyScalar(n.rotateSpeed);const t=n.domElement;R(2*Math.PI*_.x/t.clientHeight),L(2*Math.PI*_.y/t.clientHeight),g.copy(v)}function j(e){if(1===M.length)b.set(e.pageX,e.pageY);else{const t=J(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}x.subVectors(b,y).multiplyScalar(n.panSpeed),F(x.x,x.y),y.copy(b)}function z(e){const t=J(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);A.set(0,o),T.set(0,Math.pow(A.y/w.y,n.zoomSpeed)),D(T.y),w.copy(A)}function G(e){!1!==n.enabled&&(0===M.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",V),n.domElement.addEventListener("pointerup",W)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(q(e),M.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;I(),l=c.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;B(),l=c.TOUCH_PAN;break;default:l=c.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&N(),n.enablePan&&B(),l=c.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&N(),n.enableRotate&&I(),l=c.TOUCH_DOLLY_ROTATE;break;default:l=c.NONE}break;default:l=c.NONE}l!==c.NONE&&n.dispatchEvent(a)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){w.set(e.clientX,e.clientY)}(e),l=c.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;k(e),l=c.PAN}else{if(!1===n.enableRotate)return;O(e),l=c.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;O(e),l=c.ROTATE}else{if(!1===n.enablePan)return;k(e),l=c.PAN}break;default:l=c.NONE}l!==c.NONE&&n.dispatchEvent(a)}(e))}function V(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(q(e),l){case c.TOUCH_ROTATE:if(!1===n.enableRotate)return;Z(e),n.update();break;case c.TOUCH_PAN:if(!1===n.enablePan)return;j(e),n.update();break;case c.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&j(e)}(e),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&Z(e)}(e),n.update();break;default:l=c.NONE}}(e):function(e){if(!1===n.enabled)return;switch(l){case c.ROTATE:if(!1===n.enableRotate)return;!function(e){v.set(e.clientX,e.clientY),_.subVectors(v,g).multiplyScalar(n.rotateSpeed);const t=n.domElement;R(2*Math.PI*_.x/t.clientHeight),L(2*Math.PI*_.y/t.clientHeight),g.copy(v),n.update()}(e);break;case c.DOLLY:if(!1===n.enableZoom)return;!function(e){A.set(e.clientX,e.clientY),T.subVectors(A,w),T.y>0?D(S()):T.y<0&&U(S()),w.copy(A),n.update()}(e);break;case c.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,y).multiplyScalar(n.panSpeed),F(x.x,x.y),y.copy(b),n.update()}(e)}}(e))}function W(e){!1!==n.enabled&&(e.pointerType,n.dispatchEvent(s),l=c.NONE,K(e),0===M.length&&(n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",V),n.domElement.removeEventListener("pointerup",W)))}function H(e){K(e)}function X(e){!1!==n.enabled&&!1!==n.enableZoom&&l===c.NONE&&(e.preventDefault(),n.dispatchEvent(a),function(e){e.deltaY<0?U(S()):e.deltaY>0&&D(S()),n.update()}(e),n.dispatchEvent(s))}function Q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:F(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:F(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:F(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:F(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Y(e){!1!==n.enabled&&e.preventDefault()}function K(e){delete E[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function q(e){let t=E[e.pointerId];void 0===t&&(t=new r.Vector2,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function J(e){const t=e.pointerId===M[0].pointerId?M[1]:M[0];return E[t.pointerId]}n.domElement.addEventListener("contextmenu",Y),n.domElement.addEventListener("pointerdown",G),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",X,{passive:!1}),this.update()}}class MapControls extends OrbitControls{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=r.MOUSE.PAN,this.mouseButtons.RIGHT=r.MOUSE.ROTATE,this.touches.ONE=r.TOUCH.PAN,this.touches.TWO=r.TOUCH.DOLLY_ROTATE}}r.MapControls=MapControls,r.OrbitControls=OrbitControls,t.Z={MapControls:MapControls,OrbitControls:OrbitControls}},5017:function(e,t,n){const r=n(2228);e.exports=r},2228:function(e,t,n){"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:function(){return a.LY2},AddEquation:function(){return a.bGH},AddOperation:function(){return a.NDo},AdditiveAnimationBlendMode:function(){return a.gSk},AdditiveBlending:function(){return a.WMw},AlphaFormat:function(){return a.OTo},AlwaysDepth:function(){return a.Se2},AlwaysStencilFunc:function(){return a.cum},AmbientLight:function(){return AmbientLight},AmbientLightProbe:function(){return AmbientLightProbe},AnimationClip:function(){return AnimationClip},AnimationLoader:function(){return AnimationLoader},AnimationMixer:function(){return AnimationMixer},AnimationObjectGroup:function(){return AnimationObjectGroup},AnimationUtils:function(){return pi},ArcCurve:function(){return ArcCurve},ArrayCamera:function(){return ArrayCamera},ArrowHelper:function(){return ArrowHelper},Audio:function(){return Audio},AudioAnalyser:function(){return AudioAnalyser},AudioContext:function(){return Ii},AudioListener:function(){return AudioListener},AudioLoader:function(){return AudioLoader},AxesHelper:function(){return AxesHelper},AxisHelper:function(){return pa},BackSide:function(){return a._Li},BasicDepthPacking:function(){return a.z81},BasicShadowMap:function(){return a._MY},BinaryTextureLoader:function(){return ya},Bone:function(){return Bone},BooleanKeyframeTrack:function(){return BooleanKeyframeTrack},BoundingBoxHelper:function(){return ma},Box2:function(){return Box2},Box3:function(){return mo.Z},Box3Helper:function(){return Box3Helper},BoxBufferGeometry:function(){return l.n},BoxGeometry:function(){return l.D},BoxHelper:function(){return BoxHelper},BufferAttribute:function(){return O.Tl},BufferGeometry:function(){return k.u},BufferGeometryLoader:function(){return BufferGeometryLoader},ByteType:function(){return a.T95},Cache:function(){return _i},Camera:function(){return Camera},CameraHelper:function(){return CameraHelper},CanvasRenderer:function(){return xa},CanvasTexture:function(){return CanvasTexture},CatmullRomCurve3:function(){return CatmullRomCurve3},CineonToneMapping:function(){return a.YGz},CircleBufferGeometry:function(){return CircleGeometry},CircleGeometry:function(){return CircleGeometry},ClampToEdgeWrapping:function(){return a.uWy},Clock:function(){return Clock},Color:function(){return B.I},ColorKeyframeTrack:function(){return ColorKeyframeTrack},CompressedTexture:function(){return CompressedTexture},CompressedTextureLoader:function(){return CompressedTextureLoader},ConeBufferGeometry:function(){return ConeGeometry},ConeGeometry:function(){return ConeGeometry},CubeCamera:function(){return CubeCamera},CubeReflectionMapping:function(){return a.fY$},CubeRefractionMapping:function(){return a.vxC},CubeTexture:function(){return CubeTexture},CubeTextureLoader:function(){return CubeTextureLoader},CubeUVReflectionMapping:function(){return a.g8_},CubeUVRefractionMapping:function(){return a.SVc},CubicBezierCurve:function(){return CubicBezierCurve},CubicBezierCurve3:function(){return CubicBezierCurve3},CubicInterpolant:function(){return CubicInterpolant},CullFaceBack:function(){return a.tm_},CullFaceFront:function(){return a.S2y},CullFaceFrontBack:function(){return a.B02},CullFaceNone:function(){return a.PeU},Curve:function(){return Curve},CurvePath:function(){return CurvePath},CustomBlending:function(){return a.Xaj},CustomToneMapping:function(){return a.dZ3},CylinderBufferGeometry:function(){return CylinderGeometry},CylinderGeometry:function(){return CylinderGeometry},Cylindrical:function(){return Cylindrical},DataTexture:function(){return DataTexture},DataTexture2DArray:function(){return DataTexture2DArray},DataTexture3D:function(){return DataTexture3D},DataTextureLoader:function(){return DataTextureLoader},DataUtils:function(){return DataUtils},DecrementStencilOp:function(){return a.jfJ},DecrementWrapStencilOp:function(){return a.T_J},DefaultLoadingManager:function(){return yi},DepthFormat:function(){return a.qkB},DepthStencilFormat:function(){return a.brP},DepthTexture:function(){return DepthTexture},DirectionalLight:function(){return DirectionalLight},DirectionalLightHelper:function(){return DirectionalLightHelper},DiscreteInterpolant:function(){return DiscreteInterpolant},DodecahedronBufferGeometry:function(){return DodecahedronGeometry},DodecahedronGeometry:function(){return DodecahedronGeometry},DoubleSide:function(){return a.ehD},DstAlphaFactor:function(){return a.fSK},DstColorFactor:function(){return a.Vdb},DynamicBufferAttribute:function(){return ia},DynamicCopyUsage:function(){return a.l8J},DynamicDrawUsage:function(){return a.dj0},DynamicReadUsage:function(){return a.QM0},EdgesGeometry:function(){return EdgesGeometry},EdgesHelper:function(){return ga},EllipseCurve:function(){return EllipseCurve},EqualDepth:function(){return a.eD},EqualStencilFunc:function(){return a.jwo},EquirectangularReflectionMapping:function(){return a.dSO},EquirectangularRefractionMapping:function(){return a.Bf4},Euler:function(){return yo.U},EventDispatcher:function(){return vn.p},ExtrudeBufferGeometry:function(){return ExtrudeGeometry},ExtrudeGeometry:function(){return ExtrudeGeometry},FaceColors:function(){return Xo},FileLoader:function(){return FileLoader},FlatShading:function(){return a.esl},Float16BufferAttribute:function(){return O.e6},Float32Attribute:function(){return da},Float32BufferAttribute:function(){return O.a$},Float64Attribute:function(){return fa},Float64BufferAttribute:function(){return O.OM},FloatType:function(){return a.VzW},Fog:function(){return Fog},FogExp2:function(){return FogExp2},Font:function(){return Ra},FontLoader:function(){return Sa},FrontSide:function(){return a.Wl3},Frustum:function(){return b.i},GLBufferAttribute:function(){return GLBufferAttribute},GLSL1:function(){return a.v9Y},GLSL3:function(){return a.LSk},GammaEncoding:function(){return a.pMV},GreaterDepth:function(){return a.w$m},GreaterEqualDepth:function(){return a.ksN},GreaterEqualStencilFunc:function(){return a.j4z},GreaterStencilFunc:function(){return a.OAl},GridHelper:function(){return GridHelper},Group:function(){return Group},HalfFloatType:function(){return a.cLu},HemisphereLight:function(){return HemisphereLight},HemisphereLightHelper:function(){return HemisphereLightHelper},HemisphereLightProbe:function(){return HemisphereLightProbe},IcosahedronBufferGeometry:function(){return IcosahedronGeometry},IcosahedronGeometry:function(){return IcosahedronGeometry},ImageBitmapLoader:function(){return ImageBitmapLoader},ImageLoader:function(){return ImageLoader},ImageUtils:function(){return zo.P},ImmediateRenderObject:function(){return La},IncrementStencilOp:function(){return a.ZRs},IncrementWrapStencilOp:function(){return a.oqc},InstancedBufferAttribute:function(){return InstancedBufferAttribute},InstancedBufferGeometry:function(){return InstancedBufferGeometry},InstancedInterleavedBuffer:function(){return InstancedInterleavedBuffer},InstancedMesh:function(){return InstancedMesh},Int16Attribute:function(){return ca},Int16BufferAttribute:function(){return O.aV},Int32Attribute:function(){return ua},Int32BufferAttribute:function(){return O.j8},Int8Attribute:function(){return oa},Int8BufferAttribute:function(){return O.RN},IntType:function(){return a.Kz5},InterleavedBuffer:function(){return InterleavedBuffer},InterleavedBufferAttribute:function(){return InterleavedBufferAttribute},Interpolant:function(){return Interpolant},InterpolateDiscrete:function(){return a.Syv},InterpolateLinear:function(){return a.NMF},InterpolateSmooth:function(){return a.pIN},InvertStencilOp:function(){return a.eMJ},JSONLoader:function(){return wa},KeepStencilOp:function(){return a.x5V},KeyframeTrack:function(){return KeyframeTrack},LOD:function(){return LOD},LatheBufferGeometry:function(){return LatheGeometry},LatheGeometry:function(){return LatheGeometry},Layers:function(){return uo.S},LensFlare:function(){return Ta},LessDepth:function(){return a.Zr5},LessEqualDepth:function(){return a.vCF},LessEqualStencilFunc:function(){return a.yt0},LessStencilFunc:function(){return a.uXU},Light:function(){return Light},LightProbe:function(){return LightProbe},Line:function(){return Line},Line3:function(){return Line3},LineBasicMaterial:function(){return LineBasicMaterial},LineCurve:function(){return LineCurve},LineCurve3:function(){return LineCurve3},LineDashedMaterial:function(){return LineDashedMaterial},LineLoop:function(){return LineLoop},LinePieces:function(){return Wo},LineSegments:function(){return LineSegments},LineStrip:function(){return Vo},LinearEncoding:function(){return a.rnI},LinearFilter:function(){return a.wem},LinearInterpolant:function(){return LinearInterpolant},LinearMipMapLinearFilter:function(){return a.FDw},LinearMipMapNearestFilter:function(){return a.lRj},LinearMipmapLinearFilter:function(){return a.D1R},LinearMipmapNearestFilter:function(){return a.qyh},LinearToneMapping:function(){return a.EoG},Loader:function(){return Loader},LoaderUtils:function(){return LoaderUtils},LoadingManager:function(){return LoadingManager},LogLuvEncoding:function(){return a.M6c},LoopOnce:function(){return a.jAl},LoopPingPong:function(){return a.uEv},LoopRepeat:function(){return a.YKA},LuminanceAlphaFormat:function(){return a.cRx},LuminanceFormat:function(){return a.Y8D},MOUSE:function(){return a.RsA},Material:function(){return En.F},MaterialLoader:function(){return MaterialLoader},Math:function(){return m},MathUtils:function(){return m},Matrix3:function(){return C.V},Matrix4:function(){return p.y},MaxEquation:function(){return a.Sm8},Mesh:function(){return c.K},MeshBasicMaterial:function(){return N.v},MeshDepthMaterial:function(){return hi.l},MeshDistanceMaterial:function(){return di.L},MeshFaceMaterial:function(){return Yo},MeshLambertMaterial:function(){return MeshLambertMaterial},MeshMatcapMaterial:function(){return MeshMatcapMaterial},MeshNormalMaterial:function(){return MeshNormalMaterial},MeshPhongMaterial:function(){return MeshPhongMaterial},MeshPhysicalMaterial:function(){return MeshPhysicalMaterial},MeshStandardMaterial:function(){return MeshStandardMaterial},MeshToonMaterial:function(){return MeshToonMaterial},MinEquation:function(){return a.r_},MirroredRepeatWrapping:function(){return a.OoA},MixOperation:function(){return a.qhX},MultiMaterial:function(){return Ko},MultiplyBlending:function(){return a.M5h},MultiplyOperation:function(){return a.Ns1},NearestFilter:function(){return a.TyD},NearestMipMapLinearFilter:function(){return a.vZf},NearestMipMapNearestFilter:function(){return a.HTd},NearestMipmapLinearFilter:function(){return a.aH4},NearestMipmapNearestFilter:function(){return a.YLQ},NeverDepth:function(){return a.BVF},NeverStencilFunc:function(){return a.MyG},NoBlending:function(){return a.jFi},NoColors:function(){return Ho},NoToneMapping:function(){return a.uL9},NormalAnimationBlendMode:function(){return a.IFH},NormalBlending:function(){return a.bdR},NotEqualDepth:function(){return a.M6v},NotEqualStencilFunc:function(){return a.RvT},NumberKeyframeTrack:function(){return NumberKeyframeTrack},Object3D:function(){return d.T},ObjectLoader:function(){return ObjectLoader},ObjectSpaceNormalMap:function(){return a.PA7},OctahedronBufferGeometry:function(){return OctahedronGeometry},OctahedronGeometry:function(){return OctahedronGeometry},OneFactor:function(){return a.ghN},OneMinusDstAlphaFactor:function(){return a.Hy8},OneMinusDstColorFactor:function(){return a.Wpd},OneMinusSrcAlphaFactor:function(){return a.LgZ},OneMinusSrcColorFactor:function(){return a.iWC},OrthographicCamera:function(){return OrthographicCamera},PCFShadowMap:function(){return a._iA},PCFSoftShadowMap:function(){return a.ntZ},PMREMGenerator:function(){return PMREMGenerator},ParametricGeometry:function(){return Ma},Particle:function(){return Jo},ParticleBasicMaterial:function(){return ta},ParticleSystem:function(){return $o},ParticleSystemMaterial:function(){return na},Path:function(){return Path},PerspectiveCamera:function(){return PerspectiveCamera},Plane:function(){return F.J},PlaneBufferGeometry:function(){return li.B},PlaneGeometry:function(){return li._},PlaneHelper:function(){return PlaneHelper},PointCloud:function(){return qo},PointCloudMaterial:function(){return ea},PointLight:function(){return PointLight},PointLightHelper:function(){return PointLightHelper},Points:function(){return Points},PointsMaterial:function(){return PointsMaterial},PolarGridHelper:function(){return PolarGridHelper},PolyhedronBufferGeometry:function(){return PolyhedronGeometry},PolyhedronGeometry:function(){return PolyhedronGeometry},PositionalAudio:function(){return PositionalAudio},PropertyBinding:function(){return PropertyBinding},PropertyMixer:function(){return PropertyMixer},QuadraticBezierCurve:function(){return QuadraticBezierCurve},QuadraticBezierCurve3:function(){return QuadraticBezierCurve3},Quaternion:function(){return fi._},QuaternionKeyframeTrack:function(){return QuaternionKeyframeTrack},QuaternionLinearInterpolant:function(){return QuaternionLinearInterpolant},REVISION:function(){return a.UZH},RGBADepthPacking:function(){return a.mSO},RGBAFormat:function(){return a.wk1},RGBAIntegerFormat:function(){return a.E2K},RGBA_ASTC_10x10_Format:function(){return a.FUD},RGBA_ASTC_10x5_Format:function(){return a.pKu},RGBA_ASTC_10x6_Format:function(){return a.GG6},RGBA_ASTC_10x8_Format:function(){return a.Gih},RGBA_ASTC_12x10_Format:function(){return a.iiP},RGBA_ASTC_12x12_Format:function(){return a.SvJ},RGBA_ASTC_4x4_Format:function(){return a.ptH},RGBA_ASTC_5x4_Format:function(){return a.jZA},RGBA_ASTC_5x5_Format:function(){return a.y2t},RGBA_ASTC_6x5_Format:function(){return a.gi4},RGBA_ASTC_6x6_Format:function(){return a.Djp},RGBA_ASTC_8x5_Format:function(){return a.BG$},RGBA_ASTC_8x6_Format:function(){return a.NYV},RGBA_ASTC_8x8_Format:function(){return a.xJs},RGBA_BPTC_Format:function(){return a.bsb},RGBA_ETC2_EAC_Format:function(){return a.ekQ},RGBA_PVRTC_2BPPV1_Format:function(){return a.CaW},RGBA_PVRTC_4BPPV1_Format:function(){return a.eaV},RGBA_S3TC_DXT1_Format:function(){return a.BFQ},RGBA_S3TC_DXT3_Format:function(){return a.v3W},RGBA_S3TC_DXT5_Format:function(){return a.ILR},RGBDEncoding:function(){return a.gMp},RGBEEncoding:function(){return a.KC9},RGBEFormat:function(){return a.aoB},RGBFormat:function(){return a.UCm},RGBIntegerFormat:function(){return a.F5G},RGBM16Encoding:function(){return a.Inb},RGBM7Encoding:function(){return a.LgE},RGB_ETC1_Format:function(){return a.fto},RGB_ETC2_Format:function(){return a.l0P},RGB_PVRTC_2BPPV1_Format:function(){return a.vCx},RGB_PVRTC_4BPPV1_Format:function(){return a._AM},RGB_S3TC_DXT1_Format:function(){return a.wuA},RGFormat:function(){return a.av9},RGIntegerFormat:function(){return a.CtA},RawShaderMaterial:function(){return RawShaderMaterial},Ray:function(){return or.z},Raycaster:function(){return Raycaster},RectAreaLight:function(){return RectAreaLight},RedFormat:function(){return a.hEm},RedIntegerFormat:function(){return a.D9w},ReinhardToneMapping:function(){return a.CdI},RepeatWrapping:function(){return a.rpg},ReplaceStencilOp:function(){return a.ce8},ReverseSubtractEquation:function(){return a.rOj},RingBufferGeometry:function(){return RingGeometry},RingGeometry:function(){return RingGeometry},SRGB8_ALPHA8_ASTC_10x10_Format:function(){return a.Yjz},SRGB8_ALPHA8_ASTC_10x5_Format:function(){return a.Wso},SRGB8_ALPHA8_ASTC_10x6_Format:function(){return a.p1$},SRGB8_ALPHA8_ASTC_10x8_Format:function(){return a.I0h},SRGB8_ALPHA8_ASTC_12x10_Format:function(){return a.ePn},SRGB8_ALPHA8_ASTC_12x12_Format:function(){return a.HBG},SRGB8_ALPHA8_ASTC_4x4_Format:function(){return a.APR},SRGB8_ALPHA8_ASTC_5x4_Format:function(){return a.Abz},SRGB8_ALPHA8_ASTC_5x5_Format:function(){return a.v6B},SRGB8_ALPHA8_ASTC_6x5_Format:function(){return a.pnl},SRGB8_ALPHA8_ASTC_6x6_Format:function(){return a.OS$},SRGB8_ALPHA8_ASTC_8x5_Format:function(){return a._wO},SRGB8_ALPHA8_ASTC_8x6_Format:function(){return a.bcs},SRGB8_ALPHA8_ASTC_8x8_Format:function(){return a.Y5S},Scene:function(){return Scene},SceneUtils:function(){return Aa},ShaderChunk:function(){return St.W},ShaderLib:function(){return Qt.V},ShaderMaterial:function(){return u.j},ShadowMaterial:function(){return ShadowMaterial},Shape:function(){return Shape},ShapeBufferGeometry:function(){return ShapeGeometry},ShapeGeometry:function(){return ShapeGeometry},ShapePath:function(){return ShapePath},ShapeUtils:function(){return ShapeUtils},ShortType:function(){return a.iAb},Skeleton:function(){return Skeleton},SkeletonHelper:function(){return SkeletonHelper},SkinnedMesh:function(){return SkinnedMesh},SmoothShading:function(){return a.wcA},Sphere:function(){return ir.a},SphereBufferGeometry:function(){return SphereGeometry},SphereGeometry:function(){return SphereGeometry},Spherical:function(){return Spherical},SphericalHarmonics3:function(){return SphericalHarmonics3},SplineCurve:function(){return SplineCurve},SpotLight:function(){return SpotLight},SpotLightHelper:function(){return SpotLightHelper},Sprite:function(){return Sprite},SpriteMaterial:function(){return SpriteMaterial},SrcAlphaFactor:function(){return a.k74},SrcAlphaSaturateFactor:function(){return a.RlZ},SrcColorFactor:function(){return a.KhW},StaticCopyUsage:function(){return a.HgB},StaticDrawUsage:function(){return a.W2J},StaticReadUsage:function(){return a.JWc},StereoCamera:function(){return StereoCamera},StreamCopyUsage:function(){return a.Z6B},StreamDrawUsage:function(){return a.QZ1},StreamReadUsage:function(){return a.Ir4},StringKeyframeTrack:function(){return StringKeyframeTrack},SubtractEquation:function(){return a.Wbm},SubtractiveBlending:function(){return a.N4l},TOUCH:function(){return a.QmN},TangentSpaceNormalMap:function(){return a.IOt},TetrahedronBufferGeometry:function(){return TetrahedronGeometry},TetrahedronGeometry:function(){return TetrahedronGeometry},TextGeometry:function(){return Ea},Texture:function(){return _.x},TextureLoader:function(){return TextureLoader},TorusBufferGeometry:function(){return TorusGeometry},TorusGeometry:function(){return TorusGeometry},TorusKnotBufferGeometry:function(){return TorusKnotGeometry},TorusKnotGeometry:function(){return TorusKnotGeometry},Triangle:function(){return An.C},TriangleFanDrawMode:function(){return a.z$h},TriangleStripDrawMode:function(){return a.UlW},TrianglesDrawMode:function(){return a.WwZ},TubeBufferGeometry:function(){return TubeGeometry},TubeGeometry:function(){return TubeGeometry},UVMapping:function(){return a.xfE},Uint16Attribute:function(){return la},Uint16BufferAttribute:function(){return O.ql},Uint32Attribute:function(){return ha},Uint32BufferAttribute:function(){return O.lC},Uint8Attribute:function(){return aa},Uint8BufferAttribute:function(){return O.WT},Uint8ClampedAttribute:function(){return sa},Uint8ClampedBufferAttribute:function(){return O.rA},Uniform:function(){return Uniform},UniformsLib:function(){return nn.r},UniformsUtils:function(){return h.rD},UnsignedByteType:function(){return a.ywz},UnsignedInt248Type:function(){return a.wJv},UnsignedIntType:function(){return a.JQ4},UnsignedShort4444Type:function(){return a.k0A},UnsignedShort5551Type:function(){return a.irR},UnsignedShort565Type:function(){return a.XNv},UnsignedShortType:function(){return a.LsT},VSMShadowMap:function(){return a.dwk},Vector2:function(){return I.F},Vector3:function(){return f.P},Vector4:function(){return x.L},VectorKeyframeTrack:function(){return VectorKeyframeTrack},Vertex:function(){return ra},VertexColors:function(){return Qo},VideoTexture:function(){return VideoTexture},WebGL1Renderer:function(){return WebGL1Renderer},WebGLCubeRenderTarget:function(){return WebGLCubeRenderTarget},WebGLMultipleRenderTargets:function(){return WebGLMultipleRenderTargets},WebGLMultisampleRenderTarget:function(){return WebGLMultisampleRenderTarget},WebGLRenderTarget:function(){return s.d},WebGLRenderTargetCube:function(){return ba},WebGLRenderer:function(){return wn},WebGLUtils:function(){return gn},WireframeGeometry:function(){return WireframeGeometry},WireframeHelper:function(){return va},WrapAroundEnding:function(){return a._sL},XHRLoader:function(){return _a},ZeroCurvatureEnding:function(){return a.Pnf},ZeroFactor:function(){return a.c8b},ZeroSlopeEnding:function(){return a._lf},ZeroStencilOp:function(){return a.ad5},sRGBEncoding:function(){return a.knz}});var r={};n.r(r),n.d(r,{ArcCurve:function(){return ArcCurve},CatmullRomCurve3:function(){return CatmullRomCurve3},CubicBezierCurve:function(){return CubicBezierCurve},CubicBezierCurve3:function(){return CubicBezierCurve3},EllipseCurve:function(){return EllipseCurve},LineCurve:function(){return LineCurve},LineCurve3:function(){return LineCurve3},QuadraticBezierCurve:function(){return QuadraticBezierCurve},QuadraticBezierCurve3:function(){return QuadraticBezierCurve3},SplineCurve:function(){return SplineCurve}});var i={};n.r(i),n.d(i,{BoxBufferGeometry:function(){return l.n},BoxGeometry:function(){return l.D},CircleBufferGeometry:function(){return CircleGeometry},CircleGeometry:function(){return CircleGeometry},ConeBufferGeometry:function(){return ConeGeometry},ConeGeometry:function(){return ConeGeometry},CylinderBufferGeometry:function(){return CylinderGeometry},CylinderGeometry:function(){return CylinderGeometry},DodecahedronBufferGeometry:function(){return DodecahedronGeometry},DodecahedronGeometry:function(){return DodecahedronGeometry},EdgesGeometry:function(){return EdgesGeometry},ExtrudeBufferGeometry:function(){return ExtrudeGeometry},ExtrudeGeometry:function(){return ExtrudeGeometry},IcosahedronBufferGeometry:function(){return IcosahedronGeometry},IcosahedronGeometry:function(){return IcosahedronGeometry},LatheBufferGeometry:function(){return LatheGeometry},LatheGeometry:function(){return LatheGeometry},OctahedronBufferGeometry:function(){return OctahedronGeometry},OctahedronGeometry:function(){return OctahedronGeometry},PlaneBufferGeometry:function(){return li.B},PlaneGeometry:function(){return li._},PolyhedronBufferGeometry:function(){return PolyhedronGeometry},PolyhedronGeometry:function(){return PolyhedronGeometry},RingBufferGeometry:function(){return RingGeometry},RingGeometry:function(){return RingGeometry},ShapeBufferGeometry:function(){return ShapeGeometry},ShapeGeometry:function(){return ShapeGeometry},SphereBufferGeometry:function(){return SphereGeometry},SphereGeometry:function(){return SphereGeometry},TetrahedronBufferGeometry:function(){return TetrahedronGeometry},TetrahedronGeometry:function(){return TetrahedronGeometry},TorusBufferGeometry:function(){return TorusGeometry},TorusGeometry:function(){return TorusGeometry},TorusKnotBufferGeometry:function(){return TorusKnotGeometry},TorusKnotGeometry:function(){return TorusKnotGeometry},TubeBufferGeometry:function(){return TubeGeometry},TubeGeometry:function(){return TubeGeometry},WireframeGeometry:function(){return WireframeGeometry}});var o={};n.r(o),n.d(o,{LineBasicMaterial:function(){return LineBasicMaterial},LineDashedMaterial:function(){return LineDashedMaterial},Material:function(){return En.F},MeshBasicMaterial:function(){return N.v},MeshDepthMaterial:function(){return hi.l},MeshDistanceMaterial:function(){return di.L},MeshLambertMaterial:function(){return MeshLambertMaterial},MeshMatcapMaterial:function(){return MeshMatcapMaterial},MeshNormalMaterial:function(){return MeshNormalMaterial},MeshPhongMaterial:function(){return MeshPhongMaterial},MeshPhysicalMaterial:function(){return MeshPhysicalMaterial},MeshStandardMaterial:function(){return MeshStandardMaterial},MeshToonMaterial:function(){return MeshToonMaterial},PointsMaterial:function(){return PointsMaterial},RawShaderMaterial:function(){return RawShaderMaterial},ShaderMaterial:function(){return u.j},ShadowMaterial:function(){return ShadowMaterial},SpriteMaterial:function(){return SpriteMaterial}});var a=n(2513),s=n(6311);class WebGLMultipleRenderTargets extends s.d{constructor(e,t,n){super(e,t);const r=this.texture;this.texture=[];for(let e=0;e<n;e++)this.texture[e]=r.clone()}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.texture.length;r<i;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone();return this}}WebGLMultipleRenderTargets.prototype.isWebGLMultipleRenderTargets=!0;class WebGLMultisampleRenderTarget extends s.d{constructor(e,t,n){super(e,t,n),this.samples=4}copy(e){return super.copy.call(this,e),this.samples=e.samples,this}}WebGLMultisampleRenderTarget.prototype.isWebGLMultisampleRenderTarget=!0;var c=n(5444),l=n(2313),u=n(7259),h=n(2585),d=n(616),f=n(7306),p=n(5154);class Camera extends d.T{constructor(){super(),this.type="Camera",this.matrixWorldInverse=new p.y,this.projectionMatrix=new p.y,this.projectionMatrixInverse=new p.y}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}Camera.prototype.isCamera=!0;var m=n(4682);class PerspectiveCamera extends Camera{constructor(e=50,t=1,n=.1,r=2e3){super(),this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*m.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*m.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*m.RAD2DEG*Math.atan(Math.tan(.5*m.DEG2RAD*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*m.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}PerspectiveCamera.prototype.isPerspectiveCamera=!0;var g=n(5108);const v=90;class CubeCamera extends d.T{constructor(e,t,n){if(super(),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void g.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const r=new PerspectiveCamera(v,1,e,t);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new f.P(1,0,0)),this.add(r);const i=new PerspectiveCamera(v,1,e,t);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new f.P(-1,0,0)),this.add(i);const o=new PerspectiveCamera(v,1,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new f.P(0,1,0)),this.add(o);const a=new PerspectiveCamera(v,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new f.P(0,-1,0)),this.add(a);const s=new PerspectiveCamera(v,1,e,t);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new f.P(0,0,1)),this.add(s);const c=new PerspectiveCamera(v,1,e,t);c.layers=this.layers,c.up.set(0,-1,0),c.lookAt(new f.P(0,0,-1)),this.add(c)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,i,o,a,s,c]=this.children,l=e.xr.enabled,u=e.getRenderTarget();e.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,i),e.setRenderTarget(n,2),e.render(t,o),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,s),n.texture.generateMipmaps=h,e.setRenderTarget(n,5),e.render(t,c),e.setRenderTarget(u),e.xr.enabled=l}}var _=n(5437);class CubeTexture extends _.x{constructor(e,t,n,r,i,o,s,c,l,u){super(e=void 0!==e?e:[],t=void 0!==t?t:a.fY$,n,r,i,o,s,c,l,u),this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}CubeTexture.prototype.isCubeTexture=!0;var y=n(5108);class WebGLCubeRenderTarget extends s.d{constructor(e,t,n){Number.isInteger(t)&&(y.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=n),super(e,e,t),t=t||{},this.texture=new CubeTexture(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:a.wem,this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=a.wk1,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new l.D(5,5,5),i=new u.j({name:"CubemapFromEquirect",uniforms:(0,h.dw)(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:a._Li,blending:a.jFi});i.uniforms.tEquirect.value=t;const o=new c.K(r,i),s=t.minFilter;t.minFilter===a.D1R&&(t.minFilter=a.wem);return new CubeCamera(1,10,this).update(e,o),t.minFilter=s,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}WebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget=!0;var b=n(9226),x=n(6969);function w(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}var A=n(5108);function T(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);void 0===o?r.set(t,function(t,r){const i=t.array,o=t.usage,a=e.createBuffer();e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback();let s=e.FLOAT;return i instanceof Float32Array?s=e.FLOAT:i instanceof Float64Array?A.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?t.isFloat16BufferAttribute?n?s=e.HALF_FLOAT:A.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=e.UNSIGNED_SHORT:i instanceof Int16Array?s=e.SHORT:i instanceof Uint32Array?s=e.UNSIGNED_INT:i instanceof Int32Array?s=e.INT:i instanceof Int8Array?s=e.BYTE:(i instanceof Uint8Array||i instanceof Uint8ClampedArray)&&(s=e.UNSIGNED_BYTE),{buffer:a,type:s,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,r,i){const o=r.array,a=r.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(n?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}var M=n(3544);function E(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),a=r.isWebGL2||null!==o,s={},c=d(null);let l=c;function u(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function h(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function d(e){const t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=l.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function p(e){m(e,0)}function m(n,i){const o=l.newAttributes,a=l.enabledAttributes,s=l.attributeDivisors;if(o[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),s[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),s[n]=i}}function g(){const t=l.newAttributes,n=l.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function v(t,n,i,o,a,s){!0!==r.isWebGL2||i!==e.INT&&i!==e.UNSIGNED_INT?e.vertexAttribPointer(t,n,i,o,a,s):e.vertexAttribIPointer(t,n,i,a,s)}function _(){y(),l!==c&&(l=c,u(l.object))}function y(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:function(i,c,h,_,y){let b=!1;if(a){const t=function(t,n,i){const a=!0===i.wireframe;let c=s[t.id];void 0===c&&(c={},s[t.id]=c);let l=c[n.id];void 0===l&&(l={},c[n.id]=l);let u=l[a];void 0===u&&(u=d(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),l[a]=u);return u}(_,h,c);l!==t&&(l=t,u(l.object)),b=function(e,t){const n=l.attributes,r=e.attributes;let i=0;for(const e in r){const t=n[e],o=r[e];if(void 0===t)return!0;if(t.attribute!==o)return!0;if(t.data!==o.data)return!0;i++}return l.attributesNum!==i||l.index!==t}(_,y),b&&function(e,t){const n={},r=e.attributes;let i=0;for(const e in r){const t=r[e],o={};o.attribute=t,t.data&&(o.data=t.data),n[e]=o,i++}l.attributes=n,l.attributesNum=i,l.index=t}(_,y)}else{const e=!0===c.wireframe;l.geometry===_.id&&l.program===h.id&&l.wireframe===e||(l.geometry=_.id,l.program=h.id,l.wireframe=e,b=!0)}!0===i.isInstancedMesh&&(b=!0),null!==y&&n.update(y,e.ELEMENT_ARRAY_BUFFER),b&&(!function(i,o,a,s){if(!1===r.isWebGL2&&(i.isInstancedMesh||s.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const c=s.attributes,l=a.getAttributes(),u=o.defaultAttributeValues;for(const t in l){const r=l[t];if(r.location>=0){let o=c[t];if(void 0===o&&("instanceMatrix"===t&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){const t=o.normalized,a=o.itemSize,c=n.get(o);if(void 0===c)continue;const l=c.buffer,u=c.type,h=c.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,c=n.stride,d=o.offset;if(n&&n.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)m(r.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<r.locationSize;e++)p(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,l);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,c*h,(d+a/r.locationSize*e)*h)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)m(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)p(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,l);for(let e=0;e<r.locationSize;e++)v(r.location+e,a/r.locationSize,u,t,a*h,a/r.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(r.location,n);break;case 3:e.vertexAttrib3fv(r.location,n);break;case 4:e.vertexAttrib4fv(r.location,n);break;default:e.vertexAttrib1fv(r.location,n)}}}}g()}(i,c,h,_),null!==y&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(y).buffer))},reset:_,resetDefaultState:y,dispose:function(){_();for(const e in s){const t=s[e];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e]}},releaseStatesOfGeometry:function(e){if(void 0===s[e.id])return;const t=s[e.id];for(const e in t){const n=t[e];for(const e in n)h(n[e].object),delete n[e];delete t[e]}delete s[e.id]},releaseStatesOfProgram:function(e){for(const t in s){const n=s[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)h(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:p,disableUnusedAttributes:g}}var S=n(5108);function R(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,a,s){if(0===s)return;let c,l;if(i)c=e,l="drawArraysInstanced";else if(c=t.get("ANGLE_instanced_arrays"),l="drawArraysInstancedANGLE",null===c)return void S.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[l](o,r,a,s),n.update(a,o,s)}}var L=n(5108);function P(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext;let a=void 0!==n.precision?n.precision:"highp";const s=i(a);s!==a&&(L.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const c=o||t.has("WEBGL_draw_buffers"),l=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),_=h>0,y=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:l,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:_,floatFragmentTextures:y,floatVertexTextures:_&&y,maxSamples:o?e.getParameter(e.MAX_SAMPLES):0}}var C=n(5184),F=n(3990);function D(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new F.J,s=new C.V,c={value:null,needsUpdate:!1};function l(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),t.numPlanes=r,t.numIntersection=0}function u(e,n,r,i){const o=null!==e?e.length:0;let l=null;if(0!==o){if(l=c.value,!0!==i||null===l){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let t=0,n=r;t!==o;++t,n+=4)a.copy(e[t]).applyMatrix4(i,s),a.normal.toArray(l,n),l[n+3]=a.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t,o){const a=0!==e.length||t||0!==r||i;return i=t,n=u(e,o,0),r=e.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,l()},this.setState=function(t,a,s){const h=t.clippingPlanes,d=t.clipIntersection,f=t.clipShadows,p=e.get(t);if(!i||null===h||0===h.length||o&&!f)o?u(null):l();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;c.value=i,i=u(h,a,t,s);for(let e=0;e!==t;++e)i[e]=n[e];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function U(e){let t=new WeakMap;function n(e,t){return t===a.dSO?e.mapping=a.fY$:t===a.Bf4&&(e.mapping=a.vxC),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping;if(o===a.dSO||o===a.Bf4){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=e.getRenderTarget(),s=new WebGLCubeRenderTarget(o.height/2);return s.fromEquirectangularTexture(e,i),t.set(i,s),e.setRenderTarget(a),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}var O=n(2),k=n(6487);class OrthographicCamera extends Camera{constructor(e=-1,t=1,n=1,r=-1,i=.1,o=2e3){super(),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}OrthographicCamera.prototype.isOrthographicCamera=!0;class RawShaderMaterial extends u.j{constructor(e){super(e),this.type="RawShaderMaterial"}}RawShaderMaterial.prototype.isRawShaderMaterial=!0;var I=n(6522),B=n(9706),N=n(6095),Z=n(5108);const j=Math.pow(2,8),z=[.125,.215,.35,.446,.526,.582],G=5+z.length,V=20,W={[a.rnI]:0,[a.knz]:1,[a.KC9]:2,[a.LgE]:3,[a.Inb]:4,[a.gMp]:5,[a.pMV]:6},H=new OrthographicCamera,{_lodPlanes:X,_sizeLods:Q,_sigmas:Y}=ne(),K=new B.I;let q=null;const J=(1+Math.sqrt(5))/2,$=1/J,ee=[new f.P(1,1,1),new f.P(-1,1,1),new f.P(1,1,-1),new f.P(-1,1,-1),new f.P(0,J,$),new f.P(0,J,-$),new f.P($,0,J),new f.P(-$,0,J),new f.P(J,$,0),new f.P(-J,$,0)];class PMREMGenerator{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._blurMaterial=function(e){const t=new Float32Array(e),n=new f.P(0,1,0);return new RawShaderMaterial({name:"SphericalGaussianBlur",defines:{n:e},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:t},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:W[a.rnI]},outputEncoding:{value:W[a.rnI]}},vertexShader:se(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ce()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:a.jFi,depthTest:!1,depthWrite:!1})}(V),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){q=this._renderer.getRenderTarget();const i=this._allocateTargets();return this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){return this._fromTexture(e)}fromCubemap(e){return this._fromTexture(e)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=ae(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=oe(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let e=0;e<X.length;e++)X[e].dispose()}_cleanup(e){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(q),e.scissorTest=!1,ie(e,0,0,e.width,e.height)}_fromTexture(e){q=this._renderer.getRenderTarget();const t=this._allocateTargets(e);return this._textureToCubeUV(e,t),this._applyPMREM(t),this._cleanup(t),t}_allocateTargets(e){const t={magFilter:a.TyD,minFilter:a.TyD,generateMipmaps:!1,type:a.ywz,format:a.aoB,encoding:te(e)?e.encoding:a.KC9,depthBuffer:!1},n=re(t);return n.depthBuffer=!e,this._pingPongRenderTarget=re(t),n}_compileMaterial(e){const t=new c.K(X[0],e);this._renderer.compile(t,H)}_sceneToCubeUV(e,t,n,r){const i=new PerspectiveCamera(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,d=u.outputEncoding,f=u.toneMapping;u.getClearColor(K),u.toneMapping=a.uL9,u.outputEncoding=a.rnI,u.autoClear=!1;const p=new N.v({name:"PMREM.Background",side:a._Li,depthWrite:!1,depthTest:!1}),m=new c.K(new l.D,p);let g=!1;const v=e.background;v?v.isColor&&(p.color.copy(v),e.background=null,g=!0):(p.color.copy(K),g=!0);for(let t=0;t<6;t++){const n=t%3;0==n?(i.up.set(0,o[t],0),i.lookAt(s[t],0,0)):1==n?(i.up.set(0,0,o[t]),i.lookAt(0,s[t],0)):(i.up.set(0,o[t],0),i.lookAt(0,0,s[t])),ie(r,n*j,t>2?j:0,j,j),u.setRenderTarget(r),g&&u.render(m,i),u.render(e,i)}m.geometry.dispose(),m.material.dispose(),u.toneMapping=f,u.outputEncoding=d,u.autoClear=h,e.background=v}_setEncoding(e,t){!0===this._renderer.capabilities.isWebGL2&&t.format===a.wk1&&t.type===a.ywz&&t.encoding===a.knz?e.value=W[a.rnI]:e.value=W[t.encoding]}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===a.fY$||e.mapping===a.vxC;r?null==this._cubemapShader&&(this._cubemapShader=ae()):null==this._equirectShader&&(this._equirectShader=oe());const i=r?this._cubemapShader:this._equirectShader,o=new c.K(X[0],i),s=i.uniforms;s.envMap.value=e,r||s.texelSize.value.set(1/e.image.width,1/e.image.height),this._setEncoding(s.inputEncoding,e),this._setEncoding(s.outputEncoding,t.texture),ie(t,0,0,3*j,2*j),n.setRenderTarget(t),n.render(o,H)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let t=1;t<G;t++){const n=Math.sqrt(Y[t]*Y[t]-Y[t-1]*Y[t-1]),r=ee[(t-1)%ee.length];this._blur(e,t-1,t,n,r)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&Z.error("blur direction must be either latitudinal or longitudinal!");const u=new c.K(X[r],l),h=l.uniforms,d=Q[n]-1,f=isFinite(i)?Math.PI/(2*d):2*Math.PI/39,p=i/f,m=isFinite(i)?1+Math.floor(3*p):V;m>V&&Z.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${m} samples when the maximum is set to 20`);const g=[];let v=0;for(let e=0;e<V;++e){const t=e/p,n=Math.exp(-t*t/2);g.push(n),0==e?v+=n:e<m&&(v+=2*n)}for(let e=0;e<g.length;e++)g[e]=g[e]/v;h.envMap.value=e.texture,h.samples.value=m,h.weights.value=g,h.latitudinal.value="latitudinal"===o,a&&(h.poleAxis.value=a),h.dTheta.value=f,h.mipInt.value=8-n,this._setEncoding(h.inputEncoding,e.texture),this._setEncoding(h.outputEncoding,e.texture);const _=Q[r];ie(t,3*Math.max(0,j-2*_),(0===r?0:2*j)+2*_*(r>4?r-8+4:0),3*_,2*_),s.setRenderTarget(t),s.render(u,H)}}function te(e){return void 0!==e&&e.type===a.ywz&&(e.encoding===a.rnI||e.encoding===a.knz||e.encoding===a.pMV)}function ne(){const e=[],t=[],n=[];let r=8;for(let i=0;i<G;i++){const o=Math.pow(2,r);t.push(o);let a=1/o;i>4?a=z[i-8+4-1]:0==i&&(a=0),n.push(a);const s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=6,d=6,f=3,p=2,m=1,g=new Float32Array(f*d*h),v=new Float32Array(p*d*h),_=new Float32Array(m*d*h);for(let e=0;e<h;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];g.set(r,f*d*e),v.set(u,p*d*e);const i=[e,e,e,e,e,e];_.set(i,m*d*e)}const y=new k.u;y.setAttribute("position",new O.Tl(g,f)),y.setAttribute("uv",new O.Tl(v,p)),y.setAttribute("faceIndex",new O.Tl(_,m)),e.push(y),r>4&&r--}return{_lodPlanes:e,_sizeLods:t,_sigmas:n}}function re(e){const t=new s.d(3*j,3*j,e);return t.texture.mapping=a.g8_,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function ie(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function oe(){const e=new I.F(1,1);return new RawShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:e},inputEncoding:{value:W[a.rnI]},outputEncoding:{value:W[a.rnI]}},vertexShader:se(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ce()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:a.jFi,depthTest:!1,depthWrite:!1})}function ae(){return new RawShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:W[a.rnI]},outputEncoding:{value:W[a.rnI]}},vertexShader:se(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ce()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:a.jFi,depthTest:!1,depthWrite:!1})}function se(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function ce(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function le(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture&&!1===i.isRenderTargetTexture){const o=i.mapping,s=o===a.dSO||o===a.Bf4,c=o===a.fY$||o===a.vxC;if(s||c){if(t.has(i))return t.get(i).texture;{const o=i.image;if(s&&o&&o.height>0||c&&o&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){const o=e.getRenderTarget();null===n&&(n=new PMREMGenerator(e));const a=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,a),e.setRenderTarget(o),i.addEventListener("dispose",r),a.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}var ue=n(5108);function he(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(e){const t=n(e);return null===t&&ue.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}var de=n(2111);function fe(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const e in s.attributes)t.remove(s.attributes[e]);s.removeEventListener("dispose",a),delete i[s.id];const c=o.get(s);c&&(t.remove(c),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}const s=new((0,de.uH)(n)>65535?O.lC:O.ql)(n,1);s.version=a;const c=o.get(e);c&&t.remove(c),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}var pe=n(5108);function me(e,t,n,r){const i=r.isWebGL2;let o,a,s;this.setMode=function(e){o=e},this.setIndex=function(e){a=e.type,s=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,a,t*s),n.update(r,o,1)},this.renderInstances=function(r,c,l){if(0===l)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void pe.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,c,a,r*s,l),n.update(c,o,l)}}var ge=n(5108);function ve(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:ge.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}class DataTexture2DArray extends _.x{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture2DArray.prototype.isDataTexture2DArray=!0;var _e=n(5108);function ye(e,t){return e[0]-t[0]}function be(e,t){return Math.abs(t[1])-Math.abs(e[1])}function xe(e,t){let n=1;const r=t.isInterleavedBufferAttribute?t.data.array:t.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:_e.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),e.divideScalar(n)}function we(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new f.P,c=[];for(let e=0;e<8;e++)c[e]=[e,0];return{update:function(l,u,h,d){const f=l.morphTargetInfluences;if(!0===t.isWebGL2){const r=u.morphAttributes.position.length;let i=o.get(u);if(void 0===i||i.count!==r){void 0!==i&&i.texture.dispose();const e=void 0!==u.morphAttributes.normal,n=u.morphAttributes.position,c=u.morphAttributes.normal||[],l=!0===e?2:1;let h=u.attributes.position.count*l,d=1;h>t.maxTextureSize&&(d=Math.ceil(h/t.maxTextureSize),h=t.maxTextureSize);const f=new Float32Array(h*d*4*r),p=new DataTexture2DArray(f,h,d,r);p.format=a.wk1,p.type=a.VzW;const m=4*l;for(let t=0;t<r;t++){const r=n[t],i=c[t],o=h*d*4*t;for(let t=0;t<r.count;t++){s.fromBufferAttribute(r,t),!0===r.normalized&&xe(s,r);const n=t*m;f[o+n+0]=s.x,f[o+n+1]=s.y,f[o+n+2]=s.z,f[o+n+3]=0,!0===e&&(s.fromBufferAttribute(i,t),!0===i.normalized&&xe(s,i),f[o+n+4]=s.x,f[o+n+5]=s.y,f[o+n+6]=s.z,f[o+n+7]=0)}}i={count:r,texture:p,size:new I.F(h,d)},o.set(u,i)}let c=0;for(let e=0;e<f.length;e++)c+=f[e];const l=u.morphTargetsRelative?1:1-c;d.getUniforms().setValue(e,"morphTargetBaseInfluence",l),d.getUniforms().setValue(e,"morphTargetInfluences",f),d.getUniforms().setValue(e,"morphTargetsTexture",i.texture,n),d.getUniforms().setValue(e,"morphTargetsTextureSize",i.size)}else{const t=void 0===f?0:f.length;let n=r[u.id];if(void 0===n||n.length!==t){n=[];for(let e=0;e<t;e++)n[e]=[e,0];r[u.id]=n}for(let e=0;e<t;e++){const t=n[e];t[0]=e,t[1]=f[e]}n.sort(be);for(let e=0;e<8;e++)e<t&&n[e][1]?(c[e][0]=n[e][0],c[e][1]=n[e][1]):(c[e][0]=Number.MAX_SAFE_INTEGER,c[e][1]=0);c.sort(ye);const o=u.morphAttributes.position,a=u.morphAttributes.normal;let s=0;for(let e=0;e<8;e++){const t=c[e],n=t[0],r=t[1];n!==Number.MAX_SAFE_INTEGER&&r?(o&&u.getAttribute("morphTarget"+e)!==o[n]&&u.setAttribute("morphTarget"+e,o[n]),a&&u.getAttribute("morphNormal"+e)!==a[n]&&u.setAttribute("morphNormal"+e,a[n]),i[e]=r,s+=r):(o&&!0===u.hasAttribute("morphTarget"+e)&&u.deleteAttribute("morphTarget"+e),a&&!0===u.hasAttribute("morphNormal"+e)&&u.deleteAttribute("morphNormal"+e),i[e]=0)}const l=u.morphTargetsRelative?1:1-s;d.getUniforms().setValue(e,"morphTargetBaseInfluence",l),d.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function Ae(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=r.render.frame,c=a.geometry,l=t.get(a,c);return i.get(l)!==s&&(t.update(l),i.set(l,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER)),l},dispose:function(){i=new WeakMap}}}class DataTexture3D extends _.x{constructor(e=null,t=1,n=1,r=1){super(null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=a.TyD,this.minFilter=a.TyD,this.wrapR=a.uWy,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture3D.prototype.isDataTexture3D=!0;const Te=new _.x,Me=new DataTexture2DArray,Ee=new DataTexture3D,Se=new CubeTexture,Re=[],Le=[],Pe=new Float32Array(16),Ce=new Float32Array(9),Fe=new Float32Array(4);function De(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Re[i];if(void 0===o&&(o=new Float32Array(i),Re[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Ue(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Oe(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ke(e,t){let n=Le[t];void 0===n&&(n=new Int32Array(t),Le[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function Ie(e,t){t=null==t?t:t.valueOf();const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Be(e,t){const n=this.cache;if(null!=t&&(t=t.valueOf()),void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Ue(n,t))return;e.uniform2fv(this.addr,t),Oe(n,t)}}function Ne(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Ue(n,t))return;e.uniform3fv(this.addr,t),Oe(n,t)}}function Ze(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Ue(n,t))return;e.uniform4fv(this.addr,t),Oe(n,t)}}function je(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ue(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Oe(n,t)}else{if(Ue(n,r))return;Fe.set(r),e.uniformMatrix2fv(this.addr,!1,Fe),Oe(n,r)}}function ze(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ue(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Oe(n,t)}else{if(Ue(n,r))return;Ce.set(r),e.uniformMatrix3fv(this.addr,!1,Ce),Oe(n,r)}}function Ge(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Ue(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Oe(n,t)}else{if(Ue(n,r))return;Pe.set(r),e.uniformMatrix4fv(this.addr,!1,Pe),Oe(n,r)}}function Ve(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function We(e,t){const n=this.cache;Ue(n,t)||(e.uniform2iv(this.addr,t),Oe(n,t))}function He(e,t){const n=this.cache;Ue(n,t)||(e.uniform3iv(this.addr,t),Oe(n,t))}function Xe(e,t){const n=this.cache;Ue(n,t)||(e.uniform4iv(this.addr,t),Oe(n,t))}function Qe(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ye(e,t){const n=this.cache;Ue(n,t)||(e.uniform2uiv(this.addr,t),Oe(n,t))}function Ke(e,t){const n=this.cache;Ue(n,t)||(e.uniform3uiv(this.addr,t),Oe(n,t))}function qe(e,t){const n=this.cache;Ue(n,t)||(e.uniform4uiv(this.addr,t),Oe(n,t))}function Je(e,t,n){"string"==typeof t&&(t=window.F_TEXTURE_STREAMING_FUNCTION(t));const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(t||Te,i)}function $e(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ee,i)}function et(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(t||Se,i)}function tt(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Me,i)}function nt(e,t){e.uniform1fv(this.addr,t)}function rt(e,t){const n=De(t,this.size,2);e.uniform2fv(this.addr,n)}function it(e,t){const n=De(t,this.size,3);e.uniform3fv(this.addr,n)}function ot(e,t){const n=De(t,this.size,4);e.uniform4fv(this.addr,n)}function at(e,t){const n=De(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function st(e,t){const n=De(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function ct(e,t){const n=De(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function lt(e,t){e.uniform1iv(this.addr,t)}function ut(e,t){e.uniform2iv(this.addr,t)}function ht(e,t){e.uniform3iv(this.addr,t)}function dt(e,t){e.uniform4iv(this.addr,t)}function ft(e,t){e.uniform1uiv(this.addr,t)}function pt(e,t){e.uniform2uiv(this.addr,t)}function mt(e,t){e.uniform3uiv(this.addr,t)}function gt(e,t){e.uniform4uiv(this.addr,t)}function vt(e,t,n){const r=t.length,i=ke(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTexture2D(t[e]||Te,i[e])}function _t(e,t,n){const r=t.length,i=ke(n,r);e.uniform1iv(this.addr,i);for(let e=0;e!==r;++e)n.safeSetTextureCube(t[e]||Se,i[e])}function yt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Ie;case 35664:return Be;case 35665:return Ne;case 35666:return Ze;case 35674:return je;case 35675:return ze;case 35676:return Ge;case 5124:case 35670:return Ve;case 35667:case 35671:return We;case 35668:case 35672:return He;case 35669:case 35673:return Xe;case 5125:return Qe;case 36294:return Ye;case 36295:return Ke;case 36296:return qe;case 35678:case 36198:case 36298:case 36306:case 35682:return Je;case 35679:case 36299:case 36307:return $e;case 35680:case 36300:case 36308:case 36293:return et;case 36289:case 36303:case 36311:case 36292:return tt}}(t.type)}function bt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return nt;case 35664:return rt;case 35665:return it;case 35666:return ot;case 35674:return at;case 35675:return st;case 35676:return ct;case 5124:case 35670:return lt;case 35667:case 35671:return ut;case 35668:case 35672:return ht;case 35669:case 35673:return dt;case 5125:return ft;case 36294:return pt;case 36295:return mt;case 36296:return gt;case 35678:case 36198:case 36298:case 36306:case 35682:return vt;case 35680:case 36300:case 36308:case 36293:return _t}}(t.type)}function xt(e){this.id=e,this.seq=[],this.map={}}bt.prototype.updateCache=function(e){const t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Oe(t,e)},xt.prototype.setValue=function(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}};const wt=/(\w+)(\])?(\[|\.)?/g;function At(e,t){e.seq.push(t),e.map[t.id]=t}function Tt(e,t,n){const r=e.name,i=r.length;for(wt.lastIndex=0;;){const o=wt.exec(r),a=wt.lastIndex;let s=o[1];const c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){At(n,void 0===l?new yt(s,e,t):new bt(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new xt(s),At(n,e)),n=e}}}function Mt(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Tt(n,e.getUniformLocation(t,n.name),this)}}function Et(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}Mt.prototype.setValue=function(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)},Mt.prototype.setOptional=function(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)},Mt.upload=function(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}},Mt.seqWithValue=function(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n};var St=n(160),Rt=n(5108);let Lt=0;function Pt(e){switch(e){case a.rnI:return["Linear","( value )"];case a.knz:return["sRGB","( value )"];case a.KC9:return["RGBE","( value )"];case a.LgE:return["RGBM","( value, 7.0 )"];case a.Inb:return["RGBM","( value, 16.0 )"];case a.gMp:return["RGBD","( value, 256.0 )"];case a.pMV:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case a.M6c:return["LogLuv","( value )"];default:return Rt.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}function Ct(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();return r&&""===i?"":n.toUpperCase()+"\n\n"+i+"\n\n"+function(e){const t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}(e.getShaderSource(t))}function Ft(e,t){const n=Pt(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Dt(e,t){const n=Pt(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ut(e,t){let n;switch(t){case a.EoG:n="Linear";break;case a.CdI:n="Reinhard";break;case a.YGz:n="OptimizedCineon";break;case a.LY2:n="ACESFilmic";break;case a.dZ3:n="Custom";break;default:Rt.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ot(e){return""!==e}function kt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function It(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Bt=/^[ \t]*#include +<([\w\d./]+)>/gm;function Nt(e){return e.replace(Bt,Zt)}function Zt(e,t){const n=St.W[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Nt(n)}const jt=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,zt=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Gt(e){return e.replace(zt,Wt).replace(jt,Vt)}function Vt(e,t,n,r){return Rt.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Wt(e,t,n,r)}function Wt(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function Ht(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Xt(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,c=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===a._iA?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===a.ntZ?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===a.dwk&&(t="SHADOWMAP_TYPE_VSM"),t}(n),u=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case a.fY$:case a.vxC:t="ENVMAP_TYPE_CUBE";break;case a.g8_:case a.SVc:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),h=function(e){let t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case a.vxC:case a.SVc:t="ENVMAP_MODE_REFRACTION"}return t}(n),d=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case a.Ns1:t="ENVMAP_BLENDING_MULTIPLY";break;case a.qhX:t="ENVMAP_BLENDING_MIX";break;case a.NDo:t="ENVMAP_BLENDING_ADD"}return t}(n),f=e.gammaFactor>0?e.gammaFactor:1,p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ot).join("\n")}(n),m=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),g=i.createProgram();let v,_,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=[m].filter(Ot).join("\n"),v.length>0&&(v+="\n"),_=[p,m].filter(Ot).join("\n"),_.length>0&&(_+="\n")):(v=[Ht(n),"#define SHADER_NAME "+n.shaderName,m,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargets&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ot).join("\n"),_=[p,Ht(n),"#define SHADER_NAME "+n.shaderName,m,"#define GAMMA_FACTOR "+f,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularTintMap?"#define USE_SPECULARTINTMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==a.uL9?"#define TONE_MAPPING":"",n.toneMapping!==a.uL9?St.W.tonemapping_pars_fragment:"",n.toneMapping!==a.uL9?Ut("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.format===a.UCm?"#define OPAQUE":"",St.W.encodings_pars_fragment,n.map?Ft("mapTexelToLinear",n.mapEncoding):"",n.matcap?Ft("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Ft("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Ft("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.specularTintMap?Ft("specularTintMapTexelToLinear",n.specularTintMapEncoding):"",n.lightMap?Ft("lightMapTexelToLinear",n.lightMapEncoding):"",Dt("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ot).join("\n")),s=Nt(s),s=kt(s,n),s=It(s,n),c=Nt(c),c=kt(c,n),c=It(c,n),s=Gt(s),c=Gt(c),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,_=["#define varying in",n.glslVersion===a.LSk?"":"out highp vec4 pc_fragColor;",n.glslVersion===a.LSk?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const b=y+v+s,x=y+_+c,w=Et(i,i.VERTEX_SHADER,b),A=Et(i,i.FRAGMENT_SHADER,x);if(i.attachShader(g,w),i.attachShader(g,A),void 0!==n.index0AttributeName?i.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),e.debug.checkShaderErrors){const e=i.getProgramInfoLog(g).trim(),t=i.getShaderInfoLog(w).trim(),n=i.getShaderInfoLog(A).trim();let r=!0,o=!0;if(!1===i.getProgramParameter(g,i.LINK_STATUS)){r=!1;const t=Ct(i,w,"vertex"),n=Ct(i,A,"fragment");Rt.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?Rt.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(o=!1);o&&(this.diagnostics={runnable:r,programLog:e,vertexShader:{log:t,prefix:v},fragmentShader:{log:n,prefix:_}})}let T,M;return i.deleteShader(w),i.deleteShader(A),this.getUniforms=function(){return void 0===T&&(T=new Mt(i,g)),T},this.getAttributes=function(){return void 0===M&&(M=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,g)),M},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Lt++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=A,this}var Qt=n(9192),Yt=n(5108);function Kt(e,t,n,r,i,o,s){const c=[],l=i.isWebGL2,u=i.logarithmicDepthBuffer,d=i.floatVertexTextures,f=i.maxVertexUniforms,p=i.vertexTextures;let m=i.precision;const g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},v=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoat","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","specularIntensityMap","specularTintMap","specularTintMapEncoding","roughnessMap","metalnessMap","gradientMap","alphaMap","alphaTest","combine","vertexColors","vertexAlphas","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","morphTargetsCount","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","format","sheen","transmission","transmissionMap","thicknessMap"];function _(e){let t;return e&&e.isTexture?t=e.encoding:e&&e.isWebGLRenderTarget?(Yt.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=a.rnI,l&&e&&e.isTexture&&e.format===a.wk1&&e.type===a.ywz&&e.encoding===a.knz&&(t=a.rnI),t}return{getParameters:function(o,c,h,v,y){const b=v.fog,x=o.isMeshStandardMaterial?v.environment:null,w=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),A=g[o.type],T=y.isSkinnedMesh?function(e){const t=e.skeleton.bones;if(d)return 1024;{const e=f,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(Yt.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}}(y):0;let M,E;if(null!==o.precision&&(m=i.getMaxPrecision(o.precision),m!==o.precision&&Yt.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",m,"instead.")),A){const e=Qt.V[A];M=e.vertexShader,E=e.fragmentShader}else M=o.vertexShader,E=o.fragmentShader;const S=e.getRenderTarget(),R=o.alphaTest>0,L=o.clearcoat>0;return{isWebGL2:l,shaderID:A,shaderName:o.type,vertexShader:M,fragmentShader:E,defines:o.defines,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:m,instancing:!0===y.isInstancedMesh,instancingColor:!0===y.isInstancedMesh&&null!==y.instanceColor,supportsVertexTextures:p,outputEncoding:null!==S?_(S.texture):e.outputEncoding,map:!!o.map,mapEncoding:_(o.map),matcap:!!o.matcap,matcapEncoding:_(o.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:_(w),envMapCubeUV:!!w&&(w.mapping===a.g8_||w.mapping===a.SVc),lightMap:!!o.lightMap,lightMapEncoding:_(o.lightMap),aoMap:!!o.aoMap,emissiveMap:!!o.emissiveMap,emissiveMapEncoding:_(o.emissiveMap),bumpMap:!!o.bumpMap,normalMap:!!o.normalMap,objectSpaceNormalMap:o.normalMapType===a.PA7,tangentSpaceNormalMap:o.normalMapType===a.IOt,clearcoat:L,clearcoatMap:L&&!!o.clearcoatMap,clearcoatRoughnessMap:L&&!!o.clearcoatRoughnessMap,clearcoatNormalMap:L&&!!o.clearcoatNormalMap,displacementMap:!!o.displacementMap,roughnessMap:!!o.roughnessMap,metalnessMap:!!o.metalnessMap,specularMap:!!o.specularMap,specularIntensityMap:!!o.specularIntensityMap,specularTintMap:!!o.specularTintMap,specularTintMapEncoding:_(o.specularTintMap),alphaMap:!!o.alphaMap,alphaTest:R,gradientMap:!!o.gradientMap,sheen:o.sheen>0,transmission:o.transmission>0,transmissionMap:!!o.transmissionMap,thicknessMap:!!o.thicknessMap,combine:o.combine,vertexTangents:!!o.normalMap&&!!y.geometry&&!!y.geometry.attributes.tangent,vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!y.geometry&&!!y.geometry.attributes.color&&4===y.geometry.attributes.color.itemSize,vertexUvs:!!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatMap||o.clearcoatRoughnessMap||o.clearcoatNormalMap||o.displacementMap||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap),uvsVertexOnly:!(o.map||o.bumpMap||o.normalMap||o.specularMap||o.alphaMap||o.emissiveMap||o.roughnessMap||o.metalnessMap||o.clearcoatNormalMap||o.transmission>0||o.transmissionMap||o.thicknessMap||o.specularIntensityMap||o.specularTintMap||!o.displacementMap),fog:!!b,useFog:o.fog,fogExp2:b&&b.isFogExp2,flatShading:!!o.flatShading,sizeAttenuation:o.sizeAttenuation,logarithmicDepthBuffer:u,skinning:!0===y.isSkinnedMesh&&T>0,maxBones:T,useVertexTexture:d,morphTargets:!!y.geometry&&!!y.geometry.morphAttributes.position,morphNormals:!!y.geometry&&!!y.geometry.morphAttributes.normal,morphTargetsCount:y.geometry&&y.geometry.morphAttributes.position?y.geometry.morphAttributes.position.length:0,numDirLights:c.directional.length,numPointLights:c.point.length,numSpotLights:c.spot.length,numRectAreaLights:c.rectArea.length,numHemiLights:c.hemi.length,numDirLightShadows:c.directionalShadowMap.length,numPointLightShadows:c.pointShadowMap.length,numSpotLightShadows:c.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,format:o.format,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&h.length>0,shadowMapType:e.shadowMap.type,toneMapping:o.toneMapped?e.toneMapping:a.uL9,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===a.ehD,flipSided:o.side===a._Li,depthPacking:void 0!==o.depthPacking&&o.depthPacking,index0AttributeName:o.index0AttributeName,extensionDerivatives:o.extensions&&o.extensions.derivatives,extensionFragDepth:o.extensions&&o.extensions.fragDepth,extensionDrawBuffers:o.extensions&&o.extensions.drawBuffers,extensionShaderTextureLOD:o.extensions&&o.extensions.shaderTextureLOD,rendererExtensionFragDepth:l||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:l||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:l||r.has("EXT_shader_texture_lod"),customProgramCacheKey:o.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push((0,de.Wu)(t.fragmentShader)),n.push((0,de.Wu)(t.vertexShader))),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);if(!1===t.isRawShaderMaterial){for(let e=0;e<v.length;e++)n.push(t[v[e]]);n.push(e.outputEncoding),n.push(e.gammaFactor)}return n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=g[e.type];let n;if(t){const e=Qt.V[t];n=h.rD.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new Xt(e,n,t,o),c.push(r)),r},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},programs:c}}function qt(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Jt(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $t(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function en(e){const t=[];let n=0;const r=[],i=[],o=[],a={id:-1};function s(r,i,o,s,c,l){let u=t[n];const h=e.get(o);return void 0===u?(u={id:r.id,object:r,geometry:i,material:o,program:h.program||a,groupOrder:s,renderOrder:r.renderOrder,z:c,group:l},t[n]=u):(u.id=r.id,u.object=r,u.geometry=i,u.material=o,u.program=h.program||a,u.groupOrder=s,u.renderOrder=r.renderOrder,u.z=c,u.group=l),n++,u}return{opaque:r,transmissive:i,transparent:o,init:function(){n=0,r.length=0,i.length=0,o.length=0},push:function(e,t,n,a,c,l){const u=s(e,t,n,a,c,l);n.transmission>0?i.push(u):!0===n.transparent?o.push(u):r.push(u)},unshift:function(e,t,n,a,c,l){const u=s(e,t,n,a,c,l);n.transmission>0?i.unshift(u):!0===n.transparent?o.unshift(u):r.unshift(u)},finish:function(){for(let e=n,r=t.length;e<r;e++){const n=t[e];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}},sort:function(e,t){r.length>1&&r.sort(e||Jt),i.length>1&&i.sort(t||$t),o.length>1&&o.sort(t||$t)}}}function tn(e){let t=new WeakMap;return{get:function(n,r){let i;return!1===t.has(n)?(i=new en(e),t.set(n,[i])):r>=t.get(n).length?(i=new en(e),t.get(n).push(i)):i=t.get(n)[r],i},dispose:function(){t=new WeakMap}}}var nn=n(9708),rn=n(5108);function on(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new f.P,color:new B.I};break;case"SpotLight":n={position:new f.P,direction:new f.P,color:new B.I,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new f.P,color:new B.I,distance:0,decay:0};break;case"HemisphereLight":n={direction:new f.P,skyColor:new B.I,groundColor:new B.I};break;case"RectAreaLight":n={color:new B.I,position:new f.P,halfWidth:new f.P,halfHeight:new f.P}}return e[t.id]=n,n}}}let an=0;function sn(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function cn(e,t){const n=new on,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new I.F};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new I.F,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let e=0;e<9;e++)i.probe.push(new f.P);const o=new f.P,a=new p.y,s=new p.y;return{setup:function(o,a){let s=0,c=0,l=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0;o.sort(sn);const _=!0!==a?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],a=t.color,y=t.intensity,b=t.distance,x=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)s+=a.r*y*_,c+=a.g*y*_,l+=a.b*y*_;else if(t.isLightProbe)for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],y);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=x,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);if(e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(y*_),e.distance=b,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.spotShadow[d]=n,i.spotShadowMap[d]=x,i.spotShadowMatrix[d]=t.shadow.matrix,v++}i.spot[d]=e,d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(y),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*_),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=x,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(y*_),e.groundColor.copy(t.groundColor).multiplyScalar(y*_),i.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=nn.r.LTC_FLOAT_1,i.rectAreaLTC2=nn.r.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=nn.r.LTC_HALF_1,i.rectAreaLTC2=nn.r.LTC_HALF_2):rn.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=s,i.ambient[1]=c,i.ambient[2]=l;const y=i.hash;y.directionalLength===u&&y.pointLength===h&&y.spotLength===d&&y.rectAreaLength===f&&y.hemiLength===p&&y.numDirectionalShadows===m&&y.numPointShadows===g&&y.numSpotShadows===v||(i.directional.length=u,i.spot.length=d,i.rectArea.length=f,i.point.length=h,i.hemi.length=p,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotShadowMatrix.length=v,y.directionalLength=u,y.pointLength=h,y.spotLength=d,y.rectAreaLength=f,y.hemiLength=p,y.numDirectionalShadows=m,y.numPointShadows=g,y.numSpotShadows=v,i.version=an++)},setupView:function(e,t){let n=0,r=0,c=0,l=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=i.spot[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),o.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),c++}else if(d.isRectAreaLight){const e=i.rectArea[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),s.identity(),a.copy(d.matrixWorld),a.premultiply(h),s.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(s),e.halfHeight.applyMatrix4(s),l++}else if(d.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),r++}else if(d.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),e.direction.normalize(),u++}}},state:i}}function ln(e,t){const n=new cn(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function un(e,t){let n=new WeakMap;return{get:function(r,i=0){let o;return!1===n.has(r)?(o=new ln(e,t),n.set(r,[o])):i>=n.get(r).length?(o=new ln(e,t),n.get(r).push(o)):o=n.get(r)[i],o},dispose:function(){n=new WeakMap}}}var hn=n(3441),dn=n(5108);function fn(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new x.L;let r=null;const i=new x.L(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?N(e.DEPTH_TEST):Z(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case a.BVF:e.depthFunc(e.NEVER);break;case a.Se2:e.depthFunc(e.ALWAYS);break;case a.Zr5:e.depthFunc(e.LESS);break;case a.vCF:e.depthFunc(e.LEQUAL);break;case a.eD:e.depthFunc(e.EQUAL);break;case a.ksN:e.depthFunc(e.GEQUAL);break;case a.w$m:e.depthFunc(e.GREATER);break;case a.M6v:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(n){t||(n?N(e.STENCIL_TEST):Z(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&c===r||(e.stencilOp(t,n,r),a=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,c=null,l=null}}};let c={},l=null,u={},h=null,d=!1,f=null,p=null,m=null,g=null,v=null,_=null,y=null,b=!1,w=null,A=null,T=null,M=null,E=null;const S=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let R=!1,L=0;const P=e.getParameter(e.VERSION);-1!==P.indexOf("WebGL")?(L=parseFloat(/^WebGL (\d)/.exec(P)[1]),R=L>=1):-1!==P.indexOf("OpenGL ES")&&(L=parseFloat(/^OpenGL ES (\d)/.exec(P)[1]),R=L>=2);let C=null,F={};const D=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),O=(new x.L).fromArray(D),k=(new x.L).fromArray(U);function I(t,n,r){const i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let t=0;t<r;t++)e.texImage2D(n+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return o}const B={};function N(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function Z(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}B[e.TEXTURE_2D]=I(e.TEXTURE_2D,e.TEXTURE_2D,1),B[e.TEXTURE_CUBE_MAP]=I(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),N(e.DEPTH_TEST),o.setFunc(a.vCF),V(!1),W(a.tm_),N(e.CULL_FACE),G(a.jFi);const j={[a.bGH]:e.FUNC_ADD,[a.Wbm]:e.FUNC_SUBTRACT,[a.rOj]:e.FUNC_REVERSE_SUBTRACT};if(r)j[a.r_]=e.MIN,j[a.Sm8]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(j[a.r_]=e.MIN_EXT,j[a.Sm8]=e.MAX_EXT)}const z={[a.c8b]:e.ZERO,[a.ghN]:e.ONE,[a.KhW]:e.SRC_COLOR,[a.k74]:e.SRC_ALPHA,[a.RlZ]:e.SRC_ALPHA_SATURATE,[a.Vdb]:e.DST_COLOR,[a.fSK]:e.DST_ALPHA,[a.iWC]:e.ONE_MINUS_SRC_COLOR,[a.LgZ]:e.ONE_MINUS_SRC_ALPHA,[a.Wpd]:e.ONE_MINUS_DST_COLOR,[a.Hy8]:e.ONE_MINUS_DST_ALPHA};function G(t,n,r,i,o,s,c,l){if(t!==a.jFi){if(!1===d&&(N(e.BLEND),d=!0),t===a.Xaj)o=o||n,s=s||r,c=c||i,n===p&&o===v||(e.blendEquationSeparate(j[n],j[o]),p=n,v=o),r===m&&i===g&&s===_&&c===y||(e.blendFuncSeparate(z[r],z[i],z[s],z[c]),m=r,g=i,_=s,y=c),f=t,b=null;else if(t!==f||l!==b){if(p===a.bGH&&v===a.bGH||(e.blendEquation(e.FUNC_ADD),p=a.bGH,v=a.bGH),l)switch(t){case a.bdR:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.WMw:e.blendFunc(e.ONE,e.ONE);break;case a.N4l:e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA);break;case a.M5h:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:dn.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case a.bdR:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case a.WMw:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case a.N4l:e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR);break;case a.M5h:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:dn.error("THREE.WebGLState: Invalid blending: ",t)}m=null,g=null,_=null,y=null,f=t,b=l}}else!0===d&&(Z(e.BLEND),d=!1)}function V(t){w!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),w=t)}function W(t){t!==a.PeU?(N(e.CULL_FACE),t!==A&&(t===a.tm_?e.cullFace(e.BACK):t===a.S2y?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Z(e.CULL_FACE),A=t}function H(t,n,r){t?(N(e.POLYGON_OFFSET_FILL),M===n&&E===r||(e.polygonOffset(n,r),M=n,E=r)):Z(e.POLYGON_OFFSET_FILL)}function X(t){void 0===t&&(t=e.TEXTURE0+S-1),C!==t&&(e.activeTexture(t),C=t)}return{buffers:{color:i,depth:o,stencil:s},enable:N,disable:Z,bindFramebuffer:function(t,n){return null===n&&null!==l&&(n=l),u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},bindXRFramebuffer:function(t){t!==l&&(e.bindFramebuffer(e.FRAMEBUFFER,t),l=t)},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:G,setMaterial:function(t,n){t.side===a.ehD?Z(e.CULL_FACE):N(e.CULL_FACE);let r=t.side===a._Li;n&&(r=!r),V(r),t.blending===a.bdR&&!1===t.transparent?G(a.jFi):G(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const c=t.stencilWrite;s.setTest(c),c&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),H(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?N(e.SAMPLE_ALPHA_TO_COVERAGE):Z(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:V,setCullFace:W,setLineWidth:function(t){t!==T&&(R&&e.lineWidth(t),T=t)},setPolygonOffset:H,setScissorTest:function(t){t?N(e.SCISSOR_TEST):Z(e.SCISSOR_TEST)},activeTexture:X,bindTexture:function(t,n){null===C&&X();let r=F[C];void 0===r&&(r={type:void 0,texture:void 0},F[C]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||B[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=F[C];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){dn.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){dn.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){dn.error("THREE.WebGLState:",e)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===k.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),k.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},C=null,F={},l=null,u={},h=null,d=!1,f=null,p=null,m=null,g=null,v=null,_=null,y=null,b=!1,w=null,A=null,T=null,M=null,E=null,O.set(0,0,e.canvas.width,e.canvas.height),k.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),s.reset()}}}var pn=n(5108);function mn(e,t,n,r,i,o,s){const c=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,f=new WeakMap;let p,g=!1;try{g="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function v(e,t){return g?new OffscreenCanvas(e,t):(0,de.c)("canvas")}function _(e,t,n,r){let i=1;if((e.width>r||e.height>r)&&(i=r/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const r=t?m.floorPowerOfTwo:Math.floor,o=r(i*e.width),a=r(i*e.height);void 0===p&&(p=v(o,a));const s=n?v(o,a):p;s.width=o,s.height=a;return s.getContext("2d").drawImage(e,0,0,o,a),pn.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+o+"x"+a+")."),s}return"data"in e&&pn.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return m.isPowerOfTwo(e.width)&&m.isPowerOfTwo(e.height)}function b(e,t){return e.generateMipmaps&&t&&e.minFilter!==a.TyD&&e.minFilter!==a.wem}function x(t,n,i,o,a=1){e.generateMipmap(t);r.get(n).__maxMipLevel=Math.log2(Math.max(i,o,a))}function w(n,r,i,o){if(!1===c)return r;if(null!==n){if(void 0!==e[n])return e[n];pn.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;return r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RGB&&(i===e.FLOAT&&(s=e.RGB32F),i===e.HALF_FLOAT&&(s=e.RGB16F),i===e.UNSIGNED_BYTE&&(s=e.RGB8)),r===e.RGBA&&(i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=o===a.knz?e.SRGB8_ALPHA8:e.RGBA8)),s!==e.R16F&&s!==e.R32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function A(t){return t===a.TyD||t===a.YLQ||t===a.aH4?e.NEAREST:e.LINEAR}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=r.get(t);if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture),r.remove(t)}(n),n.isVideoTexture&&f.delete(n),s.memory.textures--}function M(t){const n=t.target;n.removeEventListener("dispose",M),function(t){const n=t.texture,i=r.get(t),o=r.get(n);if(!t)return;void 0!==o.__webglTexture&&(e.deleteTexture(o.__webglTexture),s.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer&&e.deleteRenderbuffer(i.__webglColorRenderbuffer),i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer);if(t.isWebGLMultipleRenderTargets)for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),s.memory.textures--),r.remove(n[t])}r.remove(n),r.remove(t)}(n)}let E=0;function S(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;f.get(e)!==t&&(f.set(e,t),e.update())}(t),t.version>0&&o.__version!==t.version){const e=t.image;if(void 0===e);else if(!1!==e.complete)return void D(o,t,i)}n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function R(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,r,i){if(6!==r.image.length)return;F(t,r),n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const s=r&&(r.isCompressedTexture||r.image[0].isCompressedTexture),l=r.image[0]&&r.image[0].isDataTexture,h=[];for(let e=0;e<6;e++)h[e]=s||l?l?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,u);const d=h[0],f=y(d)||c,p=o.convert(r.format),m=o.convert(r.type),g=w(r.internalFormat,p,m,r.encoding);let v;if(C(e.TEXTURE_CUBE_MAP,r,f),s){for(let t=0;t<6;t++){v=h[t].mipmaps;for(let i=0;i<v.length;i++){const o=v[i];r.format!==a.wk1&&r.format!==a.UCm?null!==p?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,g,o.width,o.height,0,o.data):pn.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,i,g,o.width,o.height,0,p,m,o.data)}}t.__maxMipLevel=v.length-1}else{v=r.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,g,h[t].width,h[t].height,0,p,m,h[t].data);for(let r=0;r<v.length;r++){const i=v[r].image[t].image;n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,g,i.width,i.height,0,p,m,i.data)}}else{n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,g,p,m,h[t]);for(let r=0;r<v.length;r++){const i=v[r];n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,g,p,m,i.image[t])}}t.__maxMipLevel=v.length}b(r,f)&&x(e.TEXTURE_CUBE_MAP,r,d.width,d.height);t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(s,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture))}const L={[a.rpg]:e.REPEAT,[a.uWy]:e.CLAMP_TO_EDGE,[a.OoA]:e.MIRRORED_REPEAT},P={[a.TyD]:e.NEAREST,[a.YLQ]:e.NEAREST_MIPMAP_NEAREST,[a.aH4]:e.NEAREST_MIPMAP_LINEAR,[a.wem]:e.LINEAR,[a.qyh]:e.LINEAR_MIPMAP_NEAREST,[a.D1R]:e.LINEAR_MIPMAP_LINEAR};function C(n,o,s){if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,L[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,L[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,L[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,P[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,P[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===a.uWy&&o.wrapT===a.uWy||pn.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,A(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,A(o.minFilter)),o.minFilter!==a.TyD&&o.minFilter!==a.wem&&pn.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(o.type===a.VzW&&!1===t.has("OES_texture_float_linear"))return;if(!1===c&&o.type===a.cLu&&!1===t.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function F(t,n){void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",T),t.__webglTexture=e.createTexture(),s.memory.textures++)}function D(t,r,i){let s=e.TEXTURE_2D;r.isDataTexture2DArray&&(s=e.TEXTURE_2D_ARRAY),r.isDataTexture3D&&(s=e.TEXTURE_3D),F(t,r),n.activeTexture(e.TEXTURE0+i),n.bindTexture(s,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const l=function(e){return!c&&(e.wrapS!==a.uWy||e.wrapT!==a.uWy||e.minFilter!==a.TyD&&e.minFilter!==a.wem)}(r)&&!1===y(r.image),u=_(r.image,l,!1,h),d=y(u)||c,f=o.convert(r.format);let p,m=o.convert(r.type),g=w(r.internalFormat,f,m,r.encoding);C(s,r,d);const v=r.mipmaps;if(r.isDepthTexture)g=e.DEPTH_COMPONENT,c?g=r.type===a.VzW?e.DEPTH_COMPONENT32F:r.type===a.JQ4?e.DEPTH_COMPONENT24:r.type===a.wJv?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===a.VzW&&pn.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===a.qkB&&g===e.DEPTH_COMPONENT&&r.type!==a.LsT&&r.type!==a.JQ4&&(pn.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=a.LsT,m=o.convert(r.type)),r.format===a.brP&&g===e.DEPTH_COMPONENT&&(g=e.DEPTH_STENCIL,r.type!==a.wJv&&(pn.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=a.wJv,m=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,g,u.width,u.height,0,f,m,null);else if(r.isDataTexture)if(v.length>0&&d){for(let t=0,r=v.length;t<r;t++)p=v[t],n.texImage2D(e.TEXTURE_2D,t,g,p.width,p.height,0,f,m,p.data);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,u.width,u.height,0,f,m,u.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(let t=0,i=v.length;t<i;t++)p=v[t],r.format!==a.wk1&&r.format!==a.UCm?null!==f?n.compressedTexImage2D(e.TEXTURE_2D,t,g,p.width,p.height,0,p.data):pn.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,t,g,p.width,p.height,0,f,m,p.data);t.__maxMipLevel=v.length-1}else if(r.isDataTexture2DArray)n.texImage3D(e.TEXTURE_2D_ARRAY,0,g,u.width,u.height,u.depth,0,f,m,u.data),t.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(e.TEXTURE_3D,0,g,u.width,u.height,u.depth,0,f,m,u.data),t.__maxMipLevel=0;else if(v.length>0&&d){for(let t=0,r=v.length;t<r;t++)p=v[t],n.texImage2D(e.TEXTURE_2D,t,g,f,m,p);r.generateMipmaps=!1,t.__maxMipLevel=v.length-1}else n.texImage2D(e.TEXTURE_2D,0,g,f,m,u),t.__maxMipLevel=0;b(r,d)&&x(s,r,u.width,u.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function U(t,i,a,s,c){const l=o.convert(a.format),u=o.convert(a.type),h=w(a.internalFormat,l,u,a.encoding);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,0,h,i.width,i.height,i.depth,0,l,u,null):n.texImage2D(c,0,h,i.width,i.height,0,l,u,null),n.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,s,c,r.get(a).__webglTexture,0),n.bindFramebuffer(e.FRAMEBUFFER,null)}function O(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=e.DEPTH_COMPONENT16;if(r){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===a.VzW?i=e.DEPTH_COMPONENT32F:t.type===a.JQ4&&(i=e.DEPTH_COMPONENT24));const r=I(n);e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){if(r){const t=I(n);e.renderbufferStorageMultisample(e.RENDERBUFFER,t,e.DEPTH24_STENCIL8,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,i=o.convert(t.format),a=o.convert(t.type),s=w(t.internalFormat,i,a,t.encoding);if(r){const t=I(n);e.renderbufferStorageMultisample(e.RENDERBUFFER,t,s,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,s,n.width,n.height)}e.bindRenderbuffer(e.RENDERBUFFER,null)}function k(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),S(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture;if(i.depthTexture.format===a.qkB)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==a.brP)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),O(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),O(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function I(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}let B=!1,N=!1;this.allocateTextureUnit=function(){const e=E;return e>=l&&pn.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=S,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?D(o,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture))},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?D(o,t,i):(n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_3D,o.__webglTexture))},this.setTextureCube=R,this.setupRenderTarget=function(t){const l=t.texture,u=r.get(t),h=r.get(l);t.addEventListener("dispose",M),!0!==t.isWebGLMultipleRenderTargets&&(h.__webglTexture=e.createTexture(),h.__version=l.version,s.memory.textures++);const d=!0===t.isWebGLCubeRenderTarget,f=!0===t.isWebGLMultipleRenderTargets,p=!0===t.isWebGLMultisampleRenderTarget,m=l.isDataTexture3D||l.isDataTexture2DArray,g=y(t)||c;if(!c||l.format!==a.UCm||l.type!==a.VzW&&l.type!==a.cLu||(l.format=a.wk1,pn.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),d){u.__webglFramebuffer=[];for(let t=0;t<6;t++)u.__webglFramebuffer[t]=e.createFramebuffer()}else if(u.__webglFramebuffer=e.createFramebuffer(),f)if(i.drawBuffers){const n=t.texture;for(let t=0,i=n.length;t<i;t++){const i=r.get(n[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),s.memory.textures++)}}else pn.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(p)if(c){u.__webglMultisampledFramebuffer=e.createFramebuffer(),u.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,u.__webglColorRenderbuffer);const r=o.convert(l.format),i=o.convert(l.type),a=w(l.internalFormat,r,i,l.encoding),s=I(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,s,a,t.width,t.height),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer),e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(u.__webglDepthRenderbuffer=e.createRenderbuffer(),O(u.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}else pn.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,h.__webglTexture),C(e.TEXTURE_CUBE_MAP,l,g);for(let n=0;n<6;n++)U(u.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n);b(l,g)&&x(e.TEXTURE_CUBE_MAP,l,t.width,t.height),n.unbindTexture()}else if(f){const i=t.texture;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r.get(a);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),C(e.TEXTURE_2D,a,g),U(u.__webglFramebuffer,t,a,e.COLOR_ATTACHMENT0+o,e.TEXTURE_2D),b(a,g)&&x(e.TEXTURE_2D,a,t.width,t.height)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if(m)if(c){r=l.isDataTexture3D?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY}else pn.warn("THREE.DataTexture3D and THREE.DataTexture2DArray only supported with WebGL2.");n.bindTexture(r,h.__webglTexture),C(r,l,g),U(u.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r),b(l,g)&&x(r,l,t.width,t.height,t.depth),n.unbindTexture()}t.depthBuffer&&k(t)},this.updateRenderTargetMipmap=function(t){const i=y(t)||c,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let a=0,s=o.length;a<s;a++){const s=o[a];if(b(s,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(s).__webglTexture;n.bindTexture(i,o),x(i,s,t.width,t.height),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){const i=t.width,o=t.height;let a=e.COLOR_BUFFER_BIT;t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT);const s=r.get(t);n.bindFramebuffer(e.READ_FRAMEBUFFER,s.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,s.__webglFramebuffer),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,e.NEAREST),n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,s.__webglMultisampledFramebuffer)}else pn.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===B&&(pn.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),B=!0),e=e.texture),S(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===N&&(pn.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),N=!0),e=e.texture),R(e,t)}}function gn(e,t,n){const r=n.isWebGL2;return{convert:function(n){let i;if(n===a.ywz)return e.UNSIGNED_BYTE;if(n===a.k0A)return e.UNSIGNED_SHORT_4_4_4_4;if(n===a.irR)return e.UNSIGNED_SHORT_5_5_5_1;if(n===a.XNv)return e.UNSIGNED_SHORT_5_6_5;if(n===a.T95)return e.BYTE;if(n===a.iAb)return e.SHORT;if(n===a.LsT)return e.UNSIGNED_SHORT;if(n===a.Kz5)return e.INT;if(n===a.JQ4)return e.UNSIGNED_INT;if(n===a.VzW)return e.FLOAT;if(n===a.cLu)return r?e.HALF_FLOAT:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(n===a.OTo)return e.ALPHA;if(n===a.UCm)return e.RGB;if(n===a.wk1)return e.RGBA;if(n===a.Y8D)return e.LUMINANCE;if(n===a.cRx)return e.LUMINANCE_ALPHA;if(n===a.qkB)return e.DEPTH_COMPONENT;if(n===a.brP)return e.DEPTH_STENCIL;if(n===a.hEm)return e.RED;if(n===a.D9w)return e.RED_INTEGER;if(n===a.av9)return e.RG;if(n===a.CtA)return e.RG_INTEGER;if(n===a.F5G)return e.RGB_INTEGER;if(n===a.E2K)return e.RGBA_INTEGER;if(n===a.wuA||n===a.BFQ||n===a.v3W||n===a.ILR){if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===a.wuA)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===a.BFQ)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===a.v3W)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===a.ILR)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===a._AM||n===a.vCx||n===a.eaV||n===a.CaW){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===a._AM)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===a.vCx)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===a.eaV)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===a.CaW)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===a.fto)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if((n===a.l0P||n===a.ekQ)&&(i=t.get("WEBGL_compressed_texture_etc"),null!==i)){if(n===a.l0P)return i.COMPRESSED_RGB8_ETC2;if(n===a.ekQ)return i.COMPRESSED_RGBA8_ETC2_EAC}return n===a.ptH||n===a.jZA||n===a.y2t||n===a.gi4||n===a.Djp||n===a.BG$||n===a.NYV||n===a.xJs||n===a.pKu||n===a.GG6||n===a.Gih||n===a.FUD||n===a.iiP||n===a.SvJ||n===a.APR||n===a.Abz||n===a.v6B||n===a.pnl||n===a.OS$||n===a._wO||n===a.bcs||n===a.Y5S||n===a.Wso||n===a.p1$||n===a.I0h||n===a.Yjz||n===a.ePn||n===a.HBG?(i=t.get("WEBGL_compressed_texture_astc"),null!==i?n:null):n===a.bsb?(i=t.get("EXT_texture_compression_bptc"),null!==i?n:null):n===a.wJv?r?e.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0}}}class ArrayCamera extends PerspectiveCamera{constructor(e=[]){super(),this.cameras=e}}ArrayCamera.prototype.isArrayCamera=!0;var vn=n(4092);class Group extends d.T{constructor(){super(),this.type="Group"}}Group.prototype.isGroup=!0;const _n={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new f.P,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new f.P),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new f.P,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new f.P),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState)if(null!==a&&(r=t.getPose(e.targetRaySpace,n),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_n))),c&&e.hand){o=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n);if(void 0===c.joints[r.jointName]){const e=new Group;e.matrixAutoUpdate=!1,e.visible=!1,c.joints[r.jointName]=e,c.add(e)}const i=c.joints[r.jointName];null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,l=.005;c.inputState.pinching&&a>s+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&a<=s-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==c&&(c.visible=null!==o),this}}var yn=n(5108);class WebXRManager extends vn.p{constructor(e,t){super();const n=this,r=e.state;let i=null,o=1,a=null,s="local-floor",c=null,l=null,u=null,h=null,d=null,p=!1,m=null,g=null,v=null,_=null,y=null,b=null;const A=[],T=new Map,M=new PerspectiveCamera;M.layers.enable(1),M.viewport=new x.L;const E=new PerspectiveCamera;E.layers.enable(2),E.viewport=new x.L;const S=[M,E],R=new ArrayCamera;R.layers.enable(1),R.layers.enable(2);let L=null,P=null;function C(e){const t=T.get(e.inputSource);t&&t.dispatchEvent({type:e.type,data:e.inputSource})}function F(){T.forEach((function(e,t){e.disconnect(t)})),T.clear(),L=null,P=null,r.bindXRFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),u&&t.deleteFramebuffer(u),m&&t.deleteFramebuffer(m),g&&t.deleteRenderbuffer(g),v&&t.deleteRenderbuffer(v),u=null,m=null,g=null,v=null,d=null,h=null,l=null,i=null,B.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function D(e){const t=i.inputSources;for(let e=0;e<A.length;e++)T.set(t[e],A[e]);for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=T.get(n);r&&(r.dispatchEvent({type:"disconnected",data:n}),T.delete(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t],r=T.get(n);r&&r.dispatchEvent({type:"connected",data:n})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=A[e];return void 0===t&&(t=new WebXRController,A[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=A[e];return void 0===t&&(t=new WebXRController,A[e]=t),t.getGripSpace()},this.getHand=function(e){let t=A[e];return void 0===t&&(t=new WebXRController,A[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){o=e,!0===n.isPresenting&&yn.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&yn.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return a},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return l},this.getFrame=function(){return _},this.getSession=function(){return i},this.setSession=async function(e){if(i=e,null!==i){i.addEventListener("select",C),i.addEventListener("selectstart",C),i.addEventListener("selectend",C),i.addEventListener("squeeze",C),i.addEventListener("squeezestart",C),i.addEventListener("squeezeend",C),i.addEventListener("end",F),i.addEventListener("inputsourceschange",D);const e=t.getContextAttributes();if(!0!==e.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers){const n={antialias:e.antialias,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:d})}else if(t instanceof WebGLRenderingContext){const n={antialias:!0,alpha:e.alpha,depth:e.depth,stencil:e.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,t,n),i.updateRenderState({layers:[d]})}else{p=e.antialias;let n=null;e.depth&&(b=t.DEPTH_BUFFER_BIT,e.stencil&&(b|=t.STENCIL_BUFFER_BIT),y=e.stencil?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,n=e.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24);const a={colorFormat:e.alpha?t.RGBA8:t.RGB8,depthFormat:n,scaleFactor:o};l=new XRWebGLBinding(i,t),h=l.createProjectionLayer(a),u=t.createFramebuffer(),i.updateRenderState({layers:[h]}),p&&(m=t.createFramebuffer(),g=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,g),t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.RGBA8,h.textureWidth,h.textureHeight),r.bindFramebuffer(t.FRAMEBUFFER,m),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,g),t.bindRenderbuffer(t.RENDERBUFFER,null),null!==n&&(v=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,v),t.renderbufferStorageMultisample(t.RENDERBUFFER,4,n,h.textureWidth,h.textureHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,y,t.RENDERBUFFER,v),t.bindRenderbuffer(t.RENDERBUFFER,null)),r.bindFramebuffer(t.FRAMEBUFFER,null))}a=await i.requestReferenceSpace(s),B.setContext(i),B.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const U=new f.P,O=new f.P;function k(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;R.near=E.near=M.near=e.near,R.far=E.far=M.far=e.far,L===R.near&&P===R.far||(i.updateRenderState({depthNear:R.near,depthFar:R.far}),L=R.near,P=R.far);const t=e.parent,n=R.cameras;k(R,t);for(let e=0;e<n.length;e++)k(n[e],t);R.matrixWorld.decompose(R.position,R.quaternion,R.scale),e.position.copy(R.position),e.quaternion.copy(R.quaternion),e.scale.copy(R.scale),e.matrix.copy(R.matrix),e.matrixWorld.copy(R.matrixWorld);const r=e.children;for(let e=0,t=r.length;e<t;e++)r[e].updateMatrixWorld(!0);2===n.length?function(e,t,n){U.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(n.matrixWorld);const r=U.distanceTo(O),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=r/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=s+p,_=d-m,y=f+(r-m),b=c*s/v*g,x=l*s/v*g;e.projectionMatrix.makePerspective(_,y,b,x,g,v)}(R,M,E):R.projectionMatrix.copy(M.projectionMatrix)},this.getCamera=function(){return R},this.getFoveation=function(){return null!==h?h.fixedFoveation:null!==d?d.fixedFoveation:void 0},this.setFoveation=function(e){null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)};let I=null;const B=new w;B.setAnimationLoop((function(e,n){if(c=n.getViewerPose(a),_=n,null!==c){const e=c.views;null!==d&&r.bindXRFramebuffer(d.framebuffer);let n=!1;e.length!==R.cameras.length&&(R.cameras.length=0,n=!0);for(let i=0;i<e.length;i++){const o=e[i];let a=null;if(null!==d)a=d.getViewport(o);else{const e=l.getViewSubImage(h,o);r.bindXRFramebuffer(u),void 0!==e.depthStencilTexture&&t.framebufferTexture2D(t.FRAMEBUFFER,y,t.TEXTURE_2D,e.depthStencilTexture,0),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e.colorTexture,0),a=e.viewport}const s=S[i];s.matrix.fromArray(o.transform.matrix),s.projectionMatrix.fromArray(o.projectionMatrix),s.viewport.set(a.x,a.y,a.width,a.height),0===i&&R.matrix.copy(s.matrix),!0===n&&R.cameras.push(s)}p&&(r.bindXRFramebuffer(m),null!==b&&t.clear(b))}const o=i.inputSources;for(let e=0;e<A.length;e++){const t=A[e],r=o[e];t.update(r,n,a)}if(I&&I(e,n),p){const e=h.textureWidth,n=h.textureHeight;r.bindFramebuffer(t.READ_FRAMEBUFFER,m),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,u),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[y]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[y]),t.blitFramebuffer(0,0,e,n,0,0,e,n,t.COLOR_BUFFER_BIT,t.NEAREST),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),r.bindFramebuffer(t.READ_FRAMEBUFFER,null),r.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(t.FRAMEBUFFER,m)}_=null})),this.setAnimationLoop=function(e){I=e},this.dispose=function(){}}}function bn(e){function t(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map),n.alphaMap&&(t.alphaMap.value=n.alphaMap),n.specularMap&&(t.specularMap.value=n.specularMap),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const r=e.get(n).envMap;if(r){t.envMap.value=r,t.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio;const i=e.get(r).__maxMipLevel;void 0!==i&&(t.maxMipLevel.value=i)}let i,o;n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity),n.map?i=n.map:n.specularMap?i=n.specularMap:n.displacementMap?i=n.displacementMap:n.normalMap?i=n.normalMap:n.bumpMap?i=n.bumpMap:n.roughnessMap?i=n.roughnessMap:n.metalnessMap?i=n.metalnessMap:n.alphaMap?i=n.alphaMap:n.emissiveMap?i=n.emissiveMap:n.clearcoatMap?i=n.clearcoatMap:n.clearcoatNormalMap?i=n.clearcoatNormalMap:n.clearcoatRoughnessMap?i=n.clearcoatRoughnessMap:n.specularIntensityMap?i=n.specularIntensityMap:n.specularTintMap?i=n.specularTintMap:n.transmissionMap?i=n.transmissionMap:n.thicknessMap&&(i=n.thicknessMap),"string"==typeof i&&(i=window.F_TEXTURE_STREAMING_FUNCTION(i)),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uvTransform.value.copy(i.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),"string"==typeof o&&(o=window.F_TEXTURE_STREAMING_FUNCTION(o)),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uv2Transform.value.copy(o.matrix))}function n(t,n){t.roughness.value=n.roughness,t.metalness.value=n.metalness,n.roughnessMap&&(t.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(t.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap),n.bumpMap&&(t.bumpMap.value=n.bumpMap,t.bumpScale.value=n.bumpScale,n.side===a._Li&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,t.normalScale.value.copy(n.normalScale),n.side===a._Li&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias);e.get(n).envMap&&(t.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)},refreshMaterialUniforms:function(e,r,i,o,s){r.isMeshBasicMaterial?t(e,r):r.isMeshLambertMaterial?(t(e,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(e,r)):r.isMeshToonMaterial?(t(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===a._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===a._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshPhongMaterial?(t(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===a._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===a._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshStandardMaterial?(t(e,r),r.isMeshPhysicalMaterial?function(e,t,r){n(e,t),e.ior.value=t.ior,t.sheen>0&&(e.sheenTint.value.copy(t.sheenTint).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness);t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===a._Li&&e.clearcoatNormalScale.value.negate()));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationTint.value.copy(t.attenuationTint));e.specularIntensity.value=t.specularIntensity,e.specularTint.value.copy(t.specularTint),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularTintMap&&(e.specularTintMap.value=t.specularTintMap)}(e,r,s):n(e,r)):r.isMeshMatcapMaterial?(t(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===a._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===a._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDepthMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isMeshDistanceMaterial?(t(e,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,r)):r.isMeshNormalMaterial?(t(e,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===a._Li&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===a._Li&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(e,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let i;t.map?i=t.map:t.alphaMap&&(i=t.alphaMap);void 0!==i&&(!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}(e,r,i,o):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}var xn=n(5108);function wn(e={}){const t=void 0!==e.canvas?e.canvas:function(){const e=(0,de.c)("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,c=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,h=void 0!==e.powerPreference?e.powerPreference:"default",d=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let m=null,g=null;const v=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=a.rnI,this.physicallyCorrectLights=!1,this.toneMapping=a.uL9,this.toneMappingExposure=1;const y=this;let A=!1,S=0,L=0,C=null,F=-1,O=null;const k=new x.L,I=new x.L;let B=null,N=t.width,Z=t.height,j=1,z=null,G=null;const V=new x.L(0,0,N,Z),W=new x.L(0,0,N,Z);let H=!1;const X=[],Q=new b.i;let Y=!1,K=!1,q=null;const J=new p.y,$=new f.P,ee={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function te(){return null===C?j:1}let ne,re,ie,oe,ae,se,ce,ue,pe,ge,_e,ye,be,xe,Te,Me,Ee,Se,Re,Le,Pe,Ce,Fe,De=n;function Ue(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:r,depth:i,stencil:o,antialias:c,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if(t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",Be,!1),null===De){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),De=Ue(t,e),null===De)throw Ue(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===De.getShaderPrecisionFormat&&(De.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw xn.error("THREE.WebGLRenderer: "+e.message),e}function Oe(){ne=new he(De),re=new P(De,ne,e),ne.init(re),Ce=new gn(De,ne,re),ie=new fn(De,ne,re),X[0]=De.BACK,oe=new ve(De),ae=new qt,se=new mn(De,ne,ie,ae,re,Ce,oe),ce=new U(y),ue=new le(y),pe=new T(De,re),Fe=new E(De,ne,pe,re),ge=new fe(De,pe,oe,Fe),_e=new Ae(De,ge,pe,oe),Re=new we(De,re,se),Me=new D(ae),ye=new Kt(y,ce,ue,ne,re,Fe,Me),be=new bn(ae),xe=new tn(ae),Te=new un(ne,re),Se=new M.a(y,ce,ie,_e,l),Ee=new hn.c(y,_e,re),Le=new R(De,ne,oe,re),Pe=new me(De,ne,oe,re),oe.programs=ye.programs,y.capabilities=re,y.extensions=ne,y.properties=ae,y.renderLists=xe,y.shadowMap=Ee,y.state=ie,y.info=oe}Oe();const ke=new WebXRManager(y,De);function Ie(e){e.preventDefault(),xn.log("THREE.WebGLRenderer: Context Lost."),A=!0}function Be(){xn.log("THREE.WebGLRenderer: Context Restored."),A=!1;const e=oe.autoReset,t=Ee.enabled,n=Ee.autoUpdate,r=Ee.needsUpdate,i=Ee.type;Oe(),oe.autoReset=e,Ee.enabled=t,Ee.autoUpdate=n,Ee.needsUpdate=r,Ee.type=i}function Ne(e){const t=e.target;t.removeEventListener("dispose",Ne),function(e){(function(e){const t=ae.get(e).programs;void 0!==t&&t.forEach((function(e){ye.releaseProgram(e)}))})(e),ae.remove(e)}(t)}this.xr=ke,this.getContext=function(){return De},this.getContextAttributes=function(){return De.getContextAttributes()},this.forceContextLoss=function(){const e=ne.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=ne.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return j},this.setPixelRatio=function(e){void 0!==e&&(j=e,this.setSize(N,Z,!1))},this.getSize=function(e){return e.set(N,Z)},this.setSize=function(e,n,r){ke.isPresenting?xn.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(N=e,Z=n,t.width=Math.floor(e*j),t.height=Math.floor(n*j),!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(N*j,Z*j).floor()},this.setDrawingBufferSize=function(e,n,r){N=e,Z=n,j=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(k)},this.getViewport=function(e){return e.copy(V)},this.setViewport=function(e,t,n,r){e.isVector4?V.set(e.x,e.y,e.z,e.w):V.set(e,t,n,r),ie.viewport(k.copy(V).multiplyScalar(j).floor())},this.getScissor=function(e){return e.copy(W)},this.setScissor=function(e,t,n,r){e.isVector4?W.set(e.x,e.y,e.z,e.w):W.set(e,t,n,r),ie.scissor(I.copy(W).multiplyScalar(j).floor())},this.getScissorTest=function(){return H},this.setScissorTest=function(e){ie.setScissorTest(H=e)},this.setOpaqueSort=function(e){z=e},this.setTransparentSort=function(e){G=e},this.getClearColor=function(e){return e.copy(Se.getClearColor())},this.setClearColor=function(){Se.setClearColor.apply(Se,arguments)},this.getClearAlpha=function(){return Se.getClearAlpha()},this.setClearAlpha=function(){Se.setClearAlpha.apply(Se,arguments)},this.clear=function(e,t,n){let r=0;(void 0===e||e)&&(r|=De.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=De.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=De.STENCIL_BUFFER_BIT),De.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",Be,!1),xe.dispose(),Te.dispose(),ae.dispose(),ce.dispose(),ue.dispose(),_e.dispose(),Fe.dispose(),ke.dispose(),ke.removeEventListener("sessionstart",je),ke.removeEventListener("sessionend",ze),q&&(q.dispose(),q=null),Ge.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=ee);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=ee);se.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===C?y.outputEncoding:C.texture.encoding,c=(r.isMeshStandardMaterial?ue:ce).get(r.envMap||a),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!r.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=n.morphAttributes.position?n.morphAttributes.position.length:0,p=ae.get(r),m=g.state.lights;if(!0===Y&&(!0===K||e!==O)){const t=e===O&&r.id===F;Me.setState(r,e,t)}let v=!1;r.version===p.__version?p.needsLights&&p.lightsStateVersion!==m.state.version||p.outputEncoding!==s||i.isInstancedMesh&&!1===p.instancing?v=!0:i.isInstancedMesh||!0!==p.instancing?i.isSkinnedMesh&&!1===p.skinning?v=!0:i.isSkinnedMesh||!0!==p.skinning?p.envMap!==c||r.fog&&p.fog!==o?v=!0:void 0===p.numClippingPlanes||p.numClippingPlanes===Me.numPlanes&&p.numIntersection===Me.numIntersection?(p.vertexAlphas!==l||p.vertexTangents!==u||p.morphTargets!==h||p.morphNormals!==d||!0===re.isWebGL2&&p.morphTargetsCount!==f)&&(v=!0):v=!0:v=!0:v=!0:(v=!0,p.__version=r.version);let _=p.currentProgram;!0===v&&(_=Qe(r,t,i));let b=!1,x=!1,w=!1;const A=_.getUniforms(),T=p.uniforms;ie.useProgram(_.program)&&(b=!0,x=!0,w=!0);r.id!==F&&(F=r.id,x=!0);if(b||O!==e){if(A.setValue(De,"projectionMatrix",e.projectionMatrix),re.logarithmicDepthBuffer&&A.setValue(De,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),O!==e&&(O=e,x=!0,w=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){const t=A.map.cameraPosition;void 0!==t&&t.setValue(De,$.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&A.setValue(De,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||i.isSkinnedMesh)&&A.setValue(De,"viewMatrix",e.matrixWorldInverse)}if(i.isSkinnedMesh){A.setOptional(De,i,"bindMatrix"),A.setOptional(De,i,"bindMatrixInverse");const e=i.skeleton;e&&(re.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),A.setValue(De,"boneTexture",e.boneTexture,se),A.setValue(De,"boneTextureSize",e.boneTextureSize)):A.setOptional(De,e,"boneMatrices"))}!n||void 0===n.morphAttributes.position&&void 0===n.morphAttributes.normal||Re.update(i,n,r,_);(x||p.receiveShadow!==i.receiveShadow)&&(p.receiveShadow=i.receiveShadow,A.setValue(De,"receiveShadow",i.receiveShadow));x&&(A.setValue(De,"toneMappingExposure",y.toneMappingExposure),p.needsLights&&(E=w,(M=T).ambientLightColor.needsUpdate=E,M.lightProbe.needsUpdate=E,M.directionalLights.needsUpdate=E,M.directionalLightShadows.needsUpdate=E,M.pointLights.needsUpdate=E,M.pointLightShadows.needsUpdate=E,M.spotLights.needsUpdate=E,M.spotLightShadows.needsUpdate=E,M.rectAreaLights.needsUpdate=E,M.hemisphereLights.needsUpdate=E),o&&r.fog&&be.refreshFogUniforms(T,o),be.refreshMaterialUniforms(T,r,j,Z,q),Mt.upload(De,p.uniformsList,T,se));var M,E;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Mt.upload(De,p.uniformsList,T,se),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&A.setValue(De,"center",i.center);return A.setValue(De,"modelViewMatrix",i.modelViewMatrix),A.setValue(De,"normalMatrix",i.normalMatrix),A.setValue(De,"modelMatrix",i.matrixWorld),_}(e,t,n,r,i);ie.setMaterial(r,a);let c=n.index;const l=n.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;let u,h=1;!0===r.wireframe&&(c=ge.getWireframeAttribute(n),h=2),Fe.setup(i,r,s,n,c);let d=Le;null!==c&&(u=pe.get(c),d=Pe,d.setIndex(u));const f=null!==c?c.count:l.count,p=n.drawRange.start*h,m=n.drawRange.count*h,v=null!==o?o.start*h:0,_=null!==o?o.count*h:1/0,b=Math.max(p,v),x=Math.min(f,p+m,v+_)-1,w=Math.max(0,x-b+1);if(0!==w){if(i.isMesh)!0===r.wireframe?(ie.setLineWidth(r.wireframeLinewidth*te()),d.setMode(De.LINES)):d.setMode(De.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),ie.setLineWidth(e*te()),i.isLineSegments?d.setMode(De.LINES):i.isLineLoop?d.setMode(De.LINE_LOOP):d.setMode(De.LINE_STRIP)}else i.isPoints?d.setMode(De.POINTS):i.isSprite&&d.setMode(De.TRIANGLES);if(i.isInstancedMesh)d.renderInstances(b,w,i.count);else if(n.isInstancedBufferGeometry){const e=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(b,w,e)}else d.render(b,w)}},this.compile=function(e,t){g=Te.get(e),g.init(),_.push(g),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(g.pushLight(e),e.castShadow&&g.pushShadow(e))})),g.setupLights(y.physicallyCorrectLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++){Qe(n[r],e,t)}else Qe(n,e,t)})),_.pop(),g=null};let Ze=null;function je(){Ge.stop()}function ze(){Ge.start()}const Ge=new w;function Ve(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)g.pushLight(e),e.castShadow&&g.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Q.intersectsSprite(e)){r&&$.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J);const t=_e.update(e),i=e.material;i.visible&&m.push(e,t,i,n,$.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==oe.render.frame&&(e.skeleton.update(),e.skeleton.frame=oe.render.frame),!e.frustumCulled||Q.intersectsObject(e))){r&&$.setFromMatrixPosition(e.matrixWorld).applyMatrix4(J);const t=_e.update(e),i=e.material;if(Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&(m.push(e,t,s,n,$.z,a),Array.isArray(s.material_layers)&&!0!==window.TR3_MATERIALS_LAYERS_DISABLED&&s.material_layers.forEach((r=>{m.push(e,t,r,n+1,$.z,a)})))}}else i.visible&&(m.push(e,t,i,n,$.z,null),Array.isArray(i.material_layers)&&!0!==window.TR3_MATERIALS_LAYERS_DISABLED&&i.material_layers.forEach((r=>{m.push(e,t,r,n+1,$.z,null)})))}const i=e.children;for(let e=0,o=i.length;e<o;e++)Ve(i[e],t,n,r)}function We(e,t,n,r){const i=e.opaque,o=e.transmissive,l=e.transparent;g.setupLightsView(n),o.length>0&&function(e,t,n){if(null===q){const e=!0===c&&!0===re.isWebGL2?WebGLMultisampleRenderTarget:s.d;q=new e(1024,1024,{generateMipmaps:!0,type:null!==Ce.convert(a.cLu)?a.cLu:a.ywz,minFilter:a.D1R,magFilter:a.TyD,wrapS:a.uWy,wrapT:a.uWy})}const r=y.getRenderTarget();y.setRenderTarget(q),y.clear();const i=y.toneMapping;y.toneMapping=a.uL9,He(e,t,n),y.toneMapping=i,se.updateMultisampleRenderTarget(q),se.updateRenderTargetMipmap(q),y.setRenderTarget(r)}(i,t,n),r&&ie.viewport(k.copy(r)),i.length>0&&He(i,t,n),o.length>0&&He(o,t,n),l.length>0&&He(l,t,n)}function He(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,c=null===r?o.material:r,l=o.group;a.layers.test(n.layers)&&Xe(a,t,n,s,c,l)}}function Xe(e,t,n,r,i,o){e.onBeforeRender(y,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(y,t,n,r,e,o),!0===i.transparent&&i.side===a.ehD?(i.side=a._Li,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=a.Wl3,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=a.ehD):y.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(y,t,n,r,i,o)}function Qe(e,t,n){!0!==t.isScene&&(t=ee);const r=ae.get(e),i=g.state.lights,o=g.state.shadowsArray,a=i.state.version,s=ye.getParameters(e,i.state,o,t,n),c=ye.getProgramCacheKey(s);let l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ue:ce).get(e.envMap||r.environment),(e.isMeshStandardMaterial||r.isMeshPhongMaterial||r.isMeshPhysicalMaterial||r.isMeshBasicMaterial)&&(r.envMapIntensity=1),e.material_layers&&e.material_layers.forEach((e=>{if("phong"===e.userData.layer_name)e.envMap=t.refraction_map})),void 0===l&&(e.addEventListener("dispose",Ne),l=new Map,r.programs=l);let u=l.get(c);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Ye(e,s),u}else s.uniforms=ye.getUniforms(e),e.onBuild(n,s,y),e.onBeforeCompile(s,y),u=ye.acquireProgram(s,c),l.set(c,u),r.uniforms=s.uniforms;const h=r.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=Me.uniform),Ye(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotShadowMatrix.value=i.state.spotShadowMatrix,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix);const d=u.getUniforms(),f=Mt.seqWithValue(d.seq,h);return r.currentProgram=u,r.uniformsList=f,u}function Ye(e,t){const n=ae.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents}Ge.setAnimationLoop((function(e){Ze&&Ze(e)})),"undefined"!=typeof window&&Ge.setContext(window),this.setAnimationLoop=function(e){Ze=e,ke.setAnimationLoop(e),null===e?Ge.stop():Ge.start()},ke.addEventListener("sessionstart",je),ke.addEventListener("sessionend",ze),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void xn.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===A)return;!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),!0===ke.enabled&&!0===ke.isPresenting&&(!0===ke.cameraAutoUpdate&&ke.updateCamera(t),t=ke.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,C),g=Te.get(e,_.length),g.init(),_.push(g),J.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Q.setFromProjectionMatrix(J),K=this.localClippingEnabled,Y=Me.init(this.clippingPlanes,K,t),m=xe.get(e,v.length),m.init(),v.push(m),Ve(e,t,0,y.sortObjects),m.finish(),!0===y.sortObjects&&m.sort(z,G),!0===Y&&Me.beginShadows();const n=g.state.shadowsArray;if(Ee.render(n,e,t),!0===Y&&Me.endShadows(),!0===this.info.autoReset&&this.info.reset(),Se.render(m,e),g.setupLights(y.physicallyCorrectLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];We(m,e,r,r.viewport)}}else We(m,e,t);null!==C&&(se.updateMultisampleRenderTarget(C),se.updateRenderTargetMipmap(C)),!0===e.isScene&&e.onAfterRender(y,e,t),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1),Fe.resetDefaultState(),F=-1,O=null,_.pop(),g=_.length>0?_[_.length-1]:null,v.pop(),m=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return C},this.setRenderTarget=function(e,t=0,n=0){C=e,S=t,L=n,e&&void 0===ae.get(e).__webglFramebuffer&&se.setupRenderTarget(e);let r=null,i=!1,o=!1;if(e){const n=e.texture;(n.isDataTexture3D||n.isDataTexture2DArray)&&(o=!0);const a=ae.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=a[t],i=!0):r=e.isWebGLMultisampleRenderTarget?ae.get(e).__webglMultisampledFramebuffer:a,k.copy(e.viewport),I.copy(e.scissor),B=e.scissorTest}else k.copy(V).multiplyScalar(j).floor(),I.copy(W).multiplyScalar(j).floor(),B=H;if(ie.bindFramebuffer(De.FRAMEBUFFER,r)&&re.drawBuffers){let t=!1;if(e)if(e.isWebGLMultipleRenderTargets){const n=e.texture;if(X.length!==n.length||X[0]!==De.COLOR_ATTACHMENT0){for(let e=0,t=n.length;e<t;e++)X[e]=De.COLOR_ATTACHMENT0+e;X.length=n.length,t=!0}}else 1===X.length&&X[0]===De.COLOR_ATTACHMENT0||(X[0]=De.COLOR_ATTACHMENT0,X.length=1,t=!0);else 1===X.length&&X[0]===De.BACK||(X[0]=De.BACK,X.length=1,t=!0);t&&(re.isWebGL2?De.drawBuffers(X):ne.get("WEBGL_draw_buffers").drawBuffersWEBGL(X))}if(ie.viewport(k),ie.scissor(I),ie.setScissorTest(B),i){const r=ae.get(e.texture);De.framebufferTexture2D(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,De.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=ae.get(e.texture),i=t||0;De.framebufferTextureLayer(De.FRAMEBUFFER,De.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}F=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(!e||!e.isWebGLRenderTarget)return void xn.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let c=ae.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(c=c[s]),c){ie.bindFramebuffer(De.FRAMEBUFFER,c);try{const s=e.texture,c=s.format,l=s.type;if(c!==a.wk1&&Ce.convert(c)!==De.getParameter(De.IMPLEMENTATION_COLOR_READ_FORMAT))return void xn.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=l===a.cLu&&(ne.has("EXT_color_buffer_half_float")||re.isWebGL2&&ne.has("EXT_color_buffer_float"));if(!(l===a.ywz||Ce.convert(l)===De.getParameter(De.IMPLEMENTATION_COLOR_READ_TYPE)||l===a.VzW&&(re.isWebGL2||ne.has("OES_texture_float")||ne.has("WEBGL_color_buffer_float"))||u))return void xn.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");De.checkFramebufferStatus(De.FRAMEBUFFER)===De.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&De.readPixels(t,n,r,i,Ce.convert(c),Ce.convert(l),o):xn.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{const e=null!==C?ae.get(C).__webglFramebuffer:null;ie.bindFramebuffer(De.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,n=0){const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);let a=Ce.convert(t.format);re.isWebGL2&&(a===De.RGB&&(a=De.RGB8),a===De.RGBA&&(a=De.RGBA8)),se.setTexture2D(t,0),De.copyTexImage2D(De.TEXTURE_2D,n,a,e.x,e.y,i,o,0),ie.unbindTexture()},this.copyTextureToTexture=function(e,t,n,r=0){const i=t.image.width,o=t.image.height,a=Ce.convert(n.format),s=Ce.convert(n.type);se.setTexture2D(n,0),De.pixelStorei(De.UNPACK_FLIP_Y_WEBGL,n.flipY),De.pixelStorei(De.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),De.pixelStorei(De.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?De.texSubImage2D(De.TEXTURE_2D,r,e.x,e.y,i,o,a,s,t.image.data):t.isCompressedTexture?De.compressedTexSubImage2D(De.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):De.texSubImage2D(De.TEXTURE_2D,r,e.x,e.y,a,s,t.image),0===r&&n.generateMipmaps&&De.generateMipmap(De.TEXTURE_2D),ie.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r,i=0){if(y.isWebGL1Renderer)return void xn.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,s=e.max.z-e.min.z+1,c=Ce.convert(r.format),l=Ce.convert(r.type);let u;if(r.isDataTexture3D)se.setTexture3D(r,0),u=De.TEXTURE_3D;else{if(!r.isDataTexture2DArray)return void xn.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");se.setTexture2DArray(r,0),u=De.TEXTURE_2D_ARRAY}De.pixelStorei(De.UNPACK_FLIP_Y_WEBGL,r.flipY),De.pixelStorei(De.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),De.pixelStorei(De.UNPACK_ALIGNMENT,r.unpackAlignment);const h=De.getParameter(De.UNPACK_ROW_LENGTH),d=De.getParameter(De.UNPACK_IMAGE_HEIGHT),f=De.getParameter(De.UNPACK_SKIP_PIXELS),p=De.getParameter(De.UNPACK_SKIP_ROWS),m=De.getParameter(De.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[0]:n.image;De.pixelStorei(De.UNPACK_ROW_LENGTH,g.width),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,g.height),De.pixelStorei(De.UNPACK_SKIP_PIXELS,e.min.x),De.pixelStorei(De.UNPACK_SKIP_ROWS,e.min.y),De.pixelStorei(De.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isDataTexture3D?De.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,c,l,g.data):n.isCompressedTexture?(xn.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),De.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,a,s,c,g.data)):De.texSubImage3D(u,i,t.x,t.y,t.z,o,a,s,c,l,g),De.pixelStorei(De.UNPACK_ROW_LENGTH,h),De.pixelStorei(De.UNPACK_IMAGE_HEIGHT,d),De.pixelStorei(De.UNPACK_SKIP_PIXELS,f),De.pixelStorei(De.UNPACK_SKIP_ROWS,p),De.pixelStorei(De.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&De.generateMipmap(u),ie.unbindTexture()},this.initTexture=function(e){se.setTexture2D(e,0),ie.unbindTexture()},this.resetState=function(){S=0,L=0,C=null,ie.reset(),Fe.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}wn.prototype.isWebGLRenderer=!0;class WebGL1Renderer extends wn{}WebGL1Renderer.prototype.isWebGL1Renderer=!0;class FogExp2{constructor(e,t=25e-5){this.name="",this.color=new B.I(e),this.density=t}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}FogExp2.prototype.isFogExp2=!0;class Fog{constructor(e,t=1,n=1e3){this.name="",this.color=new B.I(e),this.near=t,this.far=n}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}Fog.prototype.isFog=!0;class Scene extends d.T{constructor(){super(),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!1,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}Scene.prototype.isScene=!0;var An=n(600);class InterleavedBuffer{constructor(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=a.W2J,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=m.generateUUID()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=m.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=m.generateUUID()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}InterleavedBuffer.prototype.isInterleavedBuffer=!0;var Tn=n(5108);const Mn=new f.P;class InterleavedBufferAttribute{constructor(e,t,n,r=!1){this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Mn.x=this.getX(t),Mn.y=this.getY(t),Mn.z=this.getZ(t),Mn.applyMatrix4(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Mn.x=this.getX(t),Mn.y=this.getY(t),Mn.z=this.getZ(t),Mn.applyNormalMatrix(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Mn.x=this.getX(t),Mn.y=this.getY(t),Mn.z=this.getZ(t),Mn.transformDirection(e),this.setXYZ(t,Mn.x,Mn.y,Mn.z);return this}setX(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){return this.data.array[e*this.data.stride+this.offset]}getY(e){return this.data.array[e*this.data.stride+this.offset+1]}getZ(e){return this.data.array[e*this.data.stride+this.offset+2]}getW(e){return this.data.array[e*this.data.stride+this.offset+3]}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){Tn.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new O.Tl(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new InterleavedBufferAttribute(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){Tn.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}InterleavedBufferAttribute.prototype.isInterleavedBufferAttribute=!0;var En=n(4328);class SpriteMaterial extends En.F{constructor(e){super(),this.type="SpriteMaterial",this.color=new B.I(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this}}SpriteMaterial.prototype.isSpriteMaterial=!0;var Sn=n(5108);let Rn;const Ln=new f.P,Pn=new f.P,Cn=new f.P,Fn=new I.F,Dn=new I.F,Un=new p.y,On=new f.P,kn=new f.P,In=new f.P,Bn=new I.F,Nn=new I.F,Zn=new I.F;class Sprite extends d.T{constructor(e){if(super(),this.type="Sprite",void 0===Rn){Rn=new k.u;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new InterleavedBuffer(e,5);Rn.setIndex([0,1,2,0,2,3]),Rn.setAttribute("position",new InterleavedBufferAttribute(t,3,0,!1)),Rn.setAttribute("uv",new InterleavedBufferAttribute(t,2,3,!1))}this.geometry=Rn,this.material=void 0!==e?e:new SpriteMaterial,this.center=new I.F(.5,.5)}raycast(e,t){null===e.camera&&Sn.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pn.setFromMatrixScale(this.matrixWorld),Un.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Cn.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pn.multiplyScalar(-Cn.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;jn(On.set(-.5,-.5,0),Cn,o,Pn,r,i),jn(kn.set(.5,-.5,0),Cn,o,Pn,r,i),jn(In.set(.5,.5,0),Cn,o,Pn,r,i),Bn.set(0,0),Nn.set(1,0),Zn.set(1,1);let a=e.ray.intersectTriangle(On,kn,In,!1,Ln);if(null===a&&(jn(kn.set(-.5,.5,0),Cn,o,Pn,r,i),Nn.set(0,1),a=e.ray.intersectTriangle(On,In,kn,!1,Ln),null===a))return;const s=e.ray.origin.distanceTo(Ln);s<e.near||s>e.far||t.push({distance:s,point:Ln.clone(),uv:An.C.getUV(Ln,On,kn,In,Bn,Nn,Zn,new I.F),face:null,object:this})}copy(e){return super.copy(e),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function jn(e,t,n,r,i,o){Fn.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(Dn.x=o*Fn.x-i*Fn.y,Dn.y=i*Fn.x+o*Fn.y):Dn.copy(Fn),e.copy(t),e.x+=Dn.x,e.y+=Dn.y,e.applyMatrix4(Un)}Sprite.prototype.isSprite=!0;const zn=new f.P,Gn=new f.P;class LOD extends d.T{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){zn.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(zn);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zn.setFromMatrixPosition(e.matrixWorld),Gn.setFromMatrixPosition(this.matrixWorld);const n=zn.distanceTo(Gn)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i&&n>=t[r].distance;r++)t[r-1].object.visible=!1,t[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance})}return t}}var Vn=n(5108);const Wn=new f.P,Hn=new x.L,Xn=new x.L,Qn=new f.P,Yn=new p.y;class SkinnedMesh extends c.K{constructor(e,t){super(e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new p.y,this.bindMatrixInverse=new p.y}copy(e){return super.copy(e),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new x.L,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():Vn.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,r=this.geometry;Hn.fromBufferAttribute(r.attributes.skinIndex,e),Xn.fromBufferAttribute(r.attributes.skinWeight,e),Wn.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Xn.getComponent(e);if(0!==r){const i=Hn.getComponent(e);Yn.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Qn.copy(Wn).applyMatrix4(Yn),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}SkinnedMesh.prototype.isSkinnedMesh=!0;class Bone extends d.T{constructor(){super(),this.type="Bone"}}Bone.prototype.isBone=!0;class DataTexture extends _.x{constructor(e=null,t=1,n=1,r,i,o,s,c,l=a.TyD,u=a.TyD,h,d){super(null,o,s,c,l,u,r,i,h,d),this.image={data:e,width:t,height:n},this.magFilter=l,this.minFilter=u,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}}DataTexture.prototype.isDataTexture=!0;var Kn=n(5108);const qn=new p.y,Jn=new p.y;class Skeleton{constructor(e=[],t=[]){this.uuid=m.generateUUID(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){Kn.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new p.y)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new p.y;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:Jn;qn.multiplyMatrices(i,t[r]),qn.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=m.ceilPowerOfTwo(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new DataTexture(t,e,e,a.wk1,a.VzW);return this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(Kn.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Bone),this.bones.push(i),this.boneInverses.push((new p.y).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}var $n=n(5108);class InstancedBufferAttribute extends O.Tl{constructor(e,t,n,r=1){"number"==typeof n&&(r=n,n=!1,$n.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),super(e,t,n),this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}InstancedBufferAttribute.prototype.isInstancedBufferAttribute=!0;const er=new p.y,tr=new p.y,nr=[],rr=new c.K;class InstancedMesh extends c.K{constructor(e,t,n){super(e,t),this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}copy(e){return super.copy(e),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(rr.geometry=this.geometry,rr.material=this.material,void 0!==rr.material)for(let i=0;i<r;i++){this.getMatrixAt(i,er),tr.multiplyMatrices(n,er),rr.matrixWorld=tr,rr.raycast(e,nr);for(let e=0,n=nr.length;e<n;e++){const n=nr[e];n.instanceId=i,n.object=this,t.push(n)}nr.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}InstancedMesh.prototype.isInstancedMesh=!0;var ir=n(6035),or=n(5170);class LineBasicMaterial extends En.F{constructor(e){super(),this.type="LineBasicMaterial",this.color=new B.I(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}}LineBasicMaterial.prototype.isLineBasicMaterial=!0;var ar=n(5108);const sr=new f.P,cr=new f.P,lr=new p.y,ur=new or.z,hr=new ir.a;class Line extends d.T{constructor(e=new k.u,t=new LineBasicMaterial){super(),this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)sr.fromBufferAttribute(t,e-1),cr.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=sr.distanceTo(cr);e.setAttribute("lineDistance",new O.a$(n,1))}else ar.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&ar.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),hr.copy(n.boundingSphere),hr.applyMatrix4(r),hr.radius+=i,!1===e.ray.intersectsSphere(hr))return;lr.copy(r).invert(),ur.copy(e.ray).applyMatrix4(lr);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,c=new f.P,l=new f.P,u=new f.P,h=new f.P,d=this.isLineSegments?2:1;if(n.isBufferGeometry){const r=n.index,i=n.attributes.position;if(null!==r){for(let n=Math.max(0,o.start),a=Math.min(r.count,o.start+o.count)-1;n<a;n+=d){const o=r.getX(n),a=r.getX(n+1);c.fromBufferAttribute(i,o),l.fromBufferAttribute(i,a);if(ur.distanceSqToSegment(c,l,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const d=e.ray.origin.distanceTo(h);d<e.near||d>e.far||t.push({distance:d,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(i.count,o.start+o.count)-1;n<r;n+=d){c.fromBufferAttribute(i,n),l.fromBufferAttribute(i,n+1);if(ur.distanceSqToSegment(c,l,h,u)>s)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&ar.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&ar.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}Line.prototype.isLine=!0;var dr=n(5108);const fr=new f.P,pr=new f.P;class LineSegments extends Line{constructor(e,t){super(e,t),this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.isBufferGeometry)if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)fr.fromBufferAttribute(t,e),pr.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+fr.distanceTo(pr);e.setAttribute("lineDistance",new O.a$(n,1))}else dr.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else e.isGeometry&&dr.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}LineSegments.prototype.isLineSegments=!0;class LineLoop extends Line{constructor(e,t){super(e,t),this.type="LineLoop"}}LineLoop.prototype.isLineLoop=!0;class PointsMaterial extends En.F{constructor(e){super(),this.type="PointsMaterial",this.color=new B.I(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}}PointsMaterial.prototype.isPointsMaterial=!0;var mr=n(5108);const gr=new p.y,vr=new or.z,_r=new ir.a,yr=new f.P;class Points extends d.T{constructor(e=new k.u,t=new PointsMaterial){super(),this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_r.copy(n.boundingSphere),_r.applyMatrix4(r),_r.radius+=i,!1===e.ray.intersectsSphere(_r))return;gr.copy(r).invert(),vr.copy(e.ray).applyMatrix4(gr);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position;if(null!==i){for(let n=Math.max(0,o.start),c=Math.min(i.count,o.start+o.count);n<c;n++){const o=i.getX(n);yr.fromBufferAttribute(a,o),br(yr,o,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(a.count,o.start+o.count);n<i;n++)yr.fromBufferAttribute(a,n),br(yr,n,s,r,e,t,this)}}else mr.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&mr.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}function br(e,t,n,r,i,o,a){const s=vr.distanceSqToPoint(e);if(s<n){const n=new f.P;vr.closestPointToPoint(e,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;o.push({distance:c,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}Points.prototype.isPoints=!0;class VideoTexture extends _.x{constructor(e,t,n,r,i,o,s,c,l){super(e,t,n,r,i,o,s,c,l),this.format=void 0!==s?s:a.UCm,this.minFilter=void 0!==o?o:a.wem,this.magFilter=void 0!==i?i:a.wem,this.generateMipmaps=!1;const u=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){u.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}VideoTexture.prototype.isVideoTexture=!0;class CompressedTexture extends _.x{constructor(e,t,n,r,i,o,a,s,c,l,u,h){super(null,o,a,s,c,l,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}CompressedTexture.prototype.isCompressedTexture=!0;class CanvasTexture extends _.x{constructor(e,t,n,r,i,o,a,s,c){super(e,t,n,r,i,o,a,s,c),this.needsUpdate=!0}}CanvasTexture.prototype.isCanvasTexture=!0;class DepthTexture extends _.x{constructor(e,t,n,r,i,o,s,c,l,u){if((u=void 0!==u?u:a.qkB)!==a.qkB&&u!==a.brP)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===a.qkB&&(n=a.LsT),void 0===n&&u===a.brP&&(n=a.wJv),super(null,r,i,o,s,c,u,n,l),this.image={width:e,height:t},this.magFilter=void 0!==s?s:a.TyD,this.minFilter=void 0!==c?c:a.TyD,this.flipY=!1,this.generateMipmaps=!1}}DepthTexture.prototype.isDepthTexture=!0;class CircleGeometry extends k.u{constructor(e=1,t=8,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],c=new f.P,l=new I.F;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),o.push(c.x,c.y,c.z),a.push(0,0,1),l.x=(o[u]/e+1)/2,l.y=(o[u+1]/e+1)/2,s.push(l.x,l.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new O.a$(o,3)),this.setAttribute("normal",new O.a$(a,3)),this.setAttribute("uv",new O.a$(s,2))}static fromJSON(e){return new CircleGeometry(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class CylinderGeometry extends k.u{constructor(e=1,t=1,n=1,r=8,i=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const m=[],g=n/2;let v=0;function _(n){const i=p,o=new I.F,m=new f.P;let _=0;const y=!0===n?e:t,b=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,g*b,0),h.push(0,b,0),d.push(.5,.5),p++;const x=p;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);m.x=y*i,m.y=g*b,m.z=y*n,u.push(m.x,m.y,m.z),h.push(0,b,0),o.x=.5*n+.5,o.y=.5*i*b+.5,d.push(o.x,o.y),p++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?l.push(r,r+1,t):l.push(r+1,r,t),_+=3}c.addGroup(v,_,!0===n?1:2),v+=_}!function(){const o=new f.P,_=new f.P;let y=0;const b=(t-e)/n;for(let c=0;c<=i;c++){const l=[],f=c/i,v=f*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,c=Math.sin(i),m=Math.cos(i);_.x=v*c,_.y=-f*n+g,_.z=v*m,u.push(_.x,_.y,_.z),o.set(c,b,m).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-f),l.push(p++)}m.push(l)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=m[t][e],r=m[t+1][e],i=m[t+1][e+1],o=m[t][e+1];l.push(n,r,o),l.push(r,i,o),y+=6}c.addGroup(v,y,0),v+=y}(),!1===o&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(l),this.setAttribute("position",new O.a$(u,3)),this.setAttribute("normal",new O.a$(h,3)),this.setAttribute("uv",new O.a$(d,2))}static fromJSON(e){return new CylinderGeometry(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(e=1,t=1,n=8,r=1,i=!1,o=0,a=2*Math.PI){super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new ConeGeometry(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class PolyhedronGeometry extends k.u{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let r=0;r<=i;r++){o[r]=[];const a=e.clone().lerp(n,r/i),s=t.clone().lerp(n,r/i),c=i-r;for(let e=0;e<=c;e++)o[r][e]=0===e&&r===i?a:a.clone().lerp(s,e/c)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(s(o[e][n+1]),s(o[e+1][n]),s(o[e][n])):(s(o[e][n+1]),s(o[e+1][n+1]),s(o[e+1][n]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new f.P,r=new f.P,i=new f.P;for(let o=0;o<t.length;o+=3)c(t[o+0],n),c(t[o+1],r),c(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new f.P;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new f.P;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new f.P,t=new f.P,n=new f.P,r=new f.P,a=new I.F,s=new I.F,c=new I.F;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);l(a,d+0,e,f),l(s,d+2,t,f),l(c,d+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new O.a$(i,3)),this.setAttribute("normal",new O.a$(i.slice(),3)),this.setAttribute("uv",new O.a$(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(e){return new PolyhedronGeometry(e.vertices,e.indices,e.radius,e.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new DodecahedronGeometry(e.radius,e.detail)}}const xr=new f.P,wr=new f.P,Ar=new f.P,Tr=new An.C;class EdgesGeometry extends k.u{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(m.DEG2RAD*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,c=[0,0,0],l=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){o?(c[0]=o.getX(e),c[1]=o.getX(e+1),c[2]=o.getX(e+2)):(c[0]=e,c[1]=e+1,c[2]=e+2);const{a:t,b:n,c:s}=Tr;if(t.fromBufferAttribute(a,c[0]),n.fromBufferAttribute(a,c[1]),s.fromBufferAttribute(a,c[2]),Tr.getNormal(Ar),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=Tr[l[e]],a=Tr[l[t]],s=`${n}_${r}`,f=`${r}_${n}`;f in h&&h[f]?(Ar.dot(h[f].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[f]=null):s in h||(h[s]={index0:c[e],index1:c[t],normal:Ar.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];xr.fromBufferAttribute(a,t),wr.fromBufferAttribute(a,n),d.push(xr.x,xr.y,xr.z),d.push(wr.x,wr.y,wr.z)}this.setAttribute("position",new O.a$(d,3))}}}var Mr=n(5108);class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return Mr.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,c=i-1;for(;s<=c;)if(r=Math.floor(s+(c-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){c=r;break}c=r-1}if(r=c,n[r]===o)return r/(i-1);const l=n[r];return(r+(o-l)/(n[r+1]-l))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new I.F:new f.P);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new f.P,r=[],i=[],o=[],a=new f.P,s=new p.y;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new f.P)}i[0]=new f.P,o[0]=new f.P;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),o[t]=o[t-1].clone(),a.crossVectors(r[t-1],r[t]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(m.clamp(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(s.makeRotationAxis(a,e))}o[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(m.clamp(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(e=0,t=0,n=1,r=1,i=0,o=2*Math.PI,a=!1,s=0){super(),this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e,t){const n=t||new I.F,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const o=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);const a=this.aStartAngle+e*i;let s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=s-this.aX,r=c-this.aY;s=n*e-r*t+this.aX,c=n*t+r*e+this.aY}return n.set(s,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}EllipseCurve.prototype.isEllipseCurve=!0;class ArcCurve extends EllipseCurve{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.type="ArcCurve"}}function Er(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let c=(t-e)/o-(n-e)/(o+a)+(n-t)/a,l=(n-t)/a-(r-t)/(a+s)+(r-n)/s;c*=a,l*=a,i(t,n,c,l)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}ArcCurve.prototype.isArcCurve=!0;const Sr=new f.P,Rr=new Er,Lr=new Er,Pr=new Er;class CatmullRomCurve3 extends Curve{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new f.P){const n=t,r=this.points,i=r.length,o=(i-(this.closed?0:1))*e;let a,s,c=Math.floor(o),l=o-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?a=r[(c-1)%i]:(Sr.subVectors(r[0],r[1]).add(r[0]),a=Sr);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?s=r[(c+2)%i]:(Sr.subVectors(r[i-1],r[i-2]).add(r[i-1]),s=Sr),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(a.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(s),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Rr.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,t,n,r),Lr.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,t,n,r),Pr.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,t,n,r)}else"catmullrom"===this.curveType&&(Rr.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),Lr.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),Pr.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(Rr.calc(l),Lr.calc(l),Pr.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new f.P).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Cr(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Fr(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Dr(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}CatmullRomCurve3.prototype.isCatmullRomCurve3=!0;class CubicBezierCurve extends Curve{constructor(e=new I.F,t=new I.F,n=new I.F,r=new I.F){super(),this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new I.F){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Dr(e,r.x,i.x,o.x,a.x),Dr(e,r.y,i.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve.prototype.isCubicBezierCurve=!0;class CubicBezierCurve3 extends Curve{constructor(e=new f.P,t=new f.P,n=new f.P,r=new f.P){super(),this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new f.P){const n=t,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Dr(e,r.x,i.x,o.x,a.x),Dr(e,r.y,i.y,o.y,a.y),Dr(e,r.z,i.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}CubicBezierCurve3.prototype.isCubicBezierCurve3=!0;class LineCurve extends Curve{constructor(e=new I.F,t=new I.F){super(),this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new I.F){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const n=t||new I.F;return n.copy(this.v2).sub(this.v1).normalize(),n}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}LineCurve.prototype.isLineCurve=!0;class LineCurve3 extends Curve{constructor(e=new f.P,t=new f.P){super(),this.type="LineCurve3",this.isLineCurve3=!0,this.v1=e,this.v2=t}getPoint(e,t=new f.P){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QuadraticBezierCurve extends Curve{constructor(e=new I.F,t=new I.F,n=new I.F){super(),this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new I.F){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Fr(e,r.x,i.x,o.x),Fr(e,r.y,i.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve.prototype.isQuadraticBezierCurve=!0;class QuadraticBezierCurve3 extends Curve{constructor(e=new f.P,t=new f.P,n=new f.P){super(),this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new f.P){const n=t,r=this.v0,i=this.v1,o=this.v2;return n.set(Fr(e,r.x,i.x,o.x),Fr(e,r.y,i.y,o.y),Fr(e,r.z,i.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}QuadraticBezierCurve3.prototype.isQuadraticBezierCurve3=!0;class SplineCurve extends Curve{constructor(e=[]){super(),this.type="SplineCurve",this.points=e}getPoint(e,t=new I.F){const n=t,r=this.points,i=(r.length-1)*e,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],u=r[o>r.length-3?r.length-1:o+2];return n.set(Cr(a,s.x,c.x,l.x,u.x),Cr(a,s.y,c.y,l.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new I.F).fromArray(n))}return this}}SplineCurve.prototype.isSplineCurve=!0;class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new r[n.type]).fromJSON(n))}return this}}class Path extends CurvePath{constructor(e){super(),this.type="Path",this.currentPoint=new I.F,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new LineCurve(this.currentPoint.clone(),new I.F(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new QuadraticBezierCurve(this.currentPoint.clone(),new I.F(e,t),new I.F(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new CubicBezierCurve(this.currentPoint.clone(),new I.F(e,t),new I.F(n,r),new I.F(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new SplineCurve(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const c=new EllipseCurve(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Shape extends Path{constructor(e){super(e),this.uuid=m.generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new Path).fromJSON(n))}return this}}const Ur=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let o=Or(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,c,l,u,h,d,f;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,c,l;for(o=0,a=t.length;o<a;o++)s=t[o]*r,c=o<a-1?t[o+1]*r:e.length,l=Or(e,s,c,r,!1),l===l.next&&(l.steiner=!0),i.push(Hr(l));for(i.sort(zr),o=0;o<i.length;o++)Gr(i[o],n),n=kr(n,n.next);return n}(e,t,o,n)),e.length>80*n){s=l=e[0],c=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);f=Math.max(l-s,u-c),f=0!==f?1/f:0}return Ir(o,a,n,s,c,f),a};function Or(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=ni(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=ni(o,e[o],e[o+1],a);return a&&Kr(a,a.next)&&(ri(a),a=a.next),a}function kr(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Kr(r,r.next)&&0!==Yr(r.prev,r,r.next))r=r.next;else{if(ri(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ir(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{null===i.z&&(i.z=Wr(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,c,l=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ,r);t++);for(c=l;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(e,r,i,o);let s,c,l=e;for(;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Nr(e,r,i,o):Br(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),ri(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?Ir(e=Zr(kr(e),t,n),t,n,r,i,o,2):2===a&&jr(e,t,n,r,i,o):Ir(kr(e),t,n,r,i,o,1);break}}function Br(e){const t=e.prev,n=e,r=e.next;if(Yr(t,n,r)>=0)return!1;let i=e.next.next;for(;i!==e.prev;){if(Xr(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Yr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Nr(e,t,n,r){const i=e.prev,o=e,a=e.next;if(Yr(i,o,a)>=0)return!1;const s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=Wr(s,c,t,n,r),d=Wr(l,u,t,n,r);let f=e.prevZ,p=e.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&Xr(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Yr(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&Xr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Yr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Xr(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&Yr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&Xr(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Yr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Zr(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Kr(i,o)&&qr(i,r,r.next,o)&&ei(i,o)&&ei(o,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(o.i/n),ri(r),ri(r.next),r=e=o),r=r.next}while(r!==e);return kr(r)}function jr(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Qr(a,e)){let s=ti(a,e);return a=kr(a,a.next),s=kr(s,s.next),Ir(a,t,n,r,i,o),void Ir(s,t,n,r,i,o)}e=e.next}a=a.next}while(a!==e)}function zr(e,t){return e.x-t.x}function Gr(e,t){if(t=function(e,t){let n=t;const r=e.x,i=e.y;let o,a=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const e=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=r&&e>a){if(a=e,e===r){if(i===n.y)return n;if(i===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===a)return o;const s=o,c=o.x,l=o.y;let u,h=1/0;n=o;do{r>=n.x&&n.x>=c&&r!==n.x&&Xr(i<l?r:a,i,c,l,i<l?a:r,i,n.x,n.y)&&(u=Math.abs(i-n.y)/(r-n.x),ei(n,e)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&Vr(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}(e,t),t){const n=ti(t,e);kr(t,t.next),kr(n,n.next)}}function Vr(e,t){return Yr(e.prev,e,t.prev)<0&&Yr(t.next,e,e.next)<0}function Wr(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Hr(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Xr(e,t,n,r,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(r-s)-(n-a)*(t-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function Qr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&qr(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(ei(e,t)&&ei(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Yr(e.prev,e,t.prev)||Yr(e,t.prev,t))||Kr(e,t)&&Yr(e.prev,e,e.next)>0&&Yr(t.prev,t,t.next)>0)}function Yr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Kr(e,t){return e.x===t.x&&e.y===t.y}function qr(e,t,n,r){const i=$r(Yr(e,t,n)),o=$r(Yr(e,t,r)),a=$r(Yr(n,r,e)),s=$r(Yr(n,r,t));return i!==o&&a!==s||(!(0!==i||!Jr(e,n,t))||(!(0!==o||!Jr(e,r,t))||(!(0!==a||!Jr(n,e,r))||!(0!==s||!Jr(n,t,r)))))}function Jr(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function $r(e){return e>0?1:e<0?-1:0}function ei(e,t){return Yr(e.prev,e,e.next)<0?Yr(e,t,e.next)>=0&&Yr(e,e.prev,t)>=0:Yr(e,t,e.prev)<0||Yr(e,e.next,t)<0}function ti(e,t){const n=new ii(e.i,e.x,e.y),r=new ii(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function ni(e,t,n,r){const i=new ii(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function ri(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ii(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}class ShapeUtils{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return ShapeUtils.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];oi(e),ai(n,e);let o=e.length;t.forEach(oi);for(let e=0;e<t.length;e++)r.push(o),o+=t[e].length,ai(n,t[e]);const a=Ur(n,r);for(let e=0;e<a.length;e+=3)i.push(a.slice(e,e+3));return i}}function oi(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ai(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}var si=n(5108);class ExtrudeGeometry extends k.u{constructor(e=new Shape([new I.F(.5,.5),new I.F(-.5,.5),new I.F(-.5,-.5),new I.F(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){o(e[t])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1;let c=void 0!==t.depth?t.depth:1,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const m=t.extrudePath,g=void 0!==t.UVGenerator?t.UVGenerator:ci;void 0!==t.amount&&(si.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);let v,_,y,b,x,w=!1;m&&(v=m.getSpacedPoints(s),w=!0,l=!1,_=m.computeFrenetFrames(s,!1),y=new f.P,b=new f.P,x=new f.P),l||(p=0,u=0,h=0,d=0);const A=e.extractPoints(a);let T=A.shape;const M=A.holes;if(!ShapeUtils.isClockWise(T)){T=T.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];ShapeUtils.isClockWise(t)&&(M[e]=t.reverse())}}const E=ShapeUtils.triangulateShape(T,M),S=T;for(let e=0,t=M.length;e<t;e++){const t=M[e];T=T.concat(t)}function R(e,t,n){return t||si.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}const L=T.length,P=E.length;function C(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),f=t.x-s/h,p=t.y+a/h,m=((n.x-l/d-f)*l-(n.y+c/d-p)*c)/(a*l-s*c);r=f+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new I.F(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?c>Number.EPSILON&&(e=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(l)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new I.F(r/o,i/o)}const F=[];for(let e=0,t=S.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),F[e]=C(S[e],S[n],S[r]);const D=[];let U,O=F.concat();for(let e=0,t=M.length;e<t;e++){const t=M[e];U=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),U[e]=C(t[e],t[r],t[i]);D.push(U),O=O.concat(U)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=S.length;e<t;e++){const t=R(S[e],F[e],r);N(t.x,t.y,-n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];U=D[e];for(let e=0,i=t.length;e<i;e++){const i=R(t[e],U[e],r);N(i.x,i.y,-n)}}}const k=h+d;for(let e=0;e<L;e++){const t=l?R(T[e],O[e],k):T[e];w?(b.copy(_.normals[0]).multiplyScalar(t.x),y.copy(_.binormals[0]).multiplyScalar(t.y),x.copy(v[0]).add(b).add(y),N(x.x,x.y,x.z)):N(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<L;t++){const n=l?R(T[t],O[t],k):T[t];w?(b.copy(_.normals[e]).multiplyScalar(n.x),y.copy(_.binormals[e]).multiplyScalar(n.y),x.copy(v[e]).add(b).add(y),N(x.x,x.y,x.z)):N(n.x,n.y,c/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=S.length;e<t;e++){const t=R(S[e],F[e],r);N(t.x,t.y,c+n)}for(let e=0,t=M.length;e<t;e++){const t=M[e];U=D[e];for(let e=0,i=t.length;e<i;e++){const i=R(t[e],U[e],r);w?N(i.x,i.y+v[s-1].y,v[s-1].x+n):N(i.x,i.y,c+n)}}}function B(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*p;e<n;e++){const n=L*e,o=L*(e+1);j(t+r+n,t+i+n,t+i+o,t+r+o)}}}function N(e,t,n){o.push(e),o.push(t),o.push(n)}function Z(e,t,i){z(e),z(t),z(i);const o=r.length/3,a=g.generateTopUV(n,r,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[2])}function j(e,t,i,o){z(e),z(t),z(o),z(t),z(i),z(o);const a=r.length/3,s=g.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[3]),G(s[1]),G(s[2]),G(s[3])}function z(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function G(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(l){let e=0,t=L*e;for(let e=0;e<P;e++){const n=E[e];Z(n[2]+t,n[1]+t,n[0]+t)}e=s+2*p,t=L*e;for(let e=0;e<P;e++){const n=E[e];Z(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<P;e++){const t=E[e];Z(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=E[e];Z(t[0]+L*s,t[1]+L*s,t[2]+L*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;B(S,t),t+=S.length;for(let e=0,n=M.length;e<n;e++){const n=M[e];B(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new O.a$(r,3)),this.setAttribute("uv",new O.a$(i,2)),this.computeVertexNormals()}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new r[i.type]).fromJSON(i)),new ExtrudeGeometry(n,e.options)}}const ci={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],c=t[3*r+1],l=t[3*i],u=t[3*i+1];return[new I.F(o,a),new I.F(s,c),new I.F(l,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-l)?[new I.F(a,1-c),new I.F(l,1-h),new I.F(d,1-p),new I.F(m,1-v)]:[new I.F(s,1-c),new I.F(u,1-h),new I.F(f,1-p),new I.F(g,1-v)]}};class IcosahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IcosahedronGeometry(e.radius,e.detail)}}class LatheGeometry extends k.u{constructor(e=[new I.F(0,.5),new I.F(.5,0),new I.F(0,-.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=m.clamp(r,0,2*Math.PI);const i=[],o=[],a=[],s=1/t,c=new f.P,l=new I.F;for(let i=0;i<=t;i++){const u=n+i*s*r,h=Math.sin(u),d=Math.cos(u);for(let n=0;n<=e.length-1;n++)c.x=e[n].x*h,c.y=e[n].y,c.z=e[n].x*d,o.push(c.x,c.y,c.z),l.x=i/t,l.y=n/(e.length-1),a.push(l.x,l.y)}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,o=r,a=r+e.length,s=r+e.length+1,c=r+1;i.push(o,a,c),i.push(a,s,c)}if(this.setIndex(i),this.setAttribute("position",new O.a$(o,3)),this.setAttribute("uv",new O.a$(a,2)),this.computeVertexNormals(),r===2*Math.PI){const n=this.attributes.normal.array,r=new f.P,i=new f.P,o=new f.P,a=t*e.length*3;for(let t=0,s=0;t<e.length;t++,s+=3)r.x=n[s+0],r.y=n[s+1],r.z=n[s+2],i.x=n[a+s+0],i.y=n[a+s+1],i.z=n[a+s+2],o.addVectors(r,i).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}static fromJSON(e){return new LatheGeometry(e.points,e.segments,e.phiStart,e.phiLength)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new OctahedronGeometry(e.radius,e.detail)}}var li=n(9913);class RingGeometry extends k.u{constructor(e=.5,t=1,n=8,r=1,i=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n);const a=[],s=[],c=[],l=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new f.P,p=new I.F;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,l.push(p.x,p.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,o=r+n+1,s=r+n+2,c=r+1;a.push(i,o,c),a.push(o,s,c)}}this.setIndex(a),this.setAttribute("position",new O.a$(s,3)),this.setAttribute("normal",new O.a$(c,3)),this.setAttribute("uv",new O.a$(l,2))}static fromJSON(e){return new RingGeometry(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ShapeGeometry extends k.u{constructor(e=new Shape([new I.F(0,.5),new I.F(-.5,-.5),new I.F(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(a,s,t),a+=s,s=0;function c(e){const a=r.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===ShapeUtils.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===ShapeUtils.isClockWise(t)&&(u[e]=t.reverse())}const h=ShapeUtils.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];r.push(t.x,t.y,0),i.push(0,0,1),o.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+a,i=t[1]+a,o=t[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new O.a$(r,3)),this.setAttribute("normal",new O.a$(i,3)),this.setAttribute("uv",new O.a$(o,2))}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new ShapeGeometry(n,e.curveSegments)}}class SphereGeometry extends k.u{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let c=0;const l=[],u=new f.P,h=new f.P,d=[],p=[],m=[],g=[];for(let d=0;d<=n;d++){const f=[],v=d/n;let _=0;0==d&&0==o?_=.5/t:d==n&&s==Math.PI&&(_=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),m.push(h.x,h.y,h.z),g.push(s+_,1-v),f.push(c++)}l.push(f)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=l[e][r+1],i=l[e][r],a=l[e+1][r],c=l[e+1][r+1];(0!==e||o>0)&&d.push(t,i,c),(e!==n-1||s<Math.PI)&&d.push(i,a,c)}this.setIndex(d),this.setAttribute("position",new O.a$(p,3)),this.setAttribute("normal",new O.a$(m,3)),this.setAttribute("uv",new O.a$(g,2))}static fromJSON(e){return new SphereGeometry(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new TetrahedronGeometry(e.radius,e.detail)}}class TorusGeometry extends k.u{constructor(e=1,t=.4,n=8,r=6,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],c=[],l=new f.P,u=new f.P,h=new f.P;for(let o=0;o<=n;o++)for(let d=0;d<=r;d++){const f=d/r*i,p=o/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),a.push(u.x,u.y,u.z),l.x=e*Math.cos(f),l.y=e*Math.sin(f),h.subVectors(u,l).normalize(),s.push(h.x,h.y,h.z),c.push(d/r),c.push(o/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,a=(r+1)*(e-1)+t,s=(r+1)*e+t;o.push(n,i,s),o.push(i,a,s)}this.setIndex(o),this.setAttribute("position",new O.a$(a,3)),this.setAttribute("normal",new O.a$(s,3)),this.setAttribute("uv",new O.a$(c,2))}static fromJSON(e){return new TorusGeometry(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class TorusKnotGeometry extends k.u{constructor(e=1,t=.4,n=64,r=8,i=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],c=[],l=[],u=new f.P,h=new f.P,d=new f.P,p=new f.P,m=new f.P,g=new f.P,v=new f.P;for(let a=0;a<=n;++a){const f=a/n*i*Math.PI*2;_(f,i,o,e,d),_(f+.01,i,o,e,p),g.subVectors(p,d),v.addVectors(p,d),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),f=t*Math.sin(i);u.x=d.x+(o*v.x+f*m.x),u.y=d.y+(o*v.y+f*m.y),u.z=d.z+(o*v.z+f*m.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(a/n),l.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,s=(r+1)*(e-1)+t;a.push(n,i,s),a.push(i,o,s)}function _(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*o,i.y=r*(2+c)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new O.a$(s,3)),this.setAttribute("normal",new O.a$(c,3)),this.setAttribute("uv",new O.a$(l,2))}static fromJSON(e){return new TorusKnotGeometry(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class TubeGeometry extends k.u{constructor(e=new QuadraticBezierCurve3(new f.P(-1,-1,0),new f.P(-1,1,0),new f.P(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new f.P,s=new f.P,c=new I.F;let l=new f.P;const u=[],h=[],d=[],p=[];function m(i){l=e.getPointAt(i/t,l);const c=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*c.x+i*d.x,s.y=o*c.y+i*d.y,s.z=o*c.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=l.x+n*s.x,a.y=l.y+n*s.y,a.z=l.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)m(e);m(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)c.x=e/t,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;p.push(n,i,a),p.push(i,o,a)}}()}(),this.setIndex(p),this.setAttribute("position",new O.a$(u,3)),this.setAttribute("normal",new O.a$(h,3)),this.setAttribute("uv",new O.a$(d,2))}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new TubeGeometry((new r[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class WireframeGeometry extends k.u{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new f.P,i=new f.P;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,c=s.length;e<c;++e){const c=s[e],l=c.start;for(let e=l,s=l+c.count;e<s;e+=3)for(let s=0;s<3;s++){const c=a.getX(e+s),l=a.getX(e+(s+1)%3);r.fromBufferAttribute(o,c),i.fromBufferAttribute(o,l),!0===ui(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let a=0;a<3;a++){const s=3*e+a,c=3*e+(a+1)%3;r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,c),!0===ui(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new O.a$(t,3))}}}function ui(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r,i),!0)}class ShadowMaterial extends En.F{constructor(e){super(),this.type="ShadowMaterial",this.color=new B.I(0),this.transparent=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this}}ShadowMaterial.prototype.isShadowMaterial=!0;class MeshStandardMaterial extends En.F{constructor(e){super(),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new B.I(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new B.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new I.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}MeshStandardMaterial.prototype.isMeshStandardMaterial=!0;class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(e){super(),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new I.F(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return m.clamp(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.sheenTint=new B.I(0),this.sheenRoughness=1,this.transmissionMap=null,this.thickness=.01,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationTint=new B.I(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularTint=new B.I(1,1,1),this.specularTintMap=null,this._sheen=0,this._clearcoat=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.sheen=e.sheen,this.sheenTint.copy(e.sheenTint),this.sheenRoughness=e.sheenRoughness,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationTint.copy(e.attenuationTint),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularTint.copy(e.specularTint),this.specularTintMap=e.specularTintMap,this}}MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0;class MeshPhongMaterial extends En.F{constructor(e){super(),this.type="MeshPhongMaterial",this.color=new B.I(16777215),this.specular=new B.I(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new B.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new I.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this}}MeshPhongMaterial.prototype.isMeshPhongMaterial=!0;class MeshToonMaterial extends En.F{constructor(e){super(),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new B.I(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new B.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new I.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshToonMaterial.prototype.isMeshToonMaterial=!0;class MeshNormalMaterial extends En.F{constructor(e){super(),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new I.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}MeshNormalMaterial.prototype.isMeshNormalMaterial=!0;class MeshLambertMaterial extends En.F{constructor(e){super(),this.type="MeshLambertMaterial",this.color=new B.I(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new B.I(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=a.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshLambertMaterial.prototype.isMeshLambertMaterial=!0;var hi=n(6520),di=n(3420);class MeshMatcapMaterial extends En.F{constructor(e){super(),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new B.I(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=a.IOt,this.normalScale=new I.F(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this}}MeshMatcapMaterial.prototype.isMeshMatcapMaterial=!0;class LineDashedMaterial extends LineBasicMaterial{constructor(e){super(),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}LineDashedMaterial.prototype.isLineDashedMaterial=!0;var fi=n(9502);const pi={arraySlice:function(e,t,n){return pi.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i},flattenJSON:function(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)},subclip:function(e,t,n,r,i=30){const o=e.clone();o.name=t;const a=[];for(let e=0;e<o.tracks.length;++e){const t=o.tracks[e],s=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const o=t.times[e]*i;if(!(o<n||o>=r)){c.push(t.times[e]);for(let n=0;n<s;++n)l.push(t.values[e*s+n])}}0!==c.length&&(t.times=pi.convertArray(c,t.times.constructor),t.values=pi.convertArray(l,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let e=0;e<o.tracks.length;++e)s>o.tracks[e].times[0]&&(s=o.tracks[e].times[0]);for(let e=0;e<o.tracks.length;++e)o.tracks[e].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const a=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===a)continue;let s=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=c/3);let l=0;const u=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=r.times.length-1;let d;if(o<=r.times[0]){const e=s,t=c-s;d=pi.arraySlice(r.values,e,t)}else if(o>=r.times[h]){const e=h*c+s,t=e+c-s;d=pi.arraySlice(r.values,e,t)}else{const e=r.createInterpolant(),t=s,n=c-s;e.evaluate(o),d=pi.arraySlice(e.resultBuffer,t,n)}if("quaternion"===i){(new fi._).fromArray(d).normalize().conjugate().toArray(d)}const f=a.times.length;for(let e=0;e<f;++e){const t=e*u+l;if("quaternion"===i)fi._.multiplyQuaternionsFlat(a.values,t,d,0,a.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)a.values[t+n]-=d[n]}}}return e.blendMode=a.gSk,e}};class Interpolant{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}Interpolant.prototype.beforeStart_=Interpolant.prototype.copySampleValue_,Interpolant.prototype.afterEnd_=Interpolant.prototype.copySampleValue_;class CubicInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:a.Pnf,endingEnd:a.Pnf}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,s=r[i],c=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case a._lf:i=e,s=2*t-n;break;case a._sL:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===c)switch(this.getSettings_().endingEnd){case a._lf:o=e,c=2*n-t;break;case a._sL:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}const l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(c-n),this._offsetPrev=i*u,this._offsetNext=o*u}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,_=(-1-d)*m+(1.5+d)*p+.5*f,y=d*m-d*p;for(let e=0;e!==a;++e)i[e]=g*o[l+e]+v*o[c+e]+_*o[s+e]+y*o[u+e];return i}}class LinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=(n-t)/(r-t),u=1-l;for(let e=0;e!==a;++e)i[e]=o[c+e]*u+o[s+e]*l;return i}}class DiscreteInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}var mi=n(5108);class KeyframeTrack{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=pi.convertArray(t,this.TimeBufferType),this.values=pi.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:pi.convertArray(e.times,Array),values:pi.convertArray(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case a.Syv:t=this.InterpolantFactoryMethodDiscrete;break;case a.NMF:t=this.InterpolantFactoryMethodLinear;break;case a.pIN:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return mi.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return a.Syv;case this.InterpolantFactoryMethodLinear:return a.NMF;case this.InterpolantFactoryMethodSmooth:return a.pIN}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=pi.arraySlice(n,i,o),this.values=pi.arraySlice(this.values,i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(mi.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(mi.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){mi.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==o&&o>r){mi.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,o),e=!1;break}o=r}if(void 0!==r&&pi.isTypedArray(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){mi.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=pi.arraySlice(this.times),t=pi.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===a.pIN,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=pi.arraySlice(e,0,o),this.values=pi.arraySlice(t,0,o*n)):(this.times=e,this.values=t),this}clone(){const e=pi.arraySlice(this.times,0),t=pi.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=a.NMF;class BooleanKeyframeTrack extends KeyframeTrack{}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=a.Syv,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let c=e*a;for(let e=c+a;c!==e;c+=4)fi._.slerpFlat(i,0,o,c-a,o,c,s);return i}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.DefaultInterpolation=a.NMF,QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=a.Syv,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";var gi=n(5108);class AnimationClip{constructor(e,t=-1,n,r=a.IFH){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=m.generateUUID(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(vi(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(KeyframeTrack.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let e=0;e<i;e++){let a=[],s=[];a.push((e+i-1)%i,e,(e+1)%i),s.push(0,1,0);const c=pi.getKeyframeOrder(a);a=pi.sortedArray(a,1,c),s=pi.sortedArray(s,1,c),r||0!==a[0]||(a.push(i),s.push(s[0])),o.push(new NumberKeyframeTrack(".morphTargetInfluences["+t[e].name+"]",a,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],o=n.name.match(i);if(o&&o.length>1){const e=o[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const o=[];for(const e in r)o.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return o}static parseAnimation(e,t){if(!e)return gi.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];pi.flattenJSON(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const i=c[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],o=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),o.push(r.morphTarget===n?1:0)}r.push(new NumberKeyframeTrack(".morphTargetInfluence["+n+"]",e,o))}s=e.length*(o||1)}else{const o=".bones["+t[e].name+"]";n(VectorKeyframeTrack,o+".position",i,"pos",r),n(QuaternionKeyframeTrack,o+".quaternion",i,"rot",r),n(VectorKeyframeTrack,o+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vi(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];pi.flattenJSON(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const _i={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class LoadingManager{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],r=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const yi=new LoadingManager;class Loader{constructor(e){this.manager=void 0!==e?e:yi,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}var bi=n(5108);const xi={};class FileLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=_i.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==xi[e])return void xi[e].push({onLoad:t,onProgress:n,onError:r});xi[e]=[],xi[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"});fetch(o).then((t=>{if(200===t.status||0===t.status){0===t.status&&bi.warn("THREE.FileLoader: HTTP Status 0 received.");const n=xi[e],r=t.body.getReader(),i=t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;return new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{s+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}))}()}})}throw Error(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`)})).then((e=>{const t=new Response(e);switch(this.responseType){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((e=>(new DOMParser).parseFromString(e,this.mimeType)));case"json":return t.json();default:return t.text()}})).then((t=>{_i.add(e,t);const n=xi[e];delete xi[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}this.manager.itemEnd(e)})).catch((t=>{const n=xi[e];delete xi[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e),this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}var wi=n(5108);class AnimationLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):wi.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=AnimationClip.parse(e[n]);t.push(r)}return t}}class CompressedTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],s=new CompressedTexture,c=new FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(i.withCredentials);let l=0;function u(u){c.load(e[u],(function(e){const n=i.parse(e,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(s.minFilter=a.wem),s.image=o,s.format=n.format,s.needsUpdate=!0,t&&t(s))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)u(t);else c.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}s.image=o}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=a.wem),s.format=n.format,s.needsUpdate=!0,t&&t(s)}),n,r);return s}}class ImageLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=_i.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=(0,de.c)("img");function s(){l(),_i.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class CubeTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)s(t);return i}}class DataTextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new DataTexture,s=new FileLoader(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(i.withCredentials),s.load(e,(function(e){const n=i.parse(e);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:a.uWy,o.wrapT=void 0!==n.wrapT?n.wrapT:a.uWy,o.magFilter=void 0!==n.magFilter?n.magFilter:a.wem,o.minFilter=void 0!==n.minFilter?n.minFilter:a.wem,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=a.D1R),1===n.mipmapCount&&(o.minFilter=a.wem),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n))}),n,r),o}}class TextureLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=new _.x,o=new ImageLoader(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Light extends d.T{constructor(e,t=1){super(),this.type="Light",this.color=new B.I(e),this.intensity=t}dispose(){}copy(e){return super.copy(e),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}Light.prototype.isLight=!0;class HemisphereLight extends Light{constructor(e,t,n){super(e,n),this.type="HemisphereLight",this.position.copy(d.T.DefaultUp),this.updateMatrix(),this.groundColor=new B.I(t)}copy(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}HemisphereLight.prototype.isHemisphereLight=!0;const Ai=new p.y,Ti=new f.P,Mi=new f.P;class LightShadow{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new I.F(512,512),this.map=null,this.mapPass=null,this.matrix=new p.y,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new b.i,this._frameExtents=new I.F(1,1),this._viewportCount=1,this._viewports=[new x.L(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Ti.setFromMatrixPosition(e.matrixWorld),t.position.copy(Ti),Mi.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Mi),t.updateMatrixWorld(),Ai.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ai),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(t.projectionMatrix),n.multiply(t.matrixWorldInverse)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.focus=1}updateMatrices(e){const t=this.camera,n=2*m.RAD2DEG*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}SpotLightShadow.prototype.isSpotLightShadow=!0;class SpotLight extends Light{constructor(e,t,n=0,r=Math.PI/3,i=0,o=1){super(e,t),this.type="SpotLight",this.position.copy(d.T.DefaultUp),this.updateMatrix(),this.target=new d.T,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}SpotLight.prototype.isSpotLight=!0;const Ei=new p.y,Si=new f.P,Ri=new f.P;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this._frameExtents=new I.F(4,2),this._viewportCount=6,this._viewports=[new x.L(2,1,1,1),new x.L(0,1,1,1),new x.L(3,1,1,1),new x.L(1,1,1,1),new x.L(3,0,1,1),new x.L(1,0,1,1)],this._cubeDirections=[new f.P(1,0,0),new f.P(-1,0,0),new f.P(0,0,1),new f.P(0,0,-1),new f.P(0,1,0),new f.P(0,-1,0)],this._cubeUps=[new f.P(0,1,0),new f.P(0,1,0),new f.P(0,1,0),new f.P(0,1,0),new f.P(0,0,1),new f.P(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),Si.setFromMatrixPosition(e.matrixWorld),n.position.copy(Si),Ri.copy(n.position),Ri.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Ri),n.updateMatrixWorld(),r.makeTranslation(-Si.x,-Si.y,-Si.z),Ei.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ei)}}PointLightShadow.prototype.isPointLightShadow=!0;class PointLight extends Light{constructor(e,t,n=0,r=1){super(e,t),this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new PointLightShadow}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}PointLight.prototype.isPointLight=!0;class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500))}}DirectionalLightShadow.prototype.isDirectionalLightShadow=!0;class DirectionalLight extends Light{constructor(e,t){super(e,t),this.type="DirectionalLight",this.position.copy(d.T.DefaultUp),this.updateMatrix(),this.target=new d.T,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}DirectionalLight.prototype.isDirectionalLight=!0;class AmbientLight extends Light{constructor(e,t){super(e,t),this.type="AmbientLight"}}AmbientLight.prototype.isAmbientLight=!0;class RectAreaLight extends Light{constructor(e,t,n=10,r=10){super(e,t),this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}RectAreaLight.prototype.isRectAreaLight=!0;class SphericalHarmonics3{constructor(){this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new f.P)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}SphericalHarmonics3.prototype.isSphericalHarmonics3=!0;class LightProbe extends Light{constructor(e=new SphericalHarmonics3,t=1){super(void 0,t),this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}LightProbe.prototype.isLightProbe=!0;var Li=n(5108);class MaterialLoader extends Loader{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):Li.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&Li.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=new o[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenTint&&(r.sheenTint=(new B.I).setHex(e.sheenTint)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularTint&&void 0!==r.specularTint&&r.specularTint.setHex(e.specularTint),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationTint&&void 0!==r.attenuationTint&&r.attenuationTint.setHex(e.attenuationTint),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.format&&(r.format=e.format),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new B.I).setHex(i.value);break;case"v2":r.uniforms[t].value=(new I.F).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new f.P).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new x.L).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new C.V).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new p.y).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new I.F).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularTintMap&&(r.specularTintMap=n(e.specularTintMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new I.F).fromArray(e.clearcoatNormalScale)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),r}setTextures(e){return this.textures=e,this}}class LoaderUtils{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}}class InstancedBufferGeometry extends k.u{constructor(){super(),this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}clone(){return(new this.constructor).copy(this)}toJSON(){const e=super.toJSON(this);return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}InstancedBufferGeometry.prototype.isInstancedBufferGeometry=!0;var Pi=n(5108);class BufferGeometryLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):Pi.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers[t],i=new Uint32Array(r).buffer;return n[t]=i,i}(e,i.buffer),a=(0,de.rf)(i.type,o),s=new InterleavedBuffer(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new InstancedBufferGeometry:new k.u,o=e.data.index;if(void 0!==o){const e=(0,de.rf)(o.type,o.array);i.setIndex(new O.Tl(e,1))}const a=e.data.attributes;for(const t in a){const n=a[t];let o;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);o=new InterleavedBufferAttribute(t,n.itemSize,n.offset,n.normalized)}else{const e=(0,de.rf)(n.type,n.array);o=new(n.isInstancedBufferAttribute?InstancedBufferAttribute:O.Tl)(e,n.itemSize,n.normalized)}void 0!==n.name&&(o.name=n.name),void 0!==n.usage&&o.setUsage(n.usage),void 0!==n.updateRange&&(o.updateRange.offset=n.updateRange.offset,o.updateRange.count=n.updateRange.count),i.setAttribute(t,o)}const s=e.data.morphAttributes;if(s)for(const t in s){const n=s[t],o=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let a;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);a=new InterleavedBufferAttribute(t,i.itemSize,i.offset,i.normalized)}else{const e=(0,de.rf)(i.type,i.array);a=new O.Tl(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),o.push(a)}i.morphAttributes[t]=o}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){const t=c[e];i.addGroup(t.start,t.count,t.materialIndex)}const l=e.data.boundingSphere;if(void 0!==l){const e=new f.P;void 0!==l.center&&e.fromArray(l.center),i.boundingSphere=new ir.a(e,l.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}var Ci=n(5108);class ObjectLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void Ci.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):Ci.error("THREE.ObjectLoader: Can't load "+e)}),n,r)}async loadAsync(e,t){const n=""===this.path?LoaderUtils.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new FileLoader(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(c)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,i,s,a,n),l=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,l),void 0!==t){let e=!1;for(const t in o)if(o[t]instanceof HTMLImageElement){e=!0;break}!1===e&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,c),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Shape).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Skeleton).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new BufferGeometryLoader;for(let o=0,a=e.length;o<a;o++){let a;const s=e[o];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":Ci.error("THREE.ObjectLoader: The legacy Geometry type is no longer supported.");break;default:s.type in i?a=i[s.type].fromJSON(s,t):Ci.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new MaterialLoader;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];if("MultiMaterial"===o.type){const e=[];for(let t=0;t<o.materials.length;t++){const r=o.materials[t];void 0===n[r.uuid]&&(n[r.uuid]=i.parse(r)),e.push(n[r.uuid])}r[o.uuid]=e}else void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=AnimationClip.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:(0,de.rf)(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new LoadingManager(t);i=new ImageLoader(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){r[n.uuid]=[];for(let e=0,t=i.length;e<t;e++){const t=o(i[e]);null!==t&&(t instanceof HTMLImageElement?r[n.uuid].push(t):r[n.uuid].push(new DataTexture(t.data,t.width,t.height)))}}else{const e=o(n.url);null!==e&&(r[n.uuid]=e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:(0,de.rf)(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new ImageLoader(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){n[r.uuid]=[];for(let e=0,t=o.length;e<t;e++){const t=o[e],a=await i(t);null!==a&&(a instanceof HTMLImageElement?n[r.uuid].push(a):n[r.uuid].push(new DataTexture(a.data,a.width,a.height)))}}else{const e=await i(r.url);null!==e&&(n[r.uuid]=e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(Ci.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];let a;void 0===o.image&&Ci.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&Ci.warn("THREE.ObjectLoader: Undefined image",o.image);const s=t[o.image];Array.isArray(s)?(a=new CubeTexture(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new DataTexture(s.data,s.width,s.height):new _.x(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,Fi)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],Di),a.wrapT=n(o.wrap[1],Di)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,Ui)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,Ui)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),void 0!==o.userData&&(a.userData=o.userData),r[o.uuid]=a}return r}parseObject(e,t,n,r,i){let o,a,s;function l(e){return void 0===t[e]&&Ci.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function u(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&Ci.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&Ci.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function h(e){return void 0===r[e]&&Ci.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new Scene,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new B.I(e.background):o.background=h(e.background)),void 0!==e.environment&&(o.environment=h(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Fog(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new FogExp2(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new PerspectiveCamera(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new OrthographicCamera(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new AmbientLight(e.color,e.intensity);break;case"DirectionalLight":o=new DirectionalLight(e.color,e.intensity);break;case"PointLight":o=new PointLight(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new RectAreaLight(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new SpotLight(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new HemisphereLight(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new LightProbe).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=u(e.material),o=new SkinnedMesh(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=u(e.material),o=new c.K(a,s);break;case"InstancedMesh":a=l(e.geometry),s=u(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new InstancedMesh(a,s,t),o.instanceMatrix=new InstancedBufferAttribute(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new InstancedBufferAttribute(new Float32Array(r.array),r.itemSize));break;case"LOD":o=new LOD;break;case"Line":o=new Line(l(e.geometry),u(e.material));break;case"LineLoop":o=new LineLoop(l(e.geometry),u(e.material));break;case"LineSegments":o=new LineSegments(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":o=new Points(l(e.geometry),u(e.material));break;case"Sprite":o=new Sprite(u(e.material));break;case"Group":o=new Group;break;case"Bone":o=new Bone;break;default:o=new d.T}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?Ci.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}setTexturePath(e){return Ci.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}const Fi={UVMapping:a.xfE,CubeReflectionMapping:a.fY$,CubeRefractionMapping:a.vxC,EquirectangularReflectionMapping:a.dSO,EquirectangularRefractionMapping:a.Bf4,CubeUVReflectionMapping:a.g8_,CubeUVRefractionMapping:a.SVc},Di={RepeatWrapping:a.rpg,ClampToEdgeWrapping:a.uWy,MirroredRepeatWrapping:a.OoA},Ui={NearestFilter:a.TyD,NearestMipmapNearestFilter:a.YLQ,NearestMipmapLinearFilter:a.aH4,LinearFilter:a.wem,LinearMipmapNearestFilter:a.qyh,LinearMipmapLinearFilter:a.D1R};var Oi=n(5108);class ImageBitmapLoader extends Loader{constructor(e){super(e),"undefined"==typeof createImageBitmap&&Oi.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&Oi.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=_i.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){_i.add(e,n),t&&t(n),i.manager.itemEnd(e)})).catch((function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}let ki;ImageBitmapLoader.prototype.isImageBitmapLoader=!0;const Ii={getContext:function(){return void 0===ki&&(ki=new(window.AudioContext||window.webkitAudioContext)),ki},setContext:function(e){ki=e}};var Bi=n(5108);class AudioLoader extends Loader{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new FileLoader(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{const e=n.slice(0);Ii.getContext().decodeAudioData(e,(function(e){t(e)}))}catch(t){Bi.log(t),r?r(t):Bi.error(t),i.manager.itemError(e)}}),n,r)}}class HemisphereLightProbe extends LightProbe{constructor(e,t,n=1){super(void 0,n);const r=(new B.I).set(e),i=(new B.I).set(t),o=new f.P(r.r,r.g,r.b),a=new f.P(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}}HemisphereLightProbe.prototype.isHemisphereLightProbe=!0;class AmbientLightProbe extends LightProbe{constructor(e,t=1){super(void 0,t);const n=(new B.I).set(e);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}}AmbientLightProbe.prototype.isAmbientLightProbe=!0;const Ni=new p.y,Zi=new p.y;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;const n=e.projectionMatrix.clone(),r=t.eyeSep/2,i=r*t.near/t.focus,o=t.near*Math.tan(m.DEG2RAD*t.fov*.5)/t.zoom;let a,s;Zi.elements[12]=-r,Ni.elements[12]=r,a=-o*t.aspect+i,s=o*t.aspect+i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*t.aspect-i,s=o*t.aspect-i,n.elements[0]=2*t.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Zi),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ni)}}class Clock{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=ji(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=ji();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function ji(){return("undefined"==typeof performance?Date:performance).now()}const zi=new f.P,Gi=new fi._,Vi=new f.P,Wi=new f.P;class AudioListener extends d.T{constructor(){super(),this.type="AudioListener",this.context=Ii.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(zi,Gi,Vi),Wi.set(0,0,-1).applyQuaternion(Gi),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(zi.x,e),t.positionY.linearRampToValueAtTime(zi.y,e),t.positionZ.linearRampToValueAtTime(zi.z,e),t.forwardX.linearRampToValueAtTime(Wi.x,e),t.forwardY.linearRampToValueAtTime(Wi.y,e),t.forwardZ.linearRampToValueAtTime(Wi.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(zi.x,zi.y,zi.z),t.setOrientation(Wi.x,Wi.y,Wi.z,n.x,n.y,n.z)}}var Hi=n(5108);class Audio extends d.T{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void Hi.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void Hi.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;Hi.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;Hi.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;Hi.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(Hi.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;Hi.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Xi=new f.P,Qi=new fi._,Yi=new f.P,Ki=new f.P;class PositionalAudio extends Audio{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Xi,Qi,Yi),Ki.set(0,0,1).applyQuaternion(Qi);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Xi.x,e),t.positionY.linearRampToValueAtTime(Xi.y,e),t.positionZ.linearRampToValueAtTime(Xi.z,e),t.orientationX.linearRampToValueAtTime(Ki.x,e),t.orientationY.linearRampToValueAtTime(Ki.y,e),t.orientationZ.linearRampToValueAtTime(Ki.z,e)}else t.setPosition(Xi.x,Xi.y,Xi.z),t.setOrientation(Ki.x,Ki.y,Ki.z)}}class AudioAnalyser{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class PropertyMixer{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){fi._.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;fi._.multiplyQuaternionsFlat(e,o,e,t,e,n),fi._.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}var qi=n(5108);const Ji="\\[\\]\\.:\\/",$i=new RegExp("[\\[\\]\\.:\\/]","g"),eo="[^\\[\\]\\.:\\/]",to="[^"+Ji.replace("\\.","")+"]",no=/((?:WC+[\/:])*)/.source.replace("WC",eo),ro=/(WCOD+)?/.source.replace("WCOD",to),io=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",eo),oo=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",eo),ao=new RegExp("^"+no+ro+io+oo+"$"),so=["material","materials","bones"];class PropertyBinding{constructor(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($i,"")}static parseTrackName(e){const t=ao.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==so.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(!t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void qi.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void qi.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void qi.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void qi.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;default:if(void 0===e[n])return void qi.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void qi.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void qi.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void qi.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void qi.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void qi.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class Composite{constructor(e,t,n){const r=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var co=n(5108);class AnimationObjectGroup{constructor(){this.uuid=m.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new PropertyBinding(u,n[e],r[e]))}else if(d<c){a=e[d];const s=--c,l=e[s];t[l.uuid]=d,e[d]=l,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new PropertyBinding(u,n[e],r[e])),t[s]=a}}else e[d]!==a&&co.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,c=t[s];if(void 0!==c&&c>=i){const o=i++,l=e[o];t[l.uuid]=c,e[c]=l,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[c];t[c]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,c=t[s];if(void 0!==c)if(delete t[s],c<i){const a=--i,s=e[a],l=--o,u=e[l];t[s.uuid]=c,e[c]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[l];t[c]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=c),e[c]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[c]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let n=l,r=s.length;n!==r;++n){const r=s[n];u[n]=new PropertyBinding(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}AnimationObjectGroup.prototype.isAnimationObjectGroup=!0;class AnimationAction{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,s=new Array(o),c={endingStart:a.Pnf,endingEnd:a.Pnf};for(let e=0;e!==o;++e){const t=i[e].createInterpolant(null);s[e]=t,t.settings=c}this._interpolantSettings=c,this._interpolants=s,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=a.YKA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;if(r<0||0===n)return;this._startTime=null,t=n*r}t*=this._updateTimeScale(e);const o=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;switch(this.blendMode){case a.gSk:for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(s);break;case a.IFH:default:for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,s)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===a.uEv;if(0===e)return-1===i?r:o&&1==(1&i)?t-r:r;if(n===a.jAl){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1==(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=a._lf,r.endingEnd=a._lf):(r.endingStart=e?this.zeroSlopeAtStart?a._lf:a.Pnf:a._sL,r.endingEnd=t?this.zeroSlopeAtEnd?a._lf:a.Pnf:a._sL)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}class AnimationMixer extends vn.p{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName;let l=c[s];void 0===l&&(l={},c[s]=l);for(let e=0;e!==i;++e){const i=r[e],c=i.name;let u=l[c];if(void 0!==u)o[e]=u;else{if(u=o[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,s,c));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new PropertyMixer(PropertyBinding.create(n,c,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,s,c),o[e]=u}a[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0==--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"==typeof e?AnimationClip.findByName(r,e):e;const s=null!==o?o.uuid:e,c=this._actionsByClip[s];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:a.IFH),void 0!==c){const e=c.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=c.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const u=new AnimationAction(this,o,t,n);return this._bindAction(u,l),this._addInactiveAction(u,s,i),u}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?AnimationClip.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let a=0;a!==n;++a){t[a]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let e=0;e!==s;++e)a[e].apply(o);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}AnimationMixer.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var lo=n(5108);class Uniform{constructor(e){"string"==typeof e&&(lo.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}clone(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(e,t,n=1){super(e,t),this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}InstancedInterleavedBuffer.prototype.isInstancedInterleavedBuffer=!0;class GLBufferAttribute{constructor(e,t,n,r,i){this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}GLBufferAttribute.prototype.isGLBufferAttribute=!0;var uo=n(5894),ho=n(5108);class Raycaster{constructor(e,t,n=0,r=1/0){this.ray=new or.z(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new uo.S,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):ho.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return po(e,this,n,t),n.sort(fo),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)po(e[r],this,n,t);return n.sort(fo),n}intersect_objects(e,t=[]){let n=t.length;for(let r=0,i=e.length;r<i;r++)if(e[r].raycast(this,t),t.length!==n)return t;return t}}function fo(e,t){return e.distance-t.distance}function po(e,t,n,r){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)po(r[e],t,n,!0)}}class Spherical{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(m.clamp(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class Cylindrical{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}var mo=n(5395);const go=new I.F;class Box2{constructor(e=new I.F(1/0,1/0),t=new I.F(-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=go.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return go.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box2.prototype.isBox2=!0;const vo=new f.P,_o=new f.P;class Line3{constructor(e=new f.P,t=new f.P){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){vo.subVectors(e,this.start),_o.subVectors(this.end,this.start);const n=_o.dot(_o);let r=_o.dot(vo)/n;return t&&(r=m.clamp(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}var yo=n(3601);const bo=new f.P;class SpotLightHelper extends d.T{constructor(e,t){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;const n=new k.u,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,o=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(o),Math.sin(o),1)}n.setAttribute("position",new O.a$(r,3));const i=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),bo.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bo),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const xo=new f.P,wo=new p.y,Ao=new p.y;class SkeletonHelper extends LineSegments{constructor(e){const t=To(e),n=new k.u,r=[],i=[],o=new B.I(0,0,1),a=new B.I(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new O.a$(r,3)),n.setAttribute("color",new O.a$(i,3));super(n,new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ao.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(wo.multiplyMatrices(Ao,i.matrixWorld),xo.setFromMatrixPosition(wo),r.setXYZ(n,xo.x,xo.y,xo.z),wo.multiplyMatrices(Ao,i.parent.matrixWorld),xo.setFromMatrixPosition(wo),r.setXYZ(n+1,xo.x,xo.y,xo.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}}function To(e){const t=[];e&&e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,To(e.children[n]));return t}class PointLightHelper extends c.K{constructor(e,t,n){super(new SphereGeometry(t,4,2),new N.v({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Mo=new f.P,Eo=new B.I,So=new B.I;class HemisphereLightHelper extends d.T{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const r=new OctahedronGeometry(t);r.rotateY(.5*Math.PI),this.material=new N.v({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new O.Tl(o,3)),this.add(new c.K(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Eo.copy(this.light.color),So.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Eo:So;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}e.lookAt(Mo.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(e=10,t=10,n=4473924,r=8947848){n=new B.I(n),r=new B.I(r);const i=t/2,o=e/t,a=e/2,s=[],c=[];for(let e=0,l=0,u=-a;e<=t;e++,u+=o){s.push(-a,0,u,a,0,u),s.push(u,0,-a,u,0,a);const t=e===i?n:r;t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3}const l=new k.u;l.setAttribute("position",new O.a$(s,3)),l.setAttribute("color",new O.a$(c,3));super(l,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}}class PolarGridHelper extends LineSegments{constructor(e=10,t=16,n=8,r=64,i=4473924,o=8947848){i=new B.I(i),o=new B.I(o);const a=[],s=[];for(let n=0;n<=t;n++){const r=n/t*(2*Math.PI),c=Math.sin(r)*e,l=Math.cos(r)*e;a.push(0,0,0),a.push(c,0,l);const u=1&n?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let t=0;t<=n;t++){const c=1&t?i:o,l=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*l,i=Math.cos(t)*l;a.push(n,0,i),s.push(c.r,c.g,c.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*l,i=Math.cos(t)*l,a.push(n,0,i),s.push(c.r,c.g,c.b)}}const c=new k.u;c.setAttribute("position",new O.a$(a,3)),c.setAttribute("color",new O.a$(s,3));super(c,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}}const Ro=new f.P,Lo=new f.P,Po=new f.P;class DirectionalLightHelper extends d.T{constructor(e,t,n){super(),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);let r=new k.u;r.setAttribute("position",new O.a$([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line(r,i),this.add(this.lightPlane),r=new k.u,r.setAttribute("position",new O.a$([0,0,0,0,0,1],3)),this.targetLine=new Line(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Ro.setFromMatrixPosition(this.light.matrixWorld),Lo.setFromMatrixPosition(this.light.target.matrixWorld),Po.subVectors(Lo,Ro),this.lightPlane.lookAt(Lo),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lo),this.targetLine.scale.z=Po.length()}}const Co=new f.P,Fo=new Camera;class CameraHelper extends LineSegments{constructor(e){const t=new k.u,n=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new B.I(16755200),s=new B.I(16711680),c=new B.I(43775),l=new B.I(16777215),u=new B.I(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new O.a$(r,3)),t.setAttribute("color",new O.a$(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const e=this.geometry,t=this.pointMap;Fo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Do("c",t,e,Fo,0,0,-1),Do("t",t,e,Fo,0,0,1),Do("n1",t,e,Fo,-1,-1,-1),Do("n2",t,e,Fo,1,-1,-1),Do("n3",t,e,Fo,-1,1,-1),Do("n4",t,e,Fo,1,1,-1),Do("f1",t,e,Fo,-1,-1,1),Do("f2",t,e,Fo,1,-1,1),Do("f3",t,e,Fo,-1,1,1),Do("f4",t,e,Fo,1,1,1),Do("u1",t,e,Fo,.7,1.1,-1),Do("u2",t,e,Fo,-.7,1.1,-1),Do("u3",t,e,Fo,0,2,-1),Do("cf1",t,e,Fo,-1,0,1),Do("cf2",t,e,Fo,1,0,1),Do("cf3",t,e,Fo,0,-1,1),Do("cf4",t,e,Fo,0,1,1),Do("cn1",t,e,Fo,-1,0,-1),Do("cn2",t,e,Fo,1,0,-1),Do("cn3",t,e,Fo,0,-1,-1),Do("cn4",t,e,Fo,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Do(e,t,n,r,i,o,a){Co.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Co.x,Co.y,Co.z)}}var Uo=n(5108);const Oo=new mo.Z;class BoxHelper extends LineSegments{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new k.u;i.setIndex(new O.Tl(n,1)),i.setAttribute("position",new O.Tl(r,3)),super(i,new LineBasicMaterial({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&Uo.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Oo.setFromObject(this.object),Oo.isEmpty())return;const t=Oo.min,n=Oo.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e){return LineSegments.prototype.copy.call(this,e),this.object=e.object,this}}class Box3Helper extends LineSegments{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new k.u;r.setIndex(new O.Tl(n,1)),r.setAttribute("position",new O.a$([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new LineBasicMaterial({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}}class PlaneHelper extends Line{constructor(e,t=1,n=16776960){const r=n,i=new k.u;i.setAttribute("position",new O.a$([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),super(i,new LineBasicMaterial({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=new k.u;o.setAttribute("position",new O.a$([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new c.K(o,new N.v({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){let t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?a._Li:a.Wl3,this.lookAt(this.plane.normal),super.updateMatrixWorld(e)}}const ko=new f.P;let Io,Bo;class ArrowHelper extends d.T{constructor(e=new f.P(0,0,1),t=new f.P(0,0,0),n=1,r=16776960,i=.2*n,o=.2*i){super(),this.type="ArrowHelper",void 0===Io&&(Io=new k.u,Io.setAttribute("position",new O.a$([0,0,0,0,1,0],3)),Bo=new CylinderGeometry(0,.5,1,5,1),Bo.translate(0,-.5,0)),this.position.copy(t),this.line=new Line(Io,new LineBasicMaterial({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new c.K(Bo,new N.v({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{ko.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(ko,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}}class AxesHelper extends LineSegments{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new k.u;n.setAttribute("position",new O.a$(t,3)),n.setAttribute("color",new O.a$([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new LineBasicMaterial({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new B.I,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new B.I,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e,t){function n(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Shape;i.curves=r.curves,t.push(i)}return t}function r(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,c=a.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[o],s=-s,a=t[i],c=-c),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const i=ShapeUtils.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return n(o);let a,s,c;const l=[];if(1===o.length)return s=o[0],c=new Shape,c.curves=s.curves,l.push(c),l;let u=!i(o[0].getPoints());u=e?!u:u;const h=[],d=[];let f,p,m=[],g=0;d[g]=void 0,m[g]=[];for(let t=0,n=o.length;t<n;t++)s=o[t],f=s.getPoints(),a=i(f),a=e?!a:a,a?(!u&&d[g]&&g++,d[g]={s:new Shape,p:f},d[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:f[0]});if(!d[0])return n(o);if(d.length>1){let e=!1;const t=[];for(let e=0,t=d.length;e<t;e++)h[e]=[];for(let n=0,i=d.length;n<i;n++){const i=m[n];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<d.length;i++)r(a.p,d[i].p)&&(n!==i&&t.push({froms:n,tos:i,hole:o}),s?(s=!1,h[i].push(a)):e=!0);s&&h[n].push(a)}}t.length>0&&(e||(m=h))}for(let e=0,t=d.length;e<t;e++){c=d[e].s,l.push(c),p=m[e];for(let e=0,t=p.length;e<t;e++)c.holes.push(p[e].h)}return l}}var No=n(5108);const Zo=new Float32Array(1),jo=new Int32Array(Zo.buffer);class DataUtils{static toHalfFloat(e){e>65504&&(No.warn("THREE.DataUtils.toHalfFloat(): value exceeds 65504."),e=65504),Zo[0]=e;const t=jo[0];let n=t>>16&32768,r=t>>12&2047;const i=t>>23&255;return i<103?n:i>142?(n|=31744,n|=(255==i?0:1)&&8388607&t,n):i<113?(r|=2048,n|=(r>>114-i)+(r>>113-i&1),n):(n|=i-112<<10|r>>1,n+=1&r,n)}}var zo=n(3279),Go=n(5108);const Vo=0,Wo=1,Ho=0,Xo=1,Qo=2;function Yo(e){return Go.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Ko(e=[]){return Go.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function qo(e,t){return Go.warn("THREE.PointCloud has been renamed to THREE.Points."),new Points(e,t)}function Jo(e){return Go.warn("THREE.Particle has been renamed to THREE.Sprite."),new Sprite(e)}function $o(e,t){return Go.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Points(e,t)}function ea(e){return Go.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ta(e){return Go.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function na(e){return Go.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new PointsMaterial(e)}function ra(e,t,n){return Go.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new f.P(e,t,n)}function ia(e,t){return Go.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new O.Tl(e,t).setUsage(a.dj0)}function oa(e,t){return Go.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new O.RN(e,t)}function aa(e,t){return Go.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new O.WT(e,t)}function sa(e,t){return Go.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new O.rA(e,t)}function ca(e,t){return Go.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new O.aV(e,t)}function la(e,t){return Go.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new O.ql(e,t)}function ua(e,t){return Go.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new O.j8(e,t)}function ha(e,t){return Go.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new O.lC(e,t)}function da(e,t){return Go.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new O.a$(e,t)}function fa(e,t){return Go.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new O.OM(e,t)}function pa(e){return Go.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new AxesHelper(e)}function ma(e,t){return Go.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new BoxHelper(e,t)}function ga(e,t){return Go.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new LineSegments(new EdgesGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function va(e,t){return Go.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new LineSegments(new WireframeGeometry(e.geometry),new LineBasicMaterial({color:void 0!==t?t:16777215}))}function _a(e){return Go.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new FileLoader(e)}function ya(e){return Go.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new DataTextureLoader(e)}function ba(e,t,n){return Go.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new WebGLCubeRenderTarget(e,n)}function xa(){Go.error("THREE.CanvasRenderer has been removed")}function wa(){Go.error("THREE.JSONLoader has been removed.")}Curve.create=function(e,t){return Go.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Path.prototype.fromPoints=function(e){return Go.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)},GridHelper.prototype.setColors=function(){Go.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},SkeletonHelper.prototype.update=function(){Go.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Loader.prototype.extractUrlBase=function(e){return Go.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),LoaderUtils.extractUrlBase(e)},Loader.Handlers={add:function(){Go.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){Go.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Box2.prototype.center=function(e){return Go.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},Box2.prototype.empty=function(){return Go.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Box2.prototype.isIntersectionBox=function(e){return Go.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},Box2.prototype.size=function(e){return Go.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)},mo.Z.prototype.center=function(e){return Go.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},mo.Z.prototype.empty=function(){return Go.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},mo.Z.prototype.isIntersectionBox=function(e){return Go.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},mo.Z.prototype.isIntersectionSphere=function(e){return Go.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},mo.Z.prototype.size=function(e){return Go.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)},ir.a.prototype.empty=function(){return Go.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},b.i.prototype.setFromMatrix=function(e){return Go.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},Line3.prototype.center=function(e){return Go.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},C.V.prototype.flattenToArrayOffset=function(e,t){return Go.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},C.V.prototype.multiplyVector3=function(e){return Go.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},C.V.prototype.multiplyVector3Array=function(){Go.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},C.V.prototype.applyToBufferAttribute=function(e){return Go.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},C.V.prototype.applyToVector3Array=function(){Go.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},C.V.prototype.getInverse=function(e){return Go.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},p.y.prototype.extractPosition=function(e){return Go.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},p.y.prototype.flattenToArrayOffset=function(e,t){return Go.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},p.y.prototype.getPosition=function(){return Go.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new f.P).setFromMatrixColumn(this,3)},p.y.prototype.setRotationFromQuaternion=function(e){return Go.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},p.y.prototype.multiplyToArray=function(){Go.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},p.y.prototype.multiplyVector3=function(e){return Go.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},p.y.prototype.multiplyVector4=function(e){return Go.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},p.y.prototype.multiplyVector3Array=function(){Go.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},p.y.prototype.rotateAxis=function(e){Go.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},p.y.prototype.crossVector=function(e){return Go.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},p.y.prototype.translate=function(){Go.error("THREE.Matrix4: .translate() has been removed.")},p.y.prototype.rotateX=function(){Go.error("THREE.Matrix4: .rotateX() has been removed.")},p.y.prototype.rotateY=function(){Go.error("THREE.Matrix4: .rotateY() has been removed.")},p.y.prototype.rotateZ=function(){Go.error("THREE.Matrix4: .rotateZ() has been removed.")},p.y.prototype.rotateByAxis=function(){Go.error("THREE.Matrix4: .rotateByAxis() has been removed.")},p.y.prototype.applyToBufferAttribute=function(e){return Go.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},p.y.prototype.applyToVector3Array=function(){Go.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},p.y.prototype.makeFrustum=function(e,t,n,r,i,o){return Go.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,o)},p.y.prototype.getInverse=function(e){return Go.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(e).invert()},F.J.prototype.isIntersectionLine=function(e){return Go.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},fi._.prototype.multiplyVector3=function(e){return Go.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},fi._.prototype.inverse=function(){return Go.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},or.z.prototype.isIntersectionBox=function(e){return Go.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},or.z.prototype.isIntersectionPlane=function(e){return Go.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},or.z.prototype.isIntersectionSphere=function(e){return Go.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},An.C.prototype.area=function(){return Go.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},An.C.prototype.barycoordFromPoint=function(e,t){return Go.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},An.C.prototype.midpoint=function(e){return Go.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},An.C.prototypenormal=function(e){return Go.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},An.C.prototype.plane=function(e){return Go.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)},An.C.barycoordFromPoint=function(e,t,n,r,i){return Go.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),An.C.getBarycoord(e,t,n,r,i)},An.C.normal=function(e,t,n,r){return Go.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),An.C.getNormal(e,t,n,r)},Shape.prototype.extractAllPoints=function(e){return Go.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},Shape.prototype.extrude=function(e){return Go.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ExtrudeGeometry(this,e)},Shape.prototype.makeGeometry=function(e){return Go.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ShapeGeometry(this,e)},I.F.prototype.fromAttribute=function(e,t,n){return Go.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},I.F.prototype.distanceToManhattan=function(e){return Go.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},I.F.prototype.lengthManhattan=function(){return Go.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},f.P.prototype.setEulerFromRotationMatrix=function(){Go.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},f.P.prototype.setEulerFromQuaternion=function(){Go.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},f.P.prototype.getPositionFromMatrix=function(e){return Go.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},f.P.prototype.getScaleFromMatrix=function(e){return Go.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},f.P.prototype.getColumnFromMatrix=function(e,t){return Go.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},f.P.prototype.applyProjection=function(e){return Go.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},f.P.prototype.fromAttribute=function(e,t,n){return Go.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},f.P.prototype.distanceToManhattan=function(e){return Go.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},f.P.prototype.lengthManhattan=function(){return Go.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},x.L.prototype.fromAttribute=function(e,t,n){return Go.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},x.L.prototype.lengthManhattan=function(){return Go.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},d.T.prototype.getChildByName=function(e){return Go.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},d.T.prototype.renderDepth=function(){Go.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},d.T.prototype.translate=function(e,t){return Go.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},d.T.prototype.getWorldRotation=function(){Go.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},d.T.prototype.applyMatrix=function(e){return Go.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(d.T.prototype,{eulerOrder:{get:function(){return Go.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){Go.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){Go.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){Go.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),c.K.prototype.setDrawMode=function(){Go.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(c.K.prototype,{drawMode:{get:function(){return Go.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),a.WwZ},set:function(){Go.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),SkinnedMesh.prototype.initBones=function(){Go.error("THREE.SkinnedMesh: initBones() has been removed.")},PerspectiveCamera.prototype.setLens=function(e,t){Go.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){Go.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){Go.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){Go.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){Go.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){Go.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){Go.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){Go.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){Go.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){Go.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){Go.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){Go.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){Go.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){Go.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(O.Tl.prototype,{length:{get:function(){return Go.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return Go.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===a.dj0},set:function(){Go.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(a.dj0)}}}),O.Tl.prototype.setDynamic=function(e){return Go.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?a.dj0:a.W2J),this},O.Tl.prototype.copyIndicesArray=function(){Go.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},O.Tl.prototype.setArray=function(){Go.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},k.u.prototype.addIndex=function(e){Go.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},k.u.prototype.addAttribute=function(e,t){return Go.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(Go.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(Go.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new O.Tl(arguments[1],arguments[2])))},k.u.prototype.addDrawCall=function(e,t,n){void 0!==n&&Go.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),Go.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},k.u.prototype.clearDrawCalls=function(){Go.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},k.u.prototype.computeOffsets=function(){Go.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},k.u.prototype.removeAttribute=function(e){return Go.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},k.u.prototype.applyMatrix=function(e){return Go.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)},Object.defineProperties(k.u.prototype,{drawcalls:{get:function(){return Go.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return Go.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),InterleavedBuffer.prototype.setDynamic=function(e){return Go.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?a.dj0:a.W2J),this},InterleavedBuffer.prototype.setArray=function(){Go.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},ExtrudeGeometry.prototype.getArrays=function(){Go.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},ExtrudeGeometry.prototype.addShapeList=function(){Go.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},ExtrudeGeometry.prototype.addShape=function(){Go.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},Scene.prototype.dispose=function(){Go.error("THREE.Scene: .dispose() has been removed.")},Uniform.prototype.onUpdate=function(){return Go.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(En.F.prototype,{wrapAround:{get:function(){Go.warn("THREE.Material: .wrapAround has been removed.")},set:function(){Go.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){Go.warn("THREE.Material: .overdraw has been removed.")},set:function(){Go.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return Go.warn("THREE.Material: .wrapRGB has been removed."),new B.I}},shading:{get:function(){Go.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){Go.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===a.esl}},stencilMask:{get:function(){return Go.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){Go.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}},vertexTangents:{get:function(){Go.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){Go.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(u.j.prototype,{derivatives:{get:function(){return Go.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){Go.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),wn.prototype.clearTarget=function(e,t,n,r){Go.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},wn.prototype.animate=function(e){Go.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},wn.prototype.getCurrentRenderTarget=function(){return Go.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},wn.prototype.getMaxAnisotropy=function(){return Go.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},wn.prototype.getPrecision=function(){return Go.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},wn.prototype.resetGLState=function(){return Go.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},wn.prototype.supportsFloatTextures=function(){return Go.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},wn.prototype.supportsHalfFloatTextures=function(){return Go.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},wn.prototype.supportsStandardDerivatives=function(){return Go.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},wn.prototype.supportsCompressedTextureS3TC=function(){return Go.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},wn.prototype.supportsCompressedTexturePVRTC=function(){return Go.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},wn.prototype.supportsBlendMinMax=function(){return Go.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},wn.prototype.supportsVertexTextures=function(){return Go.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},wn.prototype.supportsInstancedArrays=function(){return Go.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},wn.prototype.enableScissorTest=function(e){Go.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},wn.prototype.initMaterial=function(){Go.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},wn.prototype.addPrePlugin=function(){Go.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},wn.prototype.addPostPlugin=function(){Go.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},wn.prototype.updateShadowMap=function(){Go.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},wn.prototype.setFaceCulling=function(){Go.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},wn.prototype.allocTextureUnit=function(){Go.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},wn.prototype.setTexture=function(){Go.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},wn.prototype.setTexture2D=function(){Go.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},wn.prototype.setTextureCube=function(){Go.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},wn.prototype.getActiveMipMapLevel=function(){return Go.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(wn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){Go.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){Go.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){Go.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){Go.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return Go.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return Go.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return Go.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){Go.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return Go.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){Go.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?a.knz:a.rnI}},toneMappingWhitePoint:{get:function(){return Go.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){Go.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(hn.c.prototype,{cullFace:{get:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){Go.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(s.d.prototype,{wrapS:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){Go.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){Go.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){Go.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){Go.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){Go.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){Go.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){Go.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){Go.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){Go.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return Go.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){Go.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Audio.prototype.load=function(e){Go.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const t=this;return(new AudioLoader).load(e,(function(e){t.setBuffer(e)})),this},AudioAnalyser.prototype.getData=function(){return Go.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(e,t){return Go.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},CubeCamera.prototype.clear=function(e,t,n,r){return Go.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(e,t,n,r)},zo.P.crossOrigin=void 0,zo.P.loadTexture=function(e,t,n,r){Go.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const i=new TextureLoader;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},zo.P.loadTextureCube=function(e,t,n,r){Go.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const i=new CubeTextureLoader;i.setCrossOrigin(this.crossOrigin);const o=i.load(e,n,void 0,r);return t&&(o.mapping=t),o},zo.P.loadCompressedTexture=function(){Go.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},zo.P.loadCompressedTextureCube=function(){Go.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const Aa={createMultiMaterialObject:function(){Go.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){Go.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){Go.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function Ta(){Go.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}function Ma(){return Go.error("THREE.ParametricGeometry has been moved to /examples/jsm/geometries/ParametricGeometry.js"),new k.u}function Ea(){return Go.error("THREE.TextGeometry has been moved to /examples/jsm/geometries/TextGeometry.js"),new k.u}function Sa(){Go.error("THREE.FontLoader has been moved to /examples/jsm/loaders/FontLoader.js")}function Ra(){Go.error("THREE.Font has been moved to /examples/jsm/loaders/FontLoader.js")}function La(){Go.error("THREE.ImmediateRenderObject has been removed.")}var Pa=n(5108);"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:a.UZH}})),"undefined"!=typeof window&&(window.__THREE__?Pa.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=a.UZH)},2513:function(e,t,n){"use strict";n.d(t,{APR:function(){return wt},Abz:function(){return At},B02:function(){return l},BFQ:function(){return qe},BG$:function(){return dt},BVF:function(){return j},Bf4:function(){return ce},CaW:function(){return rt},CdI:function(){return ee},CtA:function(){return Xe},D1R:function(){return we},D9w:function(){return We},Djp:function(){return ht},E2K:function(){return Ye},EoG:function(){return $},F5G:function(){return Qe},FDw:function(){return Ae},FUD:function(){return _t},GG6:function(){return gt},Gih:function(){return vt},HBG:function(){return Ot},HTd:function(){return ge},HgB:function(){return Cn},Hy8:function(){return I},I0h:function(){return Ft},IFH:function(){return Wt},ILR:function(){return $e},IOt:function(){return sn},Inb:function(){return nn},Ir4:function(){return Pn},JQ4:function(){return Le},JWc:function(){return Rn},KC9:function(){return $t},KhW:function(){return F},Kz5:function(){return Re},LSk:function(){return On},LY2:function(){return ne},LgE:function(){return tn},LgZ:function(){return O},LsT:function(){return Se},M5h:function(){return A},M6c:function(){return en},M6v:function(){return Q},MyG:function(){return vn},N4l:function(){return w},NDo:function(){return q},NMF:function(){return Zt},NYV:function(){return ft},Ns1:function(){return Y},OAl:function(){return xn},OS$:function(){return Et},OTo:function(){return ke},OoA:function(){return fe},PA7:function(){return cn},PeU:function(){return a},Pnf:function(){return zt},QM0:function(){return Ln},QZ1:function(){return Sn},QmN:function(){return o},RlZ:function(){return Z},RsA:function(){return i},RvT:function(){return wn},S2y:function(){return c},SVc:function(){return ue},Se2:function(){return z},Sm8:function(){return L},SvJ:function(){return bt},Syv:function(){return Nt},T95:function(){return Me},T_J:function(){return mn},TyD:function(){return pe},UCm:function(){return Ie},UZH:function(){return r},UlW:function(){return Qt},Vdb:function(){return B},VzW:function(){return Pe},W2J:function(){return Mn},WMw:function(){return x},Wbm:function(){return E},Wl3:function(){return p},Wpd:function(){return N},Wso:function(){return Pt},WwZ:function(){return Xt},XNv:function(){return Ue},Xaj:function(){return T},Y5S:function(){return Lt},Y8D:function(){return Ne},YGz:function(){return te},YKA:function(){return It},YLQ:function(){return me},Yjz:function(){return Dt},Z6B:function(){return Dn},ZRs:function(){return dn},Zr5:function(){return G},_AM:function(){return et},_Li:function(){return m},_MY:function(){return u},_iA:function(){return h},_lf:function(){return Gt},_sL:function(){return Vt},_wO:function(){return St},aH4:function(){return ve},ad5:function(){return ln},aoB:function(){return je},av9:function(){return He},bGH:function(){return M},bcs:function(){return Rt},bdR:function(){return b},brP:function(){return Ge},bsb:function(){return xt},c8b:function(){return P},cLu:function(){return Ce},cRx:function(){return Ze},ce8:function(){return hn},cum:function(){return Tn},dSO:function(){return se},dZ3:function(){return re},dj0:function(){return En},dwk:function(){return f},eD:function(){return W},eMJ:function(){return gn},ePn:function(){return Ut},eaV:function(){return nt},ehD:function(){return g},ekQ:function(){return at},esl:function(){return v},fSK:function(){return k},fY$:function(){return oe},fto:function(){return it},g8_:function(){return le},gMp:function(){return rn},gSk:function(){return Ht},ghN:function(){return C},gi4:function(){return ut},hEm:function(){return Ve},iAb:function(){return Ee},iWC:function(){return D},iiP:function(){return yt},irR:function(){return De},j4z:function(){return An},jAl:function(){return kt},jFi:function(){return y},jZA:function(){return ct},jfJ:function(){return fn},jwo:function(){return yn},k0A:function(){return Fe},k74:function(){return U},knz:function(){return qt},ksN:function(){return H},l0P:function(){return ot},l8J:function(){return Fn},lRj:function(){return xe},mSO:function(){return an},ntZ:function(){return d},oqc:function(){return pn},p1$:function(){return Ct},pIN:function(){return jt},pKu:function(){return mt},pMV:function(){return Jt},pnl:function(){return Mt},ptH:function(){return st},qhX:function(){return K},qkB:function(){return ze},qyh:function(){return be},rOj:function(){return S},r_:function(){return R},rnI:function(){return Kt},rpg:function(){return he},tm_:function(){return s},uEv:function(){return Bt},uL9:function(){return J},uWy:function(){return de},uXU:function(){return _n},v3W:function(){return Je},v6B:function(){return Tt},v9Y:function(){return Un},vCF:function(){return V},vCx:function(){return tt},vZf:function(){return _e},vxC:function(){return ae},w$m:function(){return X},wJv:function(){return Oe},wcA:function(){return _},wem:function(){return ye},wk1:function(){return Be},wuA:function(){return Ke},x5V:function(){return un},xJs:function(){return pt},xfE:function(){return ie},y2t:function(){return lt},yt0:function(){return bn},ywz:function(){return Te},z$h:function(){return Yt},z81:function(){return on}});const r="134dev",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,c=2,l=3,u=0,h=1,d=2,f=3,p=0,m=1,g=2,v=1,_=2,y=0,b=1,x=2,w=3,A=4,T=5,M=100,E=101,S=102,R=103,L=104,P=200,C=201,F=202,D=203,U=204,O=205,k=206,I=207,B=208,N=209,Z=210,j=0,z=1,G=2,V=3,W=4,H=5,X=6,Q=7,Y=0,K=1,q=2,J=0,$=1,ee=2,te=3,ne=4,re=5,ie=300,oe=301,ae=302,se=303,ce=304,le=306,ue=307,he=1e3,de=1001,fe=1002,pe=1003,me=1004,ge=1004,ve=1005,_e=1005,ye=1006,be=1007,xe=1007,we=1008,Ae=1008,Te=1009,Me=1010,Ee=1011,Se=1012,Re=1013,Le=1014,Pe=1015,Ce=1016,Fe=1017,De=1018,Ue=1019,Oe=1020,ke=1021,Ie=1022,Be=1023,Ne=1024,Ze=1025,je=Be,ze=1026,Ge=1027,Ve=1028,We=1029,He=1030,Xe=1031,Qe=1032,Ye=1033,Ke=33776,qe=33777,Je=33778,$e=33779,et=35840,tt=35841,nt=35842,rt=35843,it=36196,ot=37492,at=37496,st=37808,ct=37809,lt=37810,ut=37811,ht=37812,dt=37813,ft=37814,pt=37815,mt=37816,gt=37817,vt=37818,_t=37819,yt=37820,bt=37821,xt=36492,wt=37840,At=37841,Tt=37842,Mt=37843,Et=37844,St=37845,Rt=37846,Lt=37847,Pt=37848,Ct=37849,Ft=37850,Dt=37851,Ut=37852,Ot=37853,kt=2200,It=2201,Bt=2202,Nt=2300,Zt=2301,jt=2302,zt=2400,Gt=2401,Vt=2402,Wt=2500,Ht=2501,Xt=0,Qt=1,Yt=2,Kt=3e3,qt=3001,Jt=3007,$t=3002,en=3003,tn=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,cn=1,ln=0,un=7680,hn=7681,dn=7682,fn=7683,pn=34055,mn=34056,gn=5386,vn=512,_n=513,yn=514,bn=515,xn=516,wn=517,An=518,Tn=519,Mn=35044,En=35048,Sn=35040,Rn=35045,Ln=35049,Pn=35041,Cn=35046,Fn=35050,Dn=35042,Un="100",On="300 es"},2:function(e,t,n){"use strict";n.d(t,{OM:function(){return Float64BufferAttribute},RN:function(){return Int8BufferAttribute},Tl:function(){return BufferAttribute},WT:function(){return Uint8BufferAttribute},a$:function(){return Float32BufferAttribute},aV:function(){return Int16BufferAttribute},e6:function(){return Float16BufferAttribute},j8:function(){return Int32BufferAttribute},lC:function(){return Uint32BufferAttribute},ql:function(){return Uint16BufferAttribute},rA:function(){return Uint8ClampedBufferAttribute}});var r=n(6969),i=n(7306),o=n(6522),a=n(9706),s=n(2513),c=n(5108);const l=new i.P,u=new o.F;class BufferAttribute{constructor(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.usage=s.W2J,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}copyColorsArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(c.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),i=new a.I),t[n++]=i.r,t[n++]=i.g,t[n++]=i.b}return this}copyVector2sArray(e){const t=this.array;let n=0;for(let r=0,i=e.length;r<i;r++){let i=e[r];void 0===i&&(c.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),i=new o.F),t[n++]=i.x,t[n++]=i.y}return this}copyVector3sArray(e){const t=this.array;let n=0;for(let r=0,o=e.length;r<o;r++){let o=e[r];void 0===o&&(c.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new i.P),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this}copyVector4sArray(e){const t=this.array;let n=0;for(let i=0,o=e.length;i<o;i++){let o=e[i];void 0===o&&(c.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new r.L),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)u.fromBufferAttribute(this,t),u.applyMatrix3(e),this.setXY(t,u.x,u.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)l.fromBufferAttribute(this,t),l.applyMatrix3(e),this.setXYZ(t,l.x,l.y,l.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)l.x=this.getX(t),l.y=this.getY(t),l.z=this.getZ(t),l.applyMatrix4(e),this.setXYZ(t,l.x,l.y,l.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)l.x=this.getX(t),l.y=this.getY(t),l.z=this.getZ(t),l.applyNormalMatrix(e),this.setXYZ(t,l.x,l.y,l.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)l.x=this.getX(t),l.y=this.getY(t),l.z=this.getZ(t),l.transformDirection(e),this.setXYZ(t,l.x,l.y,l.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){return this.array[e*this.itemSize]}setX(e,t){return this.array[e*this.itemSize]=t,this}getY(e){return this.array[e*this.itemSize+1]}setY(e,t){return this.array[e*this.itemSize+1]=t,this}getZ(e){return this.array[e*this.itemSize+2]}setZ(e,t){return this.array[e*this.itemSize+2]=t,this}getW(e){return this.array[e*this.itemSize+3]}setW(e,t){return this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==s.W2J&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}}BufferAttribute.prototype.isBufferAttribute=!0;class Int8BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Uint8BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Int16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int16Array(e),t,n)}}class Uint16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class Int32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Int32Array(e),t,n)}}class Uint32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Float16BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Uint16Array(e),t,n)}}Float16BufferAttribute.prototype.isFloat16BufferAttribute=!0;class Float32BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float32Array(e),t,n)}}class Float64BufferAttribute extends BufferAttribute{constructor(e,t,n){super(new Float64Array(e),t,n)}}},6487:function(e,t,n){"use strict";n.d(t,{u:function(){return BufferGeometry}});var r=n(7306),i=n(6522),o=n(5395),a=n(4092),s=n(2),c=n(6035),l=n(616),u=n(5154),h=n(5184),d=n(4682),f=n(2111),p=n(5108);let m=0;const g=new u.y,v=new l.T,_=new r.P,y=new o.Z,b=new o.Z,x=new r.P;class BufferGeometry extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:m++}),this.uuid=d.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new((0,f.uH)(e)>65535?s.lC:s.ql)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new h.V).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return g.makeRotationFromQuaternion(e),this.applyMatrix4(g),this}rotateX(e){return g.makeRotationX(e),this.applyMatrix4(g),this}rotateY(e){return g.makeRotationY(e),this.applyMatrix4(g),this}rotateZ(e){return g.makeRotationZ(e),this.applyMatrix4(g),this}translate(e,t,n){return g.makeTranslation(e,t,n),this.applyMatrix4(g),this}scale(e,t,n){return g.makeScale(e,t,n),this.applyMatrix4(g),this}lookAt(e){return v.lookAt(e),v.updateMatrix(),this.applyMatrix4(v.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_).negate(),this.translate(_.x,_.y,_.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new s.a$(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new o.Z);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return p.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new r.P(-1/0,-1/0,-1/0),new r.P(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];y.setFromBufferAttribute(n),this.morphTargetsRelative?(x.addVectors(this.boundingBox.min,y.min),this.boundingBox.expandByPoint(x),x.addVectors(this.boundingBox.max,y.max),this.boundingBox.expandByPoint(x)):(this.boundingBox.expandByPoint(y.min),this.boundingBox.expandByPoint(y.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&p.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new c.a);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return p.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new r.P,1/0);if(e){const n=this.boundingSphere.center;if(y.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];b.setFromBufferAttribute(n),this.morphTargetsRelative?(x.addVectors(y.min,b.min),y.expandByPoint(x),x.addVectors(y.max,b.max),y.expandByPoint(x)):(y.expandByPoint(b.min),y.expandByPoint(b.max))}y.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)x.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(x));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)x.fromBufferAttribute(o,t),a&&(_.fromBufferAttribute(e,t),x.add(_)),r=Math.max(r,n.distanceToSquared(x))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&p.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void p.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,o=t.position.array,a=t.normal.array,c=t.uv.array,l=o.length/3;void 0===t.tangent&&this.setAttribute("tangent",new s.Tl(new Float32Array(4*l),4));const u=t.tangent.array,h=[],d=[];for(let e=0;e<l;e++)h[e]=new r.P,d[e]=new r.P;const f=new r.P,m=new r.P,g=new r.P,v=new i.F,_=new i.F,y=new i.F,b=new r.P,x=new r.P;function w(e,t,n){f.fromArray(o,3*e),m.fromArray(o,3*t),g.fromArray(o,3*n),v.fromArray(c,2*e),_.fromArray(c,2*t),y.fromArray(c,2*n),m.sub(f),g.sub(f),_.sub(v),y.sub(v);const r=1/(_.x*y.y-y.x*_.y);isFinite(r)&&(b.copy(m).multiplyScalar(y.y).addScaledVector(g,-_.y).multiplyScalar(r),x.copy(g).multiplyScalar(_.x).addScaledVector(m,-y.x).multiplyScalar(r),h[e].add(b),h[t].add(b),h[n].add(b),d[e].add(x),d[t].add(x),d[n].add(x))}let A=this.groups;0===A.length&&(A=[{start:0,count:n.length}]);for(let e=0,t=A.length;e<t;++e){const t=A[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)w(n[e+0],n[e+1],n[e+2])}const T=new r.P,M=new r.P,E=new r.P,S=new r.P;function R(e){E.fromArray(a,3*e),S.copy(E);const t=h[e];T.copy(t),T.sub(E.multiplyScalar(E.dot(t))).normalize(),M.crossVectors(S,t);const n=M.dot(d[e])<0?-1:1;u[4*e]=T.x,u[4*e+1]=T.y,u[4*e+2]=T.z,u[4*e+3]=n}for(let e=0,t=A.length;e<t;++e){const t=A[e],r=t.start;for(let e=r,i=r+t.count;e<i;e+=3)R(n[e+0]),R(n[e+1]),R(n[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new s.Tl(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new r.P,o=new r.P,a=new r.P,c=new r.P,l=new r.P,u=new r.P,h=new r.P,d=new r.P;if(e)for(let r=0,s=e.count;r<s;r+=3){const s=e.getX(r+0),f=e.getX(r+1),p=e.getX(r+2);i.fromBufferAttribute(t,s),o.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),h.subVectors(a,o),d.subVectors(i,o),h.cross(d),c.fromBufferAttribute(n,s),l.fromBufferAttribute(n,f),u.fromBufferAttribute(n,p),c.add(h),l.add(h),u.add(h),n.setXYZ(s,c.x,c.y,c.z),n.setXYZ(f,l.x,l.y,l.z),n.setXYZ(p,u.x,u.y,u.z)}else for(let e=0,r=t.count;e<r;e+=3)i.fromBufferAttribute(t,e+0),o.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),h.subVectors(a,o),d.subVectors(i,o),h.cross(d),n.setXYZ(e+0,h.x,h.y,h.z),n.setXYZ(e+1,h.x,h.y,h.z),n.setXYZ(e+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(e,t){if(!e||!e.isBufferGeometry)return void p.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e);void 0===t&&(t=0,p.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const r in n){if(void 0===e.attributes[r])continue;const i=n[r].array,o=e.attributes[r],a=o.array,s=o.itemSize*t,c=Math.min(a.length,i.length-s);for(let e=0,t=s;e<c;e++,t++)i[t]=a[e]}return this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)x.fromBufferAttribute(e,t),x.normalize(),e.setXYZ(t,x.x,x.y,x.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,c=0;for(let i=0,s=t.length;i<s;i++){a=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)o[c++]=n[a++]}return new s.Tl(o,r,i)}if(null===this.index)return p.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new BufferGeometry,n=this.index.array,r=this.attributes;for(const i in r){const o=e(r[i],n);t.setAttribute(i,o)}const i=this.morphAttributes;for(const r in i){const o=[],a=i[r];for(let t=0,r=a.length;t<r;t++){const r=e(a[t],n);o.push(r)}t.morphAttributes[r]=o}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let e=0,n=o.length;e<n;e++){const n=o[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],o=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];o.push(r.toJSON(e.data))}o.length>0&&(r[t]=o,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let e=0,t=o.length;e<t;e++){const t=o[e];this.addGroup(t.start,t.count,t.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,void 0!==e.parameters&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}BufferGeometry.prototype.isBufferGeometry=!0},4092:function(e,t,n){"use strict";n.d(t,{p:function(){return EventDispatcher}});class EventDispatcher{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}},5894:function(e,t,n){"use strict";n.d(t,{S:function(){return Layers}});class Layers{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}}},616:function(e,t,n){"use strict";n.d(t,{T:function(){return Object3D}});var r=n(9502),i=n(7306),o=n(5154),a=n(4092),s=n(3601),c=n(5894),l=n(5184),u=n(4682),h=n(5108);let d=0;const f=new i.P,p=new r._,m=new o.y,g=new i.P,v=new i.P,_=new i.P,y=new r._,b=new i.P(1,0,0),x=new i.P(0,1,0),w=new i.P(0,0,1),A={type:"added"},T={type:"removed"};new i.P;let M=new o.y;class Object3D extends a.p{constructor(){super(),Object.defineProperty(this,"id",{value:d++}),this.uuid=u.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();const e=new i.P,t=new s.U,n=new r._,a=new i.P(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:a},modelViewMatrix:{value:new o.y},normalMatrix:{value:new l.V}}),this.matrix=new o.y,this.matrixWorld=new o.y,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new c.S,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return p.setFromAxisAngle(e,t),this.quaternion.multiply(p),this}rotateOnWorldAxis(e,t){return p.setFromAxisAngle(e,t),this.quaternion.premultiply(p),this}rotateX(e){return this.rotateOnAxis(b,e)}rotateY(e){return this.rotateOnAxis(x,e)}rotateZ(e){return this.rotateOnAxis(w,e)}translateOnAxis(e,t){return f.copy(e).applyQuaternion(this.quaternion),this.position.add(f.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(b,e)}translateY(e){return this.translateOnAxis(x,e)}translateZ(e){return this.translateOnAxis(w,e)}localToWorld(e){return e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return e.applyMatrix4(m.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?g.copy(e):g.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),v.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?m.lookAt(v,g,this.up):m.lookAt(g,v,this.up),this.quaternion.setFromRotationMatrix(m),this.parent_matrix_world?(M.extractRotation(this.parent_matrix_world),p.setFromRotationMatrix(M),this.quaternion.premultiply(p.invert())):r&&(M.extractRotation(r.matrixWorld),p.setFromRotationMatrix(M),this.quaternion.premultiply(p.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(h.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(A)):h.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(T)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(T)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),m.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),m.multiply(e.parent.matrixWorld)),e.applyMatrix4(m),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(v,e,_),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(v,y,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r&&!1!==t[n].traverse(e);n++);}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r&&!1!==t[n].traverseVisible(e);n++);}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.parent_matrix_world?this.matrixWorld.multiplyMatrices(this.parent_matrix_world,this.matrix):this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent_matrix_world||this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.parent_matrix_world?this.matrixWorld.multiplyMatrices(this.parent_matrix_world,this.matrix):this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent_matrix_world||this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),c=o(e.skeletons),l=o(e.animations);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Object3D.DefaultUp=new i.P(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object3D.prototype.isObject3D=!0},3279:function(e,t,n){"use strict";n.d(t,{P:function(){return ImageUtils}});var r=n(2111),i=n(5108);let o;class ImageUtils{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===o&&(o=(0,r.c)("canvas")),o.width=e.width,o.height=e.height;const n=o.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=o}return t.width>2048||t.height>2048?(i.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}}},2313:function(e,t,n){"use strict";n.d(t,{D:function(){return BoxGeometry},n:function(){return BoxGeometry}});var r=n(6487),i=n(2),o=n(7306);class BoxGeometry extends r.u{constructor(e=1,t=1,n=1,r=1,a=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:s};const c=this;r=Math.floor(r),a=Math.floor(a),s=Math.floor(s);const l=[],u=[],h=[],d=[];let f=0,p=0;function m(e,t,n,r,i,a,s,m,g,v,_){const y=a/g,b=s/v,x=a/2,w=s/2,A=m/2,T=g+1,M=v+1;let E=0,S=0;const R=new o.P;for(let o=0;o<M;o++){const a=o*b-w;for(let s=0;s<T;s++){const c=s*y-x;R[e]=c*r,R[t]=a*i,R[n]=A,u.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[n]=m>0?1:-1,h.push(R.x,R.y,R.z),d.push(s/g),d.push(1-o/v),E+=1}}for(let e=0;e<v;e++)for(let t=0;t<g;t++){const n=f+t+T*e,r=f+t+T*(e+1),i=f+(t+1)+T*(e+1),o=f+(t+1)+T*e;l.push(n,r,o),l.push(r,i,o),S+=6}c.addGroup(p,S,_),p+=S,f+=E}m("z","y","x",-1,-1,n,t,e,s,a,0),m("z","y","x",1,-1,n,t,-e,s,a,1),m("x","z","y",1,1,e,n,t,r,s,2),m("x","z","y",1,-1,e,n,-t,r,s,3),m("x","y","z",1,-1,e,t,n,r,a,4),m("x","y","z",-1,-1,e,t,-n,r,a,5),this.setIndex(l),this.setAttribute("position",new i.a$(u,3)),this.setAttribute("normal",new i.a$(h,3)),this.setAttribute("uv",new i.a$(d,2))}static fromJSON(e){return new BoxGeometry(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}},9913:function(e,t,n){"use strict";n.d(t,{B:function(){return PlaneGeometry},_:function(){return PlaneGeometry}});var r=n(6487),i=n(2);class PlaneGeometry extends r.u{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const o=e/2,a=t/2,s=Math.floor(n),c=Math.floor(r),l=s+1,u=c+1,h=e/s,d=t/c,f=[],p=[],m=[],g=[];for(let e=0;e<u;e++){const t=e*d-a;for(let n=0;n<l;n++){const r=n*h-o;p.push(r,-t,0),m.push(0,0,1),g.push(n/s),g.push(1-e/c)}}for(let e=0;e<c;e++)for(let t=0;t<s;t++){const n=t+l*e,r=t+l*(e+1),i=t+1+l*(e+1),o=t+1+l*e;f.push(n,r,o),f.push(r,i,o)}this.setIndex(f),this.setAttribute("position",new i.a$(p,3)),this.setAttribute("normal",new i.a$(m,3)),this.setAttribute("uv",new i.a$(g,2))}static fromJSON(e){return new PlaneGeometry(e.width,e.height,e.widthSegments,e.heightSegments)}}},4328:function(e,t,n){"use strict";n.d(t,{F:function(){return Material}});var r=n(4092),i=n(2513),o=n(4682),a=n(5108);let s=0;class Material extends r.p{constructor(){super(),Object.defineProperty(this,"id",{value:s++}),this.uuid=o.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=i.bdR,this.side=i.Wl3,this.vertexColors=!1,this.opacity=1,this.format=i.wk1,this.transparent=!1,this.blendSrc=i.k74,this.blendDst=i.LgZ,this.blendEquation=i.bGH,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=i.vCF,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=i.cum,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=i.x5V,this.stencilZFail=i.x5V,this.stencilZPass=i.x5V,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){a.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}if("shading"===t){a.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===i.esl;continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):!1!==e.texture_cache&&"string"==typeof n&&t.toLowerCase().indexOf("map")>-1?this[t]=window.F_TEXTURE_STREAMING_FUNCTION(n):("uniforms"===t&&window.F_THREE_PATCH_UNIFORMS(n,this),this[t]=n):a.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenTint&&this.sheenTint.isColor&&(n.sheenTint=this.sheenTint.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularTint&&this.specularTint.isColor&&(n.specularTint=this.specularTint.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularTintMap&&this.specularTintMap.isTexture&&(n.specularTintMap=this.specularTintMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationTint&&(n.attenuationTint=this.attenuationTint.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==i.bdR&&(n.blending=this.blending),this.side!==i.Wl3&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.format!==i.wk1&&(n.format=this.format),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.format=e.format,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}Material.prototype.isMaterial=!0},6095:function(e,t,n){"use strict";n.d(t,{v:function(){return MeshBasicMaterial}});var r=n(4328),i=n(2513),o=n(9706);class MeshBasicMaterial extends r.F{constructor(e){super(),this.type="MeshBasicMaterial",this.color=new o.I(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=i.Ns1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this}}MeshBasicMaterial.prototype.isMeshBasicMaterial=!0},6520:function(e,t,n){"use strict";n.d(t,{l:function(){return MeshDepthMaterial}});var r=n(4328),i=n(2513);class MeshDepthMaterial extends r.F{constructor(e){super(),this.type="MeshDepthMaterial",this.depthPacking=i.z81,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}MeshDepthMaterial.prototype.isMeshDepthMaterial=!0},3420:function(e,t,n){"use strict";n.d(t,{L:function(){return MeshDistanceMaterial}});var r=n(4328),i=n(7306);class MeshDistanceMaterial extends r.F{constructor(e){super(),this.type="MeshDistanceMaterial",this.referencePosition=new i.P,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0},7259:function(e,t,n){"use strict";n.d(t,{j:function(){return ShaderMaterial}});var r=n(4328),i=n(2585),o=n(5108);class ShaderMaterial extends r.F{constructor(e){super(),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n",this.fragmentShader="\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&(void 0!==e.attributes&&o.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=(0,i.dw)(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}ShaderMaterial.prototype.isShaderMaterial=!0},5395:function(e,t,n){"use strict";n.d(t,{Z:function(){return Box3}});var r=n(7306);class Box3{constructor(e=new r.P(1/0,1/0,1/0),t=new r.P(-1/0,-1/0,-1/0)){this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.length;s<c;s+=3){const c=e[s],l=e[s+1],u=e[s+2];c<t&&(t=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0;for(let s=0,c=e.count;s<c;s++){const c=e.getX(s),l=e.getY(s),u=e.getZ(s);c<t&&(t=c),l<n&&(n=l),u<r&&(r=u),c>i&&(i=c),l>o&&(o=l),u>a&&(a=u)}return this.min.set(t,n,r),this.max.set(i,o,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=o.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),a.copy(t.boundingBox),a.applyMatrix4(e.matrixWorld),this.union(a));const n=e.children;for(let e=0,t=n.length;e<t;e++)this.expandByObject(n[e]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,o),o.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(f),p.subVectors(this.max,f),s.subVectors(e.a,f),c.subVectors(e.b,f),l.subVectors(e.c,f),u.subVectors(c,s),h.subVectors(l,c),d.subVectors(s,l);let t=[0,-u.z,u.y,0,-h.z,h.y,0,-d.z,d.y,u.z,0,-u.x,h.z,0,-h.x,d.z,0,-d.x,-u.y,u.x,0,-h.y,h.x,0,-d.y,d.x,0];return!!v(t,s,c,l,p)&&(t=[1,0,0,0,1,0,0,0,1],!!v(t,s,c,l,p)&&(m.crossVectors(u,h),t=[m.x,m.y,m.z],v(t,s,c,l,p)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return o.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=.5*this.getSize(o).length(),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(i)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}Box3.prototype.isBox3=!0;const i=[new r.P,new r.P,new r.P,new r.P,new r.P,new r.P,new r.P,new r.P],o=new r.P,a=new Box3,s=new r.P,c=new r.P,l=new r.P,u=new r.P,h=new r.P,d=new r.P,f=new r.P,p=new r.P,m=new r.P,g=new r.P;function v(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){g.fromArray(e,o);const a=i.x*Math.abs(g.x)+i.y*Math.abs(g.y)+i.z*Math.abs(g.z),s=t.dot(g),c=n.dot(g),l=r.dot(g);if(Math.max(-Math.max(s,c,l),Math.min(s,c,l))>a)return!1}return!0}},9706:function(e,t,n){"use strict";n.d(t,{I:function(){return Color}});var r=n(4682),i=n(5108);const o={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},a={h:0,s:0,l:0},s={h:0,s:0,l:0};function c(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}function l(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function u(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class Color{constructor(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set_any(e,t,n){let r=Color.parse(e,t,n);return this.setRGB(r[0],r[1],r[2]),this}static wrap(e,t,n){return e instanceof Color?e:new Color(...this.parse(e,t,n))}static parse(e,t,n){let r=[0,0,0],i=e;if(e instanceof Color)return[e.r,e.g,e.b];if("number"==typeof e&&"number"==typeof t&&"number"==typeof n)r=[e,t,n];else if("number"==typeof e&&void 0===t){r=[(i>>16&255)/255,(i>>8&255)/255,(255&i)/255]}else if("string"==typeof e&&void 0===t){i=parseInt(i.replace("#",""),16),r=[(i>>16&255)/255,(i>>8&255)/255,(255&i)/255]}else Array.isArray(e)&&void 0===t?r=[i[0]||0,i[1]||0,i[2]||0]:"object"!=typeof e||Array.isArray(e)||void 0!==t||(r=[i.r||0,i.g||0,i.b||0]);return r}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this}setRGB(e,t,n){return this.r=e,this.g=t,this.b=n,this}setHSL(e,t,n){if(e=r.euclideanModulo(e,1),t=r.clamp(t,0,1),n=r.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=c(i,r,e+1/3),this.g=c(i,r,e),this.b=c(i,r,e-1/3)}return this}setStyle(e){function t(t){void 0!==t&&parseFloat(t)<1&&i.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let e;const r=n[1],i=n[2];switch(r){case"rgb":case"rgba":if(e=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(255,parseInt(e[1],10))/255,this.g=Math.min(255,parseInt(e[2],10))/255,this.b=Math.min(255,parseInt(e[3],10))/255,t(e[4]),this;if(e=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i))return this.r=Math.min(100,parseInt(e[1],10))/100,this.g=Math.min(100,parseInt(e[2],10))/100,this.b=Math.min(100,parseInt(e[3],10))/100,t(e[4]),this;break;case"hsl":case"hsla":if(e=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(i)){const n=parseFloat(e[1])/360,r=parseInt(e[2],10)/100,i=parseInt(e[3],10)/100;return t(e[4]),this.setHSL(n,r,i)}}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const e=n[1],t=e.length;if(3===t)return this.r=parseInt(e.charAt(0)+e.charAt(0),16)/255,this.g=parseInt(e.charAt(1)+e.charAt(1),16)/255,this.b=parseInt(e.charAt(2)+e.charAt(2),16)/255,this;if(6===t)return this.r=parseInt(e.charAt(0)+e.charAt(1),16)/255,this.g=parseInt(e.charAt(2)+e.charAt(3),16)/255,this.b=parseInt(e.charAt(4)+e.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=o[e.toLowerCase()];return void 0!==t?this.setHex(t):i.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=l(e.r),this.g=l(e.g),this.b=l(e.b),this}copyLinearToSRGB(e){return this.r=u(e.r),this.g=u(e.g),this.b=u(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){const t=this.r,n=this.g,r=this.b,i=Math.max(t,n,r),o=Math.min(t,n,r);let a,s;const c=(o+i)/2;if(o===i)a=0,s=0;else{const e=i-o;switch(s=c<=.5?e/(i+o):e/(2-i-o),i){case t:a=(n-r)/e+(n<r?6:0);break;case n:a=(r-t)/e+2;break;case r:a=(t-n)/e+4}a/=6}return e.h=a,e.s=s,e.l=c,e}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(e,t,n){return this.getHSL(a),a.h+=e,a.s+=t,a.l+=n,this.setHSL(a.h,a.s,a.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(a),e.getHSL(s);const n=r.lerp(a.h,s.h,t),i=r.lerp(a.s,s.s,t),o=r.lerp(a.l,s.l,t);return this.setHSL(n,i,o),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),!0===e.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}Color.NAMES=o,Color.prototype.isColor=!0,Color.prototype.r=1,Color.prototype.g=1,Color.prototype.b=1},3601:function(e,t,n){"use strict";n.d(t,{U:function(){return Euler}});var r=n(9502),i=n(7306),o=n(5154),a=n(4682),s=n(5108);const c=new o.y,l=new r._;class Euler{constructor(e=0,t=0,n=0,r=Euler.DefaultOrder){this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],o=r[4],c=r[8],l=r[1],u=r[5],h=r[9],d=r[2],f=r[6],p=r[10];switch(t){case"XYZ":this._y=Math.asin((0,a.clamp)(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,a.clamp)(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,i),this._z=0);break;case"ZXY":this._x=Math.asin((0,a.clamp)(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,i));break;case"ZYX":this._y=Math.asin(-(0,a.clamp)(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,i)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin((0,a.clamp)(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,i)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-(0,a.clamp)(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(c,i)):(this._x=Math.atan2(-h,p),this._y=0);break;default:s.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return c.makeRotationFromQuaternion(e),this.setFromRotationMatrix(c,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return l.setFromEuler(this),this.setFromQuaternion(l,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new i.P(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Euler.prototype.isEuler=!0,Euler.DefaultOrder="XYZ",Euler.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"]},9226:function(e,t,n){"use strict";n.d(t,{i:function(){return Frustum}});var r=n(7306),i=n(6035),o=n(3990);const a=new i.a,s=new r.P;class Frustum{constructor(e=new o.J,t=new o.J,n=new o.J,r=new o.J,i=new o.J,a=new o.J){this.planes=[e,t,n,r,i,a]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],_=n[15];return t[0].setComponents(a-r,u-s,p-h,_-m).normalize(),t[1].setComponents(a+r,u+s,p+h,_+m).normalize(),t[2].setComponents(a+i,u+c,p+d,_+g).normalize(),t[3].setComponents(a-i,u-c,p-d,_-g).normalize(),t[4].setComponents(a-o,u-l,p-f,_-v).normalize(),t[5].setComponents(a+o,u+l,p+f,_+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),a.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(a)}intersectsSprite(e){return a.center.set(0,0,0),a.radius=.7071067811865476,a.applyMatrix4(e.matrixWorld),this.intersectsSphere(a)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(s.x=r.normal.x>0?e.max.x:e.min.x,s.y=r.normal.y>0?e.max.y:e.min.y,s.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(s)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}},4682:function(e,t,n){"use strict";n.r(t),n.d(t,{DEG2RAD:function(){return o},RAD2DEG:function(){return a},ceilPowerOfTwo:function(){return E},clamp:function(){return u},damp:function(){return m},degToRad:function(){return A},euclideanModulo:function(){return h},floorPowerOfTwo:function(){return S},generateUUID:function(){return l},inverseLerp:function(){return f},isPowerOfTwo:function(){return M},lerp:function(){return p},mapLinear:function(){return d},pingpong:function(){return g},radToDeg:function(){return T},randFloat:function(){return b},randFloatSpread:function(){return x},randInt:function(){return y},seededRandom:function(){return w},setQuaternionFromProperEuler:function(){return R},smootherstep:function(){return _},smoothstep:function(){return v}});var r=n(5108);let i=1234567;const o=Math.PI/180,a=180/Math.PI,s=[];for(let e=0;e<256;e++)s[e]=(e<16?"0":"")+e.toString(16);const c="undefined"!=typeof crypto&&"randomUUID"in crypto;function l(){if(c)return crypto.randomUUID().toUpperCase();const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(s[255&e]+s[e>>8&255]+s[e>>16&255]+s[e>>24&255]+"-"+s[255&t]+s[t>>8&255]+"-"+s[t>>16&15|64]+s[t>>24&255]+"-"+s[63&n|128]+s[n>>8&255]+"-"+s[n>>16&255]+s[n>>24&255]+s[255&r]+s[r>>8&255]+s[r>>16&255]+s[r>>24&255]).toUpperCase()}function u(e,t,n){return Math.max(t,Math.min(n,e))}function h(e,t){return(e%t+t)%t}function d(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)}function f(e,t,n){return e!==t?(n-e)/(t-e):0}function p(e,t,n){return(1-n)*e+n*t}function m(e,t,n,r){return p(e,t,1-Math.exp(-n*r))}function g(e,t=1){return t-Math.abs(h(e,2*t)-t)}function v(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)}function _(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)}function y(e,t){return e+Math.floor(Math.random()*(t-e+1))}function b(e,t){return e+Math.random()*(t-e)}function x(e){return e*(.5-Math.random())}function w(e){return void 0!==e&&(i=e%2147483647),i=16807*i%2147483647,(i-1)/2147483646}function A(e){return e*o}function T(e){return e*a}function M(e){return 0==(e&e-1)&&0!==e}function E(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function S(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function R(e,t,n,i,o){const a=Math.cos,s=Math.sin,c=a(n/2),l=s(n/2),u=a((t+i)/2),h=s((t+i)/2),d=a((t-i)/2),f=s((t-i)/2),p=a((i-t)/2),m=s((i-t)/2);switch(o){case"XYX":e.set(c*h,l*d,l*f,c*u);break;case"YZY":e.set(l*f,c*h,l*d,c*u);break;case"ZXZ":e.set(l*d,l*f,c*h,c*u);break;case"XZX":e.set(c*h,l*m,l*p,c*u);break;case"YXY":e.set(l*p,c*h,l*m,c*u);break;case"ZYZ":e.set(l*m,l*p,c*h,c*u);break;default:r.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}},5184:function(e,t,n){"use strict";n.d(t,{V:function(){return Matrix3}});var r=n(5108);class Matrix3{constructor(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&r.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,c){const l=this.elements;return l[0]=e,l[1]=r,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],_=r[4],y=r[7],b=r[2],x=r[5],w=r[8];return i[0]=o*p+a*v+s*b,i[3]=o*m+a*_+s*x,i[6]=o*g+a*y+s*w,i[1]=c*p+l*v+u*b,i[4]=c*m+l*_+u*x,i[7]=c*g+l*y+u*w,i[2]=h*p+d*v+f*b,i[5]=h*m+d*_+f*x,i[8]=h*g+d*y+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-n*i*l+n*a*s+r*i*c-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=l*o-a*c,h=a*s-l*i,d=c*i-o*s,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*c-l*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(l*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-c*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),c=Math.sin(i);return this.set(n*s,n*c,-n*(s*o+c*a)+o+e,-r*c,r*s,-r*(-c*o+s*a)+a+t,0,0,1),this}scale(e,t){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],c=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*o+n*c,r[6]=t*a+n*l,r[1]=-n*i+t*s,r[4]=-n*o+t*c,r[7]=-n*a+t*l,this}translate(e,t){const n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}Matrix3.prototype.isMatrix3=!0},5154:function(e,t,n){"use strict";n.d(t,{y:function(){return Matrix4}});var r=n(7306),i=n(5108);class Matrix4{constructor(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&i.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,n,r,i,o,a,s,c,l,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/o.setFromMatrixColumn(e,0).length(),i=1/o.setFromMatrixColumn(e,1).length(),a=1/o.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||i.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,n=e.x,r=e.y,o=e.z,a=Math.cos(n),s=Math.sin(n),c=Math.cos(r),l=Math.sin(r),u=Math.cos(o),h=Math.sin(o);if("XYZ"===e.order){const e=a*u,n=a*h,r=s*u,i=s*h;t[0]=c*u,t[4]=-c*h,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*c,t[2]=i-e*l,t[6]=r+n*l,t[10]=a*c}else if("YXZ"===e.order){const e=c*u,n=c*h,r=l*u,i=l*h;t[0]=e+i*s,t[4]=r*s-n,t[8]=a*l,t[1]=a*h,t[5]=a*u,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=a*c}else if("ZXY"===e.order){const e=c*u,n=c*h,r=l*u,i=l*h;t[0]=e-i*s,t[4]=-a*h,t[8]=r+n*s,t[1]=n+r*s,t[5]=a*u,t[9]=i-e*s,t[2]=-a*l,t[6]=s,t[10]=a*c}else if("ZYX"===e.order){const e=a*u,n=a*h,r=s*u,i=s*h;t[0]=c*u,t[4]=r*l-n,t[8]=e*l+i,t[1]=c*h,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*c,t[10]=a*c}else if("YZX"===e.order){const e=a*c,n=a*l,r=s*c,i=s*l;t[0]=c*u,t[4]=i-e*h,t[8]=r*h+n,t[1]=h,t[5]=a*u,t[9]=-s*u,t[2]=-l*u,t[6]=n*h+r,t[10]=e-i*h}else if("XZY"===e.order){const e=a*c,n=a*l,r=s*c,i=s*l;t[0]=c*u,t[4]=-h,t[8]=l*u,t[1]=e*h+i,t[5]=a*u,t[9]=n*h-r,t[2]=r*h-n,t[6]=s*u,t[10]=i*h+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(s,e,c)}lookAt(e,t,n){const r=this.elements;return h.subVectors(e,t),0===h.lengthSq()&&(h.z=1),h.normalize(),l.crossVectors(n,h),0===l.lengthSq()&&(1===Math.abs(n.z)?h.x+=1e-4:h.z+=1e-4,h.normalize(),l.crossVectors(n,h)),l.normalize(),u.crossVectors(h,l),r[0]=l.x,r[4]=u.x,r[8]=h.x,r[1]=l.y,r[5]=u.y,r[9]=h.y,r[2]=l.z,r[6]=u.z,r[10]=h.z,this}multiply(e,t){return void 0!==t?(i.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],_=n[7],y=n[11],b=n[15],x=r[0],w=r[4],A=r[8],T=r[12],M=r[1],E=r[5],S=r[9],R=r[13],L=r[2],P=r[6],C=r[10],F=r[14],D=r[3],U=r[7],O=r[11],k=r[15];return i[0]=o*x+a*M+s*L+c*D,i[4]=o*w+a*E+s*P+c*U,i[8]=o*A+a*S+s*C+c*O,i[12]=o*T+a*R+s*F+c*k,i[1]=l*x+u*M+h*L+d*D,i[5]=l*w+u*E+h*P+d*U,i[9]=l*A+u*S+h*C+d*O,i[13]=l*T+u*R+h*F+d*k,i[2]=f*x+p*M+m*L+g*D,i[6]=f*w+p*E+m*P+g*U,i[10]=f*A+p*S+m*C+g*O,i[14]=f*T+p*R+m*F+g*k,i[3]=v*x+_*M+y*L+b*D,i[7]=v*w+_*E+y*P+b*U,i[11]=v*A+_*S+y*C+b*O,i[15]=v*T+_*R+y*F+b*k,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*c*u-i*a*h+n*c*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*c*h+i*o*h-r*o*d+r*c*l-i*s*l)+e[11]*(+t*c*u-t*a*d-i*o*u+n*o*d+i*a*l-n*c*l)+e[15]*(-r*a*l-t*s*u+t*a*h+r*o*u-n*o*h+n*s*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*c-p*h*c+p*s*d-a*m*d-u*s*g+a*h*g,_=f*h*c-l*m*c-f*s*d+o*m*d+l*s*g-o*h*g,y=l*p*c-f*u*c+f*a*d-o*p*d-l*a*g+o*u*g,b=f*u*s-l*p*s-f*a*h+o*p*h+l*a*m-o*u*m,x=t*v+n*_+r*y+i*b;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(a*m*i-p*s*i+p*r*c-n*m*c-a*r*g+n*s*g)*w,e[3]=(u*s*i-a*h*i-u*r*c+n*h*c+a*r*d-n*s*d)*w,e[4]=_*w,e[5]=(l*m*i-f*h*i+f*r*d-t*m*d-l*r*g+t*h*g)*w,e[6]=(f*s*i-o*m*i-f*r*c+t*m*c+o*r*g-t*s*g)*w,e[7]=(o*h*i-l*s*i+l*r*c-t*h*c-o*r*d+t*s*d)*w,e[8]=y*w,e[9]=(f*u*i-l*p*i-f*n*d+t*p*d+l*n*g-t*u*g)*w,e[10]=(o*p*i-f*a*i+f*n*c-t*p*c-o*n*g+t*a*g)*w,e[11]=(l*a*i-o*u*i-l*n*c+t*u*c+o*n*d-t*a*d)*w,e[12]=b*w,e[13]=(l*p*r-f*u*r+f*n*h-t*p*h-l*n*m+t*u*m)*w,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*w,e[15]=(o*u*r-l*a*r+l*n*s-t*u*s-o*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,c=i*o,l=i*a;return this.set(c*o+n,c*a-r*s,c*s+r*a,0,c*a+r*s,l*a+n,l*s-r*o,0,c*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,l=o+o,u=a+a,h=i*c,d=i*l,f=i*u,p=o*l,m=o*u,g=a*u,v=s*c,_=s*l,y=s*u,b=n.x,x=n.y,w=n.z;return r[0]=(1-(p+g))*b,r[1]=(d+y)*b,r[2]=(f-_)*b,r[3]=0,r[4]=(d-y)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+_)*w,r[9]=(m-v)*w,r[10]=(1-(h+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=o.set(r[0],r[1],r[2]).length();const s=o.set(r[4],r[5],r[6]).length(),c=o.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],a.copy(this);const l=1/i,u=1/s,h=1/c;return a.elements[0]*=l,a.elements[1]*=l,a.elements[2]*=l,a.elements[4]*=u,a.elements[5]*=u,a.elements[6]*=u,a.elements[8]*=h,a.elements[9]*=h,a.elements[10]*=h,t.setFromRotationMatrix(a),n.x=i,n.y=s,n.z=c,this}makePerspective(e,t,n,r,o,a){void 0===a&&i.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const s=this.elements,c=2*o/(t-e),l=2*o/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r),d=-(a+o)/(a-o),f=-2*a*o/(a-o);return s[0]=c,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=l,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,o){const a=this.elements,s=1/(t-e),c=1/(n-r),l=1/(o-i),u=(t+e)*s,h=(n+r)*c,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}Matrix4.prototype.isMatrix4=!0;const o=new r.P,a=new Matrix4,s=new r.P(0,0,0),c=new r.P(1,1,1),l=new r.P,u=new r.P,h=new r.P},3990:function(e,t,n){"use strict";n.d(t,{J:function(){return Plane}});var r=n(5184),i=n(7306);const o=new i.P,a=new i.P,s=new r.V;class Plane{constructor(e=new i.P(1,0,0),t=0){this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=o.subVectors(n,t).cross(a.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const n=e.delta(o),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(n).multiplyScalar(i).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||s.getNormalMatrix(e),r=this.coplanarPoint(o).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}Plane.prototype.isPlane=!0},9502:function(e,t,n){"use strict";n.d(t,{_:function(){return Quaternion}});var r=n(4682),i=n(5108);class Quaternion{constructor(e=0,t=0,n=0,r=1){this._x=e,this._y=t,this._z=n,this._w=r}static slerp(e,t,n,r){return i.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(e,t,r)}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=c,e[t+2]=l,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==h||c!==d||l!==f){let e=1-a;const t=s*h+c*d+l*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,c=c*e+d*i,l=l*e+f*i,u=u*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=e,c*=e,l*=e,u*=e}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],c=n[r+2],l=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+l*u+s*d-c*h,e[t+1]=s*f+l*h+c*u-a*d,e[t+2]=c*f+l*d+a*h-s*u,e[t+3]=l*f-a*u-s*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=e._x,r=e._y,o=e._z,a=e._order,s=Math.cos,c=Math.sin,l=s(n/2),u=s(r/2),h=s(o/2),d=c(n/2),f=c(r/2),p=c(o/2);switch(a){case"XYZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"YXZ":this._x=d*u*h+l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"ZXY":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h-d*f*p;break;case"ZYX":this._x=d*u*h-l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h+d*f*p;break;case"YZX":this._x=d*u*h+l*f*p,this._y=l*f*h+d*u*p,this._z=l*u*p-d*f*h,this._w=l*u*h-d*f*p;break;case"XZY":this._x=d*u*h-l*f*p,this._y=l*f*h-d*u*p,this._z=l*u*p+d*f*h,this._w=l*u*h+d*f*p;break;default:i.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],c=t[2],l=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-s)*e,this._y=(i-c)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(l-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+c)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-c)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+l)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+c)/e,this._y=(s+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(r.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return void 0!==t?(i.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+o*a+r*c-i*s,this._y=r*l+o*s+i*a-n*c,this._z=i*l+o*c+n*s-r*a,this._w=o*l-n*a-r*s-i*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(s),l=Math.atan2(c,a),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),i=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(i),n*Math.cos(i),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}}Quaternion.prototype.isQuaternion=!0},5170:function(e,t,n){"use strict";n.d(t,{z:function(){return Ray}});var r=n(7306);const i=new r.P,o=new r.P,a=new r.P,s=new r.P,c=new r.P,l=new r.P,u=new r.P;class Ray{constructor(e=new r.P,t=new r.P(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,i)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=i.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(i.copy(this.direction).multiplyScalar(t).add(this.origin),i.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){o.copy(e).add(t).multiplyScalar(.5),a.copy(t).sub(e).normalize(),s.copy(this.origin).sub(o);const i=.5*e.distanceTo(t),c=-this.direction.dot(a),l=s.dot(this.direction),u=-s.dot(a),h=s.lengthSq(),d=Math.abs(1-c*c);let f,p,m,g;if(d>0)if(f=c*u-l,p=c*l-u,g=i*d,f>=0)if(p>=-g)if(p<=g){const e=1/d;f*=e,p*=e,m=f*(f+c*p+2*l)+p*(c*f+p+2*u)+h}else p=i,f=Math.max(0,-(c*p+l)),m=-f*f+p*(p+2*u)+h;else p=-i,f=Math.max(0,-(c*p+l)),m=-f*f+p*(p+2*u)+h;else p<=-g?(f=Math.max(0,-(-c*i+l)),p=f>0?-i:Math.min(Math.max(-i,-u),i),m=-f*f+p*(p+2*u)+h):p<=g?(f=0,p=Math.min(Math.max(-i,-u),i),m=p*(p+2*u)+h):(f=Math.max(0,-(c*i+l)),p=f>0?i:Math.min(Math.max(-i,-u),i),m=-f*f+p*(p+2*u)+h);else p=c>0?-i:i,f=Math.max(0,-(c*p+l)),m=-f*f+p*(p+2*u)+h;return n&&n.copy(this.direction).multiplyScalar(f).add(this.origin),r&&r.copy(a).multiplyScalar(p).add(o),m}intersectSphere(e,t){i.subVectors(e.center,this.origin);const n=i.dot(this.direction),r=i.dot(i)-n*n,o=e.radius*e.radius;if(r>o)return null;const a=Math.sqrt(o-r),s=n-a,c=n+a;return s<0&&c<0?null:s<0?this.at(c,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,i)}intersectTriangle(e,t,n,r,i){c.subVectors(t,e),l.subVectors(n,e),u.crossVectors(c,l);let o,a=this.direction.dot(u);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}s.subVectors(this.origin,e);const h=o*this.direction.dot(l.crossVectors(s,l));if(h<0)return null;const d=o*this.direction.dot(c.cross(s));if(d<0)return null;if(h+d>a)return null;const f=-o*s.dot(u);return f<0?null:this.at(f/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}},6035:function(e,t,n){"use strict";n.d(t,{a:function(){return Sphere}});var r=n(5395),i=n(7306);const o=new r.Z,a=new i.P,s=new i.P,c=new i.P;class Sphere{constructor(e=new i.P,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):o.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){c.subVectors(e,this.center);const t=c.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.add(c.multiplyScalar(n/e)),this.radius+=n}return this}union(e){return s.subVectors(e.center,this.center).normalize().multiplyScalar(e.radius),this.expandByPoint(a.copy(e.center).add(s)),this.expandByPoint(a.copy(e.center).sub(s)),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}},600:function(e,t,n){"use strict";n.d(t,{C:function(){return Triangle}});var r=n(7306);const i=new r.P,o=new r.P,a=new r.P,s=new r.P,c=new r.P,l=new r.P,u=new r.P,h=new r.P,d=new r.P,f=new r.P;class Triangle{constructor(e=new r.P,t=new r.P,n=new r.P){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),i.subVectors(e,t),r.cross(i);const o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){i.subVectors(r,t),o.subVectors(n,t),a.subVectors(e,t);const c=i.dot(i),l=i.dot(o),u=i.dot(a),h=o.dot(o),d=o.dot(a),f=c*h-l*l;if(0===f)return s.set(-2,-1,-1);const p=1/f,m=(h*u-l*d)*p,g=(c*d-l*u)*p;return s.set(1-m-g,g,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,s),s.x>=0&&s.y>=0&&s.x+s.y<=1}static getUV(e,t,n,r,i,o,a,c){return this.getBarycoord(e,t,n,r,s),c.set(0,0),c.addScaledVector(i,s.x),c.addScaledVector(o,s.y),c.addScaledVector(a,s.z),c}static isFrontFacing(e,t,n,r){return i.subVectors(n,t),o.subVectors(e,t),i.cross(o).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return i.subVectors(this.c,this.b),o.subVectors(this.a,this.b),.5*i.cross(o).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Triangle.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Triangle.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,i){return Triangle.getUV(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Triangle.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Triangle.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;c.subVectors(r,n),l.subVectors(i,n),h.subVectors(e,n);const s=c.dot(h),p=l.dot(h);if(s<=0&&p<=0)return t.copy(n);d.subVectors(e,r);const m=c.dot(d),g=l.dot(d);if(m>=0&&g<=m)return t.copy(r);const v=s*g-m*p;if(v<=0&&s>=0&&m<=0)return o=s/(s-m),t.copy(n).addScaledVector(c,o);f.subVectors(e,i);const _=c.dot(f),y=l.dot(f);if(y>=0&&_<=y)return t.copy(i);const b=_*p-s*y;if(b<=0&&p>=0&&y<=0)return a=p/(p-y),t.copy(n).addScaledVector(l,a);const x=m*y-_*g;if(x<=0&&g-m>=0&&_-y>=0)return u.subVectors(i,r),a=(g-m)/(g-m+(_-y)),t.copy(r).addScaledVector(u,a);const w=1/(x+b+v);return o=b*w,a=v*w,t.copy(n).addScaledVector(c,o).addScaledVector(l,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}},6522:function(e,t,n){"use strict";n.d(t,{F:function(){return Vector2}});var r=n(5108);class Vector2{constructor(e=0,t=0){this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return void 0!==t?(r.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return void 0!==t?(r.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,n){return void 0!==n&&r.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}Vector2.prototype.isVector2=!0},7306:function(e,t,n){"use strict";n.d(t,{P:function(){return Vector3}});var r=n(4682),i=n(9502),o=n(5108);class Vector3{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return void 0!==t?(o.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return void 0!==t?(o.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return void 0!==t?(o.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||o.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(s.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(s.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*r-a*n,l=s*n+a*t-i*r,u=s*r+i*n-o*t,h=-i*t-o*n-a*r;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e,t){return void 0!==t?(o.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return a.copy(this).projectOnVector(e),this.sub(a)}reflect(e){return this.sub(a.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(r.clamp(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,n){return void 0!==n&&o.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}Vector3.prototype.isVector3=!0;const a=new Vector3,s=new i._},6969:function(e,t,n){"use strict";n.d(t,{L:function(){return Vector4}});var r=n(5108);class Vector4{constructor(e=0,t=0,n=0,r=1){this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e,t){return void 0!==t?(r.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return void 0!==t?(r.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,c=s[0],l=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(l-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(l+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(c+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,s=(d+1)/2,v=(g+1)/2,_=(l+h)/4,y=(u+p)/4,b=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=_/n,i=y/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=_/r,i=b/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=y/i,r=b/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-l)*(h-l));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-l)/v,this.w=Math.acos((c+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,n){return void 0!==n&&r.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}Vector4.prototype.isVector4=!0},5444:function(e,t,n){"use strict";n.d(t,{K:function(){return Mesh}});var r=n(7306),i=n(6522),o=n(6035),a=n(5170),s=n(5154),c=n(616),l=n(600),u=n(2513),h=n(6095),d=n(6487),f=n(5108);const p=new s.y,m=new a.z,g=new o.a,v=new r.P,_=new r.P,y=new r.P,b=new r.P,x=new r.P,w=new r.P,A=new r.P,T=new r.P,M=new r.P,E=new i.F,S=new i.F,R=new i.F,L=new r.P,P=new r.P;class Mesh extends c.T{constructor(e=new d.u,t=new h.v){super(),this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e){return super.copy(e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry;if(e.isBufferGeometry){const t=e.morphAttributes,n=Object.keys(t);if(n.length>0){const e=t[n[0]];if(void 0!==e){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,n=e.length;t<n;t++){const n=e[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}}}else{const t=e.morphTargets;void 0!==t&&t.length>0&&f.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0===r)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),g.copy(n.boundingSphere),g.applyMatrix4(i),!1===e.ray.intersectsSphere(g))return;if(p.copy(i).invert(),m.copy(e.ray).applyMatrix4(p),null!==n.boundingBox&&!1===m.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const i=n.index,a=n.attributes.position,s=n.morphAttributes.position,c=n.morphTargetsRelative,l=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==i)if(Array.isArray(r))for(let n=0,f=h.length;n<f;n++){const f=h[n],p=r[f.materialIndex];for(let n=Math.max(f.start,d.start),r=Math.min(i.count,Math.min(f.start+f.count,d.start+d.count));n<r;n+=3){const r=i.getX(n),h=i.getX(n+1),d=i.getX(n+2);o=C(this,p,e,m,a,s,c,l,u,r,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=f.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),h=Math.min(i.count,d.start+d.count);n<h;n+=3){const h=i.getX(n),d=i.getX(n+1),f=i.getX(n+2);o=C(this,r,e,m,a,s,c,l,u,h,d,f),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}else if(void 0!==a)if(Array.isArray(r))for(let n=0,i=h.length;n<i;n++){const i=h[n],f=r[i.materialIndex];for(let n=Math.max(i.start,d.start),r=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));n<r;n+=3){o=C(this,f,e,m,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=i.materialIndex,t.push(o))}}else{for(let n=Math.max(0,d.start),i=Math.min(a.count,d.start+d.count);n<i;n+=3){o=C(this,r,e,m,a,s,c,l,u,n,n+1,n+2),o&&(o.faceIndex=Math.floor(n/3),t.push(o))}}}else n.isGeometry&&f.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}function C(e,t,n,o,a,s,c,h,d,f,p,m){v.fromBufferAttribute(a,f),_.fromBufferAttribute(a,p),y.fromBufferAttribute(a,m);const g=e.morphTargetInfluences;if(s&&g){A.set(0,0,0),T.set(0,0,0),M.set(0,0,0);for(let e=0,t=s.length;e<t;e++){const t=g[e],n=s[e];0!==t&&(b.fromBufferAttribute(n,f),x.fromBufferAttribute(n,p),w.fromBufferAttribute(n,m),c?(A.addScaledVector(b,t),T.addScaledVector(x,t),M.addScaledVector(w,t)):(A.addScaledVector(b.sub(v),t),T.addScaledVector(x.sub(_),t),M.addScaledVector(w.sub(y),t)))}v.add(A),_.add(T),y.add(M)}e.isSkinnedMesh&&(e.boneTransform(f,v),e.boneTransform(p,_),e.boneTransform(m,y));const C=function(e,t,n,r,i,o,a,s){let c;if(c=t.side===u._Li?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side!==u.ehD,s),null===c)return null;P.copy(s),P.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(P);return l<n.near||l>n.far?null:{distance:l,point:P.clone(),object:e}}(e,t,n,o,v,_,y,L);if(C){h&&(E.fromBufferAttribute(h,f),S.fromBufferAttribute(h,p),R.fromBufferAttribute(h,m),C.uv=l.C.getUV(L,v,_,y,E,S,R,new i.F)),d&&(E.fromBufferAttribute(d,f),S.fromBufferAttribute(d,p),R.fromBufferAttribute(d,m),C.uv2=l.C.getUV(L,v,_,y,E,S,R,new i.F));const e={a:f,b:p,c:m,normal:new r.P,materialIndex:0};l.C.getNormal(v,_,y,e.normal),C.face=e}return C}Mesh.prototype.isMesh=!0},6311:function(e,t,n){"use strict";n.d(t,{d:function(){return WebGLRenderTarget}});var r=n(4092),i=n(5437),o=n(2513),a=n(6969);class WebGLRenderTarget extends r.p{constructor(e,t,n={}){super(),this.width=e,this.height=t,this.depth=1,this.scissor=new a.L(0,0,e,t),this.scissorTest=!1,this.viewport=new a.L(0,0,e,t),this.texture=new i.x(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.image={width:e,height:t,depth:1},this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:o.wem,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setTexture(e){e.image={width:this.width,height:this.height,depth:this.depth},this.texture=e}setSize(e,t,n=1){this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.image={...this.texture.image},this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}WebGLRenderTarget.prototype.isWebGLRenderTarget=!0},160:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});const r={alphamap_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n",alphamap_pars_fragment:"\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",alphatest_fragment:"\n#ifdef USE_ALPHATEST\n\n\tif ( diffuseColor.a < alphaTest ) discard;\n\n#endif\n",alphatest_pars_fragment:"\n#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif\n",aomap_fragment:"\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\n\t#endif\n\n#endif\n",aomap_pars_fragment:"\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n",bsdfs:'\n\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t// float fresnel = pow( 1.0 - dotVH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX_SmithCorrelated Visibility\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( V * D );\n\n}\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat D_Charlie( float roughness, float dotNH ) {\n\n\tfloat alpha = pow2( roughness );\n\n\t// Estevez and Kulla 2017, "Production Friendly Microfacet Sheen BRDF"\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 ); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\n\t// Neubelt and Pettineo 2013, "Crafting a Next-gen Material Pipeline for The Order: 1886"\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n\n}\n\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenTint, const in float sheenRoughness ) {\n\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\n\treturn sheenTint * ( D * V );\n\n}\n\n#endif\n',bumpmap_pars_fragment:"\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n",clipping_planes_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n",clipping_planes_pars_fragment:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n",clipping_planes_pars_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n",clipping_planes_vertex:"\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n",color_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tdiffuseColor *= vColor;\n\n#elif defined( USE_COLOR )\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n",color_pars_fragment:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_pars_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvarying vec4 vColor;\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvarying vec3 vColor;\n\n#endif\n",color_vertex:"\n#if defined( USE_COLOR_ALPHA )\n\n\tvColor = vec4( 1.0 );\n\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\n\tvColor = vec3( 1.0 );\n\n#endif\n\n#ifdef USE_COLOR\n\n\tvColor *= color;\n\n#endif\n\n#ifdef USE_INSTANCING_COLOR\n\n\tvColor.xyz *= instanceColor.xyz;\n\n#endif\n",common:"\n#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\n\treturn fract( sin( sn ) * c );\n\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n\treturn m[ 2 ][ 3 ] == - 1.0;\n\n}\n\nvec2 equirectUv( in vec3 dir ) {\n\n\t// dir is assumed to be unit length\n\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\treturn vec2( u, v );\n\n}\n",cube_uv_reflection_fragment:"\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized ).\n\n\tfloat getFace( vec3 direction ) {\n\n\t\tvec3 absDirection = abs( direction );\n\n\t\tfloat face = - 1.0;\n\n\t\tif ( absDirection.x > absDirection.z ) {\n\n\t\t\tif ( absDirection.x > absDirection.y )\n\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t} else {\n\n\t\t\tif ( absDirection.z > absDirection.y )\n\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\n\t\t\telse\n\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\n\t\t}\n\n\t\treturn face;\n\n\t}\n\n\t// RH coordinate system; PMREM face-indexing convention\n\tvec2 getUV( vec3 direction, float face ) {\n\n\t\tvec2 uv;\n\n\t\tif ( face == 0.0 ) {\n\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x ); // pos x\n\n\t\t} else if ( face == 1.0 ) {\n\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y ); // pos y\n\n\t\t} else if ( face == 2.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z ); // pos z\n\n\t\t} else if ( face == 3.0 ) {\n\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x ); // neg x\n\n\t\t} else if ( face == 4.0 ) {\n\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y ); // neg y\n\n\t\t} else {\n\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z ); // neg z\n\n\t\t}\n\n\t\treturn 0.5 * ( uv + 1.0 );\n\n\t}\n\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\n\t\tfloat face = getFace( direction );\n\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\n\t\tfloat faceSize = exp2( mipInt );\n\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\n\t\tvec2 f = fract( uv );\n\n\t\tuv += 0.5 - f;\n\n\t\tif ( face > 2.0 ) {\n\n\t\t\tuv.y += faceSize;\n\n\t\t\tface -= 3.0;\n\n\t\t}\n\n\t\tuv.x += face * faceSize;\n\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\n\t\t}\n\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\n\t\tuv *= texelSize;\n\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x += texelSize;\n\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.y += texelSize;\n\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tuv.x -= texelSize;\n\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\n\t\tvec3 tm = mix( tl, tr, f.x );\n\n\t\tvec3 bm = mix( bl, br, f.x );\n\n\t\treturn mix( tm, bm, f.y );\n\n\t}\n\n\t// These defines must match with PMREMGenerator\n\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\n\tfloat roughnessToMip( float roughness ) {\n\n\t\tfloat mip = 0.0;\n\n\t\tif ( roughness >= r1 ) {\n\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\n\t\t} else if ( roughness >= r4 ) {\n\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\n\t\t} else if ( roughness >= r5 ) {\n\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\n\t\t} else if ( roughness >= r6 ) {\n\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\n\t\t} else {\n\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness ); // 1.16 = 1.79^0.25\n\t\t}\n\n\t\treturn mip;\n\n\t}\n\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\n\t\tfloat mipF = fract( mip );\n\n\t\tfloat mipInt = floor( mip );\n\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\n\t\tif ( mipF == 0.0 ) {\n\n\t\t\treturn vec4( color0, 1.0 );\n\n\t\t} else {\n\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\n\t\t}\n\n\t}\n\n#endif\n",defaultnormal_vertex:"\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n",displacementmap_pars_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n",displacementmap_vertex:"\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n",emissivemap_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n",emissivemap_pars_fragment:"\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n",encodings_fragment:"\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n\t// return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n",envmap_fragment:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n",envmap_common_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n",envmap_pars_fragment:"\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n",envmap_pars_vertex:"\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n",envmap_physical_pars_fragment:"\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 reflectVec;\n\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\n\t\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t\t#else\n\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\n\t\t\t#endif\n\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t\t#else\n\n\t\t\treturn vec3( 0.0 );\n\n\t\t#endif\n\n\t}\n\n#endif\n",envmap_vertex:"\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\n\n\tvFogDepth = - mvPosition.z;\n\n#endif\n",fog_pars_vertex:"\n#ifdef USE_FOG\n\n\tvarying float vFogDepth;\n\n#endif\n",fog_fragment:"\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n",fog_pars_fragment:"\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n",gradientmap_pars_fragment:"\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n",lightmap_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tlightMapIrradiance *= PI;\n\n\t#endif\n\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n\n#endif\n",lightmap_pars_fragment:"\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n",lights_lambert_vertex:"\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n#ifdef DOUBLE_SIDED\n\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n",lights_pars_begin:"\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\treturn irradiance;\n\n}\n\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t\t// page 32, equation 26: E[window1]\n\t\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\t\tif ( cutoffDistance > 0.0 ) {\n\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t\t}\n\n\t\treturn distanceFalloff;\n\n\t#else\n\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t\t}\n\n\t\treturn 1.0;\n\n\t#endif\n\n}\n\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// light is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\n\t\tlight.direction = normalize( lVector );\n\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\tif ( spotAttenuation > 0.0 ) {\n\n\t\t\tfloat lightDistance = length( lVector );\n\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\n\t\t} else {\n\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\n\t\t}\n\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n",lights_toon_fragment:"\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\n",lights_toon_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct ToonMaterial {\n\n\tvec3 diffuseColor;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_phong_fragment:"\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"\nvarying vec3 vViewPosition;\n\nstruct BlinnPhongMaterial {\n\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.roughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n\n#ifdef IOR\n\n\t#ifdef SPECULAR\n\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularTintFactor = specularTint;\n\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\n\t\t#endif\n\n\t\t#ifdef USE_SPECULARTINTMAP\n\n\t\t\tspecularTintFactor *= specularTintMapTexelToLinear( texture2D( specularTintMap, vUv ) ).rgb;\n\n\t\t#endif\n\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\n\t#else\n\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularTintFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\n\t#endif\n\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularTintFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n\n#endif\n\n#ifdef USE_CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenTint = sheenTint;\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\n#endif\n",lights_physical_pars_fragment:'\nstruct PhysicalMaterial {\n\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenTint;\n\t\tfloat sheenRoughness;\n\t#endif\n\n};\n\n// temporary\nvec3 clearcoatSpecular = vec3( 0.0 );\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via \'environmentBRDF\' from "Physically Based Shading on Mobile"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\n\treturn fab;\n\n}\n\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\treturn specularColor * fab.x + specularF90 * fab.y;\n\n}\n\n// Fdez-Agüera\'s "Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\n\t\treflectedLight.directSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenTint, material.sheenRoughness );\n\n\t#endif\n\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\n\t#endif\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n',lights_fragment_begin:"\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef USE_CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n",lights_fragment_maps:"\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI;\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\n\t#endif\n\n#endif\n",lights_fragment_end:"\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n",logdepthbuf_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n",logdepthbuf_pars_fragment:"\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n",logdepthbuf_pars_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n",logdepthbuf_vertex:"\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n",map_fragment:"\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n",map_pars_fragment:"\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n",map_particle_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n",map_particle_pars_fragment:"\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n",metalnessmap_fragment:"\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n",metalnessmap_pars_fragment:"\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n",morphnormal_vertex:"\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1, 2 ) * morphTargetInfluences[ i ];\n\n\t\t}\n\n\t#else\n\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n\t#endif\n\n#endif\n",morphtarget_pars_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\n\t\tvec3 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset, const in int stride ) {\n\n\t\t\tfloat texelIndex = float( vertexIndex * stride + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV ).xyz;\n\n\t\t}\n\n\t#else\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\n\t\t#else\n\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",morphtarget_vertex:"\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\n\t#ifdef MORPHTARGETS_TEXTURE\n\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\n\t\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 1 ) * morphTargetInfluences[ i ];\n\n\t\t\t#else\n\n\t\t\t\tif ( morphTargetInfluences[ i ] > 0.0 ) transformed += getMorph( gl_VertexID, i, 0, 2 ) * morphTargetInfluences[ i ];\n\n\t\t\t#endif\n\n\t\t}\n\n\t#else\n\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t\t#ifndef USE_MORPHNORMALS\n\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t\t#endif\n\n\t#endif\n\n#endif\n",normal_fragment_begin:"\nfloat faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno GPUs not able to do dFdx( vViewPosition )\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n",normal_fragment_maps:"\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * faceDirection;\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n\n#endif\n",normal_pars_fragment:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_pars_vertex:"\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n",normal_vertex:"\n#ifndef FLAT_SHADED // normal is computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n",normalmap_pars_fragment:"\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Normal Mapping Without Precomputed Tangents\n\t// http://www.thetenthplanet.de/archives/1180\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 N = surf_norm; // normalized\n\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\n\t}\n\n#endif\n",clearcoat_normal_fragment_begin:"\n#ifdef USE_CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n",clearcoat_normal_fragment_maps:"\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\n\t#endif\n\n#endif\n",clearcoat_pars_fragment:"\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n",output_fragment:"\n#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n\n// https://github.com/mrdoob/three.js/pull/22425\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\n\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\n",packing:"\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\n\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\n// NOTE: https://twitter.com/gonnavis/status/1377183786949959682\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n",project_vertex:"\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n",dithering_pars_fragment:"\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n",roughnessmap_fragment:"\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n",roughnessmap_pars_fragment:"\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n",shadowmap_pars_fragment:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n",shadowmap_pars_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n",shadowmap_vertex:"\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\t// Offsetting the position used for querying occlusion along the world normal can be used to reduce shadow acne.\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\n\t#endif\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n",shadowmask_pars_fragment:"\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n",skinbase_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n",skinning_pars_vertex:"\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n",skinning_vertex:"\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n",skinnormal_vertex:"\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n",specularmap_fragment:"\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n",specularmap_pars_fragment:"\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n",tonemapping_fragment:"\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n",tonemapping_pars_fragment:"\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://github.com/selfshadow/ltc_code/blob/master/webgl/shaders/ltc/ltc_blit.fs\nvec3 RRTAndODTFit( vec3 v ) {\n\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n\n}\n\n// this implementation of ACES is modified to accommodate a brighter viewing environment.\n// the scale factor of 1/0.6 is subjective. see discussion in #19621.\n\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\t// sRGB => XYZ => D65_2_D60 => AP1 => RRT_SAT\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ), // transposed from source\n\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\n\t// ODT_SAT => XYZ => D60_2_D65 => sRGB\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ), // transposed from source\n\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\n\tcolor *= toneMappingExposure / 0.6;\n\n\tcolor = ACESInputMat * color;\n\n\t// Apply RRT and ODT\n\tcolor = RRTAndODTFit( color );\n\n\tcolor = ACESOutputMat * color;\n\n\t// Clamp to [0, 1]\n\treturn saturate( color );\n\n}\n\nvec3 CustomToneMapping( vec3 color ) { return color; }\n",transmission_fragment:"\n#ifdef USE_TRANSMISSION\n\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\n\t#endif\n\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationTint, attenuationDistance );\n\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif\n",transmission_pars_fragment:"\n#ifdef USE_TRANSMISSION\n\n\t// Transmission code is based on glTF-Sampler-Viewer\n\t// https://github.com/KhronosGroup/glTF-Sample-Viewer\n\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationTint;\n\n\t#ifdef USE_TRANSMISSIONMAP\n\n\t\tuniform sampler2D transmissionMap;\n\n\t#endif\n\n\t#ifdef USE_THICKNESSMAP\n\n\t\tuniform sampler2D thicknessMap;\n\n\t#endif\n\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\n\tvarying vec3 vWorldPosition;\n\n\tvec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\n\t\t// Direction of refracted light.\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\n\t\t// Compute rotation-independant scaling of the model matrix.\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\n\t\t// The thickness is specified in local space.\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\n\t}\n\n\tfloat applyIorToRoughness( float roughness, float ior ) {\n\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\n\t}\n\n\tvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior ) {\n\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\n\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#else\n\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\n\t\t#endif\n\n\t}\n\n\tvec3 applyVolumeAttenuation( vec3 radiance, float transmissionDistance, vec3 attenuationColor, float attenuationDistance ) {\n\n\t\tif ( attenuationDistance == 0.0 ) {\n\n\t\t\t// Attenuation distance is +∞ (which we indicate by zero), i.e. the transmitted color is not attenuated at all.\n\t\t\treturn radiance;\n\n\t\t} else {\n\n\t\t\t// Compute light attenuation using Beer's law.\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n\t\t\treturn transmittance * radiance;\n\n\t\t}\n\n\t}\n\n\tvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 diffuseColor, vec3 specularColor, float specularF90,\n\t\tvec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness,\n\t\tvec3 attenuationColor, float attenuationDistance ) {\n\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\n\t\t// Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\n\t\t// Sample framebuffer to get pixel the refracted ray hits.\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\n\t\t// Get the specular component.\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\n\t}\n#endif\n",uv_pars_fragment:"\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n",uv_pars_vertex:"\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n",uv_vertex:"\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n",uv2_pars_fragment:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n",uv2_pars_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n",uv2_vertex:"\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n",worldpos_vertex:"\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n",background_vert:"\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n",background_frag:"\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",cube_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n",cube_frag:"\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",depth_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n",depth_frag:"\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n",distanceRGBA_vert:"\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n",distanceRGBA_frag:"\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n",equirect_vert:"\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n",equirect_frag:"\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV = equirectUv( direction );\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n",linedashed_vert:"\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",linedashed_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",meshbasic_vert:"\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n/*{INJECT_PARS}*/\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n\t/*{INJECT_HERE}*/\n\n}\n",meshbasic_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n\n/*{INJECT_PARS}*/\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n\t/*{INJECT_HERE}*/\n\n}\n",meshlambert_vert:"\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshmatcap_vert:"\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n",meshmatcap_frag:"\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshnormal_vert:"\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n",meshnormal_frag:"\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n",meshphong_vert:"\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n/*{INJECT_PARS}*/\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n\t/*{INJECT_HERE}*/\n}\n",meshphong_frag:"\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n/*{INJECT_PARS}*/\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n\t/*{INJECT_HERE}*/\n\n}\n",meshphysical_vert:"\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifdef USE_TRANSMISSION\n\n\tvarying vec3 vWorldPosition;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n#ifdef USE_TRANSMISSION\n\n\tvWorldPosition = worldPosition.xyz;\n\n#endif\n}\n",meshphysical_frag:"\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef IOR\n\tuniform float ior;\n#endif\n\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularTint;\n\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\n\t#ifdef USE_SPECULARTINTMAP\n\t\tuniform sampler2D specularTintMap;\n\t#endif\n#endif\n\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheenTint;\n\tuniform float sheenRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\n\t#include <transmission_fragment>\n\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\n\t#ifdef USE_CLEARCOAT\n\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\n\t\toutgoingLight = outgoingLight * ( 1.0 - clearcoat * Fcc ) + clearcoatSpecular * clearcoat;\n\n\t#endif\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",meshtoon_vert:"\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",meshtoon_frag:"\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n",points_vert:"\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n",points_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n",shadow_vert:"\n#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n",shadow_frag:"\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n",sprite_vert:"\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n",sprite_frag:"\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"}},9192:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(160),i=n(2585),o=n(6522),a=n(7306),s=n(9708),c=n(9706),l=n(5184);const u={basic:{uniforms:(0,i.Rh)([s.r.common,s.r.specularmap,s.r.envmap,s.r.aomap,s.r.lightmap,s.r.fog]),vertexShader:r.W.meshbasic_vert,fragmentShader:r.W.meshbasic_frag},lambert:{uniforms:(0,i.Rh)([s.r.common,s.r.specularmap,s.r.envmap,s.r.aomap,s.r.lightmap,s.r.emissivemap,s.r.fog,s.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:r.W.meshlambert_vert,fragmentShader:r.W.meshlambert_frag},phong:{uniforms:(0,i.Rh)([s.r.common,s.r.specularmap,s.r.envmap,s.r.aomap,s.r.lightmap,s.r.emissivemap,s.r.bumpmap,s.r.normalmap,s.r.displacementmap,s.r.fog,s.r.lights,{emissive:{value:new c.I(0)},specular:{value:new c.I(1118481)},shininess:{value:30}}]),vertexShader:r.W.meshphong_vert,fragmentShader:r.W.meshphong_frag},standard:{uniforms:(0,i.Rh)([s.r.common,s.r.envmap,s.r.aomap,s.r.lightmap,s.r.emissivemap,s.r.bumpmap,s.r.normalmap,s.r.displacementmap,s.r.roughnessmap,s.r.metalnessmap,s.r.fog,s.r.lights,{emissive:{value:new c.I(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:r.W.meshphysical_vert,fragmentShader:r.W.meshphysical_frag},toon:{uniforms:(0,i.Rh)([s.r.common,s.r.aomap,s.r.lightmap,s.r.emissivemap,s.r.bumpmap,s.r.normalmap,s.r.displacementmap,s.r.gradientmap,s.r.fog,s.r.lights,{emissive:{value:new c.I(0)}}]),vertexShader:r.W.meshtoon_vert,fragmentShader:r.W.meshtoon_frag},matcap:{uniforms:(0,i.Rh)([s.r.common,s.r.bumpmap,s.r.normalmap,s.r.displacementmap,s.r.fog,{matcap:{value:null}}]),vertexShader:r.W.meshmatcap_vert,fragmentShader:r.W.meshmatcap_frag},points:{uniforms:(0,i.Rh)([s.r.points,s.r.fog]),vertexShader:r.W.points_vert,fragmentShader:r.W.points_frag},dashed:{uniforms:(0,i.Rh)([s.r.common,s.r.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:r.W.linedashed_vert,fragmentShader:r.W.linedashed_frag},depth:{uniforms:(0,i.Rh)([s.r.common,s.r.displacementmap]),vertexShader:r.W.depth_vert,fragmentShader:r.W.depth_frag},normal:{uniforms:(0,i.Rh)([s.r.common,s.r.bumpmap,s.r.normalmap,s.r.displacementmap,{opacity:{value:1}}]),vertexShader:r.W.meshnormal_vert,fragmentShader:r.W.meshnormal_frag},sprite:{uniforms:(0,i.Rh)([s.r.sprite,s.r.fog]),vertexShader:r.W.sprite_vert,fragmentShader:r.W.sprite_frag},background:{uniforms:{uvTransform:{value:new l.V},t2D:{value:null}},vertexShader:r.W.background_vert,fragmentShader:r.W.background_frag},cube:{uniforms:(0,i.Rh)([s.r.envmap,{opacity:{value:1}}]),vertexShader:r.W.cube_vert,fragmentShader:r.W.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:r.W.equirect_vert,fragmentShader:r.W.equirect_frag},distanceRGBA:{uniforms:(0,i.Rh)([s.r.common,s.r.displacementmap,{referencePosition:{value:new a.P},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:r.W.distanceRGBA_vert,fragmentShader:r.W.distanceRGBA_frag},shadow:{uniforms:(0,i.Rh)([s.r.lights,s.r.fog,{color:{value:new c.I(0)},opacity:{value:1}}]),vertexShader:r.W.shadow_vert,fragmentShader:r.W.shadow_frag}};u.physical={uniforms:(0,i.Rh)([u.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new o.F(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenTint:{value:new c.I(0)},sheenRoughness:{value:0},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new o.F},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationTint:{value:new c.I(0)},specularIntensity:{value:0},specularIntensityMap:{value:null},specularTint:{value:new c.I(1,1,1)},specularTintMap:{value:null}}]),vertexShader:r.W.meshphysical_vert,fragmentShader:r.W.meshphysical_frag}},9708:function(e,t,n){"use strict";n.d(t,{r:function(){return a}});var r=n(9706),i=n(6522),o=n(5184);const a={common:{diffuse:{value:new r.I(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new o.V},uv2Transform:{value:new o.V},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i.F(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.I(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.I(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new o.V}},sprite:{diffuse:{value:new r.I(16777215)},opacity:{value:1},center:{value:new i.F(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new o.V}}}},2585:function(e,t,n){"use strict";function r(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function i(e){const t={};for(let n=0;n<e.length;n++){const i=r(e[n]);for(const e in i)t[e]=i[e]}return t}n.d(t,{Rh:function(){return i},dw:function(){return r},rD:function(){return o}});const o={clone:r,merge:i}},3544:function(e,t,n){"use strict";n.d(t,{a:function(){return h}});var r=n(2513),i=n(2313),o=n(9913),a=n(7259),s=n(9706),c=n(5444),l=n(9192),u=n(2585);function h(e,t,n,h,d){const f=new s.I(0);let p,m,g=0,v=null,_=0,y=null;function b(e,t){n.buffers.color.setClear(e.r,e.g,e.b,t,d)}return e.webgl_background={set_tint:function(e){m?m.material.uniforms.tint.value=e:p&&(p.material.uniforms.tint.value=e)},set_brightness:function(e){m?m.material.uniforms.brightness.value=e:p&&(p.material.uniforms.brightness.value=e)},getClearColor:function(){return f},setClearColor:function(e,t=1){f.set(e),g=t,b(f,g)},getClearAlpha:function(){return g},setClearAlpha:function(e){g=e,b(f,g)},render:function(n,s){let d=!1,x=!0===s.isScene?s.background:null;x&&x.isTexture&&(x=t.get(x));const w=e.xr,A=w.getSession&&w.getSession();A&&"additive"===A.environmentBlendMode&&(x=null),null===x?b(f,g):x&&x.isColor&&(b(x,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),x&&(x.isCubeTexture||x.mapping===r.g8_)?(void 0===m&&(m=new c.K(new i.D(1,1,1),new a.j({name:"BackgroundCubeMaterial",uniforms:(0,u.dw)(l.V.cube.uniforms),vertexShader:l.V.cube.vertexShader,fragmentShader:l.V.cube.fragmentShader,side:r._Li,depthTest:!1,depthWrite:!1,fog:!1})),m.geometry.deleteAttribute("normal"),m.geometry.deleteAttribute("uv"),m.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(m.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),h.update(m)),m.material.uniforms.envMap.value=x,m.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,v===x&&_===x.version&&y===e.toneMapping||(m.material.needsUpdate=!0,v=x,_=x.version,y=e.toneMapping),n.unshift(m,m.geometry,m.material,0,0,null)):x&&x.isTexture&&(void 0===p&&(p=new c.K(new o._(2,2),new a.j({name:"BackgroundMaterial",uniforms:(0,u.dw)(l.V.background.uniforms),vertexShader:l.V.background.vertexShader,fragmentShader:l.V.background.fragmentShader,side:r.Wl3,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),h.update(p)),p.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),p.material.uniforms.uvTransform.value.copy(x.matrix),v===x&&_===x.version&&y===e.toneMapping||(p.material.needsUpdate=!0,v=x,_=x.version,y=e.toneMapping),n.unshift(p,p.geometry,p.material,0,0,null))}}}},3441:function(e,t,n){"use strict";n.d(t,{c:function(){return m}});var r=n(2513),i=n(6311),o=n(6520),a=n(3420),s=n(7259),c=n(2),l=n(6487),u=n(5444),h=n(6969),d=n(6522),f=n(9226);var p=n(5108);function m(e,t,n){let m=new f.i;const g=new d.F,v=new d.F,_=new h.L,y=new o.l({depthPacking:r.mSO}),b=new a.L,x={},w=n.maxTextureSize,A={0:r._Li,1:r.Wl3,2:r.ehD},T=new s.j({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new d.F},radius:{value:4}},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:"\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n\tconst float samples = float( VSM_SAMPLES );\n\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\t// float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\n\t\t#ifdef HORIZONTAL_PASS\n\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n\t\t#else\n\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\n\t\t#endif\n\n\t}\n\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n"}),M=T.clone();M.defines.HORIZONTAL_PASS=1;const E=new l.u;E.setAttribute("position",new c.Tl(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const S=new u.K(E,T),R=this;function L(n,r){const i=t.update(S);T.defines.VSM_SAMPLES!==n.blurSamples&&(T.defines.VSM_SAMPLES=n.blurSamples,M.defines.VSM_SAMPLES=n.blurSamples,T.needsUpdate=!0,M.needsUpdate=!0),T.uniforms.shadow_pass.value=n.map.texture,T.uniforms.resolution.value=n.mapSize,T.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,i,T,S,null),M.uniforms.shadow_pass.value=n.mapPass.texture,M.uniforms.resolution.value=n.mapSize,M.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,i,M,S,null)}function P(t,n,i,o,a,s,c){let l=null;const u=!0===o.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(l=void 0!==u?u:!0===o.isPointLight?b:y,e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0){const e=l.uuid,t=i.uuid;let n=x[e];void 0===n&&(n={},x[e]=n);let r=n[t];void 0===r&&(r=l.clone(),n[t]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,c===r.dwk?l.side=null!==i.shadowSide?i.shadowSide:i.side:l.side=null!==i.shadowSide?i.shadowSide:A[i.side],l.alphaMap=i.alphaMap,l.alphaTest=i.alphaTest,l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.displacementMap=i.displacementMap,l.displacementScale=i.displacementScale,l.displacementBias=i.displacementBias,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===o.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(o.matrixWorld),l.nearDistance=a,l.farDistance=s),l}function C(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===r.dwk)&&(!n.frustumCulled||m.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),i=n.material;if(Array.isArray(i)){const t=r.groups;for(let c=0,l=t.length;c<l;c++){const l=t[c],u=i[l.materialIndex];if(u&&u.visible){const t=P(n,0,u,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,l)}}}else if(i.visible){const t=P(n,0,i,a,o.near,o.far,s);e.renderBufferDirect(o,null,r,t,n,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)C(c[e],i,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r._iA,this.render=function(t,n,o){if(!1===R.enabled)return;if(!1===R.autoUpdate&&!1===R.needsUpdate)return;if(0===t.length)return;const a=e.getRenderTarget(),s=e.getActiveCubeFace(),c=e.getActiveMipmapLevel(),l=e.state;l.setBlending(r.jFi),l.buffers.color.setClear(1,1,1,1),l.buffers.depth.setTest(!0),l.setScissorTest(!1);for(let a=0,s=t.length;a<s;a++){const s=t[a],c=s.shadow;if(void 0===c){p.warn("THREE.WebGLShadowMap:",s,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;g.copy(c.mapSize);const u=c.getFrameExtents();if(g.multiply(u),v.copy(c.mapSize),(g.x>w||g.y>w)&&(g.x>w&&(v.x=Math.floor(w/u.x),g.x=v.x*u.x,c.mapSize.x=v.x),g.y>w&&(v.y=Math.floor(w/u.y),g.y=v.y*u.y,c.mapSize.y=v.y)),null===c.map&&!c.isPointLightShadow&&this.type===r.dwk){const e={minFilter:r.wem,magFilter:r.wem,format:r.wk1};c.map=new i.d(g.x,g.y,e),c.map.texture.name=s.name+".shadowMap",c.mapPass=new i.d(g.x,g.y,e),c.camera.updateProjectionMatrix()}if(null===c.map){const e={minFilter:r.TyD,magFilter:r.TyD,format:r.wk1};c.map=new i.d(g.x,g.y,e),c.map.texture.name=s.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const h=c.getViewportCount();for(let e=0;e<h;e++){const t=c.getViewport(e);_.set(v.x*t.x,v.y*t.y,v.x*t.z,v.y*t.w),l.viewport(_),c.updateMatrices(s,e),m=c.getFrustum(),C(n,o,c.camera,s,this.type)}c.isPointLightShadow||this.type!==r.dwk||L(c,o),c.needsUpdate=!1}R.needsUpdate=!1,e.setRenderTarget(a,s,c)}}},5437:function(e,t,n){"use strict";n.d(t,{x:function(){return Texture}});var r=n(4092),i=n(2513),o=n(4682),a=n(6522),s=n(5184),c=n(3279),l=n(5108);let u=0;class Texture extends r.p{constructor(e=Texture.DEFAULT_IMAGE,t=Texture.DEFAULT_MAPPING,n=i.uWy,r=i.uWy,c=i.wem,l=i.D1R,h=i.wk1,d=i.ywz,f=1,p=i.rnI){super(),Object.defineProperty(this,"id",{value:u++}),this.uuid=o.generateUUID(),this.name="",this.image=e,this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=r,this.magFilter=c,this.minFilter=l,this.anisotropy=f,this.format=h,this.internalFormat=null,this.type=d,this.offset=new a.F(0,0),this.repeat=new a.F(1,1),this.center=new a.F(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s.V,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=p,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const r=this.image;if(void 0===r.uuid&&(r.uuid=o.generateUUID()),!t&&void 0===e.images[r.uuid]){let t;if(Array.isArray(r)){t=[];for(let e=0,n=r.length;e<n;e++)r[e].isDataTexture?t.push(h(r[e].image)):t.push(h(r[e]))}else t=h(r);e.images[r.uuid]={uuid:r.uuid,url:t}}n.image=r.uuid}return"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==i.xfE)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case i.rpg:e.x=e.x-Math.floor(e.x);break;case i.uWy:e.x=e.x<0?0:1;break;case i.OoA:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case i.rpg:e.y=e.y-Math.floor(e.y);break;case i.uWy:e.y=e.y<0?0:1;break;case i.OoA:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&this.version++}}function h(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?c.P.getDataURL(e):e.data?{data:Array.prototype.slice.call(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(l.warn("THREE.Texture: Unable to serialize Texture."),{})}Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=i.xfE,Texture.prototype.isTexture=!0},2111:function(e,t,n){"use strict";function r(e){if(0===e.length)return-1/0;let t=e[0];for(let n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}n.d(t,{Wu:function(){return s},c:function(){return a},rf:function(){return o},uH:function(){return r}});const i={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function o(e,t){return new i[e](t)}function a(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function s(e,t=0){let n=3735928559^t,r=1103547991^t;for(let t,i=0;i<e.length;i++)t=e.charCodeAt(i),n=Math.imul(n^t,2654435761),r=Math.imul(r^t,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(r^r>>>13,3266489909),r=Math.imul(r^r>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),4294967296*(2097151&r)+(n>>>0)}},4900:function(e,t,n){var r={"./AssetMaterial.js":5613,"./PBRMaterial.js":8171,"./TestMaterial.js":8554};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=4900},1855:function(e,t,n){var r={"./blending.yaml":7054,"./convert.yaml":9966,"./corelib.yaml":2500,"./hexlib.yaml":3275};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1855},9067:function(e,t,n){var r={"./background.yaml":2840,"./background_fx.yaml":7753,"./canvas_text.yaml":3467,"./follow_pointer.yaml":8716,"./movieclip.yaml":5069,"./particle_a.yaml":790,"blending.yaml":7054,"convert.yaml":9966,"corelib.yaml":2500,"hexlib.yaml":3275};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=9067},863:function(e,t,n){var r={"./FullscreenRect.js":4086,"./SkyMesh.js":5620};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=863},1729:function(e,t,n){var r={"./string_splice.js":2899,"./three_webgl_background.js":4743};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1729},3821:function(e,t,n){var r={"./LightStrike.js":6406,"./Water.js":2711,"./Water2.js":9273};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=3821},3192:function(e,t,n){var r={"./MeshRenderer.ts":6432};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=3192},5946:function(e,t,n){var r={"./Postprocessing.js":7667};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=5946},2497:function(e,t,n){"use strict";n.r(t),n.d(t,{AdaptiveLuminanceMaterial:function(){return c},AdaptiveLuminancePass:function(){return Z},BlendFunction:function(){return te},BlendMode:function(){return re},BloomEffect:function(){return be},BlurPass:function(){return G},BokehEffect:function(){return xe},BokehMaterial:function(){return l},BrightnessContrastEffect:function(){return we},ChromaticAberrationEffect:function(){return Me},CircleOfConfusionMaterial:function(){return u},ClearMaskPass:function(){return V},ClearPass:function(){return H},ColorAverageEffect:function(){return Ae},ColorChannel:function(){return o},ColorDepthEffect:function(){return Te},ColorEdgesMaterial:function(){return f},ConvolutionMaterial:function(){return p},CopyMaterial:function(){return v},DepthComparisonMaterial:function(){return _},DepthCopyMaterial:function(){return y},DepthCopyMode:function(){return b},DepthDownsamplingMaterial:function(){return x},DepthDownsamplingPass:function(){return q},DepthEffect:function(){return Ee},DepthMaskMaterial:function(){return w},DepthOfFieldEffect:function(){return Se},DepthPass:function(){return K},DepthPickingPass:function(){return ee},DepthSavePass:function(){return J},Disposable:function(){return a},DotScreenEffect:function(){return Re},EdgeDetectionMaterial:function(){return A},EdgeDetectionMode:function(){return T},Effect:function(){return ie},EffectAttribute:function(){return oe},EffectComposer:function(){return ge},EffectMaterial:function(){return E},EffectPass:function(){return ue},GammaCorrectionEffect:function(){return Le},GlitchEffect:function(){return De},GlitchMode:function(){return Ue},GodRaysEffect:function(){return Ie},GodRaysMaterial:function(){return R},GridEffect:function(){return Be},HueSaturationEffect:function(){return Ne},Initializable:function(){return ve},KernelSize:function(){return g},LUT3dlLoader:function(){return Wt},LUTCubeLoader:function(){return Ht},LUTEffect:function(){return We},LUTOperation:function(){return ze},LambdaPass:function(){return he},LookupTexture3D:function(){return Ve},LuminanceMaterial:function(){return L},LuminancePass:function(){return de},MaskFunction:function(){return C},MaskMaterial:function(){return P},MaskPass:function(){return fe},NoiseEffect:function(){return He},NoiseTexture:function(){return Pe},NormalPass:function(){return pe},OutlineEdgesMaterial:function(){return D},OutlineEffect:function(){return Xe},OutlineMaterial:function(){return F},OverrideMaterialManager:function(){return Q},Pass:function(){return B},PixelationEffect:function(){return Qe},PredicationMode:function(){return M},RawImageData:function(){return je},RealisticBokehEffect:function(){return Ye},RenderPass:function(){return Y},Resizable:function(){return _e},Resizer:function(){return z},SMAAAreaImageData:function(){return It},SMAAEffect:function(){return ot},SMAAImageGenerator:function(){return Bt},SMAAImageLoader:function(){return Xt},SMAAPreset:function(){return at},SMAASearchImageData:function(){return Vt},SMAAWeightsMaterial:function(){return U},SSAOEffect:function(){return st},SSAOMaterial:function(){return O},SavePass:function(){return N},ScanlineEffect:function(){return Ke},Section:function(){return S},Selection:function(){return ye},SelectiveBloomEffect:function(){return tt},SepiaEffect:function(){return nt},ShaderPass:function(){return me},ShockWaveEffect:function(){return et},TetrahedralUpscaler:function(){return yt},TextureEffect:function(){return lt},ToneMappingEffect:function(){return ut},ToneMappingMode:function(){return ht},VignetteEffect:function(){return dt},WebGLExtension:function(){return ae}});var r=n(5017),i=n(5108),o={RED:0,GREEN:1,BLUE:2,ALPHA:3},a=class{dispose(){}},s="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",c=class extends r.ShaderMaterial{constructor(){super({type:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new r.Uniform(null),luminanceBuffer1:new r.Uniform(null),minLuminance:new r.Uniform(.01),deltaTime:new r.Uniform(0),tau:new r.Uniform(1)},fragmentShader:"uniform mediump sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=texture2D(luminanceBuffer0,vUv).r;\n#if __VERSION__ < 300\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#else\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#endif\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1,extensions:{shaderTextureLOD:!0}}),this.toneMapped=!1}},l=class extends r.ShaderMaterial{constructor(e=!1,t=!1){super({type:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{kernel64:new r.Uniform(null),kernel16:new r.Uniform(null),inputBuffer:new r.Uniform(null),cocBuffer:new r.Uniform(null),texelSize:new r.Uniform(new r.Vector2),scale:new r.Uniform(1)},fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,t&&(this.defines.FOREGROUND="1"),this.generateKernel()}generateKernel(){const e=new Float32Array(128),t=new Float32Array(32);let n=0,i=0;for(let r=0;r<80;++r){const o=2.39996323*r,a=Math.sqrt(r)/Math.sqrt(80),s=a*Math.cos(o),c=a*Math.sin(o);r%5==0?(t[i++]=s,t[i++]=c):(e[n++]=s,e[n++]=c)}const o=[],a=[];for(let t=0;t<128;)o.push(new r.Vector4(e[t++],e[t++],e[t++],e[t++]));for(let e=0;e<32;)a.push(new r.Vector4(t[e++],t[e++],t[e++],t[e++]));this.uniforms.kernel64.value=o,this.uniforms.kernel16.value=a}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},u=class extends r.ShaderMaterial{constructor(e){super({type:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new r.Uniform(null),focusDistance:new r.Uniform(0),focalLength:new r.Uniform(0),cameraNear:new r.Uniform(.3),cameraFar:new r.Uniform(1e3)},fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof r.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},h="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",d="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",f=class extends r.ShaderMaterial{constructor(e=new r.Vector2){super({type:"ColorEdgesMaterial",defines:{EDGE_DETECTION_MODE:"2",LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new r.Uniform(null),texelSize:new r.Uniform(e)},fragmentShader:h,vertexShader:d,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("2"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){const t=Math.min(Math.max(e,.05),.5);this.defines.EDGE_THRESHOLD=t.toFixed("2"),this.needsUpdate=!0}},p=class extends r.ShaderMaterial{constructor(e=new r.Vector2){super({type:"ConvolutionMaterial",uniforms:{inputBuffer:new r.Uniform(null),texelSize:new r.Uniform(new r.Vector2),halfTexelSize:new r.Uniform(new r.Vector2),kernel:new r.Uniform(0),scale:new r.Uniform(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <dithering_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernelSize=g.LARGE}getKernel(){return m[this.kernelSize]}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}},m=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],g={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},v=class extends r.ShaderMaterial{constructor(){super({type:"CopyMaterial",uniforms:{inputBuffer:new r.Uniform(null),opacity:new r.Uniform(1)},fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}},_=class extends r.ShaderMaterial{constructor(e=null,t){super({type:"DepthComparisonMaterial",uniforms:{depthBuffer:new r.Uniform(e),cameraNear:new r.Uniform(.3),cameraFar:new r.Uniform(1e3)},fragmentShader:"#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)? 1.0 : 0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",vertexShader:"#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(t)}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof r.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA)}},y=class extends r.ShaderMaterial{constructor(){super({type:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new r.Uniform(null),screenPosition:new r.Uniform(new r.Vector2)},fragmentShader:"#include <packing>\n#if INPUT_DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#else\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#endif\nvarying vec2 vUv;void main(){\n#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING\ngl_FragColor=texture2D(depthBuffer,vUv);\n#else\n#if INPUT_DEPTH_PACKING == 3201\nfloat depth=unpackRGBAToDepth(texture2D(depthBuffer,vUv));gl_FragColor=vec4(vec3(depth),1.0);\n#else\nfloat depth=texture2D(depthBuffer,vUv).r;gl_FragColor=packDepthToRGBA(depth);\n#endif\n#endif\n}",vertexShader:"varying vec2 vUv;\n#if DEPTH_COPY_MODE == 1\nuniform vec2 screenPosition;\n#endif\nvoid main(){\n#if DEPTH_COPY_MODE == 1\nvUv=screenPosition;\n#else\nvUv=position.xy*0.5+0.5;\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.mode=b.FULL}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(e){this.defines.INPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(e){this.defines.OUTPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(e){this.mode=e,this.defines.DEPTH_COPY_MODE=e.toFixed(0),this.needsUpdate=!0}},b={FULL:0,SINGLE:1},x=class extends r.ShaderMaterial{constructor(){super({type:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new r.Uniform(null),normalBuffer:new r.Uniform(null),texelSize:new r.Uniform(new r.Vector2)},fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nvec2 uvs[4];uvs[0]=vUv0;uvs[1]=vUv1;uvs[2]=vUv2;uvs[3]=vUv3;vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\n#else\nvec3 n=vec3(0.0);\n#endif\ngl_FragColor=vec4(n,d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},w=class extends r.ShaderMaterial{constructor(){super({type:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.00001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",KEEP_FAR:"1"},uniforms:{inputBuffer:new r.Uniform(null),depthBuffer0:new r.Uniform(null),depthBuffer1:new r.Uniform(null),bias0:new r.Uniform(0),bias1:new r.Uniform(0)},fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\n#else\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\n#endif\nuniform sampler2D inputBuffer;uniform float bias0;uniform float bias1;varying vec2 vUv;void main(){vec2 depth;\n#if DEPTH_PACKING_0 == 3201\ndepth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\n#else\ndepth.x=texture2D(depthBuffer0,vUv).r;\n#endif\n#if DEPTH_PACKING_1 == 3201\ndepth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\n#else\ndepth.y=texture2D(depthBuffer1,vUv).r;\n#endif\ndepth=clamp(depth+vec2(bias0,bias1),0.0,1.0);\n#ifdef KEEP_FAR\nbool keep=(depth.x==1.0)||depthTest(depth.x,depth.y);\n#else\nbool keep=(depth.x!=1.0)&&depthTest(depth.x,depth.y);\n#endif\nif(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.depthMode=r.LessDepth,this.setDepthMode(r.LessDepth)}get keepFar(){return void 0!==this.defines.KEEP_FAR}set keepFar(e){e?this.defines.KEEP_FAR="1":delete this.defines.KEEP_FAR,this.needsUpdate=!0}getEpsilon(){return Number(this.defines.DEPTH_EPSILON)}setEpsilon(e){this.defines.DEPTH_EPSILON=e.toFixed(16),this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(e){let t;switch(e){case r.NeverDepth:t="false";break;case r.AlwaysDepth:t="true";break;case r.EqualDepth:t="abs(d1 - d0) <= DEPTH_EPSILON";break;case r.NotEqualDepth:t="abs(d1 - d0) > DEPTH_EPSILON";break;case r.LessDepth:t="d0 > d1";break;case r.LessEqualDepth:t="d0 >= d1";break;case r.GreaterEqualDepth:t="d0 <= d1";break;case r.GreaterDepth:default:t="d0 < d1"}this.depthMode=e,this.defines["depthTest(d0, d1)"]=t,this.needsUpdate=!0}},A=class extends r.ShaderMaterial{constructor(e=new r.Vector2,t=T.COLOR){super({type:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new r.Uniform(null),depthBuffer:new r.Uniform(null),predicationBuffer:new r.Uniform(null),texelSize:new r.Uniform(e)},fragmentShader:h,vertexShader:d,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setEdgeDetectionMode(t)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setEdgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}setLocalContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}setEdgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}setPredicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}setPredicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}setPredicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}},T={DEPTH:0,LUMA:1,COLOR:2},M={DISABLED:0,DEPTH:1,CUSTOM:2},E=class extends r.ShaderMaterial{constructor(e=null,t=null,n=null,i,o=!1){super({type:"EffectMaterial",defines:{DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new r.Uniform(null),depthBuffer:new r.Uniform(null),resolution:new r.Uniform(new r.Vector2),texelSize:new r.Uniform(new r.Vector2),cameraNear:new r.Uniform(.3),cameraFar:new r.Uniform(1e3),aspect:new r.Uniform(1),time:new r.Uniform(0)},blending:r.NoBlending,depthWrite:!1,depthTest:!1,dithering:o}),this.toneMapped=!1,null!==e&&this.setShaderParts(e),null!==t&&this.setDefines(t),null!==n&&this.setUniforms(n),this.adoptCameraSettings(i)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(S.FRAGMENT_HEAD,e.get(S.FRAGMENT_HEAD)).replace(S.FRAGMENT_MAIN_UV,e.get(S.FRAGMENT_MAIN_UV)).replace(S.FRAGMENT_MAIN_IMAGE,e.get(S.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(S.VERTEX_HEAD,e.get(S.VERTEX_HEAD)).replace(S.VERTEX_MAIN_SUPPORT,e.get(S.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}adoptCameraSettings(e=null){null!==e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof r.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const n=Math.max(e,1),r=Math.max(t,1);this.uniforms.resolution.value.set(n,r),this.uniforms.texelSize.value.set(1/n,1/r),this.uniforms.aspect.value=n/r}},S={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},R=class extends r.ShaderMaterial{constructor(e){super({type:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new r.Uniform(null),lightPosition:new r.Uniform(e),density:new r.Uniform(1),decay:new r.Uniform(1),weight:new r.Uniform(1),exposure:new r.Uniform(1),clampMax:new r.Uniform(1)},fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\n#include <dithering_fragment>\n}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(e){const t=Math.floor(e);this.defines.SAMPLES_INT=t.toFixed(0),this.defines.SAMPLES_FLOAT=t.toFixed(1),this.needsUpdate=!0}},L=class extends r.ShaderMaterial{constructor(e=!1,t=null){const n=null!==t;super({type:"LuminanceMaterial",uniforms:{inputBuffer:new r.Uniform(null),threshold:new r.Uniform(0),smoothing:new r.Uniform(1),range:new r.Uniform(n?t:new r.Vector2)},fragmentShader:"#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorOutput=e,this.useThreshold=!0,this.useRange=n}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.uniforms.threshold.value=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.uniforms.smoothing.value=e}get useThreshold(){return void 0!==this.defines.THRESHOLD}set useThreshold(e){e?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.needsUpdate=!0}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return void 0!==this.defines.RANGE}set useRange(e){e?this.defines.RANGE="1":delete this.defines.RANGE,this.needsUpdate=!0}get luminanceRange(){return this.useRange}set luminanceRange(e){this.useRange=e}setLuminanceRangeEnabled(e){this.useRange=e}},P=class extends r.ShaderMaterial{constructor(e=null){super({type:"MaskMaterial",uniforms:{maskTexture:new r.Uniform(e),inputBuffer:new r.Uniform(null),strength:new r.Uniform(1)},fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:s,blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.colorChannel=o.RED,this.maskFunction=C.DISCARD}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==r.UnsignedByteType&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}},C={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},F=class extends r.ShaderMaterial{constructor(e=new r.Vector2){super({type:"OutlineMaterial",uniforms:{inputBuffer:new r.Uniform(null),texelSize:new r.Uniform(new r.Vector2)},fragmentShader:"uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)? vec2(d,0.0): vec2(0.0,d);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}},D=F,U=class extends r.ShaderMaterial{constructor(e=new r.Vector2,t=new r.Vector2){super({type:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new r.Uniform(null),areaTexture:new r.Uniform(null),searchTexture:new r.Uniform(null),texelSize:new r.Uniform(e),resolution:new r.Uniform(t)},fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1}setOrthogonalSearchSteps(e){const t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){const t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setCornerRounding(e){const t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}get cornerRounding(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerRounding(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},O=class extends r.ShaderMaterial{constructor(e){super({type:"SSAOMaterial",defines:{SAMPLES_INT:"0",SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{normalBuffer:new r.Uniform(null),normalDepthBuffer:new r.Uniform(null),noiseTexture:new r.Uniform(null),inverseProjectionMatrix:new r.Uniform(new r.Matrix4),projectionMatrix:new r.Uniform(new r.Matrix4),texelSize:new r.Uniform(new r.Vector2),cameraNear:new r.Uniform(0),cameraFar:new r.Uniform(0),distanceCutoff:new r.Uniform(new r.Vector2),proximityCutoff:new r.Uniform(new r.Vector2),noiseScale:new r.Uniform(new r.Vector2),minRadiusScale:new r.Uniform(.33),intensity:new r.Uniform(1),fade:new r.Uniform(.01),bias:new r.Uniform(0),time:new r.Uniform(0)},fragmentShader:"\n  #include <common>\n  \n  #include <packing>\n  \n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  uniform highp sampler2D normalDepthBuffer;\n  #else\n  uniform mediump sampler2D normalDepthBuffer;\n  #endif\n  #ifndef NORMAL_DEPTH\n  uniform lowp sampler2D normalBuffer;float readDepth(const in vec2 uv){\n    #if DEPTH_PACKING == 3201\n    return unpackRGBAToDepth(texture2D(normalDepthBuffer,uv));\n    #else\n    return texture2D(normalDepthBuffer,uv).r;\n    #endif\n  }\n  #endif\n  uniform lowp sampler2D noiseTexture;\n  uniform mat4 inverseProjectionMatrix;\n  uniform mat4 projectionMatrix;\n  uniform vec2 texelSize;\n  uniform float cameraNear;\n  uniform float cameraFar;\n  uniform float minRadiusScale;\n  uniform float intensity;\n  uniform float fade;\n  uniform float bias;\n  uniform float time;\n  uniform vec2 distanceCutoff;\n  uniform vec2 proximityCutoff;\n  varying vec2 vUv;\n  varying vec2 vUv2;\n  float getViewZ(const in float depth){\n    #ifdef PERSPECTIVE_CAMERA\n    return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n\n    #else\n    return orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n\n    #endif\n  }vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);\n    float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];\n    clipPosition*=clipW;\n    return(inverseProjectionMatrix*clipPosition).xyz;\n  }float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){\n      #ifdef DISTANCE_SCALING\n      float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);\n      radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;\n      float radius=RADIUS*radiusScale;\n\n      #else\n      float radius=RADIUS;\n\n      #endif\n      float noise=mod(texture2D(noiseTexture,vUv2 / 2.).r + (time), 1.);\n      float baseAngle=noise*PI2;\n      float invSamples=1.0/SAMPLES_FLOAT;\n      float rings=SPIRAL_TURNS*PI2;\n      float occlusion=0.0;\n      int taps=0;\n      for(int i=0;\n        i<SAMPLES_INT;\n        ++i){float alpha=(float(i)+0.5)*invSamples;\n        float angle=alpha*rings+baseAngle;\n        vec2 coord=alpha*radius*vec2(cos(angle),sin(angle))*texelSize+uv;\n        if(coord.s<0.0||coord.s>1.0||coord.t<0.0||coord.t>1.0){continue;\n      }\n      #ifdef NORMAL_DEPTH\n      float sampleDepth=texture2D(normalDepthBuffer,coord).a;\n\n      #else\n      float sampleDepth=readDepth(coord);\n\n      #endif\n      float viewZ=getViewZ(sampleDepth);\n\n      #ifdef PERSPECTIVE_CAMERA\n      float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n\n      #else\n      float linearSampleDepth=sampleDepth;\n\n      #endif\n      float proximity=abs(depth-linearSampleDepth);\n      if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);\n        vec3 Q=getViewPosition(coord,sampleDepth,viewZ);\n        vec3 v=Q-p;\n        float vv=dot(v,v);\n        float vn=dot(v,n)-bias;\n        float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;\n      occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;\n    }++taps;\n    }return occlusion/(4.0*max(float(taps),1.0));\n    }void main(){\n        #ifdef NORMAL_DEPTH\n        vec4 normalDepth=texture2D(normalDepthBuffer,vUv);\n\n        #else\n        vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).rgb,readDepth(vUv));\n\n        #endif\n        float ao=1.0;\n        float depth=normalDepth.a;\n        float viewZ=getViewZ(depth);\n\n        #ifdef PERSPECTIVE_CAMERA\n        float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n\n        #else\n        float linearDepth=depth;\n\n        #endif\n        if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);\n          vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);\n          ao-=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);\n          float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);\n          ao=mix(ao,1.0,d);\n          ao=clamp(pow(ao,abs(intensity)),0.0,1.0);\n        }gl_FragColor.r=ao;\n      }\n",vertexShader:"\nuniform vec2 noiseScale;\nuniform float time;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvoid main(){\n  vUv=position.xy*0.5+0.5;\n  vUv2=vec2(vUv.x * noiseScale.x, vUv.y * noiseScale.y);\n  gl_Position=vec4(position.xy,1.0,1.0);\n}",blending:r.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.adoptCameraSettings(e)}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}adoptCameraSettings(e=null){if(null!==e){const t=this.uniforms;t.cameraNear.value=e.near,t.cameraFar.value=e.far,e instanceof r.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0}}},k=new r.Camera,I=null;var B=class{constructor(e="Pass",t=new r.Scene,n=k){this.name=e,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.getFullscreenMaterial();null!==t&&(t.needsUpdate=!0),this.rtt=!e}}getFullscreenMaterial(){return null!==this.screen?this.screen.material:null}setFullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new r.Mesh(function(){if(null===I){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(I=new r.BufferGeometry).setAttribute?(I.setAttribute("position",new r.BufferAttribute(e,3)),I.setAttribute("uv",new r.BufferAttribute(t,2))):(I.addAttribute("position",new r.BufferAttribute(e,3)),I.addAttribute("uv",new r.BufferAttribute(t,2)))}return I}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new r.Scene),this.scene.add(t),this.screen=t)}getDepthTexture(){return null}setDepthTexture(e,t=0){}render(e,t,n,r,i){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){const e=this.getFullscreenMaterial();null!==e&&e.dispose();for(const e of Object.keys(this)){const t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof r.Scene)continue;this[e].dispose()}}}},N=class extends B{constructor(e,t=!0){super("SavePass"),this.setFullscreenMaterial(new v),this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="SavePass.Target"),this.resize=t}get texture(){return this.renderTarget.texture}render(e,t,n,r,i){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){if(this.resize){const n=Math.max(e,1),r=Math.max(t,1);this.renderTarget.setSize(n,r)}}initialize(e,t,n){if(t||n!==r.UnsignedByteType||(this.renderTarget.texture.format=r.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n,n!==r.UnsignedByteType)){this.getFullscreenMaterial().defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},Z=class extends B{constructor(e,{minLuminance:t=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.setFullscreenMaterial(new c),this.needsSwap=!1,this.renderTargetPrevious=new r.WebGLRenderTarget(1,1,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,type:r.HalfFloatType,stencilBuffer:!1,depthBuffer:!1,format:r.RGBAFormat}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.getFullscreenMaterial().uniforms;i.luminanceBuffer0.value=this.renderTargetPrevious.texture,i.luminanceBuffer1.value=e,i.minLuminance.value=t,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.savePass=new N(this.renderTargetPrevious,!1),this.adaptationRate=n}get texture(){return this.renderTargetAdapted.texture}set mipLevel1x1(e){const t=this.getFullscreenMaterial();t.defines.MIP_LEVEL_1X1=e.toFixed(1),t.needsUpdate=!0}get adaptationRate(){return this.getFullscreenMaterial().uniforms.tau.value}set adaptationRate(e){this.getFullscreenMaterial().uniforms.tau.value=e}render(e,t,n,r,i){this.getFullscreenMaterial().uniforms.deltaTime.value=r,e.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),e.render(this.scene,this.camera),this.savePass.render(e,this.renderTargetAdapted)}},j=-1,z=class{constructor(e,t=-1,n=-1,i=1){this.resizable=e,this.base=new r.Vector2(1,1),this.target=new r.Vector2(t,n),this.s=i}get scale(){return this.s}set scale(e){this.s=e,this.target.x=j,this.target.y=j,this.resizable.setSize(this.base.x,this.base.y)}get width(){const e=this.base,t=this.target;let n;return n=t.x!==j?t.x:t.y!==j?Math.round(t.y*(e.x/e.y)):Math.round(e.x*this.s),n}set width(e){this.target.x=e,this.resizable.setSize(this.base.x,this.base.y)}get height(){const e=this.base,t=this.target;let n;return n=t.y!==j?t.y:t.x!==j?Math.round(t.x/(e.x/e.y)):Math.round(e.y*this.s),n}set height(e){this.target.y=e,this.resizable.setSize(this.base.x,this.base.y)}static get AUTO_SIZE(){return j}},G=class extends B{constructor({resolutionScale:e=.5,width:t=z.AUTO_SIZE,height:n=z.AUTO_SIZE,kernelSize:i=g.LARGE}={}){super("BlurPass"),this.renderTargetA=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.resolution=new z(this,t,n,e),this.convolutionMaterial=new p,this.ditheredConvolutionMaterial=new p,this.ditheredConvolutionMaterial.dithering=!0,this.dithering=!1,this.kernelSize=i}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get scale(){return this.convolutionMaterial.uniforms.scale.value}set scale(e){this.convolutionMaterial.uniforms.scale.value=e,this.ditheredConvolutionMaterial.uniforms.scale.value=e}get kernelSize(){return this.convolutionMaterial.kernelSize}set kernelSize(e){this.convolutionMaterial.kernelSize=e,this.ditheredConvolutionMaterial.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,n,r,i){const o=this.scene,a=this.camera,s=this.renderTargetA,c=this.renderTargetB;let l=this.convolutionMaterial,u=l.uniforms;const h=l.getKernel();let d,f,p,m=t;for(this.setFullscreenMaterial(l),f=0,p=h.length-1;f<p;++f)d=0==(1&f)?s:c,u.kernel.value=h[f],u.inputBuffer.value=m.texture,e.setRenderTarget(d),e.render(o,a),m=d;this.dithering&&(l=this.ditheredConvolutionMaterial,u=l.uniforms,this.setFullscreenMaterial(l)),u.kernel.value=h[f],u.inputBuffer.value=m.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(o,a)}setSize(e,t){const n=this.resolution;n.base.set(e,t);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.convolutionMaterial.setTexelSize(1/r,1/i),this.ditheredConvolutionMaterial.setTexelSize(1/r,1/i)}initialize(e,t,n){if(t||n!==r.UnsignedByteType||(this.renderTargetA.texture.format=r.RGBFormat,this.renderTargetB.texture.format=r.RGBFormat),void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==r.UnsignedByteType)){const e=this.convolutionMaterial,t=this.ditheredConvolutionMaterial;e.defines.FRAMEBUFFER_PRECISION_HIGH="1",t.defines.FRAMEBUFFER_PRECISION_HIGH="1"}}static get AUTO_SIZE(){return z.AUTO_SIZE}},V=class extends B{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,n,r,i){const o=e.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},W=new r.Color,H=class extends B{constructor(e=!0,t=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}render(e,t,n,r,i){const o=this.overrideClearColor,a=this.overrideClearAlpha,s=e.getClearAlpha(),c=null!==o,l=a>=0;c?(W.copy(e.getClearColor(W)),e.setClearColor(o,l?a:s)):l&&e.setClearAlpha(a),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),c?e.setClearColor(W,s):l&&e.setClearAlpha(s)}},X=!1,Q=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case r.DoubleSide:t=this.materialsFlatShadedDoubleSide;break;case r.BackSide:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case r.DoubleSide:t=this.materialsDoubleSide;break;case r.BackSide:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[e.clone(),e.clone(),e.clone()];for(const n of t)n.uniforms=Object.assign({},e.uniforms),n.side=r.FrontSide;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=r.BackSide,n})),this.materialsDoubleSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.side=r.DoubleSide,n})),this.materialsFlatShaded=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n})),this.materialsFlatShadedBackSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=r.BackSide,n})),this.materialsFlatShadedDoubleSide=t.map((t=>{const n=t.clone();return n.uniforms=Object.assign({},e.uniforms),n.flatShading=!0,n.side=r.DoubleSide,n}))}}render(e,t,n){const r=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,X){const r=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,n);for(const e of r)e[0].material=e[1];this.meshCount!==r.size&&r.clear()}else{const r=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,n),t.overrideMaterial=r}e.shadowMap.enabled=r}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return X}static set workaroundEnabled(e){X=e}},Y=class extends B{constructor(e,t,n=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new H,this.overrideMaterialManager=null===n?null:new Q(n)}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new Q(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}render(e,t,n,r,i){const o=this.scene,a=this.camera,s=o.background,c=this.renderToScreen?null:t;this.clear&&(null!==this.clearPass.overrideClearColor&&(o.background=null),this.clearPass.render(e,t)),e.setRenderTarget(c),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,o,a):e.render(o,a),o.background!==s&&(o.background=s)}},K=class extends B{constructor(e,t,{resolutionScale:n=1,width:i=z.AUTO_SIZE,height:o=z.AUTO_SIZE,renderTarget:a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Y(e,t,new r.MeshDepthMaterial({depthPacking:r.RGBADepthPacking}));const s=this.renderPass.getClearPass();s.overrideClearColor=new r.Color(16777215),s.overrideClearAlpha=1,this.renderTarget=a,void 0===this.renderTarget&&(this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,stencilBuffer:!1}),this.renderTarget.texture.name="DepthPass.Target"),this.resolution=new z(this,i,o,n)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(e){this.resolutionScale=e,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(e,t,n,r,i){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}},q=class extends B{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:n=z.AUTO_SIZE,height:i=z.AUTO_SIZE}={}){if(super("DepthDownsamplingPass"),this.setFullscreenMaterial(new x),this.needsDepthTexture=!0,this.needsSwap=!1,null!==e){const t=this.getFullscreenMaterial();t.uniforms.normalBuffer.value=e,t.defines.DOWNSAMPLE_NORMALS="1"}this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,stencilBuffer:!1,depthBuffer:!1,type:r.FloatType}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1,this.resolution=new z(this,n,i),this.resolution.scale=t}get texture(){return this.renderTarget.texture}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.getFullscreenMaterial().setTexelSize(1/e,1/t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){e.capabilities.isWebGL2||i.error("The DepthDownsamplingPass requires WebGL 2")}},J=class extends B{constructor({depthPacking:e=r.RGBADepthPacking}={}){super("DepthSavePass");const t=new y;t.setOutputDepthPacking(e),this.setFullscreenMaterial(t),this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new r.WebGLRenderTarget(1,1,{type:e===r.RGBADepthPacking?r.UnsignedByteType:r.FloatType,minFilter:r.NearestFilter,magFilter:r.NearestFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DepthSavePass.Target"}get texture(){return this.renderTarget.texture}get depthPacking(){return this.getFullscreenMaterial().getOutputDepthPacking()}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.setInputDepthPacking(t)}render(e,t,n,r,i){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.renderTarget.setSize(e,t)}},$=new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]);var ee=class extends J{constructor({depthPacking:e=r.RGBADepthPacking,mode:t=b.SINGLE}={}){super({depthPacking:e}),this.name="DepthPickingPass",this.getFullscreenMaterial().setMode(t),this.pixelBuffer=e===r.RGBADepthPacking?new Uint8Array(4):new Float32Array(4),this.callback=null}get mode(){return this.getFullscreenMaterial().getMode()}get screenPosition(){return this.getFullscreenMaterial().uniforms.screenPosition.value}readDepth(e){return this.screenPosition.set(.5*e.x+.5,.5*e.y+.5),new Promise((e=>{this.callback=e}))}render(e,t,n,i,o){if(this.mode===b.FULL&&super.render(e),null!==this.callback){const t=this.renderTarget,n=this.pixelBuffer,i=t.texture.type!==r.FloatType;let o=0,s=0;if(this.mode===b.SINGLE)super.render(e);else{const e=this.screenPosition;o=Math.round(e.x*t.width),s=Math.round(e.y*t.height)}e.readRenderTargetPixels(t,o,s,1,1,n),this.callback(i?((a=n)[0]*$[0]+a[1]*$[1]+a[2]*$[2]+a[3]*$[3])/256:n[0]),this.callback=null}var a}setSize(e,t){this.mode===b.FULL&&super.setSize(e,t)}},te={SKIP:0,ADD:1,ALPHA:2,AVERAGE:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,EXCLUSION:8,LIGHTEN:9,MULTIPLY:10,DIVIDE:11,NEGATION:12,NORMAL:13,OVERLAY:14,REFLECT:15,SCREEN:16,SOFT_LIGHT:17,SUBTRACT:18},ne=new Map([[te.SKIP,null],[te.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[te.ALPHA,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[te.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[te.COLOR_BURN,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.COLOR_DODGE,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[te.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[te.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[te.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[te.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[te.DIVIDE,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[te.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[te.OVERLAY,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.REFLECT,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[te.SOFT_LIGHT,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[te.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),re=class extends r.EventDispatcher{constructor(e,t=1){super(),this.blendFunction=e,this.opacity=new r.Uniform(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return ne.get(this.blendFunction)}},ie=class extends r.EventDispatcher{constructor(e,t,{attributes:n=oe.NONE,blendFunction:r=te.SCREEN,defines:i=new Map,uniforms:o=new Map,extensions:a=null,vertexShader:s=null}={}){super(),this.name=e,this.attributes=n,this.fragmentShader=t,this.vertexShader=s,this.defines=i,this.uniforms=o,this.extensions=a,this.blendMode=new re(r),this.blendMode.addEventListener("change",(e=>this.setChanged()))}setChanged(){this.dispatchEvent({type:"change"})}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setDepthTexture(e,t=0){}update(e,t,n){}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];if(null!==t&&"function"==typeof t.dispose){if(t instanceof r.Scene)continue;this[e].dispose()}}}},oe={NONE:0,DEPTH:1,CONVOLUTION:2},ae={DERIVATIVES:"derivatives",FRAG_DEPTH:"fragDepth",DRAW_BUFFERS:"drawBuffers",SHADER_TEXTURE_LOD:"shaderTextureLOD"};function se(e,t){const n=[];let r;for(;null!==(r=e.exec(t));)n.push(r[1]);return n}function ce(e,t,n){let r,i;for(const o of t){r="$1"+e+o.charAt(0).toUpperCase()+o.slice(1),i=new RegExp("([^\\.])(\\b"+o+"\\b)","g");for(const e of n.entries())null!==e[1]&&n.set(e[0],e[1].replace(i,r))}}function le(e,t,n,r,o,a,s){const c=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,l=/(?:varying\s+\w+\s+(\w*))/g,u=t.blendMode,h=new Map([["fragment",t.getFragmentShader()],["vertex",t.getVertexShader()]]),d=void 0!==h.get("fragment")&&/mainImage/.test(h.get("fragment")),f=void 0!==h.get("fragment")&&/mainUv/.test(h.get("fragment"));let p=[],m=[],g=!1,v=!1;if(void 0===h.get("fragment"))i.error("Missing fragment shader",t);else if(f&&0!=(s&oe.CONVOLUTION))i.error("Effects that transform UV coordinates are incompatible with convolution effects",t);else if(d||f){if(f&&(n.set(S.FRAGMENT_MAIN_UV,n.get(S.FRAGMENT_MAIN_UV)+"\t"+e+"MainUv(UV);\n"),g=!0),null!==h.get("vertex")&&/mainSupport/.test(h.get("vertex"))){let t="\t"+e+"MainSupport(";/mainSupport *\([\w\s]*?uv\s*?\)/.test(h.get("vertex"))&&(t+="vUv"),t+=");\n",n.set(S.VERTEX_MAIN_SUPPORT,n.get(S.VERTEX_MAIN_SUPPORT)+t),p=p.concat(se(l,h.get("vertex"))),m=m.concat(p).concat(se(c,h.get("vertex")))}if(m=m.concat(se(c,h.get("fragment"))),m=m.concat(Array.from(t.defines.keys()).map((e=>e.replace(/\([\w\s,]*\)/g,"")))),m=m.concat(Array.from(t.uniforms.keys())),t.uniforms.forEach(((t,n)=>a.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),t.defines.forEach(((t,n)=>o.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),ce(e,m,o),ce(e,m,h),r.set(u.blendFunction,u),d){const t=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;let r=e+"MainImage(color0, UV, ";0!=(s&oe.DEPTH)&&t.test(h.get("fragment"))&&(r+="depth, ",v=!0),r+="color1);\n\t";const i=e+"BlendOpacity";a.set(i,u.opacity),r+="color0 = blend"+u.getBlendFunction()+"(color0, color1, "+i+");\n\n\t",n.set(S.FRAGMENT_MAIN_IMAGE,n.get(S.FRAGMENT_MAIN_IMAGE)+r),n.set(S.FRAGMENT_HEAD,n.get(S.FRAGMENT_HEAD)+"uniform float "+i+";\n\n")}n.set(S.FRAGMENT_HEAD,n.get(S.FRAGMENT_HEAD)+h.get("fragment")+"\n"),null!==h.get("vertex")&&n.set(S.VERTEX_HEAD,n.get(S.VERTEX_HEAD)+h.get("vertex")+"\n")}else i.error("The fragment shader contains neither a mainImage nor a mainUv function",t);return{varyings:p,transformedUv:g,readDepth:v}}var ue=class extends B{constructor(e,...t){super("EffectPass"),this.setFullscreenMaterial(new E(null,null,null,e)),this.effects=t.sort(((e,t)=>t.attributes-e.attributes)),this.skipRendering=!1,this.uniforms=0,this.varyings=0,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY}get encodeOutput(){return void 0!==this.getFullscreenMaterial().defines.ENCODE_OUTPUT}set encodeOutput(e){if(this.encodeOutput!==e){const t=this.getFullscreenMaterial();t.needsUpdate=!0,e?t.defines.ENCODE_OUTPUT="1":delete t.defines.ENCODE_OUTPUT}}get dithering(){return this.getFullscreenMaterial().dithering}set dithering(e){const t=this.getFullscreenMaterial();t.dithering!==e&&(t.dithering=e,t.needsUpdate=!0)}verifyResources(e){const t=e.capabilities;let n=Math.min(t.maxFragmentUniforms,t.maxVertexUniforms);this.uniforms>n&&i.warn("The current rendering context doesn't support more than "+n+" uniforms, but "+this.uniforms+" were defined"),n=t.maxVaryings,this.varyings>n&&i.warn("The current rendering context doesn't support more than "+n+" varyings, but "+this.varyings+" were defined")}updateMaterial(){const e=/\bblend\b/g,t=new Map([[S.FRAGMENT_HEAD,""],[S.FRAGMENT_MAIN_UV,""],[S.FRAGMENT_MAIN_IMAGE,""],[S.VERTEX_HEAD,""],[S.VERTEX_MAIN_SUPPORT,""]]),n=new Map,r=new Map,o=new Map,a=new Set;let s,c=0,l=0,u=0,h=!1,d=!1;for(const e of this.effects)if(e.blendMode.getBlendFunction()===te.SKIP)u|=e.getAttributes()&oe.DEPTH;else if(0!=(u&oe.CONVOLUTION)&&0!=(e.getAttributes()&oe.CONVOLUTION))i.error("Convolution effects cannot be merged",e);else if(u|=e.getAttributes(),s=le("e"+c++,e,t,n,r,o,u),l+=s.varyings.length,h=h||s.transformedUv,d=d||s.readDepth,null!==e.extensions)for(const t of e.extensions)a.add(t);for(const r of n.values())t.set(S.FRAGMENT_HEAD,t.get(S.FRAGMENT_HEAD)+r.getShaderCode().replace(e,"blend"+r.getBlendFunction())+"\n");0!=(u&oe.DEPTH)?(d&&t.set(S.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+t.get(S.FRAGMENT_MAIN_IMAGE)),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,h?(t.set(S.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+t.get(S.FRAGMENT_MAIN_UV)),r.set("UV","transformedUv")):r.set("UV","vUv"),t.forEach(((e,t,n)=>n.set(t,e.trim().replace(/^#/,"\n#")))),this.uniforms=o.size,this.varyings=l,this.skipRendering=0===c,this.needsSwap=!this.skipRendering;const f=this.getFullscreenMaterial();if(f.setShaderParts(t),f.setDefines(r),f.setUniforms(o),f.extensions={},a.size>0)for(const e of a)f.extensions[e]=!0;this.needsUpdate=!1}recompile(e){this.updateMaterial(),void 0!==e&&this.verifyResources(e)}getDepthTexture(){return this.getFullscreenMaterial().uniforms.depthBuffer.value}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.getFullscreenMaterial();n.uniforms.depthBuffer.value=e,n.depthPacking=t,n.needsUpdate=!0;for(const n of this.effects)n.setDepthTexture(e,t)}render(e,t,n,r,i){const o=this.getFullscreenMaterial();o.uniforms.time.value;this.needsUpdate&&this.recompile(e);for(const n of this.effects)n.update(e,t,r);this.skipRendering&&!this.renderToScreen||(o.uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera))}setSize(e,t){this.getFullscreenMaterial().setSize(e,t);for(const n of this.effects)n.setSize(e,t)}initialize(e,t,n){for(const r of this.effects)r.initialize(e,t,n),r.addEventListener("change",(e=>this.handleEvent(e)));if(this.updateMaterial(),this.verifyResources(e),void 0!==n&&n!==r.UnsignedByteType){this.getFullscreenMaterial().defines.FRAMEBUFFER_PRECISION_HIGH="1"}}dispose(){super.dispose();for(const e of this.effects)e.dispose()}handleEvent(e){if("change"===e.type)this.needsUpdate=!0}},he=class extends B{constructor(e){super("LambdaPass",null,null),this.needsSwap=!1,this.f=e}render(e,t,n,r,i){this.f()}},de=class extends B{constructor({width:e=z.AUTO_SIZE,height:t=z.AUTO_SIZE,renderTarget:n,luminanceRange:i,colorOutput:o}={}){super("LuminancePass"),this.setFullscreenMaterial(new L(o,i)),this.needsSwap=!1,this.renderTarget=n,void 0===this.renderTarget&&(this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,format:o?r.RGBAFormat:r.LuminanceFormat,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target",this.renderTarget.texture.generateMipmaps=!1),this.resolution=new z(this,e,t)}get texture(){return this.renderTarget.texture}render(e,t,n,r,i){this.getFullscreenMaterial().uniforms.inputBuffer.value=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}initialize(e,t,n){if(void 0!==n&&n!==r.UnsignedByteType){this.getFullscreenMaterial().defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},fe=class extends B{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new H(!1,!1,!0),this.inverse=!1}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}render(e,t,n,r,i){const o=e.getContext(),a=e.state.buffers,s=this.scene,c=this.camera,l=this.clearPass,u=this.inverse?0:1,h=1-u;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.stencil.setFunc(o.ALWAYS,u,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clear&&(this.renderToScreen?l.render(e,null):(l.render(e,t),l.render(e,n))),this.renderToScreen?(e.setRenderTarget(null),e.render(s,c)):(e.setRenderTarget(t),e.render(s,c),e.setRenderTarget(n),e.render(s,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(o.EQUAL,1,4294967295),a.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.stencil.setLocked(!0)}},pe=class extends B{constructor(e,t,{resolutionScale:n=1,width:i=z.AUTO_SIZE,height:o=z.AUTO_SIZE,renderTarget:a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Y(e,t,new r.MeshNormalMaterial);const s=this.renderPass.getClearPass();s.overrideClearColor=new r.Color(7829503),s.overrideClearAlpha=1,this.renderTarget=a,void 0===this.renderTarget&&(this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.NearestFilter,magFilter:r.NearestFilter,format:r.RGBFormat,stencilBuffer:!1}),this.renderTarget.texture.name="NormalPass.Target"),this.resolution=new z(this,i,o,n)}get texture(){return this.renderTarget.texture}getResolutionScale(){return this.resolutionScale}setResolutionScale(e){this.resolutionScale=e,this.setSize(this.resolution.base.x,this.resolution.base.y)}render(e,t,n,r,i){const o=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,o,o)}setSize(e,t){const n=this.resolution;n.base.set(e,t),this.renderTarget.setSize(n.width,n.height)}},me=class extends B{constructor(e,t="inputBuffer"){super("ShaderPass"),this.setFullscreenMaterial(e),this.uniform=null,this.setInput(t)}setInput(e){const t=this.getFullscreenMaterial();if(this.uniform=null,null!==t){const n=t.uniforms;void 0!==n&&void 0!==n[e]&&(this.uniform=n[e])}}render(e,t,n,r,i){null!==this.uniform&&null!==t&&(this.uniform.value=t.texture),e.setRenderTarget(this.renderToScreen?null:n),e.render(this.scene,this.camera)}initialize(e,t,n){if(void 0!==n&&n!==r.UnsignedByteType){this.getFullscreenMaterial().defines.FRAMEBUFFER_PRECISION_HIGH="1"}}},ge=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:n=!1,alpha:r=!1,multisampling:i=0,frameBufferType:o}={}){this.renderer=e,this.inputBuffer=null,this.outputBuffer=null,null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(t,n,o,i),this.outputBuffer=this.inputBuffer.clone()),this.copyPass=new me(new v),this.alpha=r,this.depthTexture=null,this.passes=[],this.autoRenderToScreen=!0}get multisampling(){return this.inputBuffer instanceof r.WebGLMultisampleRenderTarget?this.inputBuffer.samples:0}set multisampling(e){const t=this.inputBuffer,n=this.multisampling;n>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e):n!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getRenderer(){return this.renderer}replaceRenderer(e,t=!0){const n=this.renderer;if(null!==n&&n!==e){const i=n.getSize(new r.Vector2),o=e.getSize(new r.Vector2),a=n.domElement.parentNode;this.renderer=e,this.renderer.autoClear=!1,i.equals(o)||this.setSize(),t&&null!==a&&(a.removeChild(n.domElement),a.appendChild(e.domElement))}return n}createDepthTexture(){const e=this.depthTexture=new r.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=r.DepthStencilFormat,e.type=r.UnsignedInt248Type):e.type=r.UnsignedIntType,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,n,i){const o=this.renderer,a=o.getContext(),s=o.getDrawingBufferSize(new r.Vector2),c={format:this.alpha||a.getContextAttributes().alpha||n!==r.UnsignedByteType?r.RGBAFormat:r.RGBFormat,minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:t,depthBuffer:e,type:n},l=i>0?new r.WebGLMultisampleRenderTarget(s.width,s.height,c):new r.WebGLRenderTarget(s.width,s.height,c);return i>0&&(l.samples=i),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}addPass(e,t){const n=this.passes,i=this.renderer,o=i.getDrawingBufferSize(new r.Vector2),a=i.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setSize(o.width,o.height),e.initialize(i,a,s),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?n.splice(t,0,e):n.push(e),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of n)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,n=t.indexOf(e);if(-1!==n&&t.splice(n,1).length>0){if(null!==this.depthTexture){const n=(e,t)=>e||t.needsDepthTexture;t.reduce(n,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,n=this.copyPass;let r,i,o,a=this.inputBuffer,s=this.outputBuffer,c=!1;for(const l of this.passes)l.enabled&&(l.render(t,a,s,e,c),l.needsSwap&&(c&&(n.renderToScreen=l.renderToScreen,r=t.getContext(),i=t.state.buffers.stencil,i.setFunc(r.NOTEQUAL,1,4294967295),n.render(t,a,s,e,c),i.setFunc(r.EQUAL,1,4294967295)),o=a,a=s,s=o),l instanceof fe?c=!0:l instanceof V&&(c=!1))}setSize(e,t,n){const i=this.renderer;if(void 0===e||void 0===t){const n=i.getSize(new r.Vector2);e=n.width,t=n.height}else i.setSize(e,t,n);const o=i.getDrawingBufferSize(new r.Vector2),a=this.inputBuffer,s=this.outputBuffer;a.setSize(o.width,o.height),s.setSize(o.width,o.height);for(const e of this.passes)e.setSize(o.width,o.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose()}},ve=class{initialize(e,t,n){}},_e=class{setSize(e,t){}},ye=class extends Set{constructor(e,t=10){super(),this.currentLayer=t,this.exclusive=!1,void 0!==e&&this.set(e)}get layer(){return this.currentLayer}set layer(e){const t=this.currentLayer;for(const n of this)n.layers.disable(t),n.layers.enable(e);this.currentLayer=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return this.exclusive?e.layers.set(this.layer):e.layers.enable(this.layer),super.add(e)}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}},be=class extends ie{constructor({blendFunction:e=te.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:n=.025,resolutionScale:i=.5,intensity:o=1,width:a=z.AUTO_SIZE,height:s=z.AUTO_SIZE,kernelSize:c=g.LARGE}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",{blendFunction:e,uniforms:new Map([["map",new r.Uniform(null)],["intensity",new r.Uniform(o)]])}),this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.renderTarget.texture.generateMipmaps=!1,this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new G({resolutionScale:i,width:a,height:s,kernelSize:c}),this.blurPass.resolution.resizable=this,this.luminancePass=new de({renderTarget:this.renderTarget,colorOutput:!0}),this.luminancePass.resolution=this.resolution,this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=n}get texture(){return this.renderTarget.texture}get luminanceMaterial(){return this.luminancePass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return i.warn(this.name,"The distinction field has been removed, use .threshold and .smoothing instead."),1}set distinction(e){i.warn(this.name,"The distinction field has been removed, use .threshold and .smoothing instead.")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,n){const r=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(e,t,r),this.blurPass.render(e,r,r)):this.blurPass.render(e,t,r)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTarget.setSize(this.resolution.width,this.resolution.height)}initialize(e,t,n){this.blurPass.initialize(e,t,n),t||n!==r.UnsignedByteType||(this.renderTarget.texture.format=r.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n)}},xe=class extends ie{constructor({blendFunction:e=te.NORMAL,focus:t=.5,dof:n=.02,aperture:i=.015,maxBlur:o=1}={}){super("BokehEffect","uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}",{blendFunction:e,attributes:oe.CONVOLUTION|oe.DEPTH,uniforms:new Map([["focus",new r.Uniform(t)],["dof",new r.Uniform(n)],["aperture",new r.Uniform(i)],["maxBlur",new r.Uniform(o)]])})}},we=class extends ie{constructor({blendFunction:e=te.NORMAL,brightness:t=0,contrast:n=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new r.Uniform(t)],["contrast",new r.Uniform(n)]])})}},Ae=class extends ie{constructor(e=te.NORMAL){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}",{blendFunction:e})}},Te=class extends ie{constructor({blendFunction:e=te.NORMAL,bits:t=16}={}){super("ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:e,uniforms:new Map([["factor",new r.Uniform(1)]])}),this.bits=0,this.setBitDepth(t)}getBitDepth(){return this.bits}setBitDepth(e){this.bits=e,this.uniforms.get("factor").value=Math.pow(2,e/3)}},Me=class extends ie{constructor({blendFunction:e=te.NORMAL,offset:t=new r.Vector2(.001,5e-4)}={}){super("ChromaticAberrationEffect","varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;\n#ifdef ALPHA\nvec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);\n#else\ncolor.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;\n#endif\noutputColor=color;}",{vertexShader:"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}",blendFunction:e,attributes:oe.CONVOLUTION,uniforms:new Map([["offset",new r.Uniform(t)]])})}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}initialize(e,t,n){t?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA")}},Ee=class extends ie{constructor({blendFunction:e=te.NORMAL,inverted:t=!1}={}){super("DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:oe.DEPTH}),this.inverted=t}get inverted(){return this.defines.has("INVERTED")}set inverted(e){this.inverted!==e&&(e?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}},Se=class extends ie{constructor(e,{blendFunction:t=te.NORMAL,focusDistance:n=0,focalLength:i=.1,bokehScale:a=1,width:s=z.AUTO_SIZE,height:c=z.AUTO_SIZE}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",{blendFunction:t,attributes:oe.DEPTH,uniforms:new Map([["nearColorBuffer",new r.Uniform(null)],["farColorBuffer",new r.Uniform(null)],["nearCoCBuffer",new r.Uniform(null)],["scale",new r.Uniform(1)]])}),this.camera=e,this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTarget.texture.generateMipmaps=!1,this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.format=r.RGBFormat,this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new me(new u(e));const h=this.circleOfConfusionMaterial;h.uniforms.focusDistance.value=n,h.uniforms.focalLength.value=i,this.blurPass=new G({width:s,height:c,kernelSize:g.MEDIUM}),this.blurPass.resolution.resizable=this,this.maskPass=new me(new P(this.renderTargetCoC.texture));const d=this.maskPass.getFullscreenMaterial();d.maskFunction=C.MULTIPLY,d.colorChannel=o.GREEN,this.bokehNearBasePass=new me(new l(!1,!0)),this.bokehNearFillPass=new me(new l(!0,!0)),this.bokehFarBasePass=new me(new l(!1,!1)),this.bokehFarFillPass=new me(new l(!0,!1)),this.bokehScale=a,this.target=null}get circleOfConfusionMaterial(){return this.cocPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].map((e=>e.getFullscreenMaterial().uniforms.scale)).forEach((t=>{t.value=e})),this.maskPass.getFullscreenMaterial().uniforms.strength.value=e,this.uniforms.get("scale").value=e}calculateFocusDistance(e){const t=this.camera,n=t.far-t.near,r=t.position.distanceTo(e);return Math.min(Math.max(r/n,0),1)}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.circleOfConfusionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){const r=this.renderTarget,i=this.renderTargetCoC,o=this.renderTargetCoCBlurred,a=this.renderTargetMasked,s=this.bokehFarBasePass,c=this.bokehFarFillPass,l=s.getFullscreenMaterial().uniforms,u=c.getFullscreenMaterial().uniforms,h=this.bokehNearBasePass,d=this.bokehNearFillPass,f=h.getFullscreenMaterial().uniforms,p=d.getFullscreenMaterial().uniforms;if(null!==this.target){const e=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.uniforms.focusDistance.value=e}this.cocPass.render(e,null,i),this.blurPass.render(e,i,o),this.maskPass.render(e,t,a),l.cocBuffer.value=i.texture,u.cocBuffer.value=i.texture,s.render(e,a,r),c.render(e,r,this.renderTargetFar),f.cocBuffer.value=o.texture,p.cocBuffer.value=o.texture,h.render(e,t,r),d.render(e,r,this.renderTargetNear)}setSize(e,t){const n=this.resolution;let r=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];r.push(this.renderTargetCoC,this.renderTargetMasked),r.forEach((n=>n.setSize(e,t)));const i=n.width,o=n.height;r=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred],r.forEach((e=>e.setSize(i,o)));[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((e=>e.getFullscreenMaterial().setTexelSize(1/i,1/o)))}initialize(e,t,n){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((r=>r.initialize(e,t,n))),this.blurPass.initialize(e,t,r.UnsignedByteType),t||n!==r.UnsignedByteType||(this.renderTargetNear.texture.type=r.RGBFormat),void 0!==n&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n)}},Re=class extends ie{constructor({blendFunction:e=te.NORMAL,angle:t=.5*Math.PI,scale:n=1}={}){super("DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["angle",new r.Uniform(new r.Vector2)],["scale",new r.Uniform(n)]])}),this.setAngle(t)}setAngle(e){this.uniforms.get("angle").value.set(Math.sin(e),Math.cos(e))}},Le=class extends ie{constructor({blendFunction:e=te.NORMAL,gamma:t=2}={}){super("GammaCorrectionEffect","uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}",{blendFunction:e,uniforms:new Map([["gamma",new r.Uniform(t)]])})}};var Pe=class extends r.DataTexture{constructor(e,t,n=r.LuminanceFormat,o=r.UnsignedByteType){super(function(e,t,n){const o=new Map([[r.LuminanceFormat,1],[r.RedFormat,1],[r.RGFormat,2],[r.RGBFormat,3],[r.RGBAFormat,4]]);let a;if(o.has(t)||i.error("Invalid noise texture format"),n===r.UnsignedByteType){a=new Uint8Array(e*o.get(t));for(let e=0,t=a.length;e<t;++e)a[e]=255*Math.random()}else{a=new Float32Array(e*o.get(t));for(let e=0,t=a.length;e<t;++e)a[e]=Math.random()}return a}(e*t,n,o),e,t,n,o)}},Ce="Glitch.Generated";function Fe(e,t){return e+Math.random()*(t-e)}var De=class extends ie{constructor({blendFunction:e=te.NORMAL,chromaticAberrationOffset:t=null,delay:n=new r.Vector2(1.5,3.5),duration:i=new r.Vector2(.6,1),strength:o=new r.Vector2(.3,1),columns:a=.05,ratio:s=.85,perturbationMap:c=null,dtSize:l=64}={}){super("GlitchEffect","uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seed;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seed.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seed.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seed*(random*0.2);}}",{blendFunction:e,uniforms:new Map([["perturbationMap",new r.Uniform(null)],["columns",new r.Uniform(a)],["active",new r.Uniform(!1)],["random",new r.Uniform(1)],["seed",new r.Uniform(new r.Vector2)],["distortion",new r.Uniform(new r.Vector2)]])}),this.setPerturbationMap(null===c?this.generatePerturbationMap(l):c),this.delay=n,this.duration=i,this.breakPoint=new r.Vector2(Fe(this.delay.x,this.delay.y),Fe(this.duration.x,this.duration.y)),this.time=0,this.seed=this.uniforms.get("seed").value,this.distortion=this.uniforms.get("distortion").value,this.mode=Ue.SPORADIC,this.strength=o,this.ratio=s,this.chromaticAberrationOffset=t}get active(){return this.uniforms.get("active").value}getPerturbationMap(){return this.uniforms.get("perturbationMap").value}setPerturbationMap(e){const t=this.getPerturbationMap();null!==t&&t.name===Ce&&t.dispose(),e.minFilter=e.magFilter=r.NearestFilter,e.wrapS=e.wrapT=r.RepeatWrapping,e.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=e}generatePerturbationMap(e=64){const t=new Pe(e,e,r.RGBFormat);return t.name=Ce,t}update(e,t,n){const r=this.mode,i=this.breakPoint,o=this.chromaticAberrationOffset,a=this.strength;let s,c=this.time,l=!1,u=0,h=0;r!==Ue.DISABLED&&(r===Ue.SPORADIC&&(c+=n,s=c>i.x,c>=i.x+i.y&&(i.set(Fe(this.delay.x,this.delay.y),Fe(this.duration.x,this.duration.y)),c=0)),u=Math.random(),this.uniforms.get("random").value=u,s&&u>this.ratio||r===Ue.CONSTANT_WILD?(l=!0,u*=.03*a.y,h=Fe(-Math.PI,Math.PI),this.seed.set(Fe(-a.y,a.y),Fe(-a.y,a.y)),this.distortion.set(Fe(0,1),Fe(0,1))):(s||r===Ue.CONSTANT_MILD)&&(l=!0,u*=.03*a.x,h=Fe(-Math.PI,Math.PI),this.seed.set(Fe(-a.x,a.x),Fe(-a.x,a.x)),this.distortion.set(Fe(0,1),Fe(0,1))),this.time=c),null!==o&&(l?o.set(Math.cos(h),Math.sin(h)).multiplyScalar(u):o.set(0,0)),this.uniforms.get("active").value=l}},Ue={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},Oe=new r.Vector3,ke=new r.Matrix4,Ie=class extends ie{constructor(e,t,{blendFunction:n=te.SCREEN,samples:i=60,density:o=.96,decay:a=.9,weight:s=.4,exposure:c=.6,clampMax:l=1,resolutionScale:u=.5,width:h=z.AUTO_SIZE,height:d=z.AUTO_SIZE,kernelSize:f=g.SMALL,blur:p=!0}={}){super("GodRaysEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}",{blendFunction:n,attributes:oe.DEPTH,uniforms:new Map([["map",new r.Uniform(null)]])}),this.camera=e,this.lightSource=t,this.lightSource.material.depthWrite=!1,this.lightSource.material.transparent=!0,this.lightScene=new r.Scene,this.screenPosition=new r.Vector2,this.renderTargetA=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=this.renderTargetA.clone(),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthBuffer=!0,this.renderTargetLight.depthTexture=new r.DepthTexture,this.renderPassLight=new Y(this.lightScene,e),this.renderPassLight.getClearPass().overrideClearColor=new r.Color(0),this.clearPass=new H(!0,!1,!1),this.clearPass.overrideClearColor=new r.Color(0),this.blurPass=new G({resolutionScale:u,width:h,height:d,kernelSize:f}),this.blurPass.resolution.resizable=this,this.depthMaskPass=new me(new w);this.depthMaskPass.getFullscreenMaterial().uniforms.depthBuffer1.value=this.renderTargetLight.depthTexture,this.godRaysPass=new me(new R(this.screenPosition));const m=this.godRaysPass.getFullscreenMaterial();m.uniforms.density.value=o,m.uniforms.decay.value=a,m.uniforms.weight.value=s,m.uniforms.exposure.value=c,m.uniforms.clampMax.value=l,this.samples=i,this.blur=p}get texture(){return this.renderTargetB.texture}get godRaysMaterial(){return this.godRaysPass.getFullscreenMaterial()}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get dithering(){return this.godRaysMaterial.dithering}set dithering(e){const t=this.godRaysMaterial;t.dithering=e,t.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}get samples(){return this.godRaysMaterial.samples}set samples(e){this.godRaysMaterial.samples=e}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.depthMaskPass.getFullscreenMaterial();n.uniforms.depthBuffer0.value=e,n.defines.DEPTH_PACKING_0=t.toFixed(0),n.needsUpdate=!0}update(e,t,n){const r=this.lightSource,i=r.parent,o=r.matrixAutoUpdate,a=this.renderTargetA,s=this.renderTargetLight;r.material.depthWrite=!0,r.matrixAutoUpdate=!1,r.updateWorldMatrix(!0,!1),null!==i&&(o||ke.copy(r.matrix),r.matrix.copy(r.matrixWorld)),this.lightScene.add(r),this.renderPassLight.render(e,s),this.clearPass.render(e,a),this.depthMaskPass.render(e,s,a),r.material.depthWrite=!1,r.matrixAutoUpdate=o,null!==i&&(o||r.matrix.copy(ke),i.add(r)),Oe.setFromMatrixPosition(r.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max(.5*(Oe.x+1),-1),2),Math.min(Math.max(.5*(Oe.y+1),-1),2)),this.blur&&this.blurPass.render(e,a,a),this.godRaysPass.render(e,a,this.renderTargetB)}setSize(e,t){this.blurPass.setSize(e,t),this.renderPassLight.setSize(e,t),this.depthMaskPass.setSize(e,t),this.godRaysPass.setSize(e,t);const n=this.resolution.width,r=this.resolution.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.renderTargetLight.setSize(n,r)}initialize(e,t,n){this.blurPass.initialize(e,t,n),this.renderPassLight.initialize(e,t,n),this.depthMaskPass.initialize(e,t,n),this.godRaysPass.initialize(e,t,n),t||n!==r.UnsignedByteType||(this.renderTargetA.texture.format=r.RGBFormat,this.renderTargetB.texture.format=r.RGBFormat,this.renderTargetLight.texture.format=r.RGBFormat),void 0!==n&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,this.renderTargetLight.texture.type=n)}},Be=class extends ie{constructor({blendFunction:e=te.OVERLAY,scale:t=1,lineWidth:n=0}={}){super("GridEffect","uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",{blendFunction:e,uniforms:new Map([["scale",new r.Uniform(new r.Vector2)],["lineWidth",new r.Uniform(n)]])}),this.resolution=new r.Vector2,this.scale=Math.max(t,1e-6),this.lineWidth=Math.max(n,0)}getScale(){return this.scale}setScale(e){this.scale=e,this.setSize(this.resolution.x,this.resolution.y)}getLineWidth(){return this.lineWidth}setLineWidth(e){this.lineWidth=e,this.setSize(this.resolution.x,this.resolution.y)}setSize(e,t){this.resolution.set(e,t);const n=e/t,r=this.scale*(.125*t);this.uniforms.get("scale").value.set(n*r,r),this.uniforms.get("lineWidth").value=r/t+this.lineWidth}},Ne=class extends ie{constructor({blendFunction:e=te.NORMAL,hue:t=0,saturation:n=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new r.Uniform(new r.Vector3)],["saturation",new r.Uniform(n)]])}),this.setHue(t)}setHue(e){const t=Math.sin(e),n=Math.cos(e);this.uniforms.get("hue").value.set(2*n,-Math.sqrt(3)*t-n,Math.sqrt(3)*t-n).addScalar(1).divideScalar(3)}};function Ze(e,t,n){const r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),i=r.getContext("2d");if(r.width=e,r.height=t,n instanceof Image)i.drawImage(n,0,0);else{const r=i.createImageData(e,t);r.data.set(n),i.putImageData(r,0,0)}return r}var je=class{constructor(e=0,t=0,n=null){this.width=e,this.height=t,this.data=n}toCanvas(){return"undefined"==typeof document?null:Ze(this.width,this.height,this.data)}static from(e){const{width:t,height:n}=e;let r;if(e instanceof Image){const i=Ze(t,n,e);if(null!==i){r=i.getContext("2d").getImageData(0,0,t,n).data}}else r=e.data;return new je(t,n,r)}},ze={SCALE_UP:"lut.scaleup"},Ge=new r.Color,Ve=class extends r.DataTexture3D{constructor(e,t){super(e,t,t,t),this.type=r.FloatType,this.format=r.RGBFormat,this.encoding=r.LinearEncoding,this.minFilter=r.LinearFilter,this.magFilter=r.LinearFilter,this.wrapS=r.ClampToEdgeWrapping,this.wrapT=r.ClampToEdgeWrapping,this.wrapR=r.ClampToEdgeWrapping,this.unpackAlignment=1,this.domainMin=new r.Vector3(0,0,0),this.domainMax=new r.Vector3(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(e,t=!0){const n=this.image;let r;if(e<=n.width)r=Promise.reject(new Error("The target size must be greater than the current size"));else{const i=URL.createObjectURL(new Blob(['(()=>{var q=Math.pow;var _={SCALE_UP:"lut.scaleup"};var k=[new Float32Array(3),new Float32Array(3)],t=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],U=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function L(a,n,r,m){let h=r[0]-n[0],e=r[1]-n[1],s=r[2]-n[2],l=a[0]-n[0],w=a[1]-n[1],c=a[2]-n[2],y=e*c-s*w,A=s*l-h*c,g=h*w-e*l,p=Math.sqrt(y*y+A*A+g*g),V=p*.5,F=y/p,f=A/p,i=g/p,u=-(a[0]*F+a[1]*f+a[2]*i),M=m[0]*F+m[1]*f+m[2]*i;return Math.abs(M+u)*V/3}function X(a,n,r,m,h,e){let s=(r+m*n+h*n*n)*3;e[0]=a[s+0],e[1]=a[s+1],e[2]=a[s+2]}function j(a,n,r,m,h,e){let s=r*(n-1),l=m*(n-1),w=h*(n-1),c=Math.floor(s),y=Math.floor(l),A=Math.floor(w),g=Math.ceil(s),p=Math.ceil(l),V=Math.ceil(w),F=s-c,f=l-y,i=w-A;if(c===s&&y===l&&A===w)X(a,n,s,l,w,e);else{let u;F>=f&&f>=i?u=U[0]:F>=i&&i>=f?u=U[1]:i>=F&&F>=f?u=U[2]:f>=F&&F>=i?u=U[3]:f>=i&&i>=F?u=U[4]:i>=f&&f>=F&&(u=U[5]);let[M,x,P,T]=u,d=k[0];d[0]=F,d[1]=f,d[2]=i;let o=k[1],Y=g-c,Z=p-y,b=V-A;o[0]=Y*M[0]+c,o[1]=Z*M[1]+y,o[2]=b*M[2]+A,X(a,n,o[0],o[1],o[2],t[0]),o[0]=Y*x[0]+c,o[1]=Z*x[1]+y,o[2]=b*x[2]+A,X(a,n,o[0],o[1],o[2],t[1]),o[0]=Y*P[0]+c,o[1]=Z*P[1]+y,o[2]=b*P[2]+A,X(a,n,o[0],o[1],o[2],t[2]),o[0]=Y*T[0]+c,o[1]=Z*T[1]+y,o[2]=b*T[2]+A,X(a,n,o[0],o[1],o[2],t[3]);let v=L(x,P,T,d)*6,S=L(M,P,T,d)*6,C=L(M,x,T,d)*6,E=L(M,x,P,d)*6;t[0][0]*=v,t[0][1]*=v,t[0][2]*=v,t[1][0]*=S,t[1][1]*=S,t[1][2]*=S,t[2][0]*=C,t[2][1]*=C,t[2][2]*=C,t[3][0]*=E,t[3][1]*=E,t[3][2]*=E,e[0]=t[0][0]+t[1][0]+t[2][0]+t[3][0],e[1]=t[0][1]+t[1][1]+t[2][1]+t[3][1],e[2]=t[0][2]+t[1][2]+t[2][2]+t[3][2]}}var O=class{static expand(n,r){let m=Math.cbrt(n.length/3),h=new Float32Array(3),e=new n.constructor(q(r,3)*3),s=1/(r-1);for(let l=0;l<r;++l)for(let w=0;w<r;++w)for(let c=0;c<r;++c){let y=c*s,A=w*s,g=l*s,p=Math.round(c+w*r+l*r*r)*3;j(n,m,y,A,g,h),e[p+0]=h[0],e[p+1]=h[1],e[p+2]=h[2]}return e}};self.addEventListener("message",a=>{let n=a.data,r=n.data;switch(n.operation){case _.SCALE_UP:r=O.expand(r,n.size);break}postMessage(r,[r.buffer]),close()});})();\n'],{type:"text/javascript"})),o=new Worker(i);r=new Promise(((r,a)=>{o.addEventListener("error",(e=>a(e.error))),o.addEventListener("message",(t=>{const n=new Ve(t.data,e);n.encoding=this.encoding,n.type=this.type,n.name=this.name,URL.revokeObjectURL(i),r(n)}));const s=t?[n.data.buffer]:[];o.postMessage({operation:ze.SCALE_UP,data:n.data,size:e},s)}))}return r}applyLUT(e){const t=this.image,n=e.image,o=Math.min(t.width,t.height,t.depth);if(o!==Math.min(n.width,n.height,n.depth))i.error("Size mismatch");else if(e.type!==r.FloatType||this.type!==r.FloatType)i.error("Both LUTs must be FloatType textures");else if(e.format!==r.RGBFormat||this.format!==r.RGBFormat)i.error("Both LUTs must be RGB textures");else{const e=t.data,r=n.data,i=o,a=i-1;for(let t=0,n=i**3;t<n;++t){const n=3*t,o=e[n+0]*a,s=e[n+1]*a,c=e[n+2]*a,l=3*Math.round(o+s*i+c*i*i);e[n+0]=r[l+0],e[n+1]=r[l+1],e[n+2]=r[l+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===r.FloatType){const e=this.image.data,t=new Uint8Array(e.length);for(let n=0,r=e.length;n<r;++n)t[n]=255*e[n];this.image.data=t,this.type=r.UnsignedByteType,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===r.UnsignedByteType){const e=this.image.data,t=new Float32Array(e.length);for(let n=0,r=e.length;n<r;++n)t[n]=e[n]/255;this.image.data=t,this.type=r.FloatType,this.needsUpdate=!0}return this}convertLinearToSRGB(){const e=this.image.data;if(this.type===r.FloatType){const t=this.format===r.RGBAFormat?4:3;for(let n=0,r=e.length;n<r;n+=t)Ge.fromArray(e,n).convertLinearToSRGB().toArray(e,n);this.encoding=r.sRGBEncoding,this.needsUpdate=!0}else i.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===r.FloatType){const t=this.format===r.RGBAFormat?4:3;for(let n=0,r=e.length;n<r;n+=t)Ge.fromArray(e,n).convertSRGBToLinear().toArray(e,n);this.encoding=r.LinearEncoding,this.needsUpdate=!0}else i.error("Color space conversion requires FloatType data");return this}convertToRGBA(){if(this.format===r.RGBFormat){const e=this.image.width,t=this.image.data,n=new t.constructor(e**3*4),i=this.type===r.FloatType?1:255;for(let e=0,r=0,o=t.length;e<o;e+=3,r+=4)n[r+0]=t[e+0],n[r+1]=t[e+1],n[r+2]=t[e+2],n[r+3]=i;this.image.data=n,this.format=r.RGBAFormat,this.needsUpdate=!0}return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,n=new r.DataTexture(this.image.data,e,t);return n.name=this.name,n.type=this.type,n.format=this.format,n.encoding=this.encoding,n.minFilter=r.LinearFilter,n.magFilter=r.LinearFilter,n.wrapS=this.wrapS,n.wrapT=this.wrapT,n.generateMipmaps=!1,n}static from(e){const t=e.image,{width:n,height:r}=t,i=Math.min(n,r);let o;if(t instanceof Image){o=je.from(t).data;const e=new Uint8Array(i**3*3);if(n>r)for(let t=0;t<i;++t)for(let n=0;n<i;++n)for(let r=0;r<i;++r){const a=4*(r+t*i+n*i*i),s=3*(r+n*i+t*i*i);e[s+0]=o[a+0],e[s+1]=o[a+1],e[s+2]=o[a+2]}else for(let t=0,n=i**3;t<n;++t){const n=4*t,r=3*t;e[r+0]=o[n+0],e[r+1]=o[n+1],e[r+2]=o[n+2]}o=e}else o=t.data.slice();const a=new Ve(o,i);return a.type=e.type,a.encoding=e.encoding,a.name=e.name,a}static createNeutral(e){const t=new Float32Array(e**3*3),n=1/(e-1);for(let r=0;r<e;++r)for(let i=0;i<e;++i)for(let o=0;o<e;++o){const a=3*(r+i*e+o*e*e);t[a+0]=r*n,t[a+1]=i*n,t[a+2]=o*n}const r=new Ve(t,e);return r.name="neutral",r}},We=class extends ie{constructor(e,{blendFunction:t=te.NORMAL,tetrahedralInterpolation:n=!1}={}){super("LUTEffect","uniform vec3 scale;uniform vec3 offset;\n#ifdef CUSTOM_INPUT_DOMAIN\nuniform vec3 domainMin;uniform vec3 domainMax;\n#endif\n#ifdef LUT_3D\n#ifdef LUT_PRECISION_HIGH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler3D lut;\n#else\nuniform mediump sampler3D lut;\n#endif\n#else\nuniform lowp sampler3D lut;\n#endif\nvec4 applyLUT(const in vec3 rgb){\n#ifdef TETRAHEDRAL_INTERPOLATION\nvec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);\n#else\nreturn texture(lut,rgb);\n#endif\n}\n#else\n#ifdef LUT_PRECISION_HIGH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D lut;\n#else\nuniform mediump sampler2D lut;\n#endif\n#else\nuniform lowp sampler2D lut;\n#endif\nvec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);\n#ifdef LUT_STRIP_HORIZONTAL\nfloat xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);\n#else\nfloat yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);\n#endif\nvec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=linearToInputTexel(inputColor).rgb;\n#ifdef CUSTOM_INPUT_DOMAIN\nif(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=texelToLinear(applyLUT(scale*c+offset)).rgb;}else{c=inputColor.rgb;}\n#else\n#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)\nc=clamp(c,0.0,1.0);\n#endif\nc=texelToLinear(applyLUT(scale*c+offset)).rgb;\n#endif\noutputColor=vec4(c,inputColor.a);}",{blendFunction:t,uniforms:new Map([["lut",new r.Uniform(null)],["scale",new r.Uniform(new r.Vector3)],["offset",new r.Uniform(new r.Vector3)],["domainMin",new r.Uniform(null)],["domainMax",new r.Uniform(null)]])}),this.tetrahedralInterpolation=n,this.inputEncoding=r.sRGBEncoding,this.outputEncoding=this.inputEncoding,this.setInputEncoding(r.sRGBEncoding),this.setLUT(e)}getOutputEncoding(){return this.outputEncoding}getInputEncoding(){return this.inputEncoding}setInputEncoding(e){const t=this.defines,n=this.getLUT();switch(e){case r.sRGBEncoding:t.set("linearToInputTexel(texel)","LinearTosRGB(texel)");break;case r.LinearEncoding:t.set("linearToInputTexel(texel)","texel");break;default:i.error("Unsupported input encoding:",e)}if(null!==n)switch(this.outputEncoding=n.encoding===r.LinearEncoding?e:n.encoding,this.outputEncoding){case r.sRGBEncoding:t.set("texelToLinear(texel)","sRGBToLinear(texel)");break;case r.LinearEncoding:t.set("texelToLinear(texel)","texel");break;default:i.error("Unsupported LUT encoding:",n.encoding)}this.inputEncoding!==e&&(this.inputEncoding=e,this.setChanged())}getLUT(){return this.uniforms.get("lut").value}setLUT(e){const t=this.defines,n=this.uniforms;if(this.getLUT()!==e){const i=e.image;if(t.clear(),t.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),t.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),t.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),n.get("lut").value=e,n.get("domainMin").value=null,n.get("domainMax").value=null,e.type!==r.FloatType&&e.type!==r.HalfFloatType||t.set("LUT_PRECISION_HIGH","1"),i.width>i.height?t.set("LUT_STRIP_HORIZONTAL","1"):e instanceof r.DataTexture3D&&t.set("LUT_3D","1"),e instanceof Ve){const r=e.domainMin,i=e.domainMax;0===r.x&&0===r.y&&0===r.z&&1===i.x&&1===i.y&&1===i.z||(t.set("CUSTOM_INPUT_DOMAIN","1"),n.get("domainMin").value=r.clone(),n.get("domainMax").value=i.clone())}this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setInputEncoding(this.inputEncoding),this.setChanged()}}updateScaleOffset(){const e=this.getLUT(),t=Math.min(e.image.width,e.image.height),n=this.uniforms.get("scale").value,r=this.uniforms.get("offset").value;if(this.defines.has("TETRAHEDRAL_INTERPOLATION"))if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const i=e.domainMax.clone().sub(e.domainMin);n.setScalar(t-1).divide(i),r.copy(e.domainMin).negate().multiply(n)}else n.setScalar(t-1),r.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const i=e.domainMax.clone().sub(e.domainMin).multiplyScalar(t);n.setScalar(t-1).divide(i),r.copy(e.domainMin).negate().multiply(n).addScalar(1/(2*t))}else n.setScalar((t-1)/t),r.setScalar(1/(2*t))}configureTetrahedralInterpolation(){const e=this.getLUT();e.minFilter=r.LinearFilter,e.magFilter=r.LinearFilter,this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.tetrahedralInterpolation&&null!==e&&(e instanceof r.DataTexture3D?(this.defines.set("TETRAHEDRAL_INTERPOLATION","1"),e.minFilter=r.NearestFilter,e.magFilter=r.NearestFilter):i.warn("Tetrahedral interpolation requires a 3D texture")),e.needsUpdate=!0}setTetrahedralInterpolationEnabled(e){this.tetrahedralInterpolation=e,this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}},He=class extends ie{constructor({blendFunction:e=te.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n  vec3 noise=vec3(rand(uv*time));\n  #ifdef PREMULTIPLY\n  outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n  #else\n  outputColor=vec4(noise,inputColor.a);\n  #endif\n}\n",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},Xe=class extends ie{constructor(e,t,{blendFunction:n=te.SCREEN,patternTexture:i=null,edgeStrength:o=1,pulseSpeed:a=0,visibleEdgeColor:s=16777215,hiddenEdgeColor:c=2230538,resolutionScale:l=.5,width:u=z.AUTO_SIZE,height:h=z.AUTO_SIZE,kernelSize:d=g.VERY_SMALL,blur:f=!1,xRay:p=!0}={}){super("OutlineEffect","uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)? 1.0 : hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",{uniforms:new Map([["maskTexture",new r.Uniform(null)],["edgeTexture",new r.Uniform(null)],["edgeStrength",new r.Uniform(o)],["visibleEdgeColor",new r.Uniform(new r.Color(s))],["hiddenEdgeColor",new r.Uniform(new r.Color(c))],["pulse",new r.Uniform(1)],["patternScale",new r.Uniform(1)],["patternTexture",new r.Uniform(null)]])}),this.blendMode.addEventListener("change",(e=>{this.blendMode.getBlendFunction()===te.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()})),this.blendMode.setBlendFunction(n),this.setPatternTexture(i),this.xRay=p,this.scene=e,this.camera=t,this.renderTargetMask=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,format:r.RGBFormat}),this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=this.renderTargetMask.clone(),this.renderTargetOutline.texture.name="Outline.Edges",this.renderTargetOutline.depthBuffer=!1,this.renderTargetBlurredOutline=this.renderTargetOutline.clone(),this.renderTargetBlurredOutline.texture.name="Outline.BlurredEdges",this.clearPass=new H,this.clearPass.overrideClearColor=new r.Color(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new K(e,t),this.maskPass=new Y(e,t,new _(this.depthPass.texture,t));const m=this.maskPass.getClearPass();m.overrideClearColor=new r.Color(16777215),m.overrideClearAlpha=1,this.blurPass=new G({resolutionScale:l,width:u,height:h,kernelSize:d}),this.blurPass.resolution.resizable=this,this.blur=f,this.outlinePass=new me(new F);this.outlinePass.getFullscreenMaterial().uniforms.inputBuffer.value=this.renderTargetMask.texture,this.time=0,this.selection=new ye,this.pulseSpeed=a}get resolution(){return this.blurPass.resolution}get width(){return this.resolution.width}set width(e){this.resolution.width=e}get height(){return this.resolution.height}set height(e){this.resolution.height=e}get selectionLayer(){return this.selection.layer}set selectionLayer(e){this.selection.layer=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e,this.uniforms.get("edgeTexture").value=e?this.renderTargetBlurredOutline.texture:this.renderTargetOutline.texture}get xRay(){return this.defines.has("X_RAY")}set xRay(e){this.xRay!==e&&(e?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}setPatternTexture(e){null!==e?(e.wrapS=e.wrapT=r.RepeatWrapping,this.defines.set("USE_PATTERN","1"),this.uniforms.get("patternTexture").value=e,this.setVertexShader("uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}")):(this.defines.delete("USE_PATTERN"),this.uniforms.get("patternTexture").value=null,this.setVertexShader(null)),this.setChanged()}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}setSelection(e){return this.selection.set(e),this}clearSelection(){return this.selection.clear(),this}selectObject(e){return this.selection.add(e),this}deselectObject(e){return this.selection.delete(e),this}update(e,t,n){const r=this.scene,i=this.camera,o=this.selection,a=this.uniforms.get("pulse"),s=r.background,c=i.layers.mask;o.size>0?(r.background=null,a.value=1,this.pulseSpeed>0&&(a.value=.375*Math.cos(this.time*this.pulseSpeed*10)+.625),this.time+=n,o.setVisible(!1),this.depthPass.render(e),o.setVisible(!0),i.layers.set(o.layer),this.maskPass.render(e,this.renderTargetMask),i.layers.mask=c,r.background=s,this.outlinePass.render(e,null,this.renderTargetOutline),this.blur&&this.blurPass.render(e,this.renderTargetOutline,this.renderTargetBlurredOutline)):this.time>0&&(this.clearPass.render(e,this.renderTargetMask),this.time=0)}setSize(e,t){this.blurPass.setSize(e,t),this.renderTargetMask.setSize(e,t);const n=this.resolution.width,r=this.resolution.height;this.depthPass.setSize(n,r),this.renderTargetOutline.setSize(n,r),this.renderTargetBlurredOutline.setSize(n,r),this.outlinePass.getFullscreenMaterial().setTexelSize(1/n,1/r)}initialize(e,t,n){this.blurPass.initialize(e,t,r.UnsignedByteType),void 0!==n&&(this.depthPass.initialize(e,t,n),this.maskPass.initialize(e,t,n),this.outlinePass.initialize(e,t,n))}},Qe=class extends ie{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",{uniforms:new Map([["active",new r.Uniform(!1)],["d",new r.Uniform(new r.Vector2)]])}),this.resolution=new r.Vector2,this.granularity=e}getGranularity(){return this.granularity}setGranularity(e){(e=Math.floor(e))%2>0&&(e+=1);const t=this.uniforms;t.get("active").value=e>0,t.get("d").value.set(e,e).divide(this.resolution),this.granularity=e}setSize(e,t){this.resolution.set(e,t),this.setGranularity(this.granularity)}},Ye=class extends ie{constructor({blendFunction:e=te.NORMAL,focus:t=1,focalLength:n=24,fStop:i=.9,luminanceThreshold:o=.5,luminanceGain:a=2,bias:s=.5,fringe:c=.7,maxBlur:l=1,rings:u=3,samples:h=2,showFocus:d=!1,manualDoF:f=!1,pentagon:p=!1}={}){super("RealisticBokehEffect","uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\n#ifdef MANUAL_DOF\nuniform vec4 dof;\n#endif\n#ifdef PENTAGON\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\n#endif\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\n#ifdef PENTAGON\nfloat p=pentagon(wh);\n#else\nfloat p=1.0;\n#endif\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\n#ifdef MANUAL_DOF\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)? farDoF : nearDoF;\n#else\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\n#endif\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\n#ifdef SHOW_FOCUS\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:oe.CONVOLUTION|oe.DEPTH,uniforms:new Map([["focus",new r.Uniform(t)],["focalLength",new r.Uniform(n)],["fStop",new r.Uniform(i)],["luminanceThreshold",new r.Uniform(o)],["luminanceGain",new r.Uniform(a)],["bias",new r.Uniform(s)],["fringe",new r.Uniform(c)],["maxBlur",new r.Uniform(l)],["dof",new r.Uniform(null)]])}),this.rings=u,this.samples=h,this.showFocus=d,this.manualDoF=f,this.pentagon=p}get rings(){return Number.parseInt(this.defines.get("RINGS_INT"))}set rings(e){const t=Math.floor(e);this.defines.set("RINGS_INT",t.toFixed(0)),this.defines.set("RINGS_FLOAT",t.toFixed(1)),this.setChanged()}get samples(){return Number.parseInt(this.defines.get("SAMPLES_INT"))}set samples(e){const t=Math.floor(e);this.defines.set("SAMPLES_INT",t.toFixed(0)),this.defines.set("SAMPLES_FLOAT",t.toFixed(1)),this.setChanged()}get showFocus(){return this.defines.has("SHOW_FOCUS")}set showFocus(e){this.showFocus!==e&&(e?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS"),this.setChanged())}get manualDoF(){return this.defines.has("MANUAL_DOF")}set manualDoF(e){this.manualDoF!==e&&(e?(this.defines.set("MANUAL_DOF","1"),this.uniforms.get("dof").value=new r.Vector4(.2,1,.2,2)):(this.defines.delete("MANUAL_DOF"),this.uniforms.get("dof").value=null),this.setChanged())}get pentagon(){return this.defines.has("PENTAGON")}set pentagon(e){this.pentagon!==e&&(e?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON"),this.setChanged())}},Ke=class extends ie{constructor({blendFunction:e=te.OVERLAY,density:t=1.25}={}){super("ScanlineEffect","uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}",{blendFunction:e,uniforms:new Map([["count",new r.Uniform(0)]])}),this.resolution=new r.Vector2,this.density=t}getDensity(){return this.density}setDensity(e){this.density=e,this.setSize(this.resolution.x,this.resolution.y)}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=Math.round(t*this.density)}},qe=.5*Math.PI,Je=new r.Vector3,$e=new r.Vector3,et=class extends ie{constructor(e,t=new r.Vector3,{speed:n=2,maxRadius:i=1,waveSize:o=.2,amplitude:a=.05}={}){super("ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new r.Uniform(!1)],["center",new r.Uniform(new r.Vector2(.5,.5))],["cameraDistance",new r.Uniform(1)],["size",new r.Uniform(1)],["radius",new r.Uniform(-o)],["maxRadius",new r.Uniform(i)],["waveSize",new r.Uniform(o)],["amplitude",new r.Uniform(a)]])}),this.camera=e,this.epicenter=t,this.screenPosition=this.uniforms.get("center").value,this.speed=n,this.time=0,this.active=!1}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(e,t,n){const r=this.epicenter,i=this.camera,o=this.uniforms,a=o.get("active");if(this.active){const e=o.get("waveSize").value;i.getWorldDirection(Je),$e.copy(i.position).sub(r),a.value=Je.angleTo($e)>qe,a.value&&(o.get("cameraDistance").value=i.position.distanceTo(r),Je.copy(r).project(i),this.screenPosition.set(.5*(Je.x+1),.5*(Je.y+1))),this.time+=n*this.speed;const t=this.time-e;o.get("radius").value=t,t>=2*(o.get("maxRadius").value+e)&&(this.active=!1,a.value=!1)}}},tt=class extends be{constructor(e,t,n){super(n),this.setAttributes(this.getAttributes()|oe.DEPTH),this.camera=t,this.depthPass=new K(e,t),this.clearPass=new H(!0,!1,!1),this.clearPass.overrideClearColor=new r.Color(0),this.depthMaskPass=new me(new w);const i=this.depthMaskMaterial;i.uniforms.depthBuffer1.value=this.depthPass.texture,i.defines.DEPTH_PACKING_1=r.RGBADepthPacking.toFixed(0),i.setDepthMode(r.EqualDepth),this.renderTargetMasked=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.renderTargetMasked.texture.generateMipmaps=!1,this.selection=new ye}get depthMaskMaterial(){return this.depthMaskPass.getFullscreenMaterial()}get inverted(){return this.depthMaskMaterial.getDepthMode()===r.NotEqualDepth}set inverted(e){this.depthMaskMaterial.setDepthMode(e?r.NotEqualDepth:r.EqualDepth)}get ignoreBackground(){return!this.depthMaskMaterial.keepFar}set ignoreBackground(e){this.depthMaskMaterial.keepFar=!e}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.depthMaskPass.getFullscreenMaterial();n.uniforms.depthBuffer0.value=e,n.defines.DEPTH_PACKING_0=t.toFixed(0),n.needsUpdate=!0}update(e,t,n){const r=this.camera,i=this.selection,o=this.renderTargetMasked,a=r.layers.mask;r.layers.set(i.layer),this.depthPass.render(e),r.layers.mask=a,this.clearPass.render(e,o),this.depthMaskPass.render(e,t,o),super.update(e,o,n)}setSize(e,t){super.setSize(e,t),this.clearPass.setSize(e,t),this.depthPass.setSize(e,t),this.depthMaskPass.setSize(e,t),this.renderTargetMasked.setSize(e,t)}initialize(e,t,n){super.initialize(e,t,n),this.clearPass.initialize(e,t,n),this.depthPass.initialize(e,t,n),this.depthMaskPass.initialize(e,t,n),t||n!==r.UnsignedByteType||(this.renderTargetMasked.texture.format=r.RGBFormat),void 0!==n&&(this.renderTargetMasked.texture.type=n)}},nt=class extends ie{constructor({blendFunction:e=te.NORMAL,intensity:t=1}={}){super("SepiaEffect","uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["intensity",new r.Uniform(t)]])})}},rt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",it="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",ot=class extends ie{constructor(e,t,n=at.HIGH,i=T.COLOR){super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:te.NORMAL,attributes:oe.CONVOLUTION|oe.DEPTH,uniforms:new Map([["weightMap",new r.Uniform(null)]])}),this.renderTargetEdges=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:r.RGBFormat}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.renderTargetWeights.texture.format=r.RGBAFormat,this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new H(!0,!1,!1),this.clearPass.overrideClearColor=new r.Color(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new me(new A(new r.Vector2,i)),this.weightsPass=new me(new U);const o=new r.Texture(e);o.name="SMAA.Search",o.magFilter=r.NearestFilter,o.minFilter=r.NearestFilter,o.format=r.RGBAFormat,o.generateMipmaps=!1,o.needsUpdate=!0,o.flipY=!0;const a=new r.Texture(t);a.name="SMAA.Area",a.magFilter=r.LinearFilter,a.minFilter=r.LinearFilter,a.format=r.RGBAFormat,a.generateMipmaps=!1,a.needsUpdate=!0,a.flipY=!1;const s=this.weightsPass.getFullscreenMaterial();s.uniforms.searchTexture.value=o,s.uniforms.areaTexture.value=a,this.applyPreset(n)}get edgeDetectionMaterial(){return this.edgeDetectionPass.getFullscreenMaterial()}get colorEdgesMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.getFullscreenMaterial()}setEdgeDetectionThreshold(e){this.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(e)}setOrthogonalSearchSteps(e){this.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(e)}applyPreset(e){const t=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(e){case at.LOW:t.setEdgeDetectionThreshold(.15),n.setOrthogonalSearchSteps(4),n.diagonalDetection=!1,n.cornerRounding=!1;break;case at.MEDIUM:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(8),n.diagonalDetection=!1,n.cornerRounding=!1;break;case at.HIGH:t.setEdgeDetectionThreshold(.1),n.setOrthogonalSearchSteps(16),n.setDiagonalSearchSteps(8),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0;break;case at.ULTRA:t.setEdgeDetectionThreshold(.05),n.setOrthogonalSearchSteps(32),n.setDiagonalSearchSteps(16),n.setCornerRounding(25),n.diagonalDetection=!0,n.cornerRounding=!0}}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.edgeDetectionMaterial;n.uniforms.depthBuffer.value=e,n.depthPacking=t}update(e,t,n){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){const n=this.weightsPass.getFullscreenMaterial(),r=this.edgeDetectionPass.getFullscreenMaterial();this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t),n.uniforms.resolution.value.set(e,t),n.uniforms.texelSize.value.set(1/e,1/t),r.uniforms.texelSize.value.copy(n.uniforms.texelSize.value)}dispose(){const e=this.weightsPass.getFullscreenMaterial().uniforms;e.searchTexture.value.dispose(),e.areaTexture.value.dispose(),super.dispose()}static get searchImageDataURL(){return rt}static get areaImageDataURL(){return it}},at={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},st=class extends ie{constructor(e,t,{blendFunction:n=te.MULTIPLY,distanceScaling:i=!0,depthAwareUpsampling:o=!0,normalDepthBuffer:a=null,samples:s=9,rings:c=7,distanceThreshold:l=.97,distanceFalloff:u=.03,rangeThreshold:h=5e-4,rangeFalloff:d=.001,minRadiusScale:f=.33,luminanceInfluence:p=.7,radius:m=.1825,intensity:g=1,bias:v=.025,fade:_=.01,color:y=null,resolutionScale:b=1,width:x=z.AUTO_SIZE,height:w=z.AUTO_SIZE}={}){super("SSAOEffect","\nuniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;\nuniform float time;\n#ifdef DEPTH_AWARE_UPSAMPLING\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\n#endif\n#ifdef COLORIZE\nuniform vec3 color;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\nfloat aoLinear=texture2D(aoBuffer,uv).r;\n#if defined(DEPTH_AWARE_UPSAMPLING) && __VERSION__ == 300\nvec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));\nnormalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));\nnormalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));\nnormalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));\nfloat dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);\nfloat dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);\nfloat dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);\nfloat minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);\nfloat smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);\nif(distance<smallestDistance){smallestDistance=distance;index=i;}}\nivec2 offsets[4];offsets[0]=ivec2(0,0);\noffsets[1]=ivec2(0,1);\noffsets[2]=ivec2(1,0);\noffsets[3]=ivec2(1,1);\nivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];\nfloat aoNearest=texelFetch(aoBuffer,coord,0).r;\nfloat ao=mix(aoNearest,aoLinear,s);\n#else\nfloat ao=aoLinear;\n#endif\nfloat l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,l*luminanceInfluence);\n#ifdef COLORIZE\noutputColor=vec4(1.0-(1.0-ao)*(1.0-color),inputColor.a);\n#else\noutputColor=vec4(vec3(ao),inputColor.a);\n#endif\n}\n",{blendFunction:n,attributes:oe.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new r.Uniform(null)],["normalDepthBuffer",new r.Uniform(null)],["luminanceInfluence",new r.Uniform(p)],["color",new r.Uniform(null)],["scale",new r.Uniform(0)],["time",new r.Uniform(0)]])}),this.renderTargetAO=new r.WebGLRenderTarget(1,1,{minFilter:r.LinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:r.RGBFormat}),this.renderTargetAO.texture.name="AO.Target",this.renderTargetAO.texture.generateMipmaps=!1,this.uniforms.get("aoBuffer").value=this.renderTargetAO.texture,this.resolution=new z(this,x,w,b),this.r=1,this.camera=e,this.ssaoPass=new me((()=>{const n=new Pe(64,64,r.RGBFormat);n.wrapS=n.wrapT=r.RepeatWrapping;const i=new O(e);return i.uniforms.noiseTexture.value=n,i.uniforms.intensity.value=g,i.uniforms.minRadiusScale.value=f,i.uniforms.fade.value=_,i.uniforms.bias.value=v,null!==a?(i.uniforms.normalDepthBuffer.value=a,i.defines.NORMAL_DEPTH="1",o&&(this.depthAwareUpsampling=o,this.uniforms.get("normalDepthBuffer").value=a)):i.uniforms.normalBuffer.value=t,i})()),this.distanceScaling=i,this.samples=s,this.rings=c,this.color=y,this.radius=m>1?m/100:m,this.setDistanceCutoff(l,u),this.setProximityCutoff(h,d)}get ssaoMaterial(){return this.ssaoPass.getFullscreenMaterial()}get samples(){return Number(this.ssaoMaterial.defines.SAMPLES_INT)}set samples(e){const t=this.ssaoMaterial;t.defines.SAMPLES_INT=e.toFixed(0),t.defines.SAMPLES_FLOAT=e.toFixed(1),t.needsUpdate=!0}get rings(){return Number(this.ssaoMaterial.defines.SPIRAL_TURNS)}set rings(e){const t=this.ssaoMaterial;t.defines.SPIRAL_TURNS=e.toFixed(1),t.needsUpdate=!0}get radius(){return this.r}set radius(e){this.r=Math.min(Math.max(e,1e-6),1);const t=this.r*this.resolution.height,n=this.ssaoMaterial;n.defines.RADIUS=t.toFixed(11),n.defines.RADIUS_SQ=(t*t).toFixed(11),n.needsUpdate=!0}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(e){this.depthAwareUpsampling!==e&&(e?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}get distanceScaling(){return void 0!==this.ssaoMaterial.defines.DISTANCE_SCALING}set distanceScaling(e){if(this.distanceScaling!==e){const t=this.ssaoMaterial;e?t.defines.DISTANCE_SCALING="1":delete t.defines.DISTANCE_SCALING,t.needsUpdate=!0}}get color(){return this.uniforms.get("color").value}set color(e){const t=this.uniforms,n=this.defines;null!==e?n.has("COLORIZE")?t.get("color").value.set(e):(n.set("COLORIZE","1"),t.get("color").value=new r.Color(e),this.setChanged()):n.has("COLORIZE")&&(n.delete("COLORIZE"),t.get("color").value=null,this.setChanged())}setDistanceCutoff(e,t){this.ssaoMaterial.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setProximityCutoff(e,t){this.ssaoMaterial.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setDepthTexture(e,t=r.BasicDepthPacking){const n=this.ssaoMaterial;void 0===n.defines.NORMAL_DEPTH&&(n.uniforms.normalDepthBuffer.value=e,n.depthPacking=t)}update(e,t,n){this.ssaoPass.render(e,null,this.renderTargetAO)}setSize(e,t){const n=this.resolution;n.base.set(e,t);const r=n.width,i=n.height;this.renderTargetAO.setSize(r,i),this.ssaoMaterial.setTexelSize(1/r,1/i);const o=this.camera,a=this.ssaoMaterial.uniforms;a.noiseScale.value.set(2*r,2*i).divideScalar(64),a.projectionMatrix.value.copy(o.projectionMatrix),a.inverseProjectionMatrix.value.copy(o.projectionMatrix).invert(),this.radius=this.r}},ct="#ifdef ASPECT_CORRECTION\nuniform float scale;\n#else\nuniform mat3 uvTransform;\n#endif\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\n#ifdef ASPECT_CORRECTION\nvUv2=uv*vec2(aspect,1.0)*scale;\n#else\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\n#endif\n}",lt=class extends ie{constructor({blendFunction:e=te.NORMAL,texture:t=null,aspectCorrection:n=!1}={}){super("TextureEffect","#ifdef TEXTURE_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\nvarying vec2 vUv2;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\nvec4 texel=texelToLinear(texture2D(map,vUv2));\n#else\nvec4 texel=texelToLinear(texture2D(map,uv));\n#endif\noutputColor=TEXEL;}",{blendFunction:e,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new r.Uniform(null)],["scale",new r.Uniform(1)],["uvTransform",new r.Uniform(null)]])}),this.texture=t,this.aspectCorrection=n}get texture(){return this.uniforms.get("map").value}set texture(e){const t=this.texture;if(t!==e&&(this.uniforms.get("map").value=e,this.defines.delete("TEXTURE_PRECISION_HIGH"),null!==e)){switch(e.encoding){case r.sRGBEncoding:this.defines.set("texelToLinear(texel)","sRGBToLinear(texel)");break;case r.LinearEncoding:this.defines.set("texelToLinear(texel)","texel");break;default:i.error("Unsupported encoding:",e.encoding)}e.type!==r.UnsignedByteType&&this.defines.set("TEXTURE_PRECISION_HIGH","1"),null!==t&&t.type===e.type&&t.encoding===e.encoding||this.setChanged()}}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(e){this.aspectCorrection!==e&&(e?(this.uvTransform&&(this.uvTransform=!1),this.defines.set("ASPECT_CORRECTION","1"),this.setVertexShader(ct)):(this.defines.delete("ASPECT_CORRECTION"),this.setVertexShader(null)),this.setChanged())}get uvTransform(){return this.defines.has("UV_TRANSFORM")}set uvTransform(e){this.uvTransform!==e&&(e?(this.aspectCorrection&&(this.aspectCorrection=!1),this.defines.set("UV_TRANSFORM","1"),this.uniforms.get("uvTransform").value=new r.Matrix3,this.setVertexShader(ct)):(this.defines.delete("UV_TRANSFORM"),this.uniforms.get("uvTransform").value=null,this.setVertexShader(null)),this.setChanged())}setTextureSwizzleRGBA(e,t=e,n=e,r=e){const i="rgba";let a="";e===o.RED&&t===o.GREEN&&n===o.BLUE&&r===o.ALPHA||(a=[".",i[e],i[t],i[n],i[r]].join("")),this.defines.set("TEXEL","texel"+a),this.setChanged()}update(e,t,n){const r=this.uniforms.get("map").value;this.uvTransform&&r.matrixAutoUpdate&&(r.updateMatrix(),this.uniforms.get("uvTransform").value.copy(r.matrix))}},ut=class extends ie{constructor({blendFunction:e=te.NORMAL,adaptive:t=!0,mode:n=(t?ht.REINHARD2_ADAPTIVE:ht.REINHARD2),resolution:i=256,maxLuminance:o=16,whitePoint:a=o,middleGrey:s=.6,minLuminance:c=.01,averageLuminance:l=1,adaptationRate:u=1}={}){super("ToneMappingEffect","#include <tonemapping_pars_fragment>\nuniform lowp sampler2D luminanceBuffer;uniform float whitePoint;uniform float middleGrey;\n#ifndef ADAPTIVE\nuniform float averageLuminance;\n#endif\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=linearToRelativeLuminance(color);\n#ifdef ADAPTIVE\nfloat lumAvg=texture2D(luminanceBuffer,vec2(0.5)).r;\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#ifdef REINHARD2\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\n#else\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\n#endif\n}",{blendFunction:e,uniforms:new Map([["luminanceBuffer",new r.Uniform(null)],["maxLuminance",new r.Uniform(o)],["whitePoint",new r.Uniform(a)],["middleGrey",new r.Uniform(s)],["averageLuminance",new r.Uniform(l)]])}),this.renderTargetLuminance=new r.WebGLRenderTarget(1,1,{minFilter:void 0!==r.LinearMipmapLinearFilter?r.LinearMipmapLinearFilter:r.LinearMipMapLinearFilter,magFilter:r.LinearFilter,stencilBuffer:!1,depthBuffer:!1,format:r.RGBFormat}),this.renderTargetLuminance.texture.name="Luminance",this.renderTargetLuminance.texture.generateMipmaps=!0,this.luminancePass=new de({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new Z(this.luminancePass.texture,{minLuminance:c,adaptationRate:u}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.mode=null,this.setMode(n),this.resolution=i}getMode(){return this.mode}setMode(e){if(this.mode!==e){switch(this.defines.clear(),e){case ht.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case ht.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case ht.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel")}e===ht.REINHARD2?this.defines.set("REINHARD2","1"):e===ht.REINHARD2_ADAPTIVE&&(this.defines.set("REINHARD2","1"),this.defines.set("ADAPTIVE","1")),this.mode=e,this.setChanged()}}get resolution(){return this.luminancePass.resolution.width}set resolution(e){const t=Math.max(0,Math.ceil(Math.log2(e))),n=Math.pow(2,t);this.luminancePass.resolution.width=n,this.luminancePass.resolution.height=n,this.adaptiveLuminancePass.mipLevel1x1=t}get adaptive(){return this.defines.has("ADAPTIVE")}set adaptive(e){this.mode=e?ht.REINHARD2_ADAPTIVE:ht.REINHARD2}get adaptationRate(){return this.adaptiveLuminancePass.adaptationRate}set adaptationRate(e){this.adaptiveLuminancePass.adaptationRate=e}get distinction(){return i.warn(this.name,"The distinction field has been removed."),1}set distinction(e){i.warn(this.name,"The distinction field has been removed.")}update(e,t,n){this.mode===ht.REINHARD2_ADAPTIVE&&(this.luminancePass.render(e,t),this.adaptiveLuminancePass.render(e,null,null,n))}initialize(e,t,n){this.adaptiveLuminancePass.initialize(e,t,n)}},ht={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4},dt=class extends ie{constructor(e={}){const t=Object.assign({blendFunction:te.NORMAL,eskil:!1,offset:.5,darkness:.5},e);super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#ifdef ESKIL\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#else\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:t.blendFunction,uniforms:new Map([["offset",new r.Uniform(t.offset)],["darkness",new r.Uniform(t.darkness)]])}),this.eskil=t.eskil}get eskil(){return this.defines.has("ESKIL")}set eskil(e){this.eskil!==e&&(e?this.defines.set("ESKIL","1"):this.defines.delete("ESKIL"),this.setChanged())}},ft=[new Float32Array(3),new Float32Array(3)],pt=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],mt=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function gt(e,t,n,r){const i=n[0]-t[0],o=n[1]-t[1],a=n[2]-t[2],s=e[0]-t[0],c=e[1]-t[1],l=e[2]-t[2],u=o*l-a*c,h=a*s-i*l,d=i*c-o*s,f=Math.sqrt(u*u+h*h+d*d),p=.5*f,m=u/f,g=h/f,v=d/f,_=-(e[0]*m+e[1]*g+e[2]*v),y=r[0]*m+r[1]*g+r[2]*v;return Math.abs(y+_)*p/3}function vt(e,t,n,r,i,o){const a=3*(n+r*t+i*t*t);o[0]=e[a+0],o[1]=e[a+1],o[2]=e[a+2]}function _t(e,t,n,r,i,o){const a=n*(t-1),s=r*(t-1),c=i*(t-1),l=Math.floor(a),u=Math.floor(s),h=Math.floor(c),d=Math.ceil(a),f=Math.ceil(s),p=Math.ceil(c),m=a-l,g=s-u,v=c-h;if(l===a&&u===s&&h===c)vt(e,t,a,s,c,o);else{let n;m>=g&&g>=v?n=mt[0]:m>=v&&v>=g?n=mt[1]:v>=m&&m>=g?n=mt[2]:g>=m&&m>=v?n=mt[3]:g>=v&&v>=m?n=mt[4]:v>=g&&g>=m&&(n=mt[5]);const[r,i,a,s]=n,c=ft[0];c[0]=m,c[1]=g,c[2]=v;const _=ft[1],y=d-l,b=f-u,x=p-h;_[0]=y*r[0]+l,_[1]=b*r[1]+u,_[2]=x*r[2]+h,vt(e,t,_[0],_[1],_[2],pt[0]),_[0]=y*i[0]+l,_[1]=b*i[1]+u,_[2]=x*i[2]+h,vt(e,t,_[0],_[1],_[2],pt[1]),_[0]=y*a[0]+l,_[1]=b*a[1]+u,_[2]=x*a[2]+h,vt(e,t,_[0],_[1],_[2],pt[2]),_[0]=y*s[0]+l,_[1]=b*s[1]+u,_[2]=x*s[2]+h,vt(e,t,_[0],_[1],_[2],pt[3]);const w=6*gt(i,a,s,c),A=6*gt(r,a,s,c),T=6*gt(r,i,s,c),M=6*gt(r,i,a,c);pt[0][0]*=w,pt[0][1]*=w,pt[0][2]*=w,pt[1][0]*=A,pt[1][1]*=A,pt[1][2]*=A,pt[2][0]*=T,pt[2][1]*=T,pt[2][2]*=T,pt[3][0]*=M,pt[3][1]*=M,pt[3][2]*=M,o[0]=pt[0][0]+pt[1][0]+pt[2][0]+pt[3][0],o[1]=pt[0][1]+pt[1][1]+pt[2][1]+pt[3][1],o[2]=pt[0][2]+pt[1][2]+pt[2][2]+pt[3][2]}}var yt=class{static expand(e,t){const n=Math.cbrt(e.length/3),r=new Float32Array(3),i=new e.constructor(t**3*3),o=1/(t-1);for(let a=0;a<t;++a)for(let s=0;s<t;++s)for(let c=0;c<t;++c){const l=c*o,u=s*o,h=a*o,d=3*Math.round(c+s*t+a*t*t);_t(e,n,l,u,h,r),i[d+0]=r[0],i[d+1]=r[1],i[d+2]=r[2]}return i}},bt=[new Float32Array(2),new Float32Array(2)],xt=16,wt=30,At=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),Tt=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],Mt=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],Et=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function St(e,t,n){return e+(t-e)*n}function Rt(e){const t=bt[0],n=bt[1],r=.5*Math.sqrt(2*t[0]),i=.5*Math.sqrt(2*t[1]),o=.5*Math.sqrt(2*n[0]),a=.5*Math.sqrt(2*n[1]),s=(c=e/32,Math.min(Math.max(c,0),1));var c;t[0]=St(r,t[0],s),t[1]=St(i,t[1],s),n[0]=St(o,n[0],s),n[1]=St(a,n[1],s)}function Lt(e,t,n,r,i,o){const a=n-e,s=r-t,c=i+1,l=t+s*(i-e)/a,u=t+s*(c-e)/a;if(i>=e&&i<n||c>e&&c<=n)if(Math.sign(l)===Math.sign(u)||Math.abs(l)<1e-4||Math.abs(u)<1e-4){const e=(l+u)/2;e<0?(o[0]=Math.abs(e),o[1]=0):(o[0]=0,o[1]=Math.abs(e))}else{const r=-t*a/s+e,i=Math.trunc(r),c=r>e?l*(r-i)/2:0,h=r<n?u*(1-(r-i))/2:0;(Math.abs(c)>Math.abs(h)?c:-h)<0?(o[0]=Math.abs(c),o[1]=Math.abs(h)):(o[0]=Math.abs(h),o[1]=Math.abs(c))}else o[0]=0,o[1]=0;return o}function Pt(e,t,n,r,i){const o=bt[0],a=bt[1],s=.5+r,c=.5+r-1,l=t+n+1;switch(e){case 0:case 5:case 10:case 15:i[0]=0,i[1]=0;break;case 1:t<=n?Lt(0,c,l/2,0,t,i):(i[0]=0,i[1]=0);break;case 2:t>=n?Lt(l/2,0,l,c,t,i):(i[0]=0,i[1]=0);break;case 3:Lt(0,c,l/2,0,t,o),Lt(l/2,0,l,c,t,a),Rt(l),i[0]=o[0]+a[0],i[1]=o[1]+a[1];break;case 4:t<=n?Lt(0,s,l/2,0,t,i):(i[0]=0,i[1]=0);break;case 6:Math.abs(r)>0?(Lt(0,s,l,c,t,o),Lt(0,s,l/2,0,t,a),Lt(l/2,0,l,c,t,i),a[0]=a[0]+i[0],a[1]=a[1]+i[1],i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2):Lt(0,s,l,c,t,i);break;case 7:case 14:Lt(0,s,l,c,t,i);break;case 8:t>=n?Lt(l/2,0,l,s,t,i):(i[0]=0,i[1]=0);break;case 9:Math.abs(r)>0?(Lt(0,c,l,s,t,o),Lt(0,c,l/2,0,t,a),Lt(l/2,0,l,s,t,i),a[0]=a[0]+i[0],a[1]=a[1]+i[1],i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2):Lt(0,c,l,s,t,i);break;case 11:case 13:Lt(0,c,l,s,t,i);break;case 12:Lt(0,s,l/2,0,t,o),Lt(l/2,0,l,s,t,a),Rt(l),i[0]=o[0]+a[0],i[1]=o[1]+a[1]}return i}function Ct(e,t,n,r,i,o){let a=e===n&&t===r;if(!a){a=(r-t)*(i-(e+n)/2)+(e-n)*(o-(t+r)/2)>0}return a}function Ft(e,t,n,r,i,o){let a=0;for(let s=0;s<wt;++s)for(let c=0;c<wt;++c){Ct(e,t,n,r,i+c/29,o+s/29)&&++a}return a/900}function Dt(e,t,n,r,i,o,a,s){const c=Et[e],l=c[0],u=c[1];return l>0&&(t+=a[0],n+=a[1]),u>0&&(r+=a[0],i+=a[1]),s[0]=1-Ft(t,n,r,i,1+o,0+o),s[1]=Ft(t,n,r,i,1+o,1+o),s}function Ut(e,t,n,r,i){const o=bt[0],a=bt[1],s=t+n+1;switch(e){case 0:case 15:Dt(e,1,1,1+s,1+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 1:Dt(e,1,0,0+s,0+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 2:Dt(e,0,0,1+s,0+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 3:Dt(e,1,0,1+s,0+s,t,r,i);break;case 4:Dt(e,1,1,0+s,0+s,t,r,o),Dt(e,1,1,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 5:Dt(e,1,1,0+s,0+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 6:Dt(e,1,1,1+s,0+s,t,r,i);break;case 7:Dt(e,1,1,1+s,0+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 8:Dt(e,0,0,1+s,1+s,t,r,o),Dt(e,1,0,1+s,1+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 9:Dt(e,1,0,1+s,1+s,t,r,i),Dt(e,1,0,1+s,1+s,t,r,i);break;case 10:Dt(e,0,0,1+s,1+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 11:Dt(e,1,0,1+s,1+s,t,r,o),Dt(e,1,0,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 12:Dt(e,1,1,1+s,1+s,t,r,i);break;case 13:Dt(e,1,1,1+s,1+s,t,r,o),Dt(e,1,0,1+s,1+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2;break;case 14:Dt(e,1,1,1+s,1+s,t,r,o),Dt(e,1,1,1+s,0+s,t,r,a),i[0]=(o[0]+a[0])/2,i[1]=(o[1]+a[1])/2}return i}function Ot(e,t,n){const r=new Float32Array(2);for(let i=0,o=e.length;i<o;++i){const o=e[i],a=o.data,s=o.width;for(let e=0;e<s;++e)for(let o=0;o<s;++o){n?Pt(i,o,e,t,r):Ut(i,o,e,t,r);const c=2*(e*s+o);a[c]=255*r[0],a[c+1]=255*r[1]}}}function kt(e,t,n,r,i,o,a){const s=a.data,c=a.width;for(let a=0,l=n.length;a<l;++a){const l=r[a],u=n[a],h=u.data,d=u.width;for(let n=0;n<i;++n)for(let r=0;r<i;++r){const a=l[0]*i+e+r,u=4*((l[1]*i+t+n)*c+a),f=o?2*(n*n*d+r*r):2*(n*d+r);s[u]=h[f],s[u+1]=h[f+1],s[u+2]=0,s[u+3]=255}}}var It=class{static generate(){const e=5*At.length*xt,t=new Uint8ClampedArray(160*e*4),n=new je(160,e,t),r=Math.pow(15,2)+1,i=[],o=[];for(let e=3,n=t.length;e<n;e+=4)t[e]=255;for(let e=0;e<16;++e)i.push(new je(r,r,new Uint8ClampedArray(r*r*2),2)),o.push(new je(20,20,new Uint8ClampedArray(800),2));for(let e=0,t=At.length;e<t;++e)Ot(i,At[e],!0),kt(0,80*e,i,Mt,xt,!0,n);for(let e=0,t=Tt.length;e<t;++e)Ot(o,Tt[e],!1),kt(80,80*e,o,Et,20,!1,n);return n}};var Bt=class{constructor(){this.disableCache=!1}generate(){const e=!this.disableCache&&void 0!==window.localStorage,t=e?[localStorage.getItem("smaa-search"),localStorage.getItem("smaa-area")]:[null,null],n=null!==t[0]&&null!==t[1]?Promise.resolve(t):function(e=!0){const t=URL.createObjectURL(new Blob(['(()=>{function q(t,a,s){let i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=i.getContext("2d");if(i.width=t,i.height=a,s instanceof Image)n.drawImage(s,0,0);else{let r=n.createImageData(t,a);r.data.set(s),n.putImageData(r,0,0)}return i}var k=class{constructor(a=0,s=0,i=null){this.width=a,this.height=s,this.data=i}toCanvas(){return typeof document=="undefined"?null:q(this.width,this.height,this.data)}static from(a){let{width:s,height:i}=a,n;if(a instanceof Image){let r=q(s,i,a);r!==null&&(n=r.getContext("2d").getImageData(0,0,s,i).data)}else n=a.data;return new k(s,i,n)}};var F=[new Float32Array(2),new Float32Array(2)],I=16,P=20,x=30,z=32,E=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),W=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],B=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],_=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function O(t,a,s){return t+(a-t)*s}function J(t){return Math.min(Math.max(t,0),1)}function G(t){let a=F[0],s=F[1],i=Math.sqrt(a[0]*2)*.5,n=Math.sqrt(a[1]*2)*.5,r=Math.sqrt(s[0]*2)*.5,o=Math.sqrt(s[1]*2)*.5,c=J(t/z);a[0]=O(i,a[0],c),a[1]=O(n,a[1],c),s[0]=O(r,s[0],c),s[1]=O(o,s[1],c)}function y(t,a,s,i,n,r){let o=s-t,c=i-a,w=n,e=n+1,A=a+c*(w-t)/o,b=a+c*(e-t)/o;if(w>=t&&w<s||e>t&&e<=s)if(Math.sign(A)===Math.sign(b)||Math.abs(A)<1e-4||Math.abs(b)<1e-4){let g=(A+b)/2;g<0?(r[0]=Math.abs(g),r[1]=0):(r[0]=0,r[1]=Math.abs(g))}else{let g=-a*o/c+t,M=Math.trunc(g),U=g>t?A*(g-M)/2:0,m=g<s?b*(1-(g-M))/2:0;(Math.abs(U)>Math.abs(m)?U:-m)<0?(r[0]=Math.abs(U),r[1]=Math.abs(m)):(r[0]=Math.abs(m),r[1]=Math.abs(U))}else r[0]=0,r[1]=0;return r}function K(t,a,s,i,n){let r=F[0],o=F[1],c=.5+i,w=.5+i-1,e=a+s+1;switch(t){case 0:{n[0]=0,n[1]=0;break}case 1:{a<=s?y(0,w,e/2,0,a,n):(n[0]=0,n[1]=0);break}case 2:{a>=s?y(e/2,0,e,w,a,n):(n[0]=0,n[1]=0);break}case 3:{y(0,w,e/2,0,a,r),y(e/2,0,e,w,a,o),G(e,F),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 4:{a<=s?y(0,c,e/2,0,a,n):(n[0]=0,n[1]=0);break}case 5:{n[0]=0,n[1]=0;break}case 6:{Math.abs(i)>0?(y(0,c,e,w,a,r),y(0,c,e/2,0,a,o),y(e/2,0,e,w,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):y(0,c,e,w,a,n);break}case 7:{y(0,c,e,w,a,n);break}case 8:{a>=s?y(e/2,0,e,c,a,n):(n[0]=0,n[1]=0);break}case 9:{Math.abs(i)>0?(y(0,w,e,c,a,r),y(0,w,e/2,0,a,o),y(e/2,0,e,c,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):y(0,w,e,c,a,n);break}case 10:{n[0]=0,n[1]=0;break}case 11:{y(0,w,e,c,a,n);break}case 12:{y(0,c,e/2,0,a,r),y(e/2,0,e,c,a,o),G(e,F),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 13:{y(0,w,e,c,a,n);break}case 14:{y(0,c,e,w,a,n);break}case 15:{n[0]=0,n[1]=0;break}}return n}function Q(t,a,s,i,n,r){let o=t===s&&a===i;if(!o){let c=(t+s)/2,w=(a+i)/2,e=i-a,A=t-s;o=e*(n-c)+A*(r-w)>0}return o}function H(t,a,s,i,n,r){let o=0;for(let c=0;c<x;++c)for(let w=0;w<x;++w){let e=w/(x-1),A=c/(x-1);Q(t,a,s,i,n+e,r+A)&&++o}return o/(x*x)}function h(t,a,s,i,n,r,o,c){let w=_[t],e=w[0],A=w[1];return e>0&&(a+=o[0],s+=o[1]),A>0&&(i+=o[0],n+=o[1]),c[0]=1-H(a,s,i,n,1+r,0+r),c[1]=H(a,s,i,n,1+r,1+r),c}function V(t,a,s,i,n){let r=F[0],o=F[1],c=a+s+1;switch(t){case 0:{h(t,1,1,1+c,1+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 1:{h(t,1,0,0+c,0+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 2:{h(t,0,0,1+c,0+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 3:{h(t,1,0,1+c,0+c,a,i,n);break}case 4:{h(t,1,1,0+c,0+c,a,i,r),h(t,1,1,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 5:{h(t,1,1,0+c,0+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 6:{h(t,1,1,1+c,0+c,a,i,n);break}case 7:{h(t,1,1,1+c,0+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 8:{h(t,0,0,1+c,1+c,a,i,r),h(t,1,0,1+c,1+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 9:{h(t,1,0,1+c,1+c,a,i,n),h(t,1,0,1+c,1+c,a,i,n);break}case 10:{h(t,0,0,1+c,1+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 11:{h(t,1,0,1+c,1+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 12:{h(t,1,1,1+c,1+c,a,i,n);break}case 13:{h(t,1,1,1+c,1+c,a,i,r),h(t,1,0,1+c,1+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 14:{h(t,1,1,1+c,1+c,a,i,r),h(t,1,1,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 15:{h(t,1,1,1+c,1+c,a,i,r),h(t,1,0,1+c,0+c,a,i,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}}return n}function T(t,a,s){let i=new Float32Array(2);for(let n=0,r=t.length;n<r;++n){let o=t[n],c=o.data,w=o.width;for(let e=0;e<w;++e)for(let A=0;A<w;++A){s?K(n,A,e,a,i):V(n,A,e,a,i);let b=(e*w+A)*2;c[b]=i[0]*255,c[b+1]=i[1]*255}}}function Z(t,a,s,i,n,r,o){let c=o.data,w=o.width;for(let e=0,A=s.length;e<A;++e){let b=i[e],g=s[e],M=g.data,U=g.width;for(let m=0;m<n;++m)for(let D=0;D<n;++D){let j=b[0]*n+t+D,S=((b[1]*n+a+m)*w+j)*4,R=r?(m*m*U+D*D)*2:(m*U+D)*2;c[S]=M[R],c[S+1]=M[R+1],c[S+2]=0,c[S+3]=255}}}var v=class{static generate(){let a=2*5*I,s=E.length*5*I,i=new Uint8ClampedArray(a*s*4),n=new k(a,s,i),r=Math.pow(I-1,2)+1,o=P,c=[],w=[];for(let e=3,A=i.length;e<A;e+=4)i[e]=255;for(let e=0;e<16;++e)c.push(new k(r,r,new Uint8ClampedArray(r*r*2),2)),w.push(new k(o,o,new Uint8ClampedArray(o*o*2),2));for(let e=0,A=E.length;e<A;++e)T(c,E[e],!0),Z(0,5*I*e,c,B,I,!0,n);for(let e=0,A=W.length;e<A;++e)T(w,W[e],!1),Z(5*I,4*P*e,w,_,P,!1,n);return n}};var C=new Map([[d(0,0,0,0),new Float32Array([0,0,0,0])],[d(0,0,0,1),new Float32Array([0,0,0,1])],[d(0,0,1,0),new Float32Array([0,0,1,0])],[d(0,0,1,1),new Float32Array([0,0,1,1])],[d(0,1,0,0),new Float32Array([0,1,0,0])],[d(0,1,0,1),new Float32Array([0,1,0,1])],[d(0,1,1,0),new Float32Array([0,1,1,0])],[d(0,1,1,1),new Float32Array([0,1,1,1])],[d(1,0,0,0),new Float32Array([1,0,0,0])],[d(1,0,0,1),new Float32Array([1,0,0,1])],[d(1,0,1,0),new Float32Array([1,0,1,0])],[d(1,0,1,1),new Float32Array([1,0,1,1])],[d(1,1,0,0),new Float32Array([1,1,0,0])],[d(1,1,0,1),new Float32Array([1,1,0,1])],[d(1,1,1,0),new Float32Array([1,1,1,0])],[d(1,1,1,1),new Float32Array([1,1,1,1])]]);function L(t,a,s){return t+(a-t)*s}function d(t,a,s,i){let n=L(t,a,1-.25),r=L(s,i,1-.25);return L(n,r,1-.125)}function $(t,a){let s=0;return a[3]===1&&(s+=1),s===1&&a[2]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s}function Y(t,a){let s=0;return a[3]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s===1&&a[2]===1&&t[0]!==1&&t[2]!==1&&(s+=1),s}var N=class{static generate(){let a=66,s=33,i=a/2,n=64,r=16,o=new Uint8ClampedArray(a*s),c=new Uint8ClampedArray(n*r*4);for(let w=0;w<s;++w)for(let e=0;e<a;++e){let A=.03125*e,b=.03125*w;if(C.has(A)&&C.has(b)){let g=C.get(A),M=C.get(b),U=w*a+e;o[U]=127*$(g,M),o[U+i]=127*Y(g,M)}}for(let w=0,e=s-r;e<s;++e)for(let A=0;A<n;++A,w+=4)c[w]=o[e*a+A],c[w+3]=255;return new k(n,r,c)}};self.addEventListener("message",t=>{let a=v.generate(),s=N.generate();postMessage({areaImageData:a,searchImageData:s},[a.data.buffer,s.data.buffer]),close()});})();\n'],{type:"text/javascript"})),n=new Worker(t);return URL.revokeObjectURL(t),new Promise(((t,r)=>{n.addEventListener("error",(e=>r(e.error))),n.addEventListener("message",(n=>{const r=je.from(n.data.searchImageData),i=je.from(n.data.areaImageData),o=[r.toCanvas().toDataURL("image/png",1),i.toCanvas().toDataURL("image/png",1)];e&&(localStorage.setItem("smaa-search",o[0]),localStorage.setItem("smaa-area",o[1])),t(o)})),n.postMessage(null)}))}(e);return n.then((e=>new Promise(((t,n)=>{const i=new Image,o=new Image,a=new r.LoadingManager;a.onLoad=()=>t([i,o]),a.onError=n,i.addEventListener("error",(e=>a.itemError("smaa-search"))),o.addEventListener("error",(e=>a.itemError("smaa-area"))),i.addEventListener("load",(()=>a.itemEnd("smaa-search"))),o.addEventListener("load",(()=>a.itemEnd("smaa-area"))),a.itemStart("smaa-search"),a.itemStart("smaa-area"),i.src=e[0],o.src=e[1]}))))}},Nt=new Map([[jt(0,0,0,0),new Float32Array([0,0,0,0])],[jt(0,0,0,1),new Float32Array([0,0,0,1])],[jt(0,0,1,0),new Float32Array([0,0,1,0])],[jt(0,0,1,1),new Float32Array([0,0,1,1])],[jt(0,1,0,0),new Float32Array([0,1,0,0])],[jt(0,1,0,1),new Float32Array([0,1,0,1])],[jt(0,1,1,0),new Float32Array([0,1,1,0])],[jt(0,1,1,1),new Float32Array([0,1,1,1])],[jt(1,0,0,0),new Float32Array([1,0,0,0])],[jt(1,0,0,1),new Float32Array([1,0,0,1])],[jt(1,0,1,0),new Float32Array([1,0,1,0])],[jt(1,0,1,1),new Float32Array([1,0,1,1])],[jt(1,1,0,0),new Float32Array([1,1,0,0])],[jt(1,1,0,1),new Float32Array([1,1,0,1])],[jt(1,1,1,0),new Float32Array([1,1,1,0])],[jt(1,1,1,1),new Float32Array([1,1,1,1])]]);function Zt(e,t,n){return e+(t-e)*n}function jt(e,t,n,r){const i=Zt(e,t,.75),o=Zt(n,r,.75);return Zt(i,o,.875)}function zt(e,t){let n=0;return 1===t[3]&&(n+=1),1===n&&1===t[2]&&1!==e[1]&&1!==e[3]&&(n+=1),n}function Gt(e,t){let n=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(n+=1),1===n&&1===t[2]&&1!==e[0]&&1!==e[2]&&(n+=1),n}var Vt=class{static generate(){const e=new Uint8ClampedArray(2178),t=new Uint8ClampedArray(4096);for(let t=0;t<33;++t)for(let n=0;n<66;++n){const r=.03125*n,i=.03125*t;if(Nt.has(r)&&Nt.has(i)){const o=Nt.get(r),a=Nt.get(i),s=66*t+n;e[s]=127*zt(o,a),e[s+33]=127*Gt(o,a)}}for(let n=0,r=17;r<33;++r)for(let i=0;i<64;++i,n+=4)t[n]=e[66*r+i],t[n+3]=255;return new je(64,16,t)}},Wt=class extends r.Loader{load(e,t=(()=>{}),n=(()=>{}),o=null){const a=this.manager,s=new r.LoadingManager,c=new r.FileLoader(s);return c.setPath(this.path),c.setResponseType("text"),new Promise(((r,l)=>{s.onError=e=>{a.itemError(e),null!==o?(o(`Failed to load ${e}`),r()):l(`Failed to load ${e}`)},a.itemStart(e),c.load(e,(n=>{try{const i=this.parse(n);a.itemEnd(e),t(i),r(i)}catch(t){i.error(t),s.onError(e)}}),n)}))}parse(e){const t=/^([\d.]+) +([\d.]+) +([\d.]+) *$/gm;let n=/^[\d ]+$/m.exec(e);if(null===n)throw new Error("Missing grid information");const i=n[0].trim().split(/\s+/g).map((e=>Number(e))),o=i[1]-i[0],a=i.length;for(let e=1,t=i.length;e<t;++e)if(o!==i[e]-i[e-1])throw new Error("Inconsistent grid size");const s=new Float32Array(a**3*3);let c=0,l=0;for(;null!==(n=t.exec(e));){const e=Number(n[1]),t=Number(n[2]),r=Number(n[3]);c=Math.max(c,e,t,r);const i=3*(l%a*a*a+Math.floor(l/a)%a*a+Math.floor(l/(a*a))%a);s[i+0]=e,s[i+1]=t,s[i+2]=r,++l}const u=Math.ceil(Math.log2(c)),h=Math.pow(2,u);for(let e=0,t=s.length;e<t;++e)s[e]/=h;const d=new Ve(s,a,a,a);return d.encoding=r.sRGBEncoding,d}},Ht=class extends r.Loader{load(e,t=(()=>{}),n=(()=>{}),o=null){const a=this.manager,s=new r.LoadingManager,c=new r.FileLoader(s);return c.setPath(this.path),c.setResponseType("text"),new Promise(((r,l)=>{s.onError=e=>{a.itemError(e),null!==o?(o(`Failed to load ${e}`),r()):l(`Failed to load ${e}`)},a.itemStart(e),c.load(e,(n=>{try{const i=this.parse(n);a.itemEnd(e),t(i),r(i)}catch(t){i.error(t),s.onError(e)}}),n)}))}parse(e){const t=/^([\d.]+) +([\d.]+) +([\d.]+) *$/gm;let n=/TITLE +"([^"]*)"/.exec(e);const i=null!==n?n[1]:null;if(n=/LUT_3D_SIZE +(\d+)/.exec(e),null===n)throw new Error("Missing LUT_3D_SIZE information");const o=Number(n[1]),a=new Float32Array(o**3*3),s=new r.Vector3(0,0,0),c=new r.Vector3(1,1,1);if(n=/DOMAIN_MIN +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==n&&s.set(Number(n[1]),Number(n[2]),Number(n[3])),n=/DOMAIN_MAX +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==n&&c.set(Number(n[1]),Number(n[2]),Number(n[3])),s.x>c.x||s.y>c.y||s.z>c.z)throw s.set(0,0,0),c.set(1,1,1),new Error("Invalid input domain");let l=0;for(;null!==(n=t.exec(e));)a[l++]=Number(n[1]),a[l++]=Number(n[2]),a[l++]=Number(n[3]);const u=new Ve(a,o,o,o);return u.encoding=r.sRGBEncoding,u.domainMin.copy(s),u.domainMax.copy(c),null!==i&&(u.name=i),u}},Xt=class extends r.Loader{load(e=(()=>{}),t=null){4===arguments.length?(e=arguments[1],t=arguments[3]):3!==arguments.length&&"function"==typeof arguments[0]||(e=arguments[1],t=null);const n=this.manager,i=new r.LoadingManager;return new Promise(((r,o)=>{const a=new Image,s=new Image;i.onError=e=>{n.itemError(e),null!==t?(t(`Failed to load ${e}`),r()):o(`Failed to load ${e}`)},i.onLoad=()=>{const t=[a,s];e(t),r(t)},a.addEventListener("error",(e=>{i.itemError("smaa-search")})),s.addEventListener("error",(e=>{i.itemError("smaa-area")})),a.addEventListener("load",(()=>{n.itemEnd("smaa-search"),i.itemEnd("smaa-search")})),s.addEventListener("load",(()=>{n.itemEnd("smaa-area"),i.itemEnd("smaa-area")})),n.itemStart("smaa-search"),n.itemStart("smaa-area"),i.itemStart("smaa-search"),i.itemStart("smaa-area"),a.src=rt,s.src=it}))}}},7509:function(e,t,n){var r={"./fidelityfx.yaml":8363,"./fxaa.yaml":3888,"./ssgi.yaml":6250};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=7509},5281:function(e,t,n){var r={"./actors/little_tokyo.yaml":1016,"./actors/test_box_1.yaml":1494,"./cube_a.yaml":2673,"./examples/cornell_box.yaml":2971,"./examples/fluorescent_lamp.yaml":2812,"./fog_a.yaml":560,"./scenes/default_snow_scene.yaml":1098,"./scenes/lab.yaml":328,"./scenes/little_tokyo.yaml":7341,"./scenes/persistent.yaml":7481,"./snow_fx.yaml":1329,"./sound/default_ambient_audio_source.yaml":6879,"./teapot.yaml":4311};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=5281},4135:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=4135,e.exports=t},3699:function(e,t,n){var r={"./bg_b.png":9890,"./hex_sdf.png":7490,"./loading.png":4926};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=3699},1417:function(e,t,n){var r={"./DevGUI.vue":2514};function i(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=1417},7061:function(e,t,n){var r=n(8698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var c=d(e,t,n);if("normal"===c.type){if(r=n.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r="completed",n.method="throw",n.arg=c.arg)}}}(e,n,a),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var f={};function p(){}function m(){}function g(){}var v={};u(v,s,(function(){return this}));var _=Object.getPrototypeOf,y=_&&_(_(S([])));y&&y!==n&&o.call(y,s)&&(v=y);var b=g.prototype=p.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function n(i,a,s,c){var l=d(e[i],e,a);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==r(h)&&o.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function A(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method))return f;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=d(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:R}}function R(){return{value:void 0,done:!0}}return m.prototype=g,u(b,"constructor",g),u(g,"constructor",m),m.displayName=u(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},x(w.prototype),u(w.prototype,c,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new w(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(b),u(b,l,"Generator"),u(b,s,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),c=o.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4687:function(e,t,n){var r=n(7061)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},3083:function(e,t,n){"use strict";var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],i="undefined"==typeof globalThis?n.g:globalThis;e.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"==typeof i[r[t]]&&(e[e.length]=r[t]);return e}},882:function(e,t,n){"use strict";var r=n(210)("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch(e){r=null}e.exports=r},939:function(e,t){"use strict";const{parse:n,stringify:r}=JSON,{keys:i}=Object,o=String,a="string",s={},c="object",l=(e,t)=>t,u=e=>e instanceof o?o(e):e,h=(e,t)=>typeof t===a?new o(t):t,d=(e,t,n,r)=>{const a=[];for(let l=i(n),{length:u}=l,h=0;h<u;h++){const i=l[h],u=n[i];if(u instanceof o){const o=e[u];typeof o!==c||t.has(o)?n[i]=r.call(n,i,o):(t.add(o),n[i]=s,a.push({k:i,a:[e,t,o,r]}))}else n[i]!==s&&(n[i]=r.call(n,i,u))}for(let{length:e}=a,t=0;t<e;t++){const{k:e,a:i}=a[t];n[e]=r.call(n,e,d.apply(null,i))}return n},f=(e,t,n)=>{const r=o(t.push(n)-1);return e.set(n,r),r},p=(e,t)=>{const r=n(e,h).map(u),i=r[0],o=t||l,a=typeof i===c&&i?d(r,new Set,i,o):i;return o.call({"":a},"",a)};t.parse=p;const m=(e,t,n)=>{const i=t&&typeof t===c?(e,n)=>""===e||-1<t.indexOf(e)?n:void 0:t||l,o=new Map,s=[],u=[];let h=+f(o,s,i.call({"":e},"",e)),d=!h;for(;h<s.length;)d=!0,u[h]=r(s[h++],p,n);return"["+u.join(",")+"]";function p(e,t){if(d)return d=!d,t;const n=i.call(this,e,t);switch(typeof n){case c:if(null===n)return n;case a:return o.get(n)||f(o,s,n)}return n}};t.stringify=m;t.toJSON=e=>n(m(e));t.fromJSON=e=>p(r(e))},7326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},2826:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(9611);function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function o(e,t,n){return o=i()?Reflect.construct.bind():function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&(0,r.Z)(o,n.prototype),o},o.apply(null,arguments)}},3144:function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{Z:function(){return i}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},1752:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1120);function i(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=i(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},o.apply(this,arguments)}},1120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9611);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},2963:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(1002),i=n(7326);function o(e,t){if(t&&("object"===(0,r.Z)(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},9611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},5785:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(t,{Z:function(){return i}})},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},1280:function(e,t,n){"use strict";n.d(t,{ZP:function(){return a}});var r=/d{1,4}|D{3,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|W{1,2}|[LlopSZN]|"[^"]*"|'[^']*'/g,i=/\b(?:[A-Z]{1,3}[A-Z][TC])(?:[-+]\d{4})?|((?:Australian )?(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time)\b/g,o=/[^-+\dA-Z]/g;function a(e,t,n,i){if(1!==arguments.length||"string"!=typeof e||/\d/.test(e)||(t=e,e=void 0),(e=e||0===e?e:new Date)instanceof Date||(e=new Date(e)),isNaN(e))throw TypeError("Invalid date");var o=(t=String(s[t]||t||s.default)).slice(0,4);"UTC:"!==o&&"GMT:"!==o||(t=t.slice(4),n=!0,"GMT:"===o&&(i=!0));var a=function(){return n?"getUTC":"get"},p=function(){return e[a()+"Date"]()},m=function(){return e[a()+"Day"]()},g=function(){return e[a()+"Month"]()},v=function(){return e[a()+"FullYear"]()},_=function(){return e[a()+"Hours"]()},y=function(){return e[a()+"Minutes"]()},b=function(){return e[a()+"Seconds"]()},x=function(){return e[a()+"Milliseconds"]()},w=function(){return n?0:e.getTimezoneOffset()},A=function(){return h(e)},T=function(){return d(e)},M={d:function(){return p()},dd:function(){return l(p())},ddd:function(){return c.dayNames[m()]},DDD:function(){return u({y:v(),m:g(),d:p(),_:a(),dayName:c.dayNames[m()],short:!0})},dddd:function(){return c.dayNames[m()+7]},DDDD:function(){return u({y:v(),m:g(),d:p(),_:a(),dayName:c.dayNames[m()+7]})},m:function(){return g()+1},mm:function(){return l(g()+1)},mmm:function(){return c.monthNames[g()]},mmmm:function(){return c.monthNames[g()+12]},yy:function(){return String(v()).slice(2)},yyyy:function(){return l(v(),4)},h:function(){return _()%12||12},hh:function(){return l(_()%12||12)},H:function(){return _()},HH:function(){return l(_())},M:function(){return y()},MM:function(){return l(y())},s:function(){return b()},ss:function(){return l(b())},l:function(){return l(x(),3)},L:function(){return l(Math.floor(x()/10))},t:function(){return _()<12?c.timeNames[0]:c.timeNames[1]},tt:function(){return _()<12?c.timeNames[2]:c.timeNames[3]},T:function(){return _()<12?c.timeNames[4]:c.timeNames[5]},TT:function(){return _()<12?c.timeNames[6]:c.timeNames[7]},Z:function(){return i?"GMT":n?"UTC":f(e)},o:function(){return(w()>0?"-":"+")+l(100*Math.floor(Math.abs(w())/60)+Math.abs(w())%60,4)},p:function(){return(w()>0?"-":"+")+l(Math.floor(Math.abs(w())/60),2)+":"+l(Math.floor(Math.abs(w())%60),2)},S:function(){return["th","st","nd","rd"][p()%10>3?0:(p()%100-p()%10!=10)*p()%10]},W:function(){return A()},WW:function(){return l(A())},N:function(){return T()}};return t.replace(r,(function(e){return e in M?M[e]():e.slice(1,e.length-1)}))}var s={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",paddedShortDate:"mm/dd/yyyy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},c={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")},u=function(e){var t=e.y,n=e.m,r=e.d,i=e._,o=e.dayName,a=e.short,s=void 0!==a&&a,c=new Date,l=new Date;l.setDate(l[i+"Date"]()-1);var u=new Date;u.setDate(u[i+"Date"]()+1);return c[i+"FullYear"]()===t&&c[i+"Month"]()===n&&c[i+"Date"]()===r?s?"Tdy":"Today":l[i+"FullYear"]()===t&&l[i+"Month"]()===n&&l[i+"Date"]()===r?s?"Ysd":"Yesterday":u[i+"FullYear"]()===t&&u[i+"Month"]()===n&&u[i+"Date"]()===r?s?"Tmw":"Tomorrow":o},h=function(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate());t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=new Date(t.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var r=t.getTimezoneOffset()-n.getTimezoneOffset();t.setHours(t.getHours()-r);var i=(t-n)/6048e5;return 1+Math.floor(i)},d=function(e){var t=e.getDay();return 0===t&&(t=7),t},f=function(e){return(String(e).match(i)||[""]).pop().replace(o,"").replace(/GMT\+0000/g,"UTC")}},2536:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=function(){this.__data__=[],this.size=0},i=n(9651);var o=function(e,t){for(var n=e.length;n--;)if((0,i.Z)(e[n][0],t))return n;return-1},a=Array.prototype.splice;var s=function(e){var t=this.__data__,n=o(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)};var c=function(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]};var l=function(e){return o(this.__data__,e)>-1};var u=function(e,t){var n=this.__data__,r=o(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=r,h.prototype.delete=s,h.prototype.get=c,h.prototype.has=l,h.prototype.set=u;var d=h},6183:function(e,t,n){"use strict";var r=n(2119),i=n(6092),o=(0,r.Z)(i.Z,"Map");t.Z=o},520:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=(0,n(2119).Z)(Object,"create");var i=function(){this.__data__=r?r(null):{},this.size=0};var o=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},a=Object.prototype.hasOwnProperty;var s=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0},c=Object.prototype.hasOwnProperty;var l=function(e){var t=this.__data__;return r?void 0!==t[e]:c.call(t,e)};var u=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this};function h(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=s,h.prototype.has=l,h.prototype.set=u;var d=h,f=n(2536),p=n(6183);var m=function(){this.size=0,this.__data__={hash:new d,map:new(p.Z||f.Z),string:new d}};var g=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var v=function(e,t){var n=e.__data__;return g(t)?n["string"==typeof t?"string":"hash"]:n.map};var _=function(e){var t=v(this,e).delete(e);return this.size-=t?1:0,t};var y=function(e){return v(this,e).get(e)};var b=function(e){return v(this,e).has(e)};var x=function(e,t){var n=v(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function w(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}w.prototype.clear=m,w.prototype.delete=_,w.prototype.get=y,w.prototype.has=b,w.prototype.set=x;var A=w},7685:function(e,t,n){"use strict";var r=n(6092).Z.Symbol;t.Z=r},8774:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},9001:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},i=n(4732),o=n(7771),a=n(6706),s=n(6009),c=n(298),l=Object.prototype.hasOwnProperty;var u=function(e,t){var n=(0,o.Z)(e),u=!n&&(0,i.Z)(e),h=!n&&!u&&(0,a.Z)(e),d=!n&&!u&&!h&&(0,c.Z)(e),f=n||u||h||d,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!l.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,s.Z)(g,m))||p.push(g);return p}},4073:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8694:function(e,t){"use strict";t.Z=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},5986:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=(0,n(8419).Z)(),i=n(5290);var o=function(e,t){return e&&r(e,t,i.Z)},a=(0,n(4033).Z)(o)},5140:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(8694),i=n(7685),o=n(4732),a=n(7771),s=i.Z?i.Z.isConcatSpreadable:void 0;var c=function(e){return(0,a.Z)(e)||(0,o.Z)(e)||!!(s&&e&&e[s])};var l=function e(t,n,i,o,a){var s=-1,l=t.length;for(i||(i=c),a||(a=[]);++s<l;){var u=t[s];n>0&&i(u)?n>1?e(u,n-1,i,o,a):(0,r.Z)(a,u):o||(a[a.length]=u)}return a}},3317:function(e,t,n){"use strict";var r=n(8983),i=n(2656);t.Z=function(e,t){for(var n=0,o=(t=(0,r.Z)(t,e)).length;null!=e&&n<o;)e=e[(0,i.Z)(t[n++])];return n&&n==o?e:void 0}},3243:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7685),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.Z?r.Z.toStringTag:void 0;var c=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i},l=Object.prototype.toString;var u=function(e){return l.call(e)},h=r.Z?r.Z.toStringTag:void 0;var d=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":h&&h in Object(e)?c(e):u(e)}},728:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ce}});var r=n(2536);var i=function(){this.__data__=new r.Z,this.size=0};var o=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var a=function(e){return this.__data__.get(e)};var s=function(e){return this.__data__.has(e)},c=n(6183),l=n(520);var u=function(e,t){var n=this.__data__;if(n instanceof r.Z){var i=n.__data__;if(!c.Z||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new l.Z(i)}return n.set(e,t),this.size=n.size,this};function h(e){var t=this.__data__=new r.Z(e);this.size=t.size}h.prototype.clear=i,h.prototype.delete=o,h.prototype.get=a,h.prototype.has=s,h.prototype.set=u;var d=h;var f=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var p=function(e){return this.__data__.has(e)};function m(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new l.Z;++t<n;)this.add(e[t])}m.prototype.add=m.prototype.push=f,m.prototype.has=p;var g=m;var v=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var _=function(e,t){return e.has(t)};var y=function(e,t,n,r,i,o){var a=1&n,s=e.length,c=t.length;if(s!=c&&!(a&&c>s))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,f=2&n?new g:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],m=t[h];if(r)var y=a?r(m,p,h,t,e,o):r(p,m,h,e,t,o);if(void 0!==y){if(y)continue;d=!1;break}if(f){if(!v(t,(function(e,t){if(!_(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==m&&!i(p,m,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d},b=n(7685),x=n(6092),w=x.Z.Uint8Array,A=n(9651);var T=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var M=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},E=b.Z?b.Z.prototype:void 0,S=E?E.valueOf:void 0;var R=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new w(e),new w(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,A.Z)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=T;case"[object Set]":var c=1&r;if(s||(s=M),e.size!=t.size&&!c)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var u=y(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(S)return S.call(e)==S.call(t)}return!1},L=n(8694),P=n(7771);var C=function(e,t,n){var r=t(e);return(0,P.Z)(e)?r:(0,L.Z)(r,n(e))},F=n(8774);var D=function(){return[]},U=Object.prototype.propertyIsEnumerable,O=Object.getOwnPropertySymbols,k=O?function(e){return null==e?[]:(e=Object(e),(0,F.Z)(O(e),(function(t){return U.call(e,t)})))}:D,I=n(5290);var B=function(e){return C(e,I.Z,k)},N=Object.prototype.hasOwnProperty;var Z=function(e,t,n,r,i,o){var a=1&n,s=B(e),c=s.length;if(c!=B(t).length&&!a)return!1;for(var l=c;l--;){var u=s[l];if(!(a?u in t:N.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<c;){var m=e[u=s[l]],g=t[u];if(r)var v=a?r(g,m,u,t,e,o):r(m,g,u,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var _=e.constructor,y=t.constructor;_==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(e),o.delete(t),f},j=n(2119),z=(0,j.Z)(x.Z,"DataView"),G=(0,j.Z)(x.Z,"Promise"),V=(0,j.Z)(x.Z,"Set"),W=(0,j.Z)(x.Z,"WeakMap"),H=n(3243),X=n(19),Q="[object Map]",Y="[object Promise]",K="[object Set]",q="[object WeakMap]",J="[object DataView]",$=(0,X.Z)(z),ee=(0,X.Z)(c.Z),te=(0,X.Z)(G),ne=(0,X.Z)(V),re=(0,X.Z)(W),ie=H.Z;(z&&ie(new z(new ArrayBuffer(1)))!=J||c.Z&&ie(new c.Z)!=Q||G&&ie(G.resolve())!=Y||V&&ie(new V)!=K||W&&ie(new W)!=q)&&(ie=function(e){var t=(0,H.Z)(e),n="[object Object]"==t?e.constructor:void 0,r=n?(0,X.Z)(n):"";if(r)switch(r){case $:return J;case ee:return Q;case te:return Y;case ne:return K;case re:return q}return t});var oe=ie,ae=n(6706),se=n(298),ce="[object Arguments]",le="[object Array]",ue="[object Object]",he=Object.prototype.hasOwnProperty;var de=function(e,t,n,r,i,o){var a=(0,P.Z)(e),s=(0,P.Z)(t),c=a?le:oe(e),l=s?le:oe(t),u=(c=c==ce?ue:c)==ue,h=(l=l==ce?ue:l)==ue,f=c==l;if(f&&(0,ae.Z)(e)){if(!(0,ae.Z)(t))return!1;a=!0,u=!1}if(f&&!u)return o||(o=new d),a||(0,se.Z)(e)?y(e,t,n,r,i,o):R(e,t,c,n,r,i,o);if(!(1&n)){var p=u&&he.call(e,"__wrapped__"),m=h&&he.call(t,"__wrapped__");if(p||m){var g=p?e.value():e,v=m?t.value():t;return o||(o=new d),i(g,v,n,r,o)}}return!!f&&(o||(o=new d),Z(e,t,n,r,i,o))},fe=n(8533);var pe=function e(t,n,r,i,o){return t===n||(null==t||null==n||!(0,fe.Z)(t)&&!(0,fe.Z)(n)?t!=t&&n!=n:de(t,n,r,i,e,o))};var me=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var c=(s=n[i])[0],l=e[c],u=s[1];if(a&&s[2]){if(void 0===l&&!(c in e))return!1}else{var h=new d;if(r)var f=r(l,u,c,e,t,h);if(!(void 0===f?pe(u,l,3,r,h):f))return!1}}return!0},ge=n(7226);var ve=function(e){return e==e&&!(0,ge.Z)(e)};var _e=function(e){for(var t=(0,I.Z)(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ve(i)]}return t};var ye=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var be=function(e){var t=_e(e);return 1==t.length&&t[0][2]?ye(t[0][0],t[0][1]):function(n){return n===e||me(n,e,t)}},xe=n(6423),we=n(4262),Ae=n(9365),Te=n(2656);var Me=function(e,t){return(0,Ae.Z)(e)&&ve(t)?ye((0,Te.Z)(e),t):function(n){var r=(0,xe.Z)(n,e);return void 0===r&&r===t?(0,we.Z)(n,e):pe(t,r,3)}},Ee=n(9203);var Se=function(e){return function(t){return null==t?void 0:t[e]}},Re=n(3317);var Le=function(e){return function(t){return(0,Re.Z)(t,e)}};var Pe=function(e){return(0,Ae.Z)(e)?Se((0,Te.Z)(e)):Le(e)};var Ce=function(e){return"function"==typeof e?e:null==e?Ee.Z:"object"==typeof e?(0,P.Z)(e)?Me(e[0],e[1]):be(e):Pe(e)}},1018:function(e,t,n){"use strict";var r=n(5986),i=n(585);t.Z=function(e,t){var n=-1,o=(0,i.Z)(e)?Array(e.length):[];return(0,r.Z)(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},1051:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(9203);var i=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},o=Math.max;var a=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,s=o(r.length-t,0),c=Array(s);++a<s;)c[a]=r[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=r[a];return l[t]=n(c),i(e,this,l)}};var s=function(e){return function(){return e}},c=n(7904),l=c.Z?function(e,t){return(0,c.Z)(e,"toString",{configurable:!0,enumerable:!1,value:s(t),writable:!0})}:r.Z,u=Date.now;var h=function(e){var t=0,n=0;return function(){var r=u(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},d=h(l);var f=function(e,t){return d(a(e,t,r.Z),e+"")}},1162:function(e,t){"use strict";t.Z=function(e){return function(t){return e(t)}}},8882:function(e,t,n){"use strict";var r=n(9203);t.Z=function(e){return"function"==typeof e?e:r.Z}},8983:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(7771),i=n(9365),o=n(520);function a(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(a.Cache||o.Z),n}a.Cache=o.Z;var s=a;var c=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=function(e){var t=s(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(c,(function(e,n,r,i){t.push(r?i.replace(l,"$1"):n||e)})),t})),h=n(7685),d=n(4073),f=n(2714),p=h.Z?h.Z.prototype:void 0,m=p?p.toString:void 0;var g=function e(t){if("string"==typeof t)return t;if((0,r.Z)(t))return(0,d.Z)(t,e)+"";if((0,f.Z)(t))return m?m.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var v=function(e){return null==e?"":g(e)};var _=function(e,t){return(0,r.Z)(e)?e:(0,i.Z)(e,t)?[e]:u(v(e))}},4033:function(e,t,n){"use strict";var r=n(585);t.Z=function(e,t){return function(n,i){if(null==n)return n;if(!(0,r.Z)(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},8419:function(e,t){"use strict";t.Z=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===n(o[c],c,o))break}return t}}},7904:function(e,t,n){"use strict";var r=n(2119),i=function(){try{var e=(0,r.Z)(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();t.Z=i},3413:function(e,t){"use strict";var n="object"==typeof global&&global&&global.Object===Object&&global;t.Z=n},2119:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r,i=n(3234),o=n(6092).Z["__core-js_shared__"],a=(r=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var s=function(e){return!!a&&a in e},c=n(7226),l=n(19),u=/^\[object .+?Constructor\]$/,h=Function.prototype,d=Object.prototype,f=h.toString,p=d.hasOwnProperty,m=RegExp("^"+f.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var g=function(e){return!(!(0,c.Z)(e)||s(e))&&((0,i.Z)(e)?m:u).test((0,l.Z)(e))};var v=function(e,t){return null==e?void 0:e[t]};var _=function(e,t){var n=v(e,t);return g(n)?n:void 0}},6009:function(e,t){"use strict";var n=/^(?:0|[1-9]\d*)$/;t.Z=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},439:function(e,t,n){"use strict";var r=n(9651),i=n(585),o=n(6009),a=n(7226);t.Z=function(e,t,n){if(!(0,a.Z)(n))return!1;var s=typeof t;return!!("number"==s?(0,i.Z)(n)&&(0,o.Z)(t,n.length):"string"==s&&t in n)&&(0,r.Z)(n[t],e)}},9365:function(e,t,n){"use strict";var r=n(7771),i=n(2714),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.Z=function(e,t){if((0,r.Z)(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!(0,i.Z)(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},2764:function(e,t){"use strict";var n=Object.prototype;t.Z=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},6092:function(e,t,n){"use strict";var r=n(3413),i="object"==typeof self&&self&&self.Object===Object&&self,o=r.Z||i||Function("return this")();t.Z=o},2656:function(e,t,n){"use strict";var r=n(2714);t.Z=function(e){if("string"==typeof e||(0,r.Z)(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},19:function(e,t){"use strict";var n=Function.prototype.toString;t.Z=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},6682:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var r=n(7226),i=n(6092),o=function(){return i.Z.Date.now()},a=/\s/;var s=function(e){for(var t=e.length;t--&&a.test(e.charAt(t)););return t},c=/^\s+/;var l=function(e){return e?e.slice(0,s(e)+1).replace(c,""):e},u=n(2714),h=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,f=/^0o[0-7]+$/i,p=parseInt;var m=function(e){if("number"==typeof e)return e;if((0,u.Z)(e))return NaN;if((0,r.Z)(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=(0,r.Z)(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=l(e);var n=d.test(e);return n||f.test(e)?p(e.slice(2),n?2:8):h.test(e)?NaN:+e},g=Math.max,v=Math.min;var _=function(e,t,n){var i,a,s,c,l,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function _(t){var n=i,r=a;return i=a=void 0,h=t,c=e.apply(r,n)}function y(e){return h=e,l=setTimeout(x,t),d?_(e):c}function b(e){var n=e-u;return void 0===u||n>=t||n<0||f&&e-h>=s}function x(){var e=o();if(b(e))return w(e);l=setTimeout(x,function(e){var n=t-(e-u);return f?v(n,s-(e-h)):n}(e))}function w(e){return l=void 0,p&&i?_(e):(i=a=void 0,c)}function A(){var e=o(),n=b(e);if(i=arguments,a=this,u=e,n){if(void 0===l)return y(u);if(f)return clearTimeout(l),l=setTimeout(x,t),_(u)}return void 0===l&&(l=setTimeout(x,t)),c}return t=m(t)||0,(0,r.Z)(n)&&(d=!!n.leading,s=(f="maxWait"in n)?g(m(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),A.cancel=function(){void 0!==l&&clearTimeout(l),h=0,i=u=a=l=void 0},A.flush=function(){return void 0===l?c:w(o())},A}},2446:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(1051),i=n(9651),o=n(439),a=n(9001),s=n(7226),c=n(2764);var l=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},u=Object.prototype.hasOwnProperty;var h=function(e){if(!(0,s.Z)(e))return l(e);var t=(0,c.Z)(e),n=[];for(var r in e)("constructor"!=r||!t&&u.call(e,r))&&n.push(r);return n},d=n(585);var f=function(e){return(0,d.Z)(e)?(0,a.Z)(e,!0):h(e)},p=Object.prototype,m=p.hasOwnProperty,g=(0,r.Z)((function(e,t){e=Object(e);var n=-1,r=t.length,a=r>2?t[2]:void 0;for(a&&(0,o.Z)(t[0],t[1],a)&&(r=1);++n<r;)for(var s=t[n],c=f(s),l=-1,u=c.length;++l<u;){var h=c[l],d=e[h];(void 0===d||(0,i.Z)(d,p[h])&&!m.call(e,h))&&(e[h]=s[h])}return e}))},9651:function(e,t){"use strict";t.Z=function(e,t){return e===t||e!=e&&t!=t}},5840:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},i=n(5986),o=n(8882),a=n(7771);var s=function(e,t){return((0,a.Z)(e)?r:i.Z)(e,(0,o.Z)(t))}},6423:function(e,t,n){"use strict";var r=n(3317);t.Z=function(e,t,n){var i=null==e?void 0:(0,r.Z)(e,t);return void 0===i?n:i}},4262:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=function(e,t){return null!=e&&t in Object(e)},i=n(8983),o=n(4732),a=n(7771),s=n(6009),c=n(1656),l=n(2656);var u=function(e,t,n){for(var r=-1,u=(t=(0,i.Z)(t,e)).length,h=!1;++r<u;){var d=(0,l.Z)(t[r]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++r!=u?h:!!(u=null==e?0:e.length)&&(0,c.Z)(u)&&(0,s.Z)(d,u)&&((0,a.Z)(e)||(0,o.Z)(e))};var h=function(e,t){return null!=e&&u(e,t,r)}},9203:function(e,t){"use strict";t.Z=function(e){return e}},4732:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(3243),i=n(8533);var o=function(e){return(0,i.Z)(e)&&"[object Arguments]"==(0,r.Z)(e)},a=Object.prototype,s=a.hasOwnProperty,c=a.propertyIsEnumerable,l=o(function(){return arguments}())?o:function(e){return(0,i.Z)(e)&&s.call(e,"callee")&&!c.call(e,"callee")},u=l},7771:function(e,t){"use strict";var n=Array.isArray;t.Z=n},585:function(e,t,n){"use strict";var r=n(3234),i=n(1656);t.Z=function(e){return null!=e&&(0,i.Z)(e.length)&&!(0,r.Z)(e)}},3505:function(e,t,n){"use strict";var r=n(3243),i=n(8533);t.Z=function(e){return!0===e||!1===e||(0,i.Z)(e)&&"[object Boolean]"==(0,r.Z)(e)}},6706:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(6092);var i=function(){return!1},o="object"==typeof exports&&exports&&!exports.nodeType&&exports,a=o&&"object"==typeof module&&module&&!module.nodeType&&module,s=a&&a.exports===o?r.Z.Buffer:void 0,c=(s?s.isBuffer:void 0)||i},3234:function(e,t,n){"use strict";var r=n(3243),i=n(7226);t.Z=function(e){if(!(0,i.Z)(e))return!1;var t=(0,r.Z)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1656:function(e,t){"use strict";t.Z=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},8800:function(e,t,n){"use strict";var r=n(290);t.Z=function(e){return(0,r.Z)(e)&&e!=+e}},7601:function(e,t){"use strict";t.Z=function(e){return null==e}},8146:function(e,t){"use strict";t.Z=function(e){return null===e}},290:function(e,t,n){"use strict";var r=n(3243),i=n(8533);t.Z=function(e){return"number"==typeof e||(0,i.Z)(e)&&"[object Number]"==(0,r.Z)(e)}},7226:function(e,t){"use strict";t.Z=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},8533:function(e,t){"use strict";t.Z=function(e){return null!=e&&"object"==typeof e}},6378:function(e,t,n){"use strict";var r=n(3243),i=n(7771),o=n(8533);t.Z=function(e){return"string"==typeof e||!(0,i.Z)(e)&&(0,o.Z)(e)&&"[object String]"==(0,r.Z)(e)}},2714:function(e,t,n){"use strict";var r=n(3243),i=n(8533);t.Z=function(e){return"symbol"==typeof e||(0,i.Z)(e)&&"[object Symbol]"==(0,r.Z)(e)}},298:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});var r=n(3243),i=n(1656),o=n(8533),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=function(e){return(0,o.Z)(e)&&(0,i.Z)(e.length)&&!!a[(0,r.Z)(e)]},c=n(1162),l=n(3413),u="object"==typeof exports&&exports&&!exports.nodeType&&exports,h=u&&"object"==typeof module&&module&&!module.nodeType&&module,d=h&&h.exports===u&&l.Z.process,f=function(){try{var e=h&&h.require&&h.require("util").types;return e||d&&d.binding&&d.binding("util")}catch(e){}}(),p=f&&f.isTypedArray,m=p?(0,c.Z)(p):s},9360:function(e,t){"use strict";t.Z=function(e){return void 0===e}},5290:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(9001),i=n(2764);var o=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object),a=Object.prototype.hasOwnProperty;var s=function(e){if(!(0,i.Z)(e))return o(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t},c=n(585);var l=function(e){return(0,c.Z)(e)?(0,r.Z)(e):s(e)}},3836:function(e,t,n){"use strict";var r=n(4073),i=n(728),o=n(1018),a=n(7771);t.Z=function(e,t){return((0,a.Z)(e)?r.Z:o.Z)(e,(0,i.Z)(t,3))}},1358:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(7904);var i=function(e,t,n){"__proto__"==t&&r.Z?(0,r.Z)(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},o=n(9651),a=Object.prototype.hasOwnProperty;var s=function(e,t,n){var r=e[t];a.call(e,t)&&(0,o.Z)(r,n)&&(void 0!==n||t in e)||i(e,t,n)},c=n(8983),l=n(6009),u=n(7226),h=n(2656);var d=function(e,t,n,r){if(!(0,u.Z)(e))return e;for(var i=-1,o=(t=(0,c.Z)(t,e)).length,a=o-1,d=e;null!=d&&++i<o;){var f=(0,h.Z)(t[i]),p=n;if("__proto__"===f||"constructor"===f||"prototype"===f)return e;if(i!=a){var m=d[f];void 0===(p=r?r(m,f,d):void 0)&&(p=(0,u.Z)(m)?m:(0,l.Z)(t[i+1])?[]:{})}s(d,f,p),d=d[f]}return e};var f=function(e,t,n){return null==e?e:d(e,t,n)}},111:function(e,t,n){"use strict";var r=n(6682),i=n(7226);t.Z=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return(0,i.Z)(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),(0,r.Z)(e,t,{leading:o,maxWait:t,trailing:a})}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdO={},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e};var __webpack_exports__={};return function(){"use strict";__webpack_require__.r(__webpack_exports__);var e=__webpack_require__(1737),t=__webpack_require__(7845);class App extends e.Z{constructor(e){super(Object.assign({},e)),this.load_stage(t.default.load_prefab("{{APP_NAME}}.scenes.main")),this.find_component_of_type("Renderer");this.find_component_of_type("Postprocessing");this.find_component_of_type("CameraComponent").fov=45,this.find_component_of_type("OrbitControlsComponent").set_controls_state({position:[.06709046098670876,1.4560641215969266,2.762232087737593],target:[.07783611134107367,.9827307616883895,-.01875572798565418],zoom:1}),this.start()}on_tick(e){super.on_tick(e)}}__webpack_exports__.default=App}(),__webpack_exports__}()}));